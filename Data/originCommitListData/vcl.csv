hash,authors,committer,changes_FileNum,changed_files,message,bug_id
5c3ecdbde4d7d8af61eeb25925eb834b89252a8b,,,1,['managementnode/lib/VCL/utils.pm'],VCL-1132 Added logic to skip character l and L when generating passwords,VCL-1132
5250d8ea1f6b4295e4364ccd849a77bd7835818c,,,1,['managementnode/bin/cygwin-sshd-config.sh'],Resolved merge conflict by taking most recent version,
e1d7e13127cd8cbb2ed5333e9e7093e93101412f,,,2,"['managementnode/bin/gen-node-key.sh', 'managementnode/tools/Windows/Scripts/update_cygwin.cmd']","VCL-1127 - Make changes to handle Cygwin's change of sshd service name to cygsshd

update_cygwin.cmd: modified line that determines name for ssh service - added spaces after '=' for arguments, without the spaces, Windows gives a weird 1060 error

gen-node-key.sh: modified line that determines name for ssh service - added spaces after '=' for arguments, without the spaces, Windows gives a weird 1060 error",VCL-1127
7a6a7ed71be793f8b5bccc19a9635d997d02d2f4,,,1,['managementnode/bin/cygwin-sshd-config.sh'],"VCL-1127 - Make changes to handle Cygwin's change of sshd service name to cygsshd

cygsshd-sshd-config.sh: changed method to determine value for sshdservice; set default value if attempt to determine value returns an empty string to cygsshd rather than sshd",VCL-1127
eb16528f6d76406c5f248e913dbe5b19ada355bc,,,1,['managementnode/tools/Windows/Scripts/update_cygwin.cmd'],"VCL-1127 - Make changes to handle Cygwin's change of sshd service name to cygsshd

update_cygwin.cmd: modified line that determines name for ssh service - added spaces after '=' for arguments, without the spaces, Windows gives a weird 1060 error",VCL-1127
826b1ddc09a5c47369b144c5b12461bbb3772d63,,,1,['managementnode/bin/gen-node-key.sh'],"VCL-1127 - Make changes to handle Cygwin's change of sshd service name to cygsshd

gen-node-key.sh: modified line that determines name for ssh service - added spaces after '=' for arguments, without the spaces, Windows gives a weird 1060 error",VCL-1127
cd35d17a26b0858ac58d2b3fdd62699dc0570378,,,1,['managementnode/bin/cygwin-sshd-config.sh'],"VCL-1127 - Make changes to handle Cygwin's change of sshd service name to cygsshd

cygwin-sshd-config.sh: modified line that determines name for ssh service - added spaces after '=' for arguments, without the spaces, Windows gives a weird 1060 error",VCL-1127
b3ef160148b8cb8c50c67dbdd7c3abc3c15d4fb8,,,5,"['managementnode/bin/cygwin-sshd-config.sh', 'managementnode/bin/gen-node-key.sh', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/8.pm', 'managementnode/tools/Windows/Scripts/update_cygwin.cmd']","VCL-1127 - Make changes to handle Cygwin's change of sshd service name to cygsshd

Windows.pm:
-modified pre_capture: attempt calling set_service_startup_mode for cygsshd if call for sshd fails
-modified post_load: attempt calling set_service_startup_mode for cygsshd if call for sshd fails
-modified set_password: set @services array to include both sshd and cygsshd, use variable to see if setting one of them was successful, give warning message if neither one worked
-modified reboot: attempt calling set_service_startup_mode for cygsshd if call for sshd fails

8.pm: modified pre_capture: attempt calling set_service_startup_mode for cygsshd if call for sshd fails

cygwin-sshd-config.sh:
-attempt to parse sshd service name from ""sc queryex type=service state=all"" into a variable ($sshdservice) and default to sshd if cannot
-changed references to ""sshd"" service name to $sshdservice
-added call to delete registry key based on $sshdservice, left hard coded registry delete for sshd to clean up old data if cygwin gets upgraded on an image
-added $sshdservice to echoed statement ""Starting Cygwin SSHD service""

gen-node-key.sh: added code after case block where SSHSTART and SSHSTOP are set that checks for the name of the sshd service and sets SSHSTART and SSHSTOP to have cygsshd if needed

update_cygwin.cmd: added code to set %sshdservice% variable from service name and use it when manging sshd service",VCL-1127
32c259983dd48dde0eef50d68795fb0d27ab45a2,,,3,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/utils.pm', 'web/.ht-inc/utils.php']","VCL-1126 - allocate computer already having specified IP address for server reservations with specified IP

OS.pm: modified confirm_fixed_ip_is_available: added $computer_id argument when calling is_ip_assigned_query; added check for assigned computer having specified IP address and if so, skip ping check

utils.pm: modified is_ip_assigned_query: added 2nd (optional) argument for a computer ID; if computer ID is passed in, don't include that computer in query results

utils.php:
-modified isAvailable: added check for any mapped computers already having the requested IP address, and if so, limit mapped computers to just those and set a flag that mapped computers have been limited; at first check for no computers being available if mapped computer flag is set, use -4 return code instead of 0; if mapped computer flag set, skip removing recently reserved computers that may have failed
-modified debugIsAvailable: changed message for case 2 to say an unavailable computer has the requested IP instead of stating an overlapping server reservation has the address assigned",VCL-1126
0e1f6f73bd2b568c9c7ed66812466a14df2ca327,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-1083
Fixed logic problem in Linux.pm::delete_user introduced in previous commit to prevent home directories on non-local disks from being deleted.",VCL-1083
6f4a6c2e396e57537484417b3a615761b5f61207,,,1,['.gitignore'],"VCL-1123
Added basic top-level .gitignore with exclusions for .kpf (ActiveState Komodo) and .idea (JetBrains IDEs).",VCL-1123
413f6f2fcc7edbf8ff5b70c3e1f835536bf9b638,,,1,['doap_vcl.rdf'],doap_vcl.rdf: added 2.5.1 release,
80d9db4172b9c08507093d8d44d51c32f1eadf19,,,6,"['managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/Provisioning/libvirt.pm', 'managementnode/lib/VCL/Module/Provisioning/libvirt/KVM.pm', 'vcl-install.sh', 'web/.ht-inc/utils.php']",Merge branch 'develop' into VCL-1114_misc_small_web_updates,
2154aa0b9ca5183d63e552a09dcc7831cc597e6c,,,1,['web/.ht-inc/utils.php'],"VCL-1106 - make PHP code compatible with PHP 7

utils.php: modified xmlrpccall xmlrpcgetaffiliations: $HTTP_RAW_POST_DATA is deprecated in php 7 - removed global reference to $HTTP_RAW_POST_DATA; now get contents of php://input into variable and pass that variable to xmlrpc_server_call_method instead of $HTTP_RAW_POST_DATA",VCL-1106
d9fe39d2bec1b1208771b2cad30d64dfc931554b,,,1,['managementnode/lib/VCL/Module/Provisioning/libvirt.pm'],"VCL-1084 - set cache mode for libvirt VMs

libvirt.pm: modified generate_domain_xml: chagned call to is_file_on_local_disk from $self->os->nathost_os->is_file_on_local_disk to $self->vmhost_os->is_file_on_local_disk",VCL-1084
0b75ab24698d17498ff180078387129c9d96d623,,,1,['vcl-install.sh'],vcl-install.sh: reverting one change from 0975664e7 where sha1sum should not have been changed to sha512sum in set_localauth_password when setting the local passwords,vcl-
728c28546c9eb6ac42f2fe83b042b607207e25c0,,,1,['managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm'],Ubuntu.pm: fixed comment added in last commit,
94426dfaaee4e288d22464301618e790b2f28008,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"Windows.pm: modified disable_automatic_updates: added ""AUOptions""=dword:00000001 to registry key that gets set; we encountered times when it seemed a VM was doing automatic updates and this is a different option to disable automatic updates",
655566bd1fb0c9996e17e25fc2b6fa4c2bd164d5,,,1,['managementnode/lib/VCL/Module/Provisioning/libvirt.pm'],"libvirt.pm: modified power_off: added check for ""SIGKILL: Device or resource busy"" in output of virsh destroy command - we've experienced times when a domain was considered busy but could be destroyed a few seconds later, this waits 30 seconds and tries again",
003aef7ec7d1fe28cbb2f1992d1e40cfb22b2a1f,,,1,['managementnode/lib/VCL/Module/Provisioning/libvirt/KVM.pm'],"VCL-1120 - image conversion from vmdk to qcow2 always done twice

KVM.pm: modified copy_virtual_disk: added code to change file to be converted to parent .vmdk file if it exists instead of list of -sXXX files; added check for ""Invalid parameter.*compt"" when checking output of image conversion command as error message changed in a newer version of qemu-img",VCL-1120
39d199f78c37ac72f2eec286c9325f22bc5fcf6e,,,1,['managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm'],Ubuntu.pm: commented out get_network_configuration so that base version of function in Linux.pm will be used instead; the output of ifconfig changed in Ubuntu 18 such that the base function worked better for older and newer versions of Ubuntu,
67cbad6706b6649ab81bee8cba47cbfb2ebbfdff,,,1,['web/.ht-inc/utils.php'],"VCL-1114 - miscellaneous small web updates

utils.php: modified initGlobals: added modes selectauth and main to if conditional that reads openssl private and public keys so that shib auth works correctly",VCL-1114
e72e849c268d3e6e59115079893159fefbc5bda6,,,2,"['web/.ht-inc/addomain.php', 'web/js/resources/addomain.js']",Merge branch 'develop' into VCL-1114_misc_small_web_updates,
dc1b56f9cebc64feddf7a1167309b3c70cf75c55,,,2,"['web/.ht-inc/addomain.php', 'web/js/resources/addomain.js']",Merge branch 'VCL-1116_use_database_hostnames_for_ad_joined_computers' into develop,
4724fdb35dadf70e776dc77db18d9e0c64c8fea3,,,2,"['web/.ht-inc/addomain.php', 'web/js/resources/addomain.js']","VCL-1116 - use database hostnames for ad joined computers

addomain.php: modified fieldDisplayName: added case for usedbhostnames

addomain.js:
-added ADdomain.prototype.colformatter to set displayed value for Use Database Hostnames field to 'true' or 'false'
-modified inlineEditResourceCB: always set value for usedbhostnames instead of only setting it when it is set to 1
-modified saveResourceCB: set usedbhostnames for the item in the dojo store when saving an item",VCL-1116
3ee379bf5691815599ba0b6149be048990b4754c,,,1,['web/index.php'],"VCL-1114 - miscellaneous small web updates

index.php: fixed small whitespace/tab issue toward top of file",VCL-1114
e989c817858e2347e7c7b659c7b42db7291623b8,,,25,"['CHANGELOG', 'INSTALLATION', 'README', 'RELEASE_NOTES', 'UPGRADE', 'managementnode/bin/install_perl_libs.pl', 'managementnode/bin/vclmessages.pl', 'web/js/nls/es_CR/messages.js', 'web/js/nls/es_MX/messages.js', 'web/js/nls/fr_CA/messages.js', 'web/js/nls/messages.js.template', 'web/js/nls/pt_PT/messages.js', 'web/locale/es_CR/LC_MESSAGES/vcl.mo', 'web/locale/es_MX/LC_MESSAGES/vcl.mo', 'web/locale/fr_CA/LC_MESSAGES/vcl.mo', 'web/locale/ja_JP/LC_MESSAGES/vcl.mo', 'web/locale/po_files/es_CR/vcl.po', 'web/locale/po_files/es_MX/vcl.po', 'web/locale/po_files/fr_CA/vcl.po', 'web/locale/po_files/ja_JP/vcl.po', 'web/locale/po_files/pt_PT/vcl.po', 'web/locale/po_files/vcl.po.template', 'web/locale/po_files/zh_CN/vcl.po', 'web/locale/pt_PT/LC_MESSAGES/vcl.mo', 'web/locale/zh_CN/LC_MESSAGES/vcl.mo']",Merge branch 'develop' into VCL-1114_misc_small_web_updates,
5f6cc5b532b5c01aff172a0119d652c20ac43233,,,1,['managementnode/bin/vclmessages.pl'],vclmessages.pl: added license header,
7d6bfb537bcb41a4961b796ba374e9b8b56df672,,,1,['CHANGELOG'],CHANGELOG: added section for 2.5.1 including all JIRA issues tagged with 2.5.1,
1e98853d11ccc0f0213974fa37eba2f2e37ed424,,,5,"['INSTALLATION', 'README', 'RELEASE_NOTES', 'UPGRADE', 'managementnode/bin/install_perl_libs.pl']","install_perl_libs.pl:
-added to @LINUX_PACKAGES
  -perl-Frontier-RPC
  -perl-Frontier-RPC-Client
  -perl-LWP-Protocol-https
  -perl-Mo
  -perl-Object-InsideOut
  -perl-Scalar-List-Utils
  -perl-Expect
-added to @PERL_MODULES
  -Crypt::CBC
  -IO::String
  -Text::CSV_XS
-removed from @PERL_MODULES
  -DBI
  -Mail::Mailer
  -RPC::XML
  -Term::ANSIColor
  -Time::HiRes
  -URI
  -YAML

INSTALLATION:
-updated 2.5 to 2.5.1
-small changes to initial paragraph
-removed Apache HTTP v1.3 as supported web server version
-added php-gettext as required php module
-added DBD::MySQL as required perl module
-added Net::Ping::External as required perl module

README:
-updated 2.5 to 2.5.1
-removed Apache HTTP v1.3 as supported web server version
-removed RHEL 6.8 as supported OS version
-updated supported CentOS version from 7.3 to 7.6.1810
-added DBD::MySQL and Net::Ping::External to required perl modules
-removed Windows XP and Windows Server 2003 from management node conditional system requirements
-removed Jabber notifications from management node conditional system requirements
-updated Dojo Toolkit version reference from 1.6.2 to 1.6.5

RELEASE_NOTES:
-updated 2.5 to 2.5.1
-updated list of notworthy changes
-added note about emailing security bugs rather than reporting via JIRA

UPGRADE:
-updated 2.4.2 to 2.5
-updated 2.5 to 2.5.1
-small changes to initial paragraph
-changed step 9 for web code to add SSLOFFLOAD to conf.php instead of removing MAXVMLIMIT
-removed step to update secrets.php",
8d3fa9a53fecaa6d77f8200c3fc55dabcb4d5b5e,,,18,"['web/js/nls/es_CR/messages.js', 'web/js/nls/es_MX/messages.js', 'web/js/nls/fr_CA/messages.js', 'web/js/nls/messages.js.template', 'web/js/nls/pt_PT/messages.js', 'web/locale/es_CR/LC_MESSAGES/vcl.mo', 'web/locale/es_MX/LC_MESSAGES/vcl.mo', 'web/locale/fr_CA/LC_MESSAGES/vcl.mo', 'web/locale/ja_JP/LC_MESSAGES/vcl.mo', 'web/locale/po_files/es_CR/vcl.po', 'web/locale/po_files/es_MX/vcl.po', 'web/locale/po_files/fr_CA/vcl.po', 'web/locale/po_files/ja_JP/vcl.po', 'web/locale/po_files/pt_PT/vcl.po', 'web/locale/po_files/vcl.po.template', 'web/locale/po_files/zh_CN/vcl.po', 'web/locale/pt_PT/LC_MESSAGES/vcl.mo', 'web/locale/zh_CN/LC_MESSAGES/vcl.mo']",updated locale translation files for php and javascript,
b624b1a9d2f051884fcc08cc4f6aba8ee91c3cd9,,,1,['web/.ht-inc/computer.php'],"VCL-1114 - miscellaneous small web updates

computer.php: modified validateResourceData: added check for $return['name'] containing a % when adding multiple computers",VCL-1114
c2177f7e296627023dbb43743a6250c40ec550e2,,,65,"['managementnode/bin/health_check.pl', 'managementnode/bin/monitor_vcld.pl', 'managementnode/bin/upgrade_database.pl', 'managementnode/bin/vcld', 'managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/ESXi.pm', 'managementnode/lib/VCL/Module/OS/Linux/ManagementNode.pm', 'managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm', 'managementnode/lib/VCL/Module/OS/Linux/UnixLab.pm', 'managementnode/lib/VCL/Module/OS/Linux/firewall.pm', 'managementnode/lib/VCL/Module/OS/Linux/firewall/firewalld.pm', 'managementnode/lib/VCL/Module/OS/Linux/firewall/iptables.pm', 'managementnode/lib/VCL/Module/OS/Linux/firewall/ufw.pm', 'managementnode/lib/VCL/Module/OS/Linux/init.pm', 'managementnode/lib/VCL/Module/OS/Linux/init/SysV.pm', 'managementnode/lib/VCL/Module/OS/Linux/init/Upstart.pm', 'managementnode/lib/VCL/Module/OS/Linux/init/systemd.pm', 'managementnode/lib/VCL/Module/OS/OSX.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_10/10.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_10/2016.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5/2003.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5/XP.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/2008.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/2012.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/7.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/8.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/Vista.pm', 'managementnode/lib/VCL/Module/Predictive.pm', 'managementnode/lib/VCL/Module/Predictive/Level_0.pm', 'managementnode/lib/VCL/Module/Predictive/Level_1.pm', 'managementnode/lib/VCL/Module/Predictive/Level_2.pm', 'managementnode/lib/VCL/Module/Provisioning.pm', 'managementnode/lib/VCL/Module/Provisioning/Lab.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vmware_cmd.pm', 'managementnode/lib/VCL/Module/Provisioning/docker.pm', 'managementnode/lib/VCL/Module/Provisioning/libvirt.pm', 'managementnode/lib/VCL/Module/Provisioning/libvirt/KVM.pm', 'managementnode/lib/VCL/Module/Provisioning/one.pm', 'managementnode/lib/VCL/Module/Provisioning/openstack.pm', 'managementnode/lib/VCL/Module/Provisioning/vbox.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/Module/Semaphore.pm', 'managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/blockrequest.pm', 'managementnode/lib/VCL/healthcheck.pm', 'managementnode/lib/VCL/image.pm', 'managementnode/lib/VCL/inuse.pm', 'managementnode/lib/VCL/makeproduction.pm', 'managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/reclaim.pm', 'managementnode/lib/VCL/reserved.pm', 'managementnode/lib/VCL/utils.pm', 'mysql/update-vcl.sql', 'vcl-install.sh', 'vcl-upgrade.sh', 'web/index.php']",Merge branch 'develop' into VCL-1114_misc_small_web_updates,
f0ff97a309ce17560e2e3faf025325f35a899fa7,,,62,"['managementnode/bin/health_check.pl', 'managementnode/bin/monitor_vcld.pl', 'managementnode/bin/upgrade_database.pl', 'managementnode/bin/vcld', 'managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/ESXi.pm', 'managementnode/lib/VCL/Module/OS/Linux/ManagementNode.pm', 'managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm', 'managementnode/lib/VCL/Module/OS/Linux/UnixLab.pm', 'managementnode/lib/VCL/Module/OS/Linux/firewall.pm', 'managementnode/lib/VCL/Module/OS/Linux/firewall/firewalld.pm', 'managementnode/lib/VCL/Module/OS/Linux/firewall/iptables.pm', 'managementnode/lib/VCL/Module/OS/Linux/firewall/ufw.pm', 'managementnode/lib/VCL/Module/OS/Linux/init.pm', 'managementnode/lib/VCL/Module/OS/Linux/init/SysV.pm', 'managementnode/lib/VCL/Module/OS/Linux/init/Upstart.pm', 'managementnode/lib/VCL/Module/OS/Linux/init/systemd.pm', 'managementnode/lib/VCL/Module/OS/OSX.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_10/10.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_10/2016.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5/2003.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5/XP.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/2008.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/2012.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/7.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/8.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/Vista.pm', 'managementnode/lib/VCL/Module/Predictive.pm', 'managementnode/lib/VCL/Module/Predictive/Level_0.pm', 'managementnode/lib/VCL/Module/Predictive/Level_1.pm', 'managementnode/lib/VCL/Module/Predictive/Level_2.pm', 'managementnode/lib/VCL/Module/Provisioning.pm', 'managementnode/lib/VCL/Module/Provisioning/Lab.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vmware_cmd.pm', 'managementnode/lib/VCL/Module/Provisioning/docker.pm', 'managementnode/lib/VCL/Module/Provisioning/libvirt.pm', 'managementnode/lib/VCL/Module/Provisioning/libvirt/KVM.pm', 'managementnode/lib/VCL/Module/Provisioning/one.pm', 'managementnode/lib/VCL/Module/Provisioning/openstack.pm', 'managementnode/lib/VCL/Module/Provisioning/vbox.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/Module/Semaphore.pm', 'managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/blockrequest.pm', 'managementnode/lib/VCL/healthcheck.pm', 'managementnode/lib/VCL/image.pm', 'managementnode/lib/VCL/inuse.pm', 'managementnode/lib/VCL/makeproduction.pm', 'managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/reclaim.pm', 'managementnode/lib/VCL/reserved.pm', 'managementnode/lib/VCL/utils.pm', 'web/index.php']",upgraded version number within each file from 2.5 to 2.5.1,
51cc883d19ba5687dcf99b365274e5abd97a3504,,,6,"['web/.ht-inc/siteconfig.php', 'web/locale/po_files/es_CR/vcl.po', 'web/locale/po_files/es_MX/vcl.po', 'web/locale/po_files/fr_CA/vcl.po', 'web/locale/po_files/pt_PT/vcl.po', 'web/locale/po_files/vcl.po.template']","VCL-1114 - miscellaneous small web updates

siteconfig.php: modified __construct: fixed typo of squeare -> square; also updated translation files",VCL-1114
0975664e711f8ecf60c2bd10f86526e8ca856224,,,2,"['vcl-install.sh', 'vcl-upgrade.sh']","vcl-install.sh and vcl-upgrade.sh: updated VCL_VERSION from 2.5 to 2.5.1; changed all occurances of ""sha1"" to ""sha512""",vcl-
60a87419b4d267409bede46027d5047fd41caed0,,,1,['mysql/update-vcl.sql'],"VCL-1116 - use database hostnames for ad joined computers

update-vcl.sql: added AddColumnIfNotExists for addomain.usedbhostnames",VCL-1116
bb4412b427af3f3d0a72c8eb9cb65f769a693c61,,,4,"['managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/Provisioning/libvirt.pm', 'mysql/update-vcl.sql', 'mysql/vcl.sql']",Merge branch 'develop' into VCL-1114_misc_small_web_updates,
e3af2ecff8af3a300926d6ec2b8a4c398e78cec6,jfthomps,web-flow,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","Merge pull request #11 from jfthomps/develop

I accidentally pushed changes to my personal clone of the repo instead of directly to the project repo.",
d6e9b0bada43e92c13a45cc6b2f3715a06d86d6c,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","update-vcl.sql:
-modified addomain table definition, changing name from varchar(30) to varchar(512) and username from varchar(64) to varchar(80)
-added alter table for addomain.name and addomain.username to match above
-added ALTER TABLE to change image.maxinitialtime from smallint(5) to mediumint(8)
-added ALTER TABLE to change resourcegroup.name from varchar(50) to varchar(60)

vcl.sql:
-modified addomain table definition, changing name from varchar(30) to varchar(512) and username from varchar(64) to varchar(80)
-case change in blockRequest
-corrected int size for computerloadlog.id from 12 to 10
-changed image.maxinitialtime from smallint(5) to mediumint(8)
-changed resourcegroup.name from varchar(50) to varchar(60)
-removed several ""NULL"" statements from vmprofile as allowing the field to be NULL is the default",update-
3f0921b629f7e13cc465da1efdf3cd2cdd93b375,,,1,['mysql/vcl.sql'],"cleaning up vcl.sql
removed double spaces that weren't at the beginning of the line
changed case in the following tables to match the rest of the file:
-changelog
-computer
-connectlog
-connectmethod
-cryptkey
-cryptsecret
-imagerevision
-imagerevisioninfo
-loginlog
-nathost
-natlog
-oneclick
-openstackcomputermap
-OS
-semaphore
-sublog

added enclosing in single backticks (`) to the following tables to match the rest of the file:
-changelog
-connectlog",
3e1bfe562b0c4bc4e905b14ae2c4392afe83ce58,,,1,['managementnode/lib/VCL/Module/Provisioning/libvirt.pm'],"VCL-1084 - set cache mode for libvirt VMs

libvirt.pm: modified generate_domain_xml: oops, had logic backwards in last commit - disk cache should be set to none when on NFS (rather than on local disk), updated code for correct logic",VCL-1084
9912242b77e3128bdc66af3a7763533c4d29d6ae,,,1,['managementnode/lib/VCL/Module/Provisioning/libvirt.pm'],"VCL-1084 - set cache mode for libvirt VMs

libvirt.pm: modified generate_domain_xml: added check for vmpath being on local disk and if so, set flag to set disk cache to none; after creation of $xml_hashref, if flag set for disk cache, add disk cache none to xml_hashref",VCL-1084
2a711bb2ab01e71ddc140f35cbcbc47565e6ae48,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],Windows.pm: modified reboot: corrected comment about setting sshd service startup mode; added debug notify for successful setting of sshd service to manual,
9fc8291223c41574ac4052c31d99da44fcb45c23,,,9,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'mysql/update-vcl.sql', 'mysql/vcl.sql', 'vcl-install.sh', 'vcl-upgrade.sh', 'web/.ht-inc/addomain.php', 'web/.ht-inc/utils.php', 'web/js/resources/addomain.js']",Merge branch 'develop' into VCL-1114_misc_small_web_updates,
5cd049b96f2d174511abb16b49635c378b6b3a4a,,,1,['web/.ht-inc/utils.php'],"VCL-1114 - miscellaneous small web updates

utils.php:
-modified getImages: added ORDER BY to query to get image revision data so that revisions will be properly ordered when user is prompted to select a revision to reserve - out of order didn't show up if all revisions were owned by the same user so didn't notice this earlier
-modified getNATports: fixed header documentation that listed function name as getReservationNATports instead of getNATports",VCL-1114
0ee8921013a24f6d02806f76df85e0c6e3264277,,,2,"['vcl-install.sh', 'vcl-upgrade.sh']",Merge branch 'develop' of github.com:apache/vcl into develop,
05899194454af1296d2b62daf55aed89f1ffb740,,,7,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'mysql/update-vcl.sql', 'mysql/vcl.sql', 'web/.ht-inc/addomain.php', 'web/.ht-inc/utils.php', 'web/js/resources/addomain.js']","VCL-1116 - use database hostnames for ad joined computers

generally, changed usedbhostname to usedbhostnames and useDatabaseHostnamesForComputerObjects to usedbhostnames

DataStructure.pm: changed $SUBROUTINE_MAPPINGS{image_domain_usedbhostname} to $SUBROUTINE_MAPPINGS{image_domain_usedbhostnames}

Windows.pm: modified set_computer_hostname: changed get_image_domain_usedbhostname to get_image_domain_usedbhostnames

update-vcl.sql modified addomain: added usedbhostnames

vcl.sql: modified addomain: changed usedbhostname to usedbhostnames

addomain.php
-modified AJsaveResource: changed usedbhostname to usedbhostnames and useDatabaseHostnamesForComputerObjects to usedbhostnames
-modified addResource: changed useDatabaseHostnamesForComputerObjects to usedbhostnames
-modified validateResourceData: changed useDatabaseHostnamesForComputerObjects to usedbhostnames; set $return['usedbhostnames'] by calling processInputVar instead of referencing $_POST directly; added validation of $return['usedbhostnames']

utils.php: modified getADdomains: changed useDatabaseHostnamesForComputerObjects to usedbhostnames

addomain.js: modified inlineEditResourceCB and saveResource: changed useDatabaseHostnamesForComputerObjects to usedbhostnames",VCL-1116
358dffb9394bc9f903b0d3090cbb5ed2a94eda21,,,14,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/Provisioning/libvirt/KVM.pm', 'web/.ht-inc/addomain.php', 'web/.ht-inc/authentication.php', 'web/.ht-inc/authmethods/itecsauth.php', 'web/.ht-inc/authmethods/ldapauth.php', 'web/.ht-inc/authmethods/shibauth.php', 'web/.ht-inc/conf-default.php', 'web/.ht-inc/utils.php', 'web/index.php', 'web/js/requests.js', 'web/shibauth/index.php', 'web/testsetup.php']",Merge branch 'develop' of https://gitbox.apache.org/repos/asf/vcl into develop,
bc4956a371f12486a451487e33c89e46f1afc40d,,,2,"['vcl-install.sh', 'vcl-upgrade.sh']","vcl-install.sh: updated ARCHIVEURLPATH and SIGPATH for RCs to use https
vcl-upgrade.sh: updated SIGPATH for production code and ARCHIVEURLPATH and SIGPATH for RCs to use https",vcl-
df80209e8dfaadc1b3884b33236dc2f3b2b9bf9f,,,1,['web/.ht-inc/utils.php'],Merge branch 'develop' into VCL-1116_use_database_hostnames_for_ad_joined_computers,
e17dae78cf51e62b765fa90989ea38201d3b3a5d,,,1,['web/.ht-inc/utils.php'],"VCL-1106 - make PHP code compatible with PHP 7

utils.php: modified doQuery: added $mysqli_link_vcl as argument when calling mysqli_errno",VCL-1106
101b5352f4a783591fdd6ae462f67c2f832f7481,,,22,"['managementnode/bin/vclmessages.pl', 'managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/Provisioning/libvirt/KVM.pm', 'managementnode/lib/VCL/utils.pm', 'mysql/update-vcl.sql', 'mysql/vcl.sql', 'web/.ht-inc/addomain.php', 'web/.ht-inc/authentication.php', 'web/.ht-inc/authmethods/itecsauth.php', 'web/.ht-inc/authmethods/ldapauth.php', 'web/.ht-inc/authmethods/shibauth.php', 'web/.ht-inc/conf-default.php', 'web/.ht-inc/siteconfig.php', 'web/.ht-inc/utils.php', 'web/index.php', 'web/js/requests.js', 'web/js/siteconfig.js', 'web/shibauth/index.php', 'web/testsetup.php']",Merge branch 'develop' into VCL-1116_use_database_hostnames_for_ad_joined_computers,
dc88432838570f2cf233986e8a88da41ede6315d,,,1,['web/.ht-inc/help.php'],"VCL-1114 - miscellaneous small web updates

help.php: modified getHelpEmail: added argument after function name to header definition",VCL-1114
48065f2ebb4154288e6f2e0c7150d79b84058899,,,24,"['web/.ht-inc/authmethods/ldapauth.php', 'web/.ht-inc/blockallocations.php', 'web/.ht-inc/computer.php', 'web/.ht-inc/conf-default.php', 'web/.ht-inc/dashboard.php', 'web/.ht-inc/doxyfile.xmlrpc', 'web/.ht-inc/help.php', 'web/.ht-inc/image.php', 'web/.ht-inc/privileges.php', 'web/.ht-inc/requests.php', 'web/.ht-inc/resource.php', 'web/.ht-inc/serverprofiles.php', 'web/.ht-inc/states.php', 'web/.ht-inc/statistics.php', 'web/.ht-inc/utils.php', 'web/.ht-inc/vm.php', 'web/.ht-inc/xmlrpcWrappers.php', 'web/index.php', 'web/js/code.js', 'web/js/dashboard.js', 'web/js/requests.js', 'web/js/resources/computer.js', 'web/js/resources/image.js', 'web/js/vm.js']","VCL-1114 - miscellaneous small web updates

code.js: cleaned up whitespace

dashboard.js: modified updateNewReservations: added VM Host to displayed data

requests.js: cleaned up whitespace

computer.js:
-added Computer.prototype.ipsort: correctly sorts IP addresses
-modified initPage: set resourcestore.comparatorMap for IPaddress and privateIPaddress to ipsort
-modified refreshcompdata: set resourcestore.comparatorMap for IPaddress and privateIPaddress to ipsort

image.js:
-added initAddDialog: sets adauthenable checkbox to be disabled if user has no access to AD Domains
-modified submitCreateUpdateImage: added call to initAddDialog when adding a new image

vm.js:
-modified VMtoHostCB, vmFromHostCB, and reloadVMhostCB to check for data.items.failed being 'invaliddata'
-modified vmFromHost: cleaned up whitespace

index.php: cleaned up initialization of $user, $mysqli_link_vcl, and $mysqli_link_acct

blockallocations.php:
-modified getCurrentBlockHTML: increased width of viewtimesDialog DataGrid
-modified getUserCurrentBlockHTML: increased width of viewtimesDialog DataGrid and Date, Start, and End inputs
-modified processBlockAllocationInput: added regular expression match for $slots

computer.php:
-modified AJsubmitCompProvisioningChange: updated query to ignore reservations in 'complete' state; added check for $nowids being empty; initialized $msg before conditionals
-modified AJshowReservationHistory: added Request ID and IP Address to returned data

conf-default.php: changed calls to create_function to use function() instead

dashboard.php:
-modified dashboard: added 3rd argument for call to addWidget for status to alert users to hover over items for a description
-modified getStatusData: added 'Active Short Reservations'; added tooltip for 'Active Reservations'; added queries to get count of active reservations less than 24 hours in duration
-modified getNewReservationData: added vmhost to returned data

doxyfile.xmlrpc: removed Doxygen generated comments (there was some discussion on one of the ASF lists that including the comments was a license violation since Doxygen is GPL licensed)

help.php:
-modified submitHelpForm:
  -updated NAMEERR message to state that both first and last names need to be specified
  -updated calls to prettyDatetime to remove 2nd and 3rd arguments
  -added login history to email message
  -added call to getHelpEmail to get email address to send message to
-added getHelpEmail: gets help email address for specified affiliation

image.php:
-modified addEditDialogHTML: removed width specifications for description, usage, and imgcomments textareas and advancedoptions TitlePane; added ""(MB)"" after ""Required RAM"" so users know correct units
-modified validateResourceData: added default value of 0 for maxinitialtime; changed check of $return['addomainid'] not matching $extraaddomainid from != to !==

privileges.php:
-modified viewNodes: cleaned up old code at top of function
-modified userLookup: added Max Overlapping Reservations and owned images to displayed user data

requests.php:
-modified viewRequests: added checks to prevent image capture options from being displayed for images with OSinstalltype 'none'
-moved AJfetchRouterDNS from serverprofiles.php to here
-modified AJnewRequest and AJsubmitEditRequest: removed MAC address references from error message returned when $availablerc == -3 since MAC address cannot be specified
-modified AJsetImageProduction and AJsubmitSetImageProduction: set $prettyimage based on the first entry in $data['reservations'] when processing an imaging reservation

resource.php: modified AJstartImage: added addomainvals to returned data

serverprofiles.php: moved AJfetchRouterDNS from here to requests.php

states.php:
-uncommented AJfetchRouterDNS from $noHTMLwrappers
-moved AJfetchRouterDNS $action array entries from serverProfiles to reservations

statistics.php: modified viewStatistics: added OS type to statistics of each image

utils.php:
-modified initGlobals:
  -removed global references to $semid, $AUTHERROR
  -added global reference to $submitErr and $submitErrMsg
  -corrected typo: changed $crytpkey -> $cryptkey
  -changed calls to create_function to use function() instead
-modified checkAccess
  -removed global references to $noHTMLwrappers, $docreaders
  -added check for HTTP_X_USER not being submitted for xmlrpccall
-modified maintenanceCheck: changed call to fgetss to fgets and added separate call to strip_tags
-modified main: removed global reference to $mode
-modified abort: changed font tag setting color to red to use span with class of rederrormsg
-modified getUserResources: removed initialization of $return to array()
-modified encryptSecretKey and decryptSecretKey: changed calls to create_function to use function() instead
-modified getUserInfo: removed initialization of $user to array()
-modified updateUserData: removed $type as it wasn't used
-modified isAvailable: added additional return when check for enough RAM on hosts results in no VMs available; changed debug reference number for case of IP address already being in use as 18 was already used elsewhere
-modified debugIsAvailable: removed global reference to $user; changed case id for IP address already being in use from 18 to 24; added case 23
-modified allocComputer: removed global reference to $requestInfo
-modified checkOverlap: removed global reference to $user
-modified addRequest: removed setting $qh from call to doQuery when doing insert
-modified findManagementNode: removed global reference to $HTMLheader
-modified deleteRequest: removed setting $qh from call to doQuery when doing update
-modified moveReservationsOffComputer: removed global reference to $user
-removed getDepartmentName
-modified getMnsFromImage: removed outer foreach when getting mapped managementnode groups as the data from it wasn't used and just caused the 3 lines in it to be run multiple times with the same data
-modified findAvailableTimes: modified query finding slots available after reservations over to ignore reservations in failed, complete, or reload
-modified sendHeaders: removed global reference to $oldmode
-modified printHTMLHeader: removed global references to $oldmode, $docreaders, and $actions
-modified getDojoHTML: removed commented out case for serverProfiles; removed commented out call to populateProfileStore for viewRequests case

vm.php:
-modified vmhostdata: removed continuation for AJchangeVMprofile from returned data since it is not used
-modified AJvmToHost, AJvmFromHost, AJcancelVMmove, and AJnewProfile: cleaned up old code at top of each function

xmlrpcWrappers.php: cleaned up whitespace

ldapauth.php: changed call to create_function to use function() instead",VCL-1114
80705e80a8abdb91e99ee3ff97be13368c9a4981,,,1,['managementnode/lib/VCL/Module/Provisioning/libvirt/KVM.pm'],"VCL-1120 - image conversion from vmdk to qcow2 always done twice

KVM.pm: modified copy_virtual_disk: fixed misplaced close paranthesis in if conditional checking for 'Unknown option.*compat' that was causing it to always be true that resulted in image conversions from vmdk to qcow2 always being done twice",VCL-1120
0eda523fcfa634bf011126f04d785e7536e6feb2,,,1,['web/js/requests.js'],"VCL-1119 - wrong day submitted for future reservations made in the evening

requests.js: modified getDeployData: removed adding timezone offset to computed date value as the values supplied in the deploystartday select object have already been offset for user's timezone; so, the offset was being applied twice",VCL-1119
aeb81d143d3ed20103c35962db614e9422d7e6ba,,,7,"['web/.ht-inc/authentication.php', 'web/.ht-inc/authmethods/itecsauth.php', 'web/.ht-inc/authmethods/ldapauth.php', 'web/.ht-inc/authmethods/shibauth.php', 'web/.ht-inc/conf-default.php', 'web/.ht-inc/utils.php', 'web/shibauth/index.php']","VCL-1086 - improve modularization of authentication

authentication.php:
-added $authFuncs['local'] array to top of file
-modified getAuthCookieData: changed argument list from ($loginid, $valid) to ($loginid, $authtype, $valid, $shibauthid); added $authtype to data that is encrypted as 4th item
-modified readAuthCookie: added more checks for cookie being invalid - if invalid, clear VCLAUTH cookie so user will be redirected back to login screen; decrypt encrypted data based on new number of parameters
-added getAuthTypeFromAuthCookie
-moved ldapLogin to authmethods/ldapauth.php
-modified localLogin: added 'local' as 2nd argument when calling getAuthCookieData
-added unauthLocal

itecsauth.php:
-added $authFuncs['itecs'] array to top of file
-added testITECSAuth
-added processITECSAuth
-added unauthITECS

ldapauth.php:
-added $authFuncs['ldap'] array to top of file
-added unauthLDAP
-moved ldapLogin from authentication.php to here

shibauth.php:
-moved login code from vcl/shibauth/index.php to here
-moved logout code from utils.php to here
-added $authFuncs['shibboleth'] array to top of file
-added testShibAuth
-added processShibAuth (mostly stuff from shibauth/index.php)
-added unauthShib (contains stuff from utils.php logout)
-added getShibauthDataByUser
-modified updateShibUser: utilize getShibVar to process data passed in
from Shibboleth
-modified updateShibGroups: added additional attempt to get id from affiliation table to use a wildcard with $shibaffil if first attempt fails
-added getShibVar

conf-default.php: removed ""shibauth/"" from example URL for Shibboleth authentication

utils.php: modified sendHeaders: moved shibboleth logout code to shibauth.php and updated to use $authFuncs array and $authtype from getAuthTypeFromCookie to call correct logout functions

shibauth/index.php:
-moved code to authmethods/shibauth.php
-replaced everything with a simple redirect to the main index page; this script no longer needs to be called - IdP's can redirect straight back to the main index page now",VCL-1086
cf065939dae37cc47e46c6b869960c3234c85614,,,0,[],Merge branch 'VCL-1112_ssl_offload' of github.com:apache/vcl into VCL-1112_ssl_offload,
9fd87f5f20b675efe40274403901d998b90f64a8,,,1,['web/testsetup.php'],"VCL-1112 - SSL Offload

testsetup.php: added check for BASEURL starting with ""http:"" if SSLOFFLOAD is enabled",VCL-1112
b2cb0df1503407ae2a7bc5461943edd36980b783,junaidali,,3,"['web/.ht-inc/conf-default.php', 'web/index.php', 'web/testsetup.php']",added support for offloading SSL to loadbalancer. the vcl application will not force HTTPS when config option SSLOFFLOAD is enabled within conf.php,
e677172c330a4ff09f97a44c0042a7702fe5a39b,,,2,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm']","VCL-1117 - vcld fails to set fixed IP address for Linux server reservations if management node not set to static

OS.pm: modified update_fixed_ip_info: added return for successful case; if fail to set router, netmask, or dns_servers, ensure returned value will be 0

Linux.pm: modified update_resolv_conf: added check for processing server request, and if so, use dns server info from it instead of failing if management node ip configuration is not set to static",VCL-1117
ec5078b1abd3a4b796fba5bbe3e509361492c3ea,junaidali,junaidali,1,['mysql/vcl.sql'],updated database with shorter name,
5d84193dfafacb6f68fd65505e7defc6fab9b000,junaidali,junaidali,4,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'web/.ht-inc/addomain.php', 'web/.ht-inc/utils.php']",use shorter name for database field as it was causing issue with managementnode code,
bb453245ed8288e12b93a580643ad6b2a2c538e9,,,1,['web/.ht-inc/addomain.php'],"VCL-1095 - Move unjoining of Windows VMs from Active Directory to earlier in the deprovision process

addomain.php: modified validateResourceData: removed check for duplicate Domain DNS Name; ; this allows multiple accounts per domain_dns_name",VCL-1095
2ecb20f43858f89a048c08ffae21301176b21785,junaidali,junaidali,2,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm']",added managementnode code to use database hostnames if configured in database,
143bf04f9feb0ae7ba937c782ce7a970c6af92b7,,,7,"['managementnode/bin/vclmessages.pl', 'managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/utils.pm', 'mysql/update-vcl.sql', 'mysql/vcl.sql', 'web/.ht-inc/siteconfig.php', 'web/js/siteconfig.js']","VCL-1041 - Customer facing email notifications are ugly

vclmessages.pl: initial add

DataStructure.pm: modified substitute_string_variables subroutine: added a check for $subroutine_mapping_key starting with 'if ' or being 'endif' to skip attempting substitution to ignore HTML comment conditionals from HTML messages

utils.pm: modified mail subroutine: reworked ending code to create a hash of headers for the mail function, add Bcc if $shared_mail_box set, check for html tags in $mailstring and add Content-Type if exist

update-vcl.sql and vcl.sql: added definition and values for messagereset table

siteconfig.php: modified __construct: added check for existance of any html tags in message, subject, or short_message, if contained, set content of that item to empty string and set DBmanagedHTML flag

siteconfig.js: modified messages.prototype.setContents: added section to check for DBmanagedHTML key in returned data, if exists, disable input fields for this item, else enable fields and set messagebody value",VCL-1041
b39cee2efb4386c26db7dc7de9d65b48a3560497,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-1113 - image capture for Windows system configured as domain controller fails

Windows.pm:
-modified pre_reload: when checking for the computer being joined to any AD domain, added check to see if computer is a domain controller and skip deleting from domain if it is
-modified ad_unjoin: added check toward beginning of subroutine for computer being a domain controller and return early if it is
-added ad_check_domain_controller",VCL-1113
a242e230fcd9e3f7d1fbf4b360219976add5ede8,junaidali,junaidali,4,"['mysql/vcl.sql', 'web/.ht-inc/addomain.php', 'web/.ht-inc/utils.php', 'web/js/resources/addomain.js']",updated database to hold configuration. updated front end code to add checkbox to ADDomain Edit page to save this setting to database,
eee98890a27232addbb1b61830343b0c617e001c,junaidali,junaidali,3,"['web/.ht-inc/conf-default.php', 'web/index.php', 'web/testsetup.php']",added support for offloading SSL to loadbalancer. the vcl application will not force HTTPS when config option SSLOFFLOAD is enabled within conf.php,
576a2fabf52b0d9bc652ed1611a49fb085066b6d,junaidali,junaidali,1,['web/themes/copydojocss.sh'],check for file existence before trying to copy it,
5f72290ed178b9550548e3f089f84984c6fe58b6,junaidali,junaidali,1,['web/.gitignore'],ignoring netbeans project files,
74bc60d37df867bcdf1dc688c4e84529707d2dde,,,1,['web/.ht-inc/secrets-default.php'],remove extra space,
d9300c15667a6b333e89b11135f7f14bcf8183bb,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm'],VIM_SSH.pm: modified vm_unregister: fixed small typo 'of' -> 'off',
6b10982b5f53ae5140a1a5528b2f60eccd21e62b,,,189,"['doap_vcl.rdf', 'managementnode/bin/install_perl_libs.pl', 'managementnode/bin/monitor_vcld.pl', 'managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux/ManagementNode.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/libvirt.pm', 'managementnode/lib/VCL/utils.pm', 'managementnode/tools/ESXi/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/ESXi/Scripts/post_load/.gitignore', 'managementnode/tools/ESXi/Scripts/post_reservation/.gitignore', 'managementnode/tools/ESXi/Scripts/post_reserve/.gitignore', 'managementnode/tools/ESXi/Scripts/pre_capture/.gitignore', 'managementnode/tools/ESXi/Scripts/pre_reload/.gitignore', 'managementnode/tools/Linux/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Linux/Scripts/post_load/.gitignore', 'managementnode/tools/Linux/Scripts/post_reservation/.gitignore', 'managementnode/tools/Linux/Scripts/post_reserve/.gitignore', 'managementnode/tools/Linux/Scripts/pre_capture/.gitignore', 'managementnode/tools/Linux/Scripts/pre_reload/.gitignore', 'managementnode/tools/ManagementNode/Scripts/post_capture/.gitignore', 'managementnode/tools/ManagementNode/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/ManagementNode/Scripts/post_load/.gitignore', 'managementnode/tools/ManagementNode/Scripts/post_reservation/.gitignore', 'managementnode/tools/ManagementNode/Scripts/post_reserve/.gitignore', 'managementnode/tools/ManagementNode/Scripts/pre_capture/.gitignore', 'managementnode/tools/ManagementNode/Scripts/pre_reload/.gitignore', 'managementnode/tools/OSX/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/OSX/Scripts/post_load/.gitignore', 'managementnode/tools/OSX/Scripts/post_reservation/.gitignore', 'managementnode/tools/OSX/Scripts/post_reserve/.gitignore', 'managementnode/tools/OSX/Scripts/pre_capture/.gitignore', 'managementnode/tools/OSX/Scripts/pre_reload/.gitignore', 'managementnode/tools/Ubuntu/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Ubuntu/Scripts/post_load/.gitignore', 'managementnode/tools/Ubuntu/Scripts/post_reservation/.gitignore', 'managementnode/tools/Ubuntu/Scripts/post_reserve/.gitignore', 'managementnode/tools/Ubuntu/Scripts/pre_capture/.gitignore', 'managementnode/tools/Ubuntu/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows/Drivers/.gitignore', 'managementnode/tools/Windows/Logs/.gitignore', 'managementnode/tools/Windows/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows/Scripts/post_load/.gitignore', 'managementnode/tools/Windows/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows/Updates/x86/.gitignore', 'managementnode/tools/Windows/Updates/x86_64/.gitignore', 'managementnode/tools/Windows/Utilities/WSName/.gitignore', 'managementnode/tools/Windows_10/Drivers/.gitignore', 'managementnode/tools/Windows_10/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows_10/Scripts/post_load/.gitignore', 'managementnode/tools/Windows_10/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows_10/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows_10/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows_10/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows_10/Updates/.gitignore', 'managementnode/tools/Windows_10/Utilities/.gitignore', 'managementnode/tools/Windows_7/Drivers/.gitignore', 'managementnode/tools/Windows_7/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows_7/Scripts/post_load/.gitignore', 'managementnode/tools/Windows_7/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows_7/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows_7/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows_7/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows_7/Updates/x86/.gitignore', 'managementnode/tools/Windows_7/Updates/x86_64/.gitignore', 'managementnode/tools/Windows_7/Utilities/.gitignore', 'managementnode/tools/Windows_8/Drivers/.gitignore', 'managementnode/tools/Windows_8/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows_8/Scripts/post_load/.gitignore', 'managementnode/tools/Windows_8/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows_8/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows_8/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows_8/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows_8/Updates/.gitignore', 'managementnode/tools/Windows_8/Utilities/.gitignore', 'managementnode/tools/Windows_Server_2003/Drivers/.gitignore', 'managementnode/tools/Windows_Server_2003/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows_Server_2003/Scripts/post_load/.gitignore', 'managementnode/tools/Windows_Server_2003/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows_Server_2003/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows_Server_2003/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows_Server_2003/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows_Server_2003/Updates/x86/.gitignore', 'managementnode/tools/Windows_Server_2003/Updates/x86_64/.gitignore', 'managementnode/tools/Windows_Server_2003/Utilities/Sysprep/.gitignore', 'managementnode/tools/Windows_Server_2008/Drivers/.gitignore', 'managementnode/tools/Windows_Server_2008/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows_Server_2008/Scripts/post_load/.gitignore', 'managementnode/tools/Windows_Server_2008/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows_Server_2008/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows_Server_2008/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows_Server_2008/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows_Server_2008/Updates/x86/.gitignore', 'managementnode/tools/Windows_Server_2008/Updates/x86_64/.gitignore', 'managementnode/tools/Windows_Server_2008/Utilities/.gitignore', 'managementnode/tools/Windows_Server_2012/Drivers/.gitignore', 'managementnode/tools/Windows_Server_2012/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows_Server_2012/Scripts/post_load/.gitignore', 'managementnode/tools/Windows_Server_2012/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows_Server_2012/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows_Server_2012/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows_Server_2012/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows_Server_2012/Updates/.gitignore', 'managementnode/tools/Windows_Server_2012/Utilities/.gitignore', 'managementnode/tools/Windows_Server_2016/Drivers/.gitignore', 'managementnode/tools/Windows_Server_2016/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows_Server_2016/Scripts/post_load/.gitignore', 'managementnode/tools/Windows_Server_2016/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows_Server_2016/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows_Server_2016/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows_Server_2016/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows_Server_2016/Updates/.gitignore', 'managementnode/tools/Windows_Server_2016/Utilities/.gitignore', 'managementnode/tools/Windows_Version_5/Drivers/.gitignore', 'managementnode/tools/Windows_Version_5/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows_Version_5/Scripts/post_load/.gitignore', 'managementnode/tools/Windows_Version_5/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows_Version_5/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows_Version_5/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows_Version_5/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows_Version_5/Updates/x86/.gitignore', 'managementnode/tools/Windows_Version_5/Updates/x86_64/.gitignore', 'managementnode/tools/Windows_Version_6/Drivers/.gitignore', 'managementnode/tools/Windows_Version_6/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows_Version_6/Scripts/post_load/.gitignore', 'managementnode/tools/Windows_Version_6/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows_Version_6/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows_Version_6/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows_Version_6/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows_Version_6/Updates/x86/.gitignore', 'managementnode/tools/Windows_Version_6/Updates/x86_64/.gitignore', 'managementnode/tools/Windows_Vista/Drivers/.gitignore', 'managementnode/tools/Windows_Vista/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows_Vista/Scripts/post_load/.gitignore', 'managementnode/tools/Windows_Vista/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows_Vista/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows_Vista/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows_Vista/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows_Vista/Updates/x86/.gitignore', 'managementnode/tools/Windows_Vista/Updates/x86_64/.gitignore', 'managementnode/tools/Windows_XP/Drivers/.gitignore', 'managementnode/tools/Windows_XP/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows_XP/Scripts/post_load/.gitignore', 'managementnode/tools/Windows_XP/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows_XP/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows_XP/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows_XP/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows_XP/Updates/x86/.gitignore', 'managementnode/tools/Windows_XP/Updates/x86_64/.gitignore', 'managementnode/tools/Windows_XP/Utilities/Sysprep/.gitignore', 'mysql/update-vcl.sql', 'mysql/vcl.sql', 'web/.gitignore', 'web/.ht-inc/addomain.php', 'web/.ht-inc/authentication.php', 'web/.ht-inc/authmethods/itecsauth.php', 'web/.ht-inc/authmethods/ldapauth.php', 'web/.ht-inc/authmethods/shibauth.php', 'web/.ht-inc/blockallocations.php', 'web/.ht-inc/computer.php', 'web/.ht-inc/conf-default.php', 'web/.ht-inc/config.php', 'web/.ht-inc/dashboard.php', 'web/.ht-inc/groups.php', 'web/.ht-inc/help.php', 'web/.ht-inc/image.php', 'web/.ht-inc/managementnode.php', 'web/.ht-inc/oneclick.php', 'web/.ht-inc/privileges.php', 'web/.ht-inc/requests.php', 'web/.ht-inc/resource.php', 'web/.ht-inc/schedule.php', 'web/.ht-inc/serverprofiles.php', 'web/.ht-inc/siteconfig.php', 'web/.ht-inc/sitemaintenance.php', 'web/.ht-inc/statistics.php', 'web/.ht-inc/userpreferences.php', 'web/.ht-inc/utils.php', 'web/.ht-inc/vm.php', 'web/.ht-inc/xmlrpcWrappers.php', 'web/index.php', 'web/js/resources/image.js', 'web/shibauth/index.php', 'web/testsetup.php']",Merge branch 'develop' into VCL-1093,
ed269c396adf097526435c8881425c2b3dfed5da,,,4,"['web/.ht-inc/image.php', 'web/.ht-inc/requests.php', 'web/.ht-inc/statistics.php', 'web/js/resources/image.js']",Merge branch 'develop' of https://gitbox.apache.org/repos/asf/vcl into develop,
5abdb11879bc7d75ea927aa648e2bf9b77ccedfc,,,1,['mysql/vcl.sql'],"VCL-1081 - UID conflict for admin user

vcl.sql: changed UID for admin user to NULL to prevent conflicts with existing UIDs on systems",VCL-1081
07687eb6b412cd02dffd3262079336a551260526,,,3,"['web/.ht-inc/image.php', 'web/.ht-inc/requests.php', 'web/js/resources/image.js']","VCL-1110 - expose maxinitial time for images in web UI

image.php:
-modified fieldWidth: added case for maxinitialtime
-modified fieldDisplayName: change title for maxinitial time from ""Max Initial Time"" to ""Max Reservation Duration""
-modified addEditDialogHTML: added form item for maxinitialtime
-modified AJsaveResource: added check for maxinitialtime being changed, and add to $updates array if changed
-modified validateResourceData: added check for maxinitialtime

requests.php: modified AJeditRequest: modified code that determines how long a reservation can be extended to include maxinitialtime for the image if it is set

image.js:
-modified colformatter: separated maxinitialtime out into its own conditional
-modified inlineEditResourceCB: added line to set maxinitialtime to passed in value
-modified saveResource: added code to validate maxinitialtime
-modified saveResourceCB: added line to set maxinitialtime to passed in value",VCL-1110
9c7c26ea18792008f7c599c6d90a067a0dc30273,,,1,['web/.ht-inc/statistics.php'],"VCL-1111 - statgraphcache table not correctly being used

statistics.php: modified getStatGraphDayData, getStatGraphDayConUsersData, getStatGraphConBladeUserData, and getStatGraphConVMUserData: modified query to allow for provisioningid to be NULL or 0 if searching for any provisioningid",VCL-1111
cc87c75751764937284d869d929ed9714739fa2b,,,1,['web/.ht-inc/statistics.php'],"VCL-1109 - date duplicated on statistic graph labels for day after daylight saving time rolls back

The fix mentioned in VCL-1109 of just adding a value to the label doesn't really fix the underlying problem and give incorrect values on the graphs. A better fix was to change the timezone to UTC before doing any date work so that DST isn't used.

statistics.php: modified getStatGraphDayData, getStatGraphDayConUsersData, getStatGraphConBladeUserData, and getStatGraphConVMUserData: added a call at the beginning of each function to get the current timezone, then set the timezone to UTC; added a call before any returns in each function that sets the timezone back to was was retreived at the beginning of the function",VCL-1109
3dffb95ed3d45b096585d9b147f2878b7d13b47f,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-1096 - Add ability to automatically mount NFS shares under Windows

Windows.pm:
-modified pre_capture: added call to $self->unmount_nfs_shares at end of function to removing mounting of any NFS shares at next user login
-modified sanitize: added call to $self->unmount_nfs_shares at end of function to remove code that would run at user login to do NFS mounts
-added reserve function that calls parent reserve function and then calls $self->mount_nfs_shares
-added nfs_mount_share
-added nfs_unmount_share
-added set_windows_nfs_client_uid",VCL-1096
dade55fb2d1908c33c6effe0e48e6c5f03776f14,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-1082 - monitor_vcld.pl throws incorrect lastcheckin time exception after Daylight Savings Time Roles Back

vcl.sql: changed definition of managementnode.lastcheckin to have a default value of 0 instead of NULL

update-vcl.sql: modified alter table statement for managementnode.lastcheckin to have default value of 0 instead of NULL",VCL-1082
c212dfd9c30b906e7b61afadce8c9e13639a2d66,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-1082 - monitor_vcld.pl throws incorrect lastcheckin time exception after Daylight Savings Time Roles Back

vcl.sql: changed definition of managementnode.lastcheckin from datetime to timestamp

update-vcl.sql: added alter table statement to change managementnode.lastcheckin from datetime to timestamp",VCL-1082
5743cf340df3d63e3bad8c2c4b800e2f8f6cbbdd,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-1103 - change vcldsemaphore.pid from smallint to mediumint

vcl.sql: changed definition of vcldsemaphore.pid to be mediumint instead of smallint

update-vcl.sql:
-changed definition of vcldsemaphore.pid to be mediumint instead of smallint
-added alter table to change vcldsemaphore.pid to be mediumint instead of smallint",VCL-1103
c92ffda6ca794892e65e8afdf06f8d9039c81e52,,,1,['web/.ht-inc/utils.php'],"VCL-1105 - Shibboleth authentication broken due to bug in getCryptKeyID

utils.php: modified getCryptKeyID: added preg_replace to remove /shibauth from $filebase",VCL-1105
2c96d3a80fe355ca291f21bf18d1a07ab49d3574,,,5,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/utils.pm', 'mysql/update-vcl.sql', 'mysql/vcl.sql']",Merge branch 'VCL-1095_move_AD_unjoin' into develop,
9a0958ba7103252f25ddb2a629a431c823c3d575,,,5,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/utils.pm', 'mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-1095 - Move unjoining of Windows VMs from Active Directory to earlier in the deprovision process

DataStructure.pm: modified get_domain_credentials: changed name of input parameter and made it optional, if not passed in, will use domain of current image; updated to receive $domain_dns_name as first item in array returned by get_management_node_ad_domain_credentials; added more details to debug notify

Windows.pm:
-modified pre_capture: moved unjoining from domain a little earlier, mainly so setting the Administrator password to the VCL default (from vcld.conf) will not fail if the password doesn't meet domain restrictions, this required adding an extra reboot after unjoining
-modified post_reservation: unjoin computer from domain; this was needed so that reload reservations will be able to unjoin a computer while the previous image is still loaded and it has a way to lookup what credentials are needed to unjoin that image; otherwise, the case exists where a computer needs to be unjoined, but vcld doesn't know which credentials to use for unjoining it
-modified ad_join_ps: cleaned up domain password being written to vcld.log file; added writing addomain_id tag to currentimage.txt file
-modified ad_unjoin: updated to not pass arguments to ad_delete_computer
-modified ad_search: get $domain_username and $domain_password from passed in arguments instead of from calling get_domain_credentials; cleaned up domain password being written to vcld.log file
-modified ad_delete_computer: changed to not accept arguments; get domain_dns_name and credentials from calling get_domain_credentials; if calling that with no arguments returns nothing, try recursively calling self and calling get_domain_credentials with addomain_id from currentimage.txt file; include domain_dns_name and credentials with data passed to ad_search

utils.pm: modified get_management_node_ad_domain_credentials: changed 2nd argument from $domain_dns_name to $domain_id; added $domain_dns_name to beginning of array of returned data; for WHERE clause of query, always use addomain.id since domainDNSName is no longer unique; added domain_dns_name to debug notify

update-vcl.sql:
-changed key on domainDNSName in addomain table from a unique key to just an index; this allows multiple accounts per domain_dns_name
-added DropExistingIndices and AddIndexIfNotExists calls for addomain.domainDNSName

vcl.sql: changed key on domainDNSName in addomain table from a unique key to just an index; this allows multiple accounts per domain_dns_name",VCL-1095
273018a529e7c81881e468cd806b8e9a4b1d6fb9,,,2,"['managementnode/bin/monitor_vcld.pl', 'managementnode/lib/VCL/utils.pm']",VCL-1082 - This closes #8 - managementnode lastcheckin conversion to db epoch,VCL-1082
558403d6f9d757655f903e1c4528932aba93a22f,,,2,"['managementnode/bin/monitor_vcld.pl', 'managementnode/lib/VCL/utils.pm']",VCL-1082 Added code to get epoc time from the database when the monitoring function is being called.  This will prevent issues durring daylights saving time.,VCL-1082
ce1e6d7fd0b0373b2e75ecc002ccb3511926f0cd,,,28,"['web/.ht-inc/addomain.php', 'web/.ht-inc/authentication.php', 'web/.ht-inc/authmethods/itecsauth.php', 'web/.ht-inc/authmethods/ldapauth.php', 'web/.ht-inc/authmethods/shibauth.php', 'web/.ht-inc/blockallocations.php', 'web/.ht-inc/computer.php', 'web/.ht-inc/config.php', 'web/.ht-inc/dashboard.php', 'web/.ht-inc/groups.php', 'web/.ht-inc/help.php', 'web/.ht-inc/image.php', 'web/.ht-inc/managementnode.php', 'web/.ht-inc/oneclick.php', 'web/.ht-inc/privileges.php', 'web/.ht-inc/requests.php', 'web/.ht-inc/resource.php', 'web/.ht-inc/schedule.php', 'web/.ht-inc/serverprofiles.php', 'web/.ht-inc/siteconfig.php', 'web/.ht-inc/sitemaintenance.php', 'web/.ht-inc/statistics.php', 'web/.ht-inc/userpreferences.php', 'web/.ht-inc/utils.php', 'web/.ht-inc/vm.php', 'web/.ht-inc/xmlrpcWrappers.php', 'web/index.php', 'web/shibauth/index.php']",Merge branch 'VCL-1106_updates_for_php7' into develop,
e50585005773d6e33a9f475e5843633ae95f221f,,,28,"['web/.ht-inc/addomain.php', 'web/.ht-inc/authentication.php', 'web/.ht-inc/authmethods/itecsauth.php', 'web/.ht-inc/authmethods/ldapauth.php', 'web/.ht-inc/authmethods/shibauth.php', 'web/.ht-inc/blockallocations.php', 'web/.ht-inc/computer.php', 'web/.ht-inc/config.php', 'web/.ht-inc/dashboard.php', 'web/.ht-inc/groups.php', 'web/.ht-inc/help.php', 'web/.ht-inc/image.php', 'web/.ht-inc/managementnode.php', 'web/.ht-inc/oneclick.php', 'web/.ht-inc/privileges.php', 'web/.ht-inc/requests.php', 'web/.ht-inc/resource.php', 'web/.ht-inc/schedule.php', 'web/.ht-inc/serverprofiles.php', 'web/.ht-inc/siteconfig.php', 'web/.ht-inc/sitemaintenance.php', 'web/.ht-inc/statistics.php', 'web/.ht-inc/userpreferences.php', 'web/.ht-inc/utils.php', 'web/.ht-inc/vm.php', 'web/.ht-inc/xmlrpcWrappers.php', 'web/index.php', 'web/shibauth/index.php']","VCL-1106 - make PHP code compatible with PHP 7

making changes that allow code to run under PHP7 - vast majority of
changes are related to switching from mysql_* functions to mysqli_*
functions

files modified:
addomain.php authentication.php authmethods/itecsauth.php authmethods/ldapauth.php authmethods/shibauth.php blockallocations.php computer.php config.php dashboard.php groups.php help.php image.php managementnode.php oneclick.php privileges.php requests.php resource.php schedule.php serverprofiles.php siteconfig.php sitemaintenance.php statistics.php userpreferences.php utils.php vm.php xmlrpcWrappers.php index.php shibauth/index.php

additional changes in utils.php:
-modified mysql_connect_plus: accept a database argument because the database is passed to mysqli_connect
-modified dbConnect: removed calls to mysql_select_db and added database argument to calls to mysql_connect_plus
-added vcl_mysql_escape_string: mysqli_real_escape_string requires the database handle to be passed; having a wrapper function prevents having to reference the database handle global variable in every function needing to escape database data
-modified datetimeToUnix: removed '-1' argument to mktime as it is removed in php7
-modified unixFlor15: removed '-1' argument to mktime as it is removed in php7",VCL-1106
5a4735ff947e73822a9b418859c49a2a23706803,gjenning,web-flow,1,['doap_vcl.rdf'],"Merge pull request #1 from apache/master

doap_vcl.rdf: changed repo from subversion to git",
de9e192f821807857669f9a7cbe368ee8664e67b,,,1,['managementnode/lib/VCL/Module/Provisioning/libvirt.pm'],"VCL-1104 - set cpu topology for libvirt VMs

libvirt.pm: modified generate_domain_xml: added topology to $xml_hashref under cpu section and logic to set related variables",VCL-1104
01b9a6e77e20b3daaa191f37b968a526d6be909a,,,1,['doap_vcl.rdf'],doap_vcl.rdf: changed repo from subversion to git,
15b187fb6bf03608756e4daec00c6ed581005a4e,,,2,"['web/.ht-inc/blockallocations.php', 'web/.ht-inc/vm.php']",Merge branch 'develop' of https://git-wip-us.apache.org/repos/asf/vcl into develop,
932d5722d89b2cfa5ac1c5b683cb1048b1d2b435,,,1,['doap_vcl.rdf'],doap_vcl.rdf: changed repo from subversion to git,
4e9e37c791abf23ba0d50c3d683a8625f468dac6,,,1,['web/.ht-inc/blockallocations.php'],"VCL-1100 - block allocation usage graph does not work correctly for allocations with a single time slot

blockallocations.php: modified AJviewBlockAllocationUsage: moved
""if(is_null($row['blockStart']))"" to start of while loop because next
conditional was checking for it not being null; now, always set
$laststart (the bug was that $laststart was not getting set for single
timeslot block allocations)",VCL-1100
d318bc08f18046045eaed3678710751d859ed6b8,,,151,"['managementnode/bin/install_perl_libs.pl', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux/ManagementNode.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/utils.pm', 'managementnode/tools/ESXi/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/ESXi/Scripts/post_load/.gitignore', 'managementnode/tools/ESXi/Scripts/post_reservation/.gitignore', 'managementnode/tools/ESXi/Scripts/post_reserve/.gitignore', 'managementnode/tools/ESXi/Scripts/pre_capture/.gitignore', 'managementnode/tools/ESXi/Scripts/pre_reload/.gitignore', 'managementnode/tools/Linux/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Linux/Scripts/post_load/.gitignore', 'managementnode/tools/Linux/Scripts/post_reservation/.gitignore', 'managementnode/tools/Linux/Scripts/post_reserve/.gitignore', 'managementnode/tools/Linux/Scripts/pre_capture/.gitignore', 'managementnode/tools/Linux/Scripts/pre_reload/.gitignore', 'managementnode/tools/ManagementNode/Scripts/post_capture/.gitignore', 'managementnode/tools/ManagementNode/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/ManagementNode/Scripts/post_load/.gitignore', 'managementnode/tools/ManagementNode/Scripts/post_reservation/.gitignore', 'managementnode/tools/ManagementNode/Scripts/post_reserve/.gitignore', 'managementnode/tools/ManagementNode/Scripts/pre_capture/.gitignore', 'managementnode/tools/ManagementNode/Scripts/pre_reload/.gitignore', 'managementnode/tools/OSX/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/OSX/Scripts/post_load/.gitignore', 'managementnode/tools/OSX/Scripts/post_reservation/.gitignore', 'managementnode/tools/OSX/Scripts/post_reserve/.gitignore', 'managementnode/tools/OSX/Scripts/pre_capture/.gitignore', 'managementnode/tools/OSX/Scripts/pre_reload/.gitignore', 'managementnode/tools/Ubuntu/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Ubuntu/Scripts/post_load/.gitignore', 'managementnode/tools/Ubuntu/Scripts/post_reservation/.gitignore', 'managementnode/tools/Ubuntu/Scripts/post_reserve/.gitignore', 'managementnode/tools/Ubuntu/Scripts/pre_capture/.gitignore', 'managementnode/tools/Ubuntu/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows/Drivers/.gitignore', 'managementnode/tools/Windows/Logs/.gitignore', 'managementnode/tools/Windows/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows/Scripts/post_load/.gitignore', 'managementnode/tools/Windows/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows/Updates/x86/.gitignore', 'managementnode/tools/Windows/Updates/x86_64/.gitignore', 'managementnode/tools/Windows/Utilities/WSName/.gitignore', 'managementnode/tools/Windows_10/Drivers/.gitignore', 'managementnode/tools/Windows_10/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows_10/Scripts/post_load/.gitignore', 'managementnode/tools/Windows_10/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows_10/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows_10/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows_10/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows_10/Updates/.gitignore', 'managementnode/tools/Windows_10/Utilities/.gitignore', 'managementnode/tools/Windows_7/Drivers/.gitignore', 'managementnode/tools/Windows_7/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows_7/Scripts/post_load/.gitignore', 'managementnode/tools/Windows_7/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows_7/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows_7/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows_7/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows_7/Updates/x86/.gitignore', 'managementnode/tools/Windows_7/Updates/x86_64/.gitignore', 'managementnode/tools/Windows_7/Utilities/.gitignore', 'managementnode/tools/Windows_8/Drivers/.gitignore', 'managementnode/tools/Windows_8/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows_8/Scripts/post_load/.gitignore', 'managementnode/tools/Windows_8/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows_8/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows_8/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows_8/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows_8/Updates/.gitignore', 'managementnode/tools/Windows_8/Utilities/.gitignore', 'managementnode/tools/Windows_Server_2003/Drivers/.gitignore', 'managementnode/tools/Windows_Server_2003/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows_Server_2003/Scripts/post_load/.gitignore', 'managementnode/tools/Windows_Server_2003/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows_Server_2003/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows_Server_2003/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows_Server_2003/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows_Server_2003/Updates/x86/.gitignore', 'managementnode/tools/Windows_Server_2003/Updates/x86_64/.gitignore', 'managementnode/tools/Windows_Server_2003/Utilities/Sysprep/.gitignore', 'managementnode/tools/Windows_Server_2008/Drivers/.gitignore', 'managementnode/tools/Windows_Server_2008/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows_Server_2008/Scripts/post_load/.gitignore', 'managementnode/tools/Windows_Server_2008/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows_Server_2008/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows_Server_2008/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows_Server_2008/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows_Server_2008/Updates/x86/.gitignore', 'managementnode/tools/Windows_Server_2008/Updates/x86_64/.gitignore', 'managementnode/tools/Windows_Server_2008/Utilities/.gitignore', 'managementnode/tools/Windows_Server_2012/Drivers/.gitignore', 'managementnode/tools/Windows_Server_2012/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows_Server_2012/Scripts/post_load/.gitignore', 'managementnode/tools/Windows_Server_2012/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows_Server_2012/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows_Server_2012/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows_Server_2012/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows_Server_2012/Updates/.gitignore', 'managementnode/tools/Windows_Server_2012/Utilities/.gitignore', 'managementnode/tools/Windows_Server_2016/Drivers/.gitignore', 'managementnode/tools/Windows_Server_2016/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows_Server_2016/Scripts/post_load/.gitignore', 'managementnode/tools/Windows_Server_2016/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows_Server_2016/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows_Server_2016/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows_Server_2016/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows_Server_2016/Updates/.gitignore', 'managementnode/tools/Windows_Server_2016/Utilities/.gitignore', 'managementnode/tools/Windows_Version_5/Drivers/.gitignore', 'managementnode/tools/Windows_Version_5/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows_Version_5/Scripts/post_load/.gitignore', 'managementnode/tools/Windows_Version_5/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows_Version_5/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows_Version_5/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows_Version_5/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows_Version_5/Updates/x86/.gitignore', 'managementnode/tools/Windows_Version_5/Updates/x86_64/.gitignore', 'managementnode/tools/Windows_Version_6/Drivers/.gitignore', 'managementnode/tools/Windows_Version_6/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows_Version_6/Scripts/post_load/.gitignore', 'managementnode/tools/Windows_Version_6/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows_Version_6/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows_Version_6/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows_Version_6/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows_Version_6/Updates/x86/.gitignore', 'managementnode/tools/Windows_Version_6/Updates/x86_64/.gitignore', 'managementnode/tools/Windows_Vista/Drivers/.gitignore', 'managementnode/tools/Windows_Vista/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows_Vista/Scripts/post_load/.gitignore', 'managementnode/tools/Windows_Vista/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows_Vista/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows_Vista/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows_Vista/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows_Vista/Updates/x86/.gitignore', 'managementnode/tools/Windows_Vista/Updates/x86_64/.gitignore', 'managementnode/tools/Windows_XP/Drivers/.gitignore', 'managementnode/tools/Windows_XP/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows_XP/Scripts/post_load/.gitignore', 'managementnode/tools/Windows_XP/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows_XP/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows_XP/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows_XP/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows_XP/Updates/x86/.gitignore', 'managementnode/tools/Windows_XP/Updates/x86_64/.gitignore', 'managementnode/tools/Windows_XP/Utilities/Sysprep/.gitignore']",Merge branch 'develop' of https://git-wip-us.apache.org/repos/asf/vcl into develop,
a77c878f82879433fca63c022d74df964d5306bc,,,1,['web/.ht-inc/vm.php'],"VCL-1079 - Virtual Hosts page references Computer Utilities

vm.php: modified editVMInfo: changed ""Computer Utilities"" to ""Edit
Computer Profiles""",VCL-1079
a087631acf134dc06788cb855137f3d172831668,,,2,"['managementnode/bin/install_perl_libs.pl', 'managementnode/lib/VCL/utils.pm']","VCL-1089 - Change ping module to use Net::Ping::External

-applied patch submitted by Mike Jennings that changes utils.pm
_pingnode function to use Net::Ping::External rather than Net::Ping so
that vcld doesn't require root level rights
-moved ""use Net::Ping::External qw(ping);"" line to top of file with other
calls to ""use""
-updated description of _pingnode function",VCL-1089
d0150becca0616c4f834ad99bd9cd767ffabb05e,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm'],VCL-1101 - This closes #2,VCL-1101
6741fa48d6e3d9f7cb4ee8c01328aebe41c566aa,,,1,['managementnode/lib/VCL/Module/OS/Linux/ManagementNode.pm'],fixed tabing in run_stage_scripts_on_management_node,
f822f8cf3c585c1b30d21730679bb61348ba2466,,,148,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux/ManagementNode.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/tools/ESXi/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/ESXi/Scripts/post_load/.gitignore', 'managementnode/tools/ESXi/Scripts/post_reservation/.gitignore', 'managementnode/tools/ESXi/Scripts/post_reserve/.gitignore', 'managementnode/tools/ESXi/Scripts/pre_capture/.gitignore', 'managementnode/tools/ESXi/Scripts/pre_reload/.gitignore', 'managementnode/tools/Linux/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Linux/Scripts/post_load/.gitignore', 'managementnode/tools/Linux/Scripts/post_reservation/.gitignore', 'managementnode/tools/Linux/Scripts/post_reserve/.gitignore', 'managementnode/tools/Linux/Scripts/pre_capture/.gitignore', 'managementnode/tools/Linux/Scripts/pre_reload/.gitignore', 'managementnode/tools/ManagementNode/Scripts/post_capture/.gitignore', 'managementnode/tools/ManagementNode/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/ManagementNode/Scripts/post_load/.gitignore', 'managementnode/tools/ManagementNode/Scripts/post_reservation/.gitignore', 'managementnode/tools/ManagementNode/Scripts/post_reserve/.gitignore', 'managementnode/tools/ManagementNode/Scripts/pre_capture/.gitignore', 'managementnode/tools/ManagementNode/Scripts/pre_reload/.gitignore', 'managementnode/tools/OSX/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/OSX/Scripts/post_load/.gitignore', 'managementnode/tools/OSX/Scripts/post_reservation/.gitignore', 'managementnode/tools/OSX/Scripts/post_reserve/.gitignore', 'managementnode/tools/OSX/Scripts/pre_capture/.gitignore', 'managementnode/tools/OSX/Scripts/pre_reload/.gitignore', 'managementnode/tools/Ubuntu/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Ubuntu/Scripts/post_load/.gitignore', 'managementnode/tools/Ubuntu/Scripts/post_reservation/.gitignore', 'managementnode/tools/Ubuntu/Scripts/post_reserve/.gitignore', 'managementnode/tools/Ubuntu/Scripts/pre_capture/.gitignore', 'managementnode/tools/Ubuntu/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows/Drivers/.gitignore', 'managementnode/tools/Windows/Logs/.gitignore', 'managementnode/tools/Windows/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows/Scripts/post_load/.gitignore', 'managementnode/tools/Windows/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows/Updates/x86/.gitignore', 'managementnode/tools/Windows/Updates/x86_64/.gitignore', 'managementnode/tools/Windows/Utilities/WSName/.gitignore', 'managementnode/tools/Windows_10/Drivers/.gitignore', 'managementnode/tools/Windows_10/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows_10/Scripts/post_load/.gitignore', 'managementnode/tools/Windows_10/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows_10/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows_10/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows_10/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows_10/Updates/.gitignore', 'managementnode/tools/Windows_10/Utilities/.gitignore', 'managementnode/tools/Windows_7/Drivers/.gitignore', 'managementnode/tools/Windows_7/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows_7/Scripts/post_load/.gitignore', 'managementnode/tools/Windows_7/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows_7/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows_7/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows_7/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows_7/Updates/x86/.gitignore', 'managementnode/tools/Windows_7/Updates/x86_64/.gitignore', 'managementnode/tools/Windows_7/Utilities/.gitignore', 'managementnode/tools/Windows_8/Drivers/.gitignore', 'managementnode/tools/Windows_8/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows_8/Scripts/post_load/.gitignore', 'managementnode/tools/Windows_8/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows_8/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows_8/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows_8/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows_8/Updates/.gitignore', 'managementnode/tools/Windows_8/Utilities/.gitignore', 'managementnode/tools/Windows_Server_2003/Drivers/.gitignore', 'managementnode/tools/Windows_Server_2003/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows_Server_2003/Scripts/post_load/.gitignore', 'managementnode/tools/Windows_Server_2003/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows_Server_2003/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows_Server_2003/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows_Server_2003/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows_Server_2003/Updates/x86/.gitignore', 'managementnode/tools/Windows_Server_2003/Updates/x86_64/.gitignore', 'managementnode/tools/Windows_Server_2003/Utilities/Sysprep/.gitignore', 'managementnode/tools/Windows_Server_2008/Drivers/.gitignore', 'managementnode/tools/Windows_Server_2008/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows_Server_2008/Scripts/post_load/.gitignore', 'managementnode/tools/Windows_Server_2008/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows_Server_2008/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows_Server_2008/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows_Server_2008/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows_Server_2008/Updates/x86/.gitignore', 'managementnode/tools/Windows_Server_2008/Updates/x86_64/.gitignore', 'managementnode/tools/Windows_Server_2008/Utilities/.gitignore', 'managementnode/tools/Windows_Server_2012/Drivers/.gitignore', 'managementnode/tools/Windows_Server_2012/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows_Server_2012/Scripts/post_load/.gitignore', 'managementnode/tools/Windows_Server_2012/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows_Server_2012/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows_Server_2012/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows_Server_2012/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows_Server_2012/Updates/.gitignore', 'managementnode/tools/Windows_Server_2012/Utilities/.gitignore', 'managementnode/tools/Windows_Server_2016/Drivers/.gitignore', 'managementnode/tools/Windows_Server_2016/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows_Server_2016/Scripts/post_load/.gitignore', 'managementnode/tools/Windows_Server_2016/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows_Server_2016/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows_Server_2016/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows_Server_2016/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows_Server_2016/Updates/.gitignore', 'managementnode/tools/Windows_Server_2016/Utilities/.gitignore', 'managementnode/tools/Windows_Version_5/Drivers/.gitignore', 'managementnode/tools/Windows_Version_5/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows_Version_5/Scripts/post_load/.gitignore', 'managementnode/tools/Windows_Version_5/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows_Version_5/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows_Version_5/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows_Version_5/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows_Version_5/Updates/x86/.gitignore', 'managementnode/tools/Windows_Version_5/Updates/x86_64/.gitignore', 'managementnode/tools/Windows_Version_6/Drivers/.gitignore', 'managementnode/tools/Windows_Version_6/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows_Version_6/Scripts/post_load/.gitignore', 'managementnode/tools/Windows_Version_6/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows_Version_6/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows_Version_6/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows_Version_6/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows_Version_6/Updates/x86/.gitignore', 'managementnode/tools/Windows_Version_6/Updates/x86_64/.gitignore', 'managementnode/tools/Windows_Vista/Drivers/.gitignore', 'managementnode/tools/Windows_Vista/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows_Vista/Scripts/post_load/.gitignore', 'managementnode/tools/Windows_Vista/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows_Vista/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows_Vista/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows_Vista/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows_Vista/Updates/x86/.gitignore', 'managementnode/tools/Windows_Vista/Updates/x86_64/.gitignore', 'managementnode/tools/Windows_XP/Drivers/.gitignore', 'managementnode/tools/Windows_XP/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows_XP/Scripts/post_load/.gitignore', 'managementnode/tools/Windows_XP/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows_XP/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows_XP/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows_XP/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows_XP/Updates/x86/.gitignore', 'managementnode/tools/Windows_XP/Updates/x86_64/.gitignore', 'managementnode/tools/Windows_XP/Utilities/Sysprep/.gitignore']",VCL-1097 - This closes #1,VCL-1097
0f62b8afde3b2dd53d16dc8f770d41533f3b459c,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm'],VCL-1101 Changing chmod 755 from string to octal value,VCL-1101
7b7776638317e7e737882fdef4148d0c783a0f14,,,148,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux/ManagementNode.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/tools/ESXi/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/ESXi/Scripts/post_load/.gitignore', 'managementnode/tools/ESXi/Scripts/post_reservation/.gitignore', 'managementnode/tools/ESXi/Scripts/post_reserve/.gitignore', 'managementnode/tools/ESXi/Scripts/pre_capture/.gitignore', 'managementnode/tools/ESXi/Scripts/pre_reload/.gitignore', 'managementnode/tools/Linux/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Linux/Scripts/post_load/.gitignore', 'managementnode/tools/Linux/Scripts/post_reservation/.gitignore', 'managementnode/tools/Linux/Scripts/post_reserve/.gitignore', 'managementnode/tools/Linux/Scripts/pre_capture/.gitignore', 'managementnode/tools/Linux/Scripts/pre_reload/.gitignore', 'managementnode/tools/ManagementNode/Scripts/post_capture/.gitignore', 'managementnode/tools/ManagementNode/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/ManagementNode/Scripts/post_load/.gitignore', 'managementnode/tools/ManagementNode/Scripts/post_reservation/.gitignore', 'managementnode/tools/ManagementNode/Scripts/post_reserve/.gitignore', 'managementnode/tools/ManagementNode/Scripts/pre_capture/.gitignore', 'managementnode/tools/ManagementNode/Scripts/pre_reload/.gitignore', 'managementnode/tools/OSX/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/OSX/Scripts/post_load/.gitignore', 'managementnode/tools/OSX/Scripts/post_reservation/.gitignore', 'managementnode/tools/OSX/Scripts/post_reserve/.gitignore', 'managementnode/tools/OSX/Scripts/pre_capture/.gitignore', 'managementnode/tools/OSX/Scripts/pre_reload/.gitignore', 'managementnode/tools/Ubuntu/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Ubuntu/Scripts/post_load/.gitignore', 'managementnode/tools/Ubuntu/Scripts/post_reservation/.gitignore', 'managementnode/tools/Ubuntu/Scripts/post_reserve/.gitignore', 'managementnode/tools/Ubuntu/Scripts/pre_capture/.gitignore', 'managementnode/tools/Ubuntu/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows/Drivers/.gitignore', 'managementnode/tools/Windows/Logs/.gitignore', 'managementnode/tools/Windows/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows/Scripts/post_load/.gitignore', 'managementnode/tools/Windows/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows/Updates/x86/.gitignore', 'managementnode/tools/Windows/Updates/x86_64/.gitignore', 'managementnode/tools/Windows/Utilities/WSName/.gitignore', 'managementnode/tools/Windows_10/Drivers/.gitignore', 'managementnode/tools/Windows_10/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows_10/Scripts/post_load/.gitignore', 'managementnode/tools/Windows_10/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows_10/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows_10/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows_10/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows_10/Updates/.gitignore', 'managementnode/tools/Windows_10/Utilities/.gitignore', 'managementnode/tools/Windows_7/Drivers/.gitignore', 'managementnode/tools/Windows_7/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows_7/Scripts/post_load/.gitignore', 'managementnode/tools/Windows_7/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows_7/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows_7/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows_7/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows_7/Updates/x86/.gitignore', 'managementnode/tools/Windows_7/Updates/x86_64/.gitignore', 'managementnode/tools/Windows_7/Utilities/.gitignore', 'managementnode/tools/Windows_8/Drivers/.gitignore', 'managementnode/tools/Windows_8/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows_8/Scripts/post_load/.gitignore', 'managementnode/tools/Windows_8/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows_8/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows_8/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows_8/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows_8/Updates/.gitignore', 'managementnode/tools/Windows_8/Utilities/.gitignore', 'managementnode/tools/Windows_Server_2003/Drivers/.gitignore', 'managementnode/tools/Windows_Server_2003/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows_Server_2003/Scripts/post_load/.gitignore', 'managementnode/tools/Windows_Server_2003/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows_Server_2003/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows_Server_2003/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows_Server_2003/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows_Server_2003/Updates/x86/.gitignore', 'managementnode/tools/Windows_Server_2003/Updates/x86_64/.gitignore', 'managementnode/tools/Windows_Server_2003/Utilities/Sysprep/.gitignore', 'managementnode/tools/Windows_Server_2008/Drivers/.gitignore', 'managementnode/tools/Windows_Server_2008/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows_Server_2008/Scripts/post_load/.gitignore', 'managementnode/tools/Windows_Server_2008/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows_Server_2008/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows_Server_2008/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows_Server_2008/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows_Server_2008/Updates/x86/.gitignore', 'managementnode/tools/Windows_Server_2008/Updates/x86_64/.gitignore', 'managementnode/tools/Windows_Server_2008/Utilities/.gitignore', 'managementnode/tools/Windows_Server_2012/Drivers/.gitignore', 'managementnode/tools/Windows_Server_2012/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows_Server_2012/Scripts/post_load/.gitignore', 'managementnode/tools/Windows_Server_2012/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows_Server_2012/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows_Server_2012/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows_Server_2012/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows_Server_2012/Updates/.gitignore', 'managementnode/tools/Windows_Server_2012/Utilities/.gitignore', 'managementnode/tools/Windows_Server_2016/Drivers/.gitignore', 'managementnode/tools/Windows_Server_2016/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows_Server_2016/Scripts/post_load/.gitignore', 'managementnode/tools/Windows_Server_2016/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows_Server_2016/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows_Server_2016/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows_Server_2016/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows_Server_2016/Updates/.gitignore', 'managementnode/tools/Windows_Server_2016/Utilities/.gitignore', 'managementnode/tools/Windows_Version_5/Drivers/.gitignore', 'managementnode/tools/Windows_Version_5/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows_Version_5/Scripts/post_load/.gitignore', 'managementnode/tools/Windows_Version_5/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows_Version_5/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows_Version_5/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows_Version_5/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows_Version_5/Updates/x86/.gitignore', 'managementnode/tools/Windows_Version_5/Updates/x86_64/.gitignore', 'managementnode/tools/Windows_Version_6/Drivers/.gitignore', 'managementnode/tools/Windows_Version_6/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows_Version_6/Scripts/post_load/.gitignore', 'managementnode/tools/Windows_Version_6/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows_Version_6/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows_Version_6/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows_Version_6/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows_Version_6/Updates/x86/.gitignore', 'managementnode/tools/Windows_Version_6/Updates/x86_64/.gitignore', 'managementnode/tools/Windows_Vista/Drivers/.gitignore', 'managementnode/tools/Windows_Vista/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows_Vista/Scripts/post_load/.gitignore', 'managementnode/tools/Windows_Vista/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows_Vista/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows_Vista/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows_Vista/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows_Vista/Updates/x86/.gitignore', 'managementnode/tools/Windows_Vista/Updates/x86_64/.gitignore', 'managementnode/tools/Windows_XP/Drivers/.gitignore', 'managementnode/tools/Windows_XP/Scripts/post_initial_connection/.gitignore', 'managementnode/tools/Windows_XP/Scripts/post_load/.gitignore', 'managementnode/tools/Windows_XP/Scripts/post_reservation/.gitignore', 'managementnode/tools/Windows_XP/Scripts/post_reserve/.gitignore', 'managementnode/tools/Windows_XP/Scripts/pre_capture/.gitignore', 'managementnode/tools/Windows_XP/Scripts/pre_reload/.gitignore', 'managementnode/tools/Windows_XP/Updates/x86/.gitignore', 'managementnode/tools/Windows_XP/Updates/x86_64/.gitignore', 'managementnode/tools/Windows_XP/Utilities/Sysprep/.gitignore']",VCL-1097 Adding .gitignore files and empty tool directories to teh project along with adding code to ignore .gitignore files when scripts are being copied and executed on the system.,VCL-1097
2b87efb9e18129759c0ecf63b79517c0088397f4,,,3,"['web/.ht-inc/conf-default.php', 'web/.ht-inc/utils.php', 'web/testsetup.php']","VCL-1085 - Configuring VCL Website to use custom port

applied patch submitted by Junaid Ali

conf-default.php and testsetup.php: create $host variable from
$_SERVER['HTTP_HOST'] and strip off port portion if it exists;
use in place of anywhere $_SERVER['HTTP_HOST'] was used

utils.php: modified initGlobals: remove port part from
$_SERVER['HTTP_HOST'] before using to create $uniqid variable",VCL-1085
10ea25970e4d3a9e406dc19f7d853f83c6fb9850,,,2,"['web/.ht-inc/requests.php', 'web/.ht-inc/utils.php']","VCL-1094 - add .\ to windows user login to prevent automatic use of Microsoft accounts

requests: modified AJconnectRequest: if OS type is windows, prepend .\
to $conuser

utils.php: modified sendRDPfile: if OS type is windows, prepend .\
to $userid",VCL-1094
cf8c88d62f99d6d47ece9313f4c99c42be896a7e,,,2,"['web/.ht-inc/requests.php', 'web/.ht-inc/utils.php']","VCL-1080 - Wrong port can be delivered in RDP file

only a bunch of whitespace changes",VCL-1080
c54132882f05c427c7a165de561005e60c17d37b,,,2,"['web/.ht-inc/requests.php', 'web/.ht-inc/utils.php']","VCL-1080 - Wrong port can be delivered in RDP file

requests.php: modified AJconnectRequest: added cmid to data saved in
continuation for sendRDPfile

utils.php: modified sendRDPfile: get $cmid from continuation; no longer
loop through connect methods to guess which connect method to use; just
use the one referenced by $cmid and get port information from it",VCL-1080
f62627fa21a6b84b76b090061d603c52c1204909,,,1,['doap_vcl.rdf'],"Merge remote-tracking branch 'origin/master' into develop

merging in master to get change to doap file",
92391b8159ab55547b3d447375b6d03101df2e2f,,,1,['web/.gitignore'],creating .gitignore file for web portion of code,
38e25f232a33d1bd32f77cfc2e9f4d5712d5cfad,,,3,"['managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm']","VCL-1093
Added code contributed by [~junaid.ali] check to make sure VM's power is off in VMware.pm::delete_vm before attempting to unregister.

Made minor regex change in VIM_SSH.pm::vm_unregister to check for VM power state 'not off' rather than 'is on' to prevent possible problems if something like 'suspended' was returned.

Added code to vSphere_SDK.pm::vm_unregister to check VM power state before attempting to unregister it. This aligns it with VIM_SSH.pm.",VCL-1093
2fb5c2dec6f46bcfb669157b0eba427ca408fda1,,,1,['doap_vcl.rdf'],"COMDEV-286

modified doap_vcl.rdf: changed Javascript to JavaScript",COMDEV-286
407c44e1b1e3e56a8c05b32148c96010247e43a3,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-1083
Changed the order so NFS shares are unmounted before attempting to delete a local user on a Linux computer.

Added safety check prior to deleting any Linux user to determine if any NFS share are mounted under the user's home directory.",VCL-1083
17071b3a4c2c13a7aea5c5137655e4495d5fc999,,,1,['doap_vcl.rdf'],Added release 2.5 to doap_vcl.rdf.,
0b374030465dc13bef236b21c2945b9ca0eaeabd,,,1,['CHANGELOG'],"VCL-1053 - Prepare VCL 2.5 release

CHANGELOG: added JIRA issues 1072, 1073, 1075, 1076, 1077",VCL-1053
1d01572642e31df72aee497680c1e7108cd949ea,,,1,['web/.ht-inc/privileges.php'],"VCL-1077 - Adding an AD Domain to the privilege tree with available or manageMapping set causes it to be added with no way to remove it

privilege.php: modified AJsubmitAddResourcePriv: added checks to prevent invalid privileges from being assigned for certain types; updated error message to say no privileges specified or the ones specified don't apply for the given type",VCL-1077
9e4642c8a0cda7242e4748861b8aada458a0aec6,,,1,['web/.ht-inc/managementnode.php'],"VCL-1076 - Unsetting Enable Image Library for a management node does not set the image library group to NULL

managementnode.php:
-modified AJsaveResource: set imagelibgroupid to NULL if validateResourceData returned it as NULL
-modified validateResourceData: if $return['imagelibenable'] is not 1, set $return['imagelibgroupid'] to NULL instead of its previous value",VCL-1076
de6401e1efa8e9cea5c88cc87379c057b5ae78c2,,,1,['web/.ht-inc/image.php'],"VCL-1075 - Newlines in image description not handled properly under Manage Images

image.php: modified AJeditResource: added preg_replace for description that converts <br> to \n",VCL-1075
4b7644424f54a3fefe6417516950411c573527cd,,,1,['web/.ht-inc/siteconfig.php'],"VCL-1029 - add a section for managing affiliations to Site Configuration

siteconfig.php: modified AffilTextVariable::getHTML: added $nooptions variable to track if there are no options to display for a given block - this is mainly for Shibboleth related variables when there are only the Global and Local affiliations",VCL-1029
eb81c76e9bb87c7e27046eba7bb2f980656789a5,,,1,['web/testsetup.php'],"VCL-1053 - Prepare VCL 2.5 release

testsetup.php:
-added $aborting global flag that keeps the abort function from doing anything if called
-moved dbConnect to before initGlobals due to initGlobals accessing the database",VCL-1053
446aa05810726999769b8c811f31d9e9bcdf7bd9,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm'],"VCL-1072
Updated VIM_SSH.pm::vm_power_on. Added argument to call to _run_vim_cmd so that it only makes 1 attempt of executing the command. Added code to vm_power_on to check the output of the command for 'failed'. If 'failed', it checks the power status of the VM. If already on, returns true. If not, vm_power_on now calls itself one more time. A $is_retry_attempt argument was added to prevent circularity.",VCL-1072
9a31df75436650517fef9aca6885f3568316ffcc,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-1073
Added '&' after call to shutdown in Linux.pm::reboot and Linux.pm::shutdown so that they doesn't wait for the command to complete. Added 'max_attempts' = 1 argument to execute call so that multiple attempts aren't tried if the connection is quickly broken after the reboot starts. Removed error checking on the result of executing this command. Later on, the code waits for the computer to either shut down or not respond to ping and monitors the reboot. If the shutdown command failed for some reason, the code would still attempt a hard reset or power off.

Other
Moved activate_interfaces call to earlier in Linux.pm::post_load. It was being called after update_public_ip_address, synchronize_time, and possibly other steps that would require the interfaces to be up. Replaced duplicated code calling ifup in Linux.pm::activate_interfaces with call to start_network_interface.",VCL-1073
13851284e1c96a90094d0090a7b917f10374728f,,,2,"['managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6.pm']","VCL-1069
Added check to make sure the optional $message argument is defined before attempting to print it in Windows.pm::get_current_computer_time. It was generating an uninitialized concatenation warning in vcld.log if called without the optional argument.

In Version_6.pm::activate, added $message argument to call to Windows.pm::get_current_computer_time.",VCL-1069
37ec96e2fa70e7d8df96e566f4ca918dd11119b8,,,2,"['managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6.pm']","VCL-1069
Added call to 'w32tm.exe /unregister' early in Windows.pm::configure_time_synchronization. This seems to have fixed intermittent odd behavior.

Added optional message argument to Windows.pm::get_current_computer_time for debugging.

Added Version_6.pm::get_time_service_events. This was used for debugging but isn't actually called from the code.",VCL-1069
11866d2674aed3680412ac51ab342b4e6637f251,,,1,['CHANGELOG'],"VCL-1053 - Prepare VCL 2.5 release

CHANGELOG: added VCL-1068 and VCL-1069",VCL-1053
cc000ff8bcd7cff271caa0c6cf9cfef45b02ec63,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-1069
Uncommented call to restart the w32time service and removed the /nowait argument from the w32tm.exe /resync command. This adds a few seconds to load but without these modifications, time is still not regularly synchronized by the time Windows activation is attempted.",VCL-1069
2210a525a84eed96dfc5377676ab012e855aa922,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-1068
Added Windows.pm::_escape_password.

Updated subroutines in Windows.pm to use result of _escape_password in command:
* set_password
set_scheduled_task_credentials
create_startup_scheduled_task
set_service_credentials",VCL-1068
786c0c323899ff1c073d7b25c56ae3a5d8338cb9,,,2,"['managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6.pm']","VCL-1069
Added command to set MaxPosPhaseCorrection and MaxNegPhaseCorrection registry keys before time synchronization is configured in Windows.pm::configure_time_synchronization. Cleaned up the subroutine.

Added Windows.pm::get_current_computer_time which is only used for troubleshooting. Added call to this in Version_6.pm::activate if activation fails to help determine if failure was caused by incorrect time on the client.",VCL-1069
63e8d65a2a653a2364c88add89d8dec860e0a209,,,1,['CHANGELOG'],"VCL-1053 - Prepare VCL 2.5 release

CHANGELOG: added VCL-984, VCL-1065, VCL-1066",VCL-1053
fc600c24e1a64686a6097245aeed188fe545a284,,,2,"['managementnode/bin/vcld', 'managementnode/etc/systemd/system/vcld.service']","VCL-984
Updated systemd vcld.service file from Type = simple to forking. Added ""StartLimitInterval=0"" to prevent the service from being unable to start due to too many successive tries.

Modified vcld::daemonize so that the parent ""service startup"" process writes the PID file instead of the child. This is required or else systemd will not detect that the forked daemon process properly started and repeatedly try to start vcld (even though it is started).",VCL-984
0292e9011f1e6d795d68ad0cb0932234d42fc4d5,,,1,['managementnode/lib/VCL/Module/State.pm'],"VCL-1066
Added to regex in State.pm::state_exit allowing the request state to change from pending/checkpoint to reserved.",VCL-1066
d696782715f7eed0e6971e47f173f485b18aefe0,,,3,"['managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/8.pm', 'managementnode/tools/Windows/Scripts/update_cygwin.cmd']","VCL-1065
Reverted changes to update_cygwin.cmd previously committed which added an attempt to call mkgroup.exe and mkpasswd.exe with ""-l localhost"" arguments. Added sed.exe commands to strip the '<HOST>+ section from the beginning of lines in group and passwd if it exists.

Removed ""-t rsa1"" argument from ssh-keygen.exe command. Recent versions don't support this and display an error. Without the argument, the key will be generated with the default type.

Added command at the end of update_cygwin.cmd to delete the 'VCL Update Cygwin' scheduled task if it exists. It doesn't need to be called on every reboot.

Added call to Windows.pm::post_load to delete the 'VCL Post Load' scheduled task if it exists. Also added identical call to Windows.pm::create_update_cygwin_startup_scheduled_task to make sure that both the 'VCL Post Load' and 'VCL Update Cygwin' scheduled tasks don't both exist because they cause conflicts.

Added call to 8.pm::pre_capture to delete the 'VCL Update Cygwin' scheduled task if it exists before adding the 'VCL Post Load' scheduled task.

Added '/RL HIGHEST' argument to schtasks.exe call in Windows.pm::create_startup_scheduled_task. It causes the task to run with ""highest privileges"". This seems to have corrected issues on at least one image where update_cygwin.cmd failed to run because of what seems to be a UAC issue.

Added call to Windows.pm::create_update_cygwin_startup_scheduled_task to copy the update_cygwin.cmd file from the management node to ensure the most recent copy is used.",VCL-1065
9dbeea928606577c3fd1d34f4e56c15cd408fe45,,,1,['CHANGELOG'],"VCL-1053 - Prepare VCL 2.5 release

CHANGELOG: added VCL-1064",VCL-1053
c76e7b1d58c922aa10747ffa8ade809b32579f31,,,3,"['web/.ht-inc/userpreferences.php', 'web/.ht-inc/utils.php', 'web/.ht-inc/xmlrpcWrappers.php']","VCL-1064 - Show reservations being captured or in maintenance on Reservations page

userpreferences.php: modified processUserPrefsInput: added maintenance state to list of states of reservations checked to prevent users from changing rdpport value

utils.php:
-modified checkOverlap: added maintenance and image capture states to list of ignored reservation states when checking for overlapping reservations
-modified printHTMLHeader: added image and checkpoint to list of reservation states for which the page will automatically refresh

xmlrpcWrappers.php:
-modified XMLRPCgetRequestStatus: added checks for reservation being in maintenance and for it beingin image or checkpoint
-modified XMLRPCextendRequest: added checks for reservation being in maintenance and for it beingin image or checkpoint
-modified XMLRPCsetRequestEnding: added checks for reservation being in maintenance and for it beingin image or checkpoint",VCL-1064
ad62b0ae0d6e4cfcefff5133ed5f27f560b7caaa,,,3,"['web/.ht-inc/requests.php', 'web/.ht-inc/utils.php', 'web/css/vcl.css']","VCL-1064 - Show reservations being captured or in maintenance on Reservations page

requests.php:
-modified viewRequests: changed $failed and $timedout flags to $noedit (this also fixed a bug where $failed was being used for 2 separate things that were in conflict with each other); added $col3 flag to track when a message should be displayed across all 3 columns where the buttons are displayed; changed checks for reservations being timed out to check for state name instead of id; added cases to handle reservations in maintenance and image states; don't include empty 3rd cell instead of a button when $col3 is set
-modified getViewRequestHTMLitem: added blocks for maintenanceblock and imageblock

utils.php: modified getUserRequests: added currstate and laststate to provide state names in addition to ids; modified query to no longer exlude reservations in image and maintenance states

vcl.css: added rescapture",VCL-1064
e94303aa0b07fcf7a292425b7c81e3e29be361d8,,,2,"['web/.ht-inc/dashboard.php', 'web/js/dashboard.js']","(no JIRA)

dashboard.php, dashboard.js: added image revision comments to data in list of failed imaging reservations",
81c282b82bfed1a23d2c362fd0f9b628ef6283d7,,,1,['web/js/resources/image.js'],"VCL-277 - Add support for images to join Active Directory domains
VCL-867 - Active Directory Authentication for Windows VM's

images.js: modified inlineEditResourceCB: added check for addomainvals being in data.items.data before setting advalcnt; if it doesn't exist, just set the value to 0",VCL-277
682d60a32c03301f24236379e44b449384c1ecfb,,,1,['CHANGELOG'],"VCL-1053 - Prepare VCL 2.5 release

added VCL-1063",VCL-1053
88b214bf4554e646a3d710bc500a976f6825cef3,,,7,"['web/.ht-inc/requests.php', 'web/js/nls/es_CR/messages.js', 'web/js/nls/es_MX/messages.js', 'web/js/nls/fr_CA/messages.js', 'web/js/nls/messages.js.template', 'web/js/nls/pt_PT/messages.js', 'web/js/requests.js']","VCL-1063 - editing a future reservation to have a start time that is in the past should not be allowed
VCL-968 - Localization updates for 2.5

requests.php: modified AJsubmitEditRequest: added check for submitted start time being in the past

requests.js: modified submitEditReservation: added check for submitted start time being in the past

messages.js/template, es_CR/messages.js, es_MX/messages.js, fr_CA/messages.js, pt_PT/messages.js: added translation for 'The submitted start time is in the past.' - this phrase was specifically chosen because a translation of it already exists for php. So, I was able to copy the translated phrases over.",VCL-1063
066e433a43894ba49f75615d6c65f9985552c6e8,,,1,['web/.ht-inc/siteconfig.php'],"VCL-919 - Allow customization of notification messages sent to users

siteconfig.php: modified Messages::AJsaveMessages: added check to prevent message body from containing only whitespace",VCL-919
f9f95bc3b42bde100ee0cf353ad6ad923ceaceb1,,,1,['web/.ht-inc/siteconfig.php'],minor whitespace adjustment,
fac835d694f31c4da7f7478010d98e040a7e155a,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm'],"VCL-1060
Fixed problem in VIM_SSH.pm::_parse_vim_cmd_output. It was failing if the output contained a '$' and likely other characters.",VCL-1060
26b3d6ef79f52961b8fd3e6af40f3414488b5f3d,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-1055
Added check in Linux.pm::set_static_default_gateway to ensure value returned from get_public_default_gateway() is defined before comparing it to avoid uninitialized warnings in vcld.log.",VCL-1055
45e4387b0bbdbd8b973d3a389a96f5eaa45e9f67,,,1,['CHANGELOG'],"VCL-1053
Removed the ""Removed required Perl modules"" section of CHANGELOG. Some explicit dependencies were removed from the install_perl_libs.pl script but still get installed because they are sub-dependencies of other packages/modules still listed in the script.",VCL-1053
ba1ff0fd53b5004ed508bf441c8bf9a1bef5c87c,,,1,['RELEASE_NOTES'],"VCL-1053
Tweaked the ""Added"" secion of RELEASE_NOTES.",VCL-1053
0ba46d5b8fc3ac0ed1a7ba413862b0e43584aff3,,,1,['README'],"VCL-1053
Tweaked cryptographic paragraphs at bottom of README.",VCL-1053
6f26ceaac642444093dc47fa6a3667cbc07e0df1,,,1,['CHANGELOG'],"VCL-1053 - Prepare VCL 2.5 release

CHANGELOG: added release notes from JIRA for 2.5",VCL-1053
52450869602e69cac35623b343fadc569f67630e,,,6,"['CHANGELOG', 'README', 'RELEASE_NOTES', 'vcl-install.sh', 'vcl-upgrade.sh', 'web/testsetup.php']","VCL-1053 - Prepare VCL 2.5 release

CHANGELOG:
-added section for 2.5; still need to add release notes

README:
-updated version at top
-updated link to online install guide
-removed php-gd from list of web server php modules

RELEASE_NOTES:
-added Added and Removed sections

vcl-install.sh, vcl-upgrade.sh, web/testsetup.php:
-added back gettext as a php module installed/tested for",VCL-1053
06a6e705f8446267a71b41877d3f3e90a19efa66,,,3,"['web/.ht-inc/requests.php', 'web/.ht-inc/utils.php', 'web/.ht-inc/xmlrpcWrappers.php']","VCL-1062 - stop using Administrator account for Windows imaging reservations

requests.php: modified AJconnectRequest: removed check for imaging reservation and OStype being windows to set user to Administrator

utils.php: modified sendRDPfile: removed check for imaging reservation and OStype being windows to set user to Administrator

xmlrpcWrappers.php: modified XMLRPCgetRequestConnectData: removed check for imaging reservation and OStype being windows to set user to Administrator",VCL-1062
0818e882ca015a3d51314ba409ad8ebd9042fc55,,,1,['managementnode/lib/VCL/Module/OS/OSX.pm'],"VCL-1062
Removed code from OSX.pm::reserve that checks if processing an imaging reservation and sets the Administrator account password to match the behavior of the Windows code.",VCL-1062
113c727abda5c2ae466dc8672dc2fc4d6c92fe9e,,,1,['managementnode/lib/VCL/Module/OS/Linux/init/Upstart.pm'],"VCL-1061
Updated Upstart.pm::_get_service_info to check for 'Connection refused' when executing 'initctl list'.",VCL-1061
2077a5a85ce19c6da69d5e7d1901beeddb93aa2c,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-1062
Changed Windows.pm so that the Administrator account isn't for imaging reservations.

Removed Windows.pm::reserve subroutine. All it was doing was calling OS.pm::reserve and then setting the Administrator password if processing an imaging reservation. OS.pm::reserve will now be called directly.

Removed code in Windows.pm::grant_access that enables the Administrator user if processing an imaging reservation.

Removed code in Windows.pm::user_logged_in that overrides the username that's checked if processing an imaging reservation.

Removed code in Windows.pm::notify_user_console that overrides the username to send messages to if processing an imaging reservation.",VCL-1062
2a3f7d435240cd2508ccbc39642d188d4dfa9c43,,,3,"['web/.ht-inc/addomain.php', 'web/.ht-inc/image.php', 'web/js/resources/image.js']","VCL-277 - Add support for images to join Active Directory domains
VCL-867 - Active Directory Authentication for Windows VM's

fixed problem of having access to manage an image that has an AD Domain set without having access to the AD Domain

addomain.php: modified submitToggleDeleteResourceExtra: clear addomainAdmin/manageGroup when deleting an AD Domain

image.php:
-modified addEditDialogHTML: removed some logic of what fields are enabled/disabled - a user may not have access to any AD Domains, but have access to an image with an AD Domain set; in this case, the user needs to have access to unset the AD Domain
-modified AJeditResource: added section pass along additional AD Domain information, including if the user has access to the AD Domain set for the image
-modified validateResourceData: added extra logic for checking AD Domain items

image.js:
-modified inlineEditResourceCB: added logic on what should be enabled for editing based on user's access to AD Domain items
-modified saveResourceCB: added code to remove an AD Domain option that may have been added for a specific image when the user didn't directly have access to that AD Domain
-modified toggleADauth: added call to selectADauth
-added selectADauth",VCL-277
4c8ae55272bb782127ad873b4ce867d982fad947,,,3,"['managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm']","VCL-1060
Added check to VMware.pm::check_multiextent. Check is skipped if ESXi 6.5 or higher.

Added subroutines to VIM_SSH.pm:
* _get_host_summary
* get_vmware_product_name
* get_vmware_product_version

Fixed problems in vSphere_SDK.pm::get_vmware_product_version. It was never fully implemented and had not been called from anywhere.",VCL-1060
95df6f2bd705bb11124ffcdc565dcc9952e60b74,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-976
Added user_password_length and user_password_spchar to variable table in vcl.sql and update-vcl.sql.",VCL-976
007da6eb76c154c06411faf5e07d2811d16dc8ba,,,6,"['web/locale/es_CR/LC_MESSAGES/vcl.mo', 'web/locale/es_MX/LC_MESSAGES/vcl.mo', 'web/locale/fr_CA/LC_MESSAGES/vcl.mo', 'web/locale/ja_JP/LC_MESSAGES/vcl.mo', 'web/locale/pt_PT/LC_MESSAGES/vcl.mo', 'web/locale/zh_CN/LC_MESSAGES/vcl.mo']","VCL-968 - Localization updates for 2.5

updated vcl.mo files",VCL-968
22b51771ee37ba1cf3b65091b551441307e87d24,,,1,['README'],"VCL-1053 - Prepare VCL 2.5 release 

README - added TSU notification section",VCL-1053
d4ad118226925a62c8e2d94def31ad3e0904d0ba,,,1,['managementnode/tools/Windows/Scripts/update_cygwin.cmd'],"VCL-867
Fixed problem in update_cygwin.cmd introduced for some versions of Cygwin in r1801224. ""localhost"" was added after the ""-l"" in the mkgroup.exe and mkpassword.exe commands. This worked on the versions of Cygwin tested. On some other versions, however, this generates an error:
/usr/bin/mkpasswd: A domain name is only accepted when '-d' is given.

Updated the commands to first try ""-l localhost"" and added logical or to then try ""-l"" if an error occurs.",VCL-867
310cfe566288f5ae2756a1a41a2cd945f55f0886,,,2,"['vcl-install.sh', 'vcl-upgrade.sh']","VCL-1053 - Prepare VCL 2.5 release 

vcl-install.sh, vcl-upgrade.sh: updated $SIG_PATH to include $VCL_VERSION",VCL-1053
73a19807ceea2109677367ad65d88e554d740cc8,,,2,"['INSTALLATION', 'UPGRADE']","VCL-1053 - Prepare VCL 2.5 release

UPGRADE, INSTALLATION: updated for 2.5; also added manual instructions to each",VCL-1053
b66d63e4cd9b993ae2e83eba770a1d54dae006c6,,,1,['managementnode/lib/VCL/Module/OS.pm'],"VCL-867
Added missing return statement to OS.pm::add_user_accounts if the call to create_user fails. add_user_accounts was returning true when a user account failed to be created. The reservation should fail when this happens.",VCL-867
ce7a72d1bef775fd825709ced13346a275f8b413,,,2,"['managementnode/lib/VCL/inuse.pm', 'managementnode/lib/VCL/reserved.pm']","VCL-993
Updated calls to $self->data->get_user_imtype_name() to set the return value to 'none' if it's set to NULL in the database to prevent vcld.log uninitialized concatenation warnings.",VCL-993
756b57d9f52f34a17fb21bff52c2eb900b1b2dc4,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-867
Moved call to ad_delete_computer from ad_join_prepare to ad_join_ps after the computer hostname is changed and the computer is rebooted. ad_delete_computer was intermittently failing due to not being able to resolve the domain DNS name. It seems more reliable to set the static DNS server via ad_join_prepare, reboot, then try to delete an existing object.",VCL-867
064e9b5ea2b4c20a98cf0b897ff03ca857f253df,,,1,['mysql/vcl.sql'],"VCL-981 - create a new theme that is more responsive for mobile devices

vcl.sql: set theme for Global to 'dropdownmenus'; set theme for Local to NULL so that it inherits from Global",VCL-981
0751e00c8b28f639f149412e7fdb07b718067933,,,3,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6.pm']","VCL-887
Removed warning message if the management node identity key isn't set in DataStructure.pm::get_management_node_identity_key_paths and configured it to return /etc/vcl/vcl.key.

Changed WARNING messages to OK to In Windows.pm::get_product_key, Windows.pm::get_kms_servers, and Version_6.pm::activate_kms prevent multiple warnings in vcld.log if KMS/MAK info hasn't been configured.",VCL-887
7b6ab96f832c9bc82116fe7193e309550191281b,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-887
Swapped order of if/elsif section in utils.pm::run_ssh_command to prevent unnecessary warnings in vcld.log when checking for SSH to respond.",VCL-887
736c88e79f7bbc380e1f598ffd17dad12d4eae73,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-1043
Removed '-n -f' from SSH command in utils.pm::run_ssh_command. It got accidentally commited in r1795003.",VCL-1043
9266fe3546207403a51490f7ace6a5304f8c877b,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-867
Changed ConnectTimeout value from 3 seconds to 30 in utils.pm::run_ssh_command. Slow computers would timeout with:
ssh output (cmd.exe /c...): ssh: connect to host 192.168.100.101 port 22: Connection timed out",VCL-867
f77d674c86d1116abaff8e453b4f9ce1967c5618,,,1,['managementnode/lib/VCL/Module/OS/Linux/firewall/iptables.pm'],"VCL-1056
Added iptables.pm::_execute_iptables subroutine. It simply calls $self->os->execute() and checks the output for text indicating another process has an xtables lock.

Changed all existing calls from $self->os->execute() to $self->_execute_iptables();",VCL-1056
f2c3f1d3d1cc97122e02679bcd86b0ad1654207b,,,1,['managementnode/lib/VCL/Module/OS/Linux/ManagementNode.pm'],"VCL-1000
Updated ManagementNode.pm::run_stage_scripts_on_management_node to ignore files residing under .svn and .git directories.

VCL-1045
Added overridden die handlers to ManagementNode.pm prior to calling Crypt::OpenSSL::RSA methods.",VCL-1000
0b5c87b9b4eb27b655cf8af4f9dfecf674b17716,,,1,['managementnode/lib/VCL/image.pm'],"VCL-1000
Added call to OS.pm::post_reservation in image.pm::process. This causes post-reservation scripts to get executed prior to image capture.",VCL-1000
98b2279c0604098171d871ba489b5f7dc750858f,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-1045
Enclosed XML-RPC response values in format_data in utils.pm::call_check_crypt_secrets. They contain a hash-based object and the values weren't being displayed properly in vcld.log.",VCL-1045
5b966bf79f7b52ac06224cd4b9c8062779002797,,,2,"['managementnode/bin/cygwin-sshd-config.sh', 'managementnode/tools/Windows/Scripts/update_cygwin.cmd']","VCL-867
Added 'localhost' after -l argument to mkgroup and mkpasswd commands in update_cygwin.cmd and cygwin-sshd-config.sh. This prevents the computer name from being prepended in the output lines, a problem that seems to only be exhibited after a computer is joined to Active Directory.",VCL-867
7354665c0333b3c987e2dc679d5f21a5290109c0,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-1059
Modified Linux.pm::reserve to call Linux.pm::configure_ext_sshd before OS.pm::reserve.",VCL-1059
fa94f75a94fe315ae920199c172e744d17b9a351,,,3,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm']","VCL-1058
Updated OS.pm::add_user_accounts. If state = 'servermodified' and the account already exists, it now calls either grant_administrative_access or revoke_administrative_access.

Updated Linux.pm::create_user
Cleaned up OS.pm::delete_user_accounts. It had 2 nearly identical loops with duplicated code.

Updated pre_capture in Linux.pm and Windows.pm to call delete_user_accounts instead of delete_user.",VCL-1058
e89a92aa6ddaab20fc1a6c288bce9cdf03c43a23,,,1,['managementnode/lib/VCL/DataStructure.pm'],"VCL-1045
Updated DataStructure.pm to not show decrypted password in vcld.log.",VCL-1045
0f4d7b6b9ad7fa2c0b9c929c2ec7da1052f9dc08,,,1,['mysql/vcl.sql'],"VCL-1057 - allManagementNodes is assigned available at the initial admin node

vcl.sql: removed insert value ""(7, 3, 4, 'available')"" that assigned ""available"" for the ""allManagementNodes"" resource group at the admin node",VCL-1057
0a6a8955639daad3fdc64d4d87e8020b8beffb79,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"Trivial
Added missing command string to warning message generated when Windows.pm::set_static_default_gateway fails.",
09fbb655e90e5eae794c795dd6fd4ce35d7b430a,,,1,['managementnode/lib/VCL/Module/OS.pm'],"VCL-1031
Added missing return line to OS.pm::get_correct_default_gateway.",VCL-1031
250f5b5e31823f06e824fb36c52e01634009d74d,,,1,['managementnode/lib/VCL/new.pm'],"Trivial
Updated notify message from WARNING to DEBUG - shouldn't be a warning.",
400f39c34beaebf4c20f307128b88f9e85c777a7,,,1,['managementnode/lib/VCL/utils.pm'],"Trivial
Forgot to comment out lines used for debugging in earlier commit.",
03d19cc4d803ede87bc877d382742bd2b4d6dc39,,,2,"['managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/utils.pm']","Reduced unnecessary warnings when checking for competing reservations. Added $suppress_warnings argument to utils.pm::get_request_current_state_name, used by utils.pm::is_request_deleted. Added additional calls to is_request_deleted in new.pm::computer_not_being_used.",
bb4dbb3a85099e0913fef70db20d0e9d6ea4712b,,,2,"['web/.ht-inc/siteconfig.php', 'web/js/siteconfig.js']","VCL-919 - Allow customization of notification messages sent to users

siteconfig.php:
-modified Messages::getHTML: moved html for invalidmsgfieldspane to an earlier part of the html so that the box defaults to a higher position; it was a little out of the messages box
-modified AJvalidateMessagesPoll: no longer depend on usermessage_needs_validating (backend removed the entry); just look for and user message fields that were not set by the webcode and contain ""invalidfields""

siteconfig.js: modified messages.prototype.updateInvalidContent: updated to handle invalid fields being separated into keys (i.e. message, subject, etc)",VCL-919
e7642020966ff4c50f9c6d908a6fc9f1d0afd3d8,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-867
Fixed minor problem causing uninitialized concatenation warnings in vcld.log in Windows.pm::ad_search when checking a previously loaded, domain-joined image.",VCL-867
9de38b056e95f3d0e7313a8cc923800e132bb736,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],Fixed 'DEGUG' typo in Windows.pm causing warnings in vcld.log.,
7e2e945df51c0f76e7115d890f26f35f8e84b4c8,,,2,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/OSX.pm']","VCL-1055
Updated subroutines to not use ""lc(shift)"":
* OS.pm::get_mac_address
* OS.pm::get_ip_address
* OS.pm::get_default_gateway
* OS.pm::get_dns_servers
* OSX.pm::get_network_configuration

VCL-997
Added code to delete reservation_info.json file if it exists in OS.pm::pre_capture.",VCL-1055
bd13a522dde1c0b0b2222dfe34f16fdce2e65621,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-1054
Updated Windows.pm::user_exists to check the output of the 'net user <username>' command rather than simply relying on the exit status.",VCL-1054
25f6125e437dab5ba7dd50802016dac4e7c800c6,,,1,['mysql/update-vcl.sql'],"VCL-1053 - Prepare VCL 2.5 release

update-vcl.sql: modified procedure moveConnectMethodPortProtocol: added ""WHERE port != 0"" to last INSERT statement to handle upgrades from VCL versions without any connectmethod tables. I saw a problem upgrading from 2.2.2 where it caused 3 entries to be inserted with port set to 0. Then, a later query in the update-vcl.sql script caused 3 more entries to be inserted with the correct port numbers resulting in 2 entries for each connect method with one having the right port and one having 0.",VCL-1053
a7f6f94b79439d738cbbd7873825f033d4e79a48,,,1,['vcl-install.sh'],"VCL-1053 - Prepare VCL 2.5 release

vcl-install.sh: fixed small typo",VCL-1053
b241aff5105f1a31f564c9d579e9201e7e078f64,,,1,['vcl-upgrade.sh'],"VCL-1053 - Prepare VCL 2.5 release

vcl-upgrade.sh:
-when upgrading database, added code for VCL versions in the 2.x series to grant CREATE TEMPORARY TABLES to VCL db user
-fixed bug in how new management node code was getting copied into place",VCL-1053
0b527363289aebafae854c6090fb992778daec0f,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT.pm'],"VCL-887
Added checks for undefined return value from get_management_node_install_path in xCAT.pm to prevent potential 'Use of uninitialized value in substitution' warnings.",VCL-887
b42dd9b1d6f932055a861b83fe01373750d8c4d6,,,1,['managementnode/bin/install_perl_libs.pl'],"VCL-1045
Uncommented CPAN urllist config option and updated URL to cpan-rsync.perl.org. I saw a case where the script failed without a URL configured.",VCL-1045
bc0e9fede662dde74482305120735c087d5b20ec,,,1,['README'],"VCL-1053
Updated README:
* Removed unnecessary descriptions of the required modules
* Updated ""tested on"" to the versions I'm currently using
* Updated list of Perl modules to only include imported modules not included in core Perl as of 5.10",VCL-1053
29c4b67496898639800bf64d021005fba7f070e5,,,3,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/utils.pm']","VCL-887
Updated utils.pm::get_user_info to set a {FEDERATED_LINUX_AUTHENTICATION} key rather than the poorly named {STANDALONE} key. Updated Linux.pm::should_set_user_password to check $user_info->{FEDERATED_LINUX_AUTHENTICATION}.

Removed hard-coded condition in utils.pm::get_user_info which would have set {FEDERATED_LINUX_AUTHENTICATION} = 0 if the user.uid value is greater than 1 million. This was a legacy NCSU-only detail that should have never been committed to Apache.

Removed all references to the user info 'STANDALONE' key.  Removed unused 'user_standalone' and 'management_node_not_standalone' keys from DataStructure.pm.

Cleaned up utils.pm::getpw to align with the rest of the modern code style and naming practices. It was using variables such as $a and $b.",VCL-887
a403b30e29b2e86bc6620a480a2fd34a63abc079,,,1,['vcl-upgrade.sh'],"VCL-1053 - Prepare VCL 2.5 release 

vcl-upgrade.sh:
-updated VCL_VERSION from 2.4.2 to 2.5
-added code to delete MAXVMLIMIT from conf.php
-added code to change $mcryptkey in secrets.php to $cryptkey; if php version >= 5.3, update value of $cryptkey to be randomly generated data from openssl
-removed php-gd from list of required php packages
-moved code that installs missing packages to be outside for loop so it is only run once the full list of missing packages is created
-changed cp commands to include -a parameter so original timestamps from archive are retained
-added code to set ownership of web code
-added code to set selinux context of web code
-added code to set ownership of management node code
-updated line placed in .htaccess for old web code to be ""Requre all denied"" to match new httpd configuration",VCL-1053
76e9edbdb9c06d1b5b64926843bd67c301697803,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-981 - create a new theme that is more responsive for mobile devices

vcl.sql: changed affiliation.theme to allow NULL and default to NULL
update-vcl.sql: changed adding affiliation.theme to allow NULL and default to NULL; added update to set theme to NULL where it is currently an empty string",VCL-981
ec95ba2362eae49bea806afbe554be8bd267c0ab,,,3,"['web/.ht-inc/authentication.php', 'web/.ht-inc/sitemaintenance.php', 'web/.ht-inc/utils.php']","VCL-981 - create a new theme that is more responsive for mobile devices

authentication.php:
-modified localLogin: attempt to get theme assigned in database for user's affiliation and set that for the VCLSKIN cookie
-modified checkExpiredDemoUser: get skin from calling getAffiliationTheme instead of DEFAULTTHEME constant

sitemaintenance.php: modified writeMaintenanceFile: write theme for Global affiliation to file so that can be used to display maintenance message

utils.php:
-modified initGlobals: when user not authed, get $skin from getAffiliationTheme(0) instead of from DEFAULTTHEME
-modified maintenanceCheck: read site theme from maintenance file; use that if it is valid and VCLSKIN cookie is not set
-modified getAffiliationTheme: added check for $affilid being passed as 0; if so, just query to get the theme for Global affiliation",VCL-981
f6cade482ea163b1f85ddcc2ae795f176fa28141,,,1,['doap_vcl.rdf'],"VCL-1053
Replaced 2.4 with 2.4.2 as the last release in doap_vcl.rdf. This was an oversight after 2.4.2 was released. Also added BASH, Javascript, and SQL as programming languages used by the project.",VCL-1053
cbacad696a4c4f1aab0cdccbe8728d53e6a5292b,,,2,"['vcl-install.sh', 'web/testsetup.php']","testsetup.php: added line before calling initGlobals that unsets $_COOKIE['VCLAUTH'] so initGlobals runs as an unauthenticated user if the current person viewing the page is authenticated

vcl-install.sh:
-updated version from 2.4.2 to 2.5
-set ownership of .ht-inc/cryptkey to apache
-set .ht-inc/maintenance and .ht-inc/cryptkey SELinux context to httpd_sys_rw_content_t if SELinux is enabled",
6490677f69d7515dd3b4e5daccaa944893d3d9f3,,,1,['web/index.php'],index.php: udated version number from 2.4.2 to 2.5,
3ca0c29672565c986f50d2bea6263d1680fdbdbe,,,1,['managementnode/lib/VCL/DataStructure.pm'],"VCL-1045
Added '0' argument to get_vmhost_profile_secret_id call in DataStructure.pm::get_vmhost_profile_password to prevent unnecessary warnings.",VCL-1045
d5b0764939ac07818016369dbb8a34bb791f1c6e,,,61,"['managementnode/bin/health_check.pl', 'managementnode/bin/monitor_vcld.pl', 'managementnode/bin/upgrade_database.pl', 'managementnode/bin/vcld', 'managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/ESXi.pm', 'managementnode/lib/VCL/Module/OS/Linux/ManagementNode.pm', 'managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm', 'managementnode/lib/VCL/Module/OS/Linux/UnixLab.pm', 'managementnode/lib/VCL/Module/OS/Linux/firewall.pm', 'managementnode/lib/VCL/Module/OS/Linux/firewall/firewalld.pm', 'managementnode/lib/VCL/Module/OS/Linux/firewall/iptables.pm', 'managementnode/lib/VCL/Module/OS/Linux/firewall/ufw.pm', 'managementnode/lib/VCL/Module/OS/Linux/init.pm', 'managementnode/lib/VCL/Module/OS/Linux/init/SysV.pm', 'managementnode/lib/VCL/Module/OS/Linux/init/Upstart.pm', 'managementnode/lib/VCL/Module/OS/Linux/init/systemd.pm', 'managementnode/lib/VCL/Module/OS/OSX.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_10/10.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_10/2016.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5/2003.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5/XP.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/2008.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/2012.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/7.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/8.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/Vista.pm', 'managementnode/lib/VCL/Module/Predictive.pm', 'managementnode/lib/VCL/Module/Predictive/Level_0.pm', 'managementnode/lib/VCL/Module/Predictive/Level_1.pm', 'managementnode/lib/VCL/Module/Predictive/Level_2.pm', 'managementnode/lib/VCL/Module/Provisioning.pm', 'managementnode/lib/VCL/Module/Provisioning/Lab.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vmware_cmd.pm', 'managementnode/lib/VCL/Module/Provisioning/docker.pm', 'managementnode/lib/VCL/Module/Provisioning/libvirt.pm', 'managementnode/lib/VCL/Module/Provisioning/libvirt/KVM.pm', 'managementnode/lib/VCL/Module/Provisioning/one.pm', 'managementnode/lib/VCL/Module/Provisioning/openstack.pm', 'managementnode/lib/VCL/Module/Provisioning/vbox.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/Module/Semaphore.pm', 'managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/blockrequest.pm', 'managementnode/lib/VCL/healthcheck.pm', 'managementnode/lib/VCL/image.pm', 'managementnode/lib/VCL/inuse.pm', 'managementnode/lib/VCL/makeproduction.pm', 'managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/reclaim.pm', 'managementnode/lib/VCL/reserved.pm', 'managementnode/lib/VCL/utils.pm']","VCL-1053
Changed $VERSION variable to 2.5 in backend files.",VCL-1053
57178b9b3838321ee96bca89a6957cf9146cc657,,,11,"['managementnode/lib/VCL/Module/OS/Linux/UnixLab.pm', 'managementnode/lib/VCL/Module/OS/Linux/firewall/firewalld.pm', 'managementnode/lib/VCL/Module/OS/OSX.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/2008.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/7.pm', 'managementnode/lib/VCL/Module/Predictive/Level_2.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm', 'managementnode/lib/VCL/Module/Provisioning/docker.pm', 'managementnode/lib/VCL/Module/Provisioning/one.pm', 'managementnode/lib/VCL/Module/Provisioning/openstack.pm', 'managementnode/lib/VCL/Module/Provisioning/vbox.pm']","VCL-1053
Set subversion 'keywords' and eol-style' properties on .pm files which didn't have them set.

Removed subversion 'mergeinfo' on Windows directory.",VCL-1053
bee9a0187dec923f8a38f9f1b1af81348255ced5,,,1,['web/testsetup.php'],"testsetup.php:
-added a line to set default timezone to prevent php warning
-added check after fopen'ing URL to self to test including secrets.php and conf.php to check for 'parse error' in the returned data, and if so, just set $data to ''
-added check for all required constants being defined in conf.php
-added check for cryptkey directory
-added code to attempt to create cryptkey if it doesn't already exist
-added check for being able to base64 decode $cryptkey
-changed check for testing phpseclib to test symmetric encryption - tests for openssl based if openssl_encrypt exists; test for phpseclib if it doesn't
-added unordered list tags around dojo css theme checks",
670449fa83fb6555c704097c70d2b95a5c2a59a4,,,7,"['web/.ht-inc/addomain.php', 'web/.ht-inc/authentication.php', 'web/.ht-inc/authmethods/itecsauth.php', 'web/.ht-inc/states.php', 'web/.ht-inc/utils.php', 'web/.ht-inc/vm.php', 'web/.ht-inc/xmlrpcWrappers.php']","VCL-1045 - Method of encrypting sensitive database entries

addomain.php: modified AJsaveResource: renamed call to addMNcryptkeyUpdates to addCryptSecretKeyUpdates

authentication.php: modified addLoginLog: if $passfail is true, call checkMissingWebSecretKeys to generate cryptsecrets for other web servers that may be missing

utils.php and itecsauth.php: moved include_once for itecsauth/itecsauth.php from utils.php to itecsauth.php - file not needed unless itecsauth is being used, so no need to have it in utils.php

states.php: added checkMissingWebSecretKeys to entry actions and to misc pages

utils.php:
-modified decryptData: added checks for length of $iv and $cryptdata being invalid and return false if invalid
-added checkMissingWebSecretKeys
-modified checkCryptSecrets: renamed call to addMNcryptkeyUpdates to addCryptSecretKeyUpdates

vm.php: modified AJupdateVMprofileItem: renamed call to addMNcryptkeyUpdates to addCryptSecretKeyUpdates; modified update query to set rsapub, rsakey, and encryptedpasswd to NULL when setting password with new system

xmlrpcWrappers.php: modified XMLRPCcheckCryptSecrets: renamed call to addMNcryptkeyUpdates to addCryptSecretKeyUpdates; removed unnecessary call to mysql_real_escape_string because data being escaped will always be base64 encoded",VCL-1045
b613684183d04bf2e8c948d0cd9ed095c5891f7d,,,1,['web/.ht-inc/addomain.php'],"VCL-1045 - Method of encrypting sensitive database entries

addomain.php:
-modified AJsaveResource: changed string used to join error string passed to wordwrap from <br> to \n
-modified addResource: added checks for getSecretKeyID and encryptDBdata returning NULL and if so, return NULL; changed return when insert fails from returning 0 to returning NULL",VCL-1045
d0a3220f0f7828dd2fd191c135a18591d2f6c72f,,,1,['web/js/vcldojo/al2licenseheader.txt'],adding AL2 license header for compiling custom Dojo,
ee4098e39896bad2e121550c4df929fc07013489,,,1,['web/locale/po_files/es_CR/vcl.po'],"VCL-968 - Localization updates for 2.5

es_CR/vcl.po - added translated strings as (quickly!) provided by Luis",VCL-968
21f7d1f9d23843ac1639d186c57e61891c897185,,,1,['web/.ht-inc/utils.php'],utils.php: modified getDojoHTML: moved serverProfiles case to the end of the switch statement so generateDojoProfile.py would parse the switch statement correctly,
b986f91911fd35c5b30fe167a86c2a4109d35a00,,,6,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS/Linux/ManagementNode.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/utils.pm', 'mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-1045
Added explicit DataStructure.pm::get_vmhost_profile_password subroutine.

Updated utils.pm::get_vmhost_info to retrieve the cryptsecret if vmprofile.secretid is set.

Removed vmprofile.secretid contstraint from vcl.sql and update-vcl.sql.",VCL-1045
dc51b9cd0d81168a55e5fa5f45aa5f1f1f917350,,,4,"['web/.ht-inc/addomain.php', 'web/.ht-inc/siteconfig.php', 'web/.ht-inc/utils.php', 'web/.ht-inc/vm.php']","VCL-1045 - Method of encrypting sensitive database entries

addomain.php: modified AJsaveResource: added check for getCryptKeyID returning NULL

siteconfig.php: removed TODO comment

utils.php:
-modified checkCryptkey: updated comments
-modified prettyLength: (unrelated to this JIRA) cast $minutes / 60 to int

vm.php: modified AJupdateVMprofileItem: added check for getCryptKeyID returning NULL",VCL-1045
e6dec4b6de786221528752990517d30f839f622d,,,1,['web/.ht-inc/xmlrpcWrappers.php'],"VCL-1045 - Method of encrypting sensitive database entries

xmlrpcWrappers.php: modified XMLRPCcheckCryptSecrets: updated conditional that adds multiple UNION SELECT's to $subquery so the 2nd condition is count($secretids) > 1 instead of just else because $secretids could be empty at this point (thanks Andy!)",VCL-1045
2e43ea289aa36d1d7f24688701380bddc71969a7,,,2,"['NOTICE', 'RELEASE_NOTES']","updated NOTICE for 2.5
partial update of RELEASE_NOTES for 2.5 - still need to create Added/Removed sections for 2.5 and remove Added/Removed for 2.4.2",
cff7c94006d8d5af5d10483c3483723136ff96d7,,,1,['web/.ht-inc/oneclick.php'],oneclick.php: added license header,
5ea87b895bff18f3d80b9bd595ca5a5fc081e0fa,,,147,"['web/themes/dropdownmenus/css/dojo/Calendar.css', 'web/themes/dropdownmenus/css/dojo/Calendar_rtl.css', 'web/themes/dropdownmenus/css/dojo/ColorPalette.css', 'web/themes/dropdownmenus/css/dojo/Common.css', 'web/themes/dropdownmenus/css/dojo/Dialog.css', 'web/themes/dropdownmenus/css/dojo/Dialog_rtl.css', 'web/themes/dropdownmenus/css/dojo/Editor.css', 'web/themes/dropdownmenus/css/dojo/Editor_rtl.css', 'web/themes/dropdownmenus/css/dojo/Menu.css', 'web/themes/dropdownmenus/css/dojo/Menu_rtl.css', 'web/themes/dropdownmenus/css/dojo/ProgressBar.css', 'web/themes/dropdownmenus/css/dojo/TimePicker.css', 'web/themes/dropdownmenus/css/dojo/TimePicker_rtl.css', 'web/themes/dropdownmenus/css/dojo/TitlePane.css', 'web/themes/dropdownmenus/css/dojo/TitlePane_rtl.css', 'web/themes/dropdownmenus/css/dojo/Toolbar.css', 'web/themes/dropdownmenus/css/dojo/Tree.css', 'web/themes/dropdownmenus/css/dojo/Tree_rtl.css', 'web/themes/dropdownmenus/css/dojo/dropdownmenus.css', 'web/themes/dropdownmenus/css/dojo/dropdownmenus.css.save', 'web/themes/dropdownmenus/css/dojo/dropdownmenus_rtl.css', 'web/themes/dropdownmenus/css/dojo/form/Button.css', 'web/themes/dropdownmenus/css/dojo/form/Checkbox.css', 'web/themes/dropdownmenus/css/dojo/form/Common.css', 'web/themes/dropdownmenus/css/dojo/form/RadioButton.css', 'web/themes/dropdownmenus/css/dojo/form/Select.css', 'web/themes/dropdownmenus/css/dojo/form/Slider.css', 'web/themes/dropdownmenus/css/dojo/form/Slider_rtl.css', 'web/themes/dropdownmenus/css/dojo/images/accordionItemActive.gif', 'web/themes/dropdownmenus/css/dojo/images/accordionItemHover.gif', 'web/themes/dropdownmenus/css/dojo/images/buttonActive.png', 'web/themes/dropdownmenus/css/dojo/images/buttonDisabled.png', 'web/themes/dropdownmenus/css/dojo/images/buttonEnabled.png', 'web/themes/dropdownmenus/css/dojo/images/buttonHover.png', 'web/themes/dropdownmenus/css/dojo/images/calendarDayLabel.png', 'web/themes/dropdownmenus/css/dojo/images/calendarMonthLabel.png', 'web/themes/dropdownmenus/css/dojo/images/calendarYearLabel.png', 'web/themes/dropdownmenus/css/dojo/images/checkmark.gif', 'web/themes/dropdownmenus/css/dojo/images/checkmark.png', 'web/themes/dropdownmenus/css/dojo/images/checkmarkNoBorder.gif', 'web/themes/dropdownmenus/css/dojo/images/checkmarkNoBorder.png', 'web/themes/dropdownmenus/css/dojo/images/circleIcon.gif', 'web/themes/dropdownmenus/css/dojo/images/circleIcon.png', 'web/themes/dropdownmenus/css/dojo/images/comboArrowDown.gif', 'web/themes/dropdownmenus/css/dojo/images/dijitProgressBarAnim.gif', 'web/themes/dropdownmenus/css/dojo/images/dijitProgressBarAnim.psd', 'web/themes/dropdownmenus/css/dojo/images/dndCopy.png', 'web/themes/dropdownmenus/css/dojo/images/dndMove.png', 'web/themes/dropdownmenus/css/dojo/images/dndNoCopy.png', 'web/themes/dropdownmenus/css/dojo/images/dndNoMove.png', 'web/themes/dropdownmenus/css/dojo/images/dojoTundraGradientBg.gif', 'web/themes/dropdownmenus/css/dojo/images/dojoTundraGradientBg.png', 'web/themes/dropdownmenus/css/dojo/images/doubleArrowDown.png', 'web/themes/dropdownmenus/css/dojo/images/doubleArrowUp.png', 'web/themes/dropdownmenus/css/dojo/images/folderClosed.gif', 'web/themes/dropdownmenus/css/dojo/images/folderOpened.gif', 'web/themes/dropdownmenus/css/dojo/images/i.gif', 'web/themes/dropdownmenus/css/dojo/images/i_half.gif', 'web/themes/dropdownmenus/css/dojo/images/i_half_rtl.gif', 'web/themes/dropdownmenus/css/dojo/images/i_rtl.gif', 'web/themes/dropdownmenus/css/dojo/images/leaf.gif', 'web/themes/dropdownmenus/css/dojo/images/loading.gif', 'web/themes/dropdownmenus/css/dojo/images/menu.png', 'web/themes/dropdownmenus/css/dojo/images/minusButton.gif', 'web/themes/dropdownmenus/css/dojo/images/no.gif', 'web/themes/dropdownmenus/css/dojo/images/noX.gif', 'web/themes/dropdownmenus/css/dojo/images/plusButton.gif', 'web/themes/dropdownmenus/css/dojo/images/popupMenuBg.gif', 'web/themes/dropdownmenus/css/dojo/images/preciseSliderThumb.gif', 'web/themes/dropdownmenus/css/dojo/images/preciseSliderThumb.png', 'web/themes/dropdownmenus/css/dojo/images/preciseSliderThumbFocus.gif', 'web/themes/dropdownmenus/css/dojo/images/preciseSliderThumbFocus.png', 'web/themes/dropdownmenus/css/dojo/images/progressBarAnim-1.png', 'web/themes/dropdownmenus/css/dojo/images/progressBarAnim-2.png', 'web/themes/dropdownmenus/css/dojo/images/progressBarAnim-3.png', 'web/themes/dropdownmenus/css/dojo/images/progressBarAnim-4.png', 'web/themes/dropdownmenus/css/dojo/images/progressBarAnim-5.png', 'web/themes/dropdownmenus/css/dojo/images/progressBarAnim-6.png', 'web/themes/dropdownmenus/css/dojo/images/progressBarAnim-7.png', 'web/themes/dropdownmenus/css/dojo/images/progressBarAnim-8.png', 'web/themes/dropdownmenus/css/dojo/images/progressBarAnim-9.png', 'web/themes/dropdownmenus/css/dojo/images/progressBarAnim.gif', 'web/themes/dropdownmenus/css/dojo/images/progressBarAnim.psd', 'web/themes/dropdownmenus/css/dojo/images/progressBarEmpty.png', 'web/themes/dropdownmenus/css/dojo/images/progressBarFull.png', 'web/themes/dropdownmenus/css/dojo/images/radioButtonActive.png', 'web/themes/dropdownmenus/css/dojo/images/radioButtonActiveDisabled.png', 'web/themes/dropdownmenus/css/dojo/images/radioButtonActiveHover.png', 'web/themes/dropdownmenus/css/dojo/images/radioButtonDisabled.png', 'web/themes/dropdownmenus/css/dojo/images/radioButtonEnabled.png', 'web/themes/dropdownmenus/css/dojo/images/radioButtonHover.png', 'web/themes/dropdownmenus/css/dojo/images/sliderEmpty.png', 'web/themes/dropdownmenus/css/dojo/images/sliderEmptyVertical.png', 'web/themes/dropdownmenus/css/dojo/images/sliderFull.png', 'web/themes/dropdownmenus/css/dojo/images/sliderFullFocus.png', 'web/themes/dropdownmenus/css/dojo/images/sliderFullVertical.png', 'web/themes/dropdownmenus/css/dojo/images/sliderFullVerticalFocus.png', 'web/themes/dropdownmenus/css/dojo/images/sliderThumb.png', 'web/themes/dropdownmenus/css/dojo/images/sliderThumbFocus.gif', 'web/themes/dropdownmenus/css/dojo/images/sliderThumbFocus.png', 'web/themes/dropdownmenus/css/dojo/images/smallArrowDown.png', 'web/themes/dropdownmenus/css/dojo/images/smallArrowUp.png', 'web/themes/dropdownmenus/css/dojo/images/splitContainerSizerH-thumb.png', 'web/themes/dropdownmenus/css/dojo/images/splitContainerSizerH.png', 'web/themes/dropdownmenus/css/dojo/images/splitContainerSizerV-thumb.png', 'web/themes/dropdownmenus/css/dojo/images/splitContainerSizerV.png', 'web/themes/dropdownmenus/css/dojo/images/spriteArrows.gif', 'web/themes/dropdownmenus/css/dojo/images/spriteArrows.png', 'web/themes/dropdownmenus/css/dojo/images/spriteRoundedIconsSmall.gif', 'web/themes/dropdownmenus/css/dojo/images/spriteRoundedIconsSmall.png', 'web/themes/dropdownmenus/css/dojo/images/tabActive.png', 'web/themes/dropdownmenus/css/dojo/images/tabClose.gif', 'web/themes/dropdownmenus/css/dojo/images/tabClose.png', 'web/themes/dropdownmenus/css/dojo/images/tabCloseHover.gif', 'web/themes/dropdownmenus/css/dojo/images/tabCloseHover.png', 'web/themes/dropdownmenus/css/dojo/images/tabDisabled.png', 'web/themes/dropdownmenus/css/dojo/images/tabEnabled.png', 'web/themes/dropdownmenus/css/dojo/images/tabHover.gif', 'web/themes/dropdownmenus/css/dojo/images/tabHover.png', 'web/themes/dropdownmenus/css/dojo/images/titleBar.png', 'web/themes/dropdownmenus/css/dojo/images/titleBarBg.gif', 'web/themes/dropdownmenus/css/dojo/images/tooltipConnectorDown.gif', 'web/themes/dropdownmenus/css/dojo/images/tooltipConnectorDown.png', 'web/themes/dropdownmenus/css/dojo/images/tooltipConnectorLeft.gif', 'web/themes/dropdownmenus/css/dojo/images/tooltipConnectorLeft.png', 'web/themes/dropdownmenus/css/dojo/images/tooltipConnectorRight.gif', 'web/themes/dropdownmenus/css/dojo/images/tooltipConnectorRight.png', 'web/themes/dropdownmenus/css/dojo/images/tooltipConnectorUp.gif', 'web/themes/dropdownmenus/css/dojo/images/tooltipConnectorUp.png', 'web/themes/dropdownmenus/css/dojo/images/treeExpand_leaf.gif', 'web/themes/dropdownmenus/css/dojo/images/treeExpand_leaf_rtl.gif', 'web/themes/dropdownmenus/css/dojo/images/treeExpand_loading.gif', 'web/themes/dropdownmenus/css/dojo/images/treeExpand_minus.gif', 'web/themes/dropdownmenus/css/dojo/images/treeExpand_minus_rtl.gif', 'web/themes/dropdownmenus/css/dojo/images/treeExpand_mius.gif', 'web/themes/dropdownmenus/css/dojo/images/treeExpand_plus.gif', 'web/themes/dropdownmenus/css/dojo/images/treeExpand_plus_rtl.gif', 'web/themes/dropdownmenus/css/dojo/images/treeHover.png', 'web/themes/dropdownmenus/css/dojo/images/validationInputBg.gif', 'web/themes/dropdownmenus/css/dojo/images/validationInputBg.png', 'web/themes/dropdownmenus/css/dojo/images/warning.png', 'web/themes/dropdownmenus/css/dojo/layout/AccordionContainer.css', 'web/themes/dropdownmenus/css/dojo/layout/BorderContainer.css', 'web/themes/dropdownmenus/css/dojo/layout/ContentPane.css', 'web/themes/dropdownmenus/css/dojo/layout/SplitContainer.css', 'web/themes/dropdownmenus/css/dojo/layout/TabContainer.css', 'web/themes/dropdownmenus/css/dojo/layout/TabContainer_rtl.css']","VCL-981 - Create a New Theme That Is More Responsive for Mobile Devices

removing themes/dropdownmenus/css/dojo since it is just a copy of Dojo css with a few tag changes that are handled by the copydojocss.sh script",VCL-981
f4ae55c5160683c1943c719015e7d4faa09d6495,,,7,"['web/locale/po_files/es_CR/vcl.po', 'web/locale/po_files/es_MX/vcl.po', 'web/locale/po_files/fr_CA/vcl.po', 'web/locale/po_files/ja_JP/vcl.po', 'web/locale/po_files/pt_PT/vcl.po', 'web/locale/po_files/vcl.po.template', 'web/locale/po_files/zh_CN/vcl.po']","VCL-968 - Localization updates for 2.5 

updated .po files for 2.5
added LICENSE header to vcl.po.template",VCL-968
d541f6e959fbb2d0b3bbc7997621978afdeb2627,,,1,['web/.ht-inc/cryptkey/.htaccess'],"VCL-1045 - Method of encrypting sensitive database entries

adding cryptkey directory for storing web server's private key",VCL-1045
6ae63b5a2a30e57032d5f40251c150d3a446d4a1,,,5,"['web/locale/po_files/es_CR/vcl.po', 'web/locale/po_files/es_MX/vcl.po', 'web/locale/po_files/fr_CA/vcl.po', 'web/locale/po_files/pt_PT/vcl.po', 'web/locale/po_files/vcl.po.template']","VCL-968 - Localization updates for 2.5

update vcl.po.template and vcl.po for es_CR, es_MX, fr_CA, pt_PT: added a few added/changed lines from requests.php, image.php, and authentication.php

generated lines by running the following command while in the .ht-inc directory:
xgettext -o - -ki -k_ --no-wrap -x ../locale/po_files/vcl.po.template requests.php image.php utils.php authentication.php authmethods/*.php help.php oneclick.php sitemaintenance.php statistics.php userpreferences.php",VCL-968
b07859566c401b3d0bdd2dd92d296c7d3e56dd70,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-1045
Added optional algorithm, algorithmoption, keylength arguments to utils.pm::set_management_node_cryptkey_pubkey.",VCL-1045
c60937cfef153edf3aa6d7708884334f5b9a6e7f,,,2,"['managementnode/lib/VCL/Module/OS/Linux/ManagementNode.pm', 'managementnode/lib/VCL/utils.pm']","VCL-1045
Renamed utils.pm::update_reservation_cryptsecret to call_check_crypt_secrets and updated API call to XMLRPCcheckCryptSecrets.",VCL-1045
65b46a34b59b035797d1e925e07f4926a7eb3fae,,,1,['managementnode/bin/vcld'],"VCL-887
Removed calls to switch_state in vcld. These would only be called if a module failed to load.

Added call to update_request_state in vcld::die_handler to prevent requests from being stuck in pending.",VCL-887
b7624452ead9fd25ea2a30571baaacba2db9a032,,,3,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/utils.pm']","VCL-867
Renamed Windows.pm::ad_join to ad_join_ps to differentiate it from the experimental ad_join_wmic.

Fixed problems with passwords containing special characters in ad_join_ps. Single quotes are now escaped.

Added debugging output to the script generated in ad_join_ps and ad_search.

Replaced utils.pm::get_active_directory_domain_credentials with get_management_node_ad_domain_credentials, called from DataStructure.pm::get_domain_credentials.

Added DataStructure.pm::get_domain_credentials, called from Windows.pm::ad_search instead of utils.pm::get_active_directory_domain_credentials. When retrieving credentials for a domain other than one assigned to the image of the current reservation, VCL object access is required to decrypt the password.",VCL-867
041140d94ec66a391bf50ffd99950c68b6cd0b8b,,,2,"['managementnode/bin/install_perl_libs.pl', 'managementnode/lib/VCL/Module/OS/Linux/ManagementNode.pm']","VCL-1045
Added use Crypt::Rijndael to ManagementNode.pm.

Changed ManagementNode.pm::decrypt_cryptsecret to use Crypt::Rijndael as the cipher instead of Crypt::OpenSSL::AES. Crypt::Rijndael is available via yum whereas AES is not. Also enclosed Crypt::CBC->new in an eval block because it may call die if it fails.

Added code to ManagementNode.pm::generate_private_key_file to backup a previously existing private key file if the 'force' flag is passed which will overwrite it.

Updated ManagementNode.pm::create_text_file to create the parent directory if it does not previously exist.",VCL-1045
600b42bfd4545eb17a98d88d2c8c78ff8a9d2687,,,1,['web/.ht-inc/addomain.php'],"VCL-1045 - Method of encrypting sensitive database entries

addomain.php: modified validateResourceData: changed to get $return['password'] and $return['password2'] directly from $_POST instead of calling processInputVar so that special characters are not removed",VCL-1045
0acd7b96f21613b94e20884f8b779e0d80f5ab13,,,5,"['web/.ht-inc/addomain.php', 'web/.ht-inc/utils.php', 'web/.ht-inc/vm.php', 'web/.ht-inc/xmlrpcWrappers.php', 'web/js/vm.js']","VCL-1045 - Method of encrypting sensitive database entries

addomain.php:
-modified submitToggleDeleteResourceExtra: changed call to deleteSecrets to call deleteSecretKeys to reflect function rename
-modified AJsaveResource: added code to handle a web server missing a cryptsecred for a value being set; now creates a new secret key, encrypts submitted password, and encrypts new secret key with any public keys already having entries for the old secret key
-modified addResource: changed call to getSecretID to call getSecretKeyID to reflect function rename
-modified addEditDialogHTML: (unrelated to this JIRA) added help text for domaindnsname and dnsserverhelp

utils.php:
-modified initGlobals: added defines for crypto parameters: SYMALGO, SYMOPT, SYMLEN, ASYMALGO, ASYMOPT, and ASYMLEN; when values need to be updated in the future due to standards changing, these can be changed to cause everything to use new values
-modified checkCryptkey: set algorithm and key length from defined constants; add used crypto parameters to cryptkey table when inserting keys
-modified encryptData decryptData: added parameters to accept crypto parameters; set used crypto algorithm, key length, and mode from arguments
-removed encryptDataAsymmetric
-modified encryptDBdata: get crypto parameters from database; renamed call to decryptSecret to call decryptSecretKey to reflect function rename
-renamed encryptSecret to encryptSecretKey and moved to be before definition of decryptSecretKey; modified to get padding information from database and default to PKCS1 OAEP if a cryptkey is passed for $cryptkey instead of a key id
-renamed decryptSecret to decryptSecretKey and added code to determine padding from constant
-renamed getSecretID to getSecretKeyID; renamed call to encryptSecret to call encryptSecretKey to reflect function rename; added crypto parameters to INSERT; added check for dbLastInsertID returning < 1; renamed call to encryptSecrets to call encryptWebSecretKeys to reflect function rename
-renamed deleteSecrets to deleteSecretKeys
-renamed encryptSecrets to encryptWebSecretKeys; renamed call to encryptSecret to call encryptSecretKey to reflect function rename; added crypto parameters to INSERT
-renamed updateSecrets to checkCryptSecrets; moved chunk of function to separate functions
-added getMNcryptkeyUpdates (code from checkCryptSecrets)
-added addMNcryptkeyUpdates (code from checkCryptSecrets)
-modified addRequest: renamed call to updateSecrets to call checkCryptSecrets to reflect function rename
-modified getVMProfiles: removed rsakey and rsapub from returned data
-modified addContinuationsEntry: added crypto parameters to call to encryptData
-modified getContinuationsData: added crypto parameters to call to decryptData
-modified xmlrpccall: renamed XMLRPCupdateSecrets to XMLRPCcheckCryptSecrets

vm.php:
-modified editVMInfo: removed fields for RSA Public Key and RSA Private Key File; removed help for rsapubhelp and rsakeyhelp
-modified AJupdateVMprofileItem: removed rsakey and rsapub from preg_match validation; removed code that uses rsapub and calls encryptDataAsymmetric and allow new code to handle all password encryption; renamed call to deleteSecrets to call deleteSecretKeys to reflect function rename; added code to handle if web server is missing a cryptsecret entry for this password field

xmlrpcWrappers.php: renamed XMLRPCupdateSecrets to XMLRPCcheckCryptSecrets; added check for specified reservationid existing in database; added code to return 'noupdate' if no secretids are missing; modified query to handle finding cryptsecrets for management nodes for which the web server is also missing cryptsecrets; call addMNcryptkeyUpdates to do insert into cryptsecret table; added error return code for case of web server not being able to add any cryptsecret entries; added partial return code for when web server can only add some cryptsecret entries

vm.js: modified getVMprofileDataCB: removed references to prsakey and prsapub",VCL-1045
88237445bae9202b6604c71e023f1e1e3150e5d8,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-1045 - Method of encrypting sensitive database entries

vcl.sql and update-vcl.sql: added algorithm, algorithmoption, and keylength to cryptkey and cryptsecret",VCL-1045
7060f4e71cde9a3d45d52019cb2050c217585c23,,,4,"['managementnode/bin/install_perl_libs.pl', 'managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS/Linux/ManagementNode.pm', 'managementnode/lib/VCL/utils.pm']","VCL-1045
Implemented code so that $self->data->get_image_domain_password() returns a decrypted password string.

Added subroutines:
* DataStructure.pm::get_image_domain_password
* ManagementNode.pm::get_private_key_file_path
* ManagementNode.pm::_get_private_key_object_from_file
* ManagementNode.pm::extract_public_key_from_private_key_file
* ManagementNode.pm::check_encryption_keys
* ManagementNode.pm::generate_private_key_file
* ManagementNode.pm::decrypt_cryptsecret
* utils.pm::get_management_node_cryptkey_pubkey
* utils.pm::set_management_node_cryptkey_pubkey
* utils.pm::get_management_node_cryptsecret_info
* utils.pm::get_management_node_cryptsecret_value
* utils.pm::delete_management_node_cryptsecret
* utils.pm::update_reservation_cryptsecret

Added cryptkey/crypsecret data to return value from utils.pm::get_image_active_directory_domain_info. (This is mainly for debugging, the values from this hash aren't used.)

Added perl-Crypt-CBC to install_perl_libs.pl, now used by ManagementNode.pm.

Updated DataStructure.pm::SUBROUTINE_MAPPINGS to match current schema for AD tables.",VCL-1045
b9659a6407a6b3ecf48b2a1c19a6747ef0356b35,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-1045 - Method of encrypting sensitive database entries

vclsql and update-vcl.sql: removed constraints for addomain.secretid - the constraint doesn't work out well because there can be duplicate entries for secretid in cryptsecret",VCL-1045
40c38b5c3007a85b2e6d81a15a29ab674a1aecf9,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","Removed line which was printing unnecessary warning every time AddConstraintIfNotExists was called in update-vcl.sql.

Updated indentation in vcl.sql and update-vcl.sql to only use spaces. There were a few lines indented with tabs.",
daaa7f495dde9f2b35171a7fc801fce918cf722c,,,2,"['managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm']","VCL-1052
Removed check for vmprofile.vmdisk = dedicated and repository path not configured in VMware.pm::capture.  Added logic to VMware.pm::reclaim_vmhost_disk_space to prevent possibility of images being deleted if the repository is not configured.

Other
Added caching of return values in the following subroutines since the results are static for a given host:
* VIM_SSH.pm::get_config_option_descriptor_info
* VIM_SSH.pm::get_highest_vm_hardware_version_key
* VIM_SSH.pm::get_config_option_info
* VIM_SSH.pm::get_config_option_guest_os_info
* VIM_SSH.pm::get_supported_guest_os_ids",VCL-1052
83834bc875b5db38492a297f9e92040593168f5a,,,1,['managementnode/lib/VCL/Module/OS/Linux/firewall/iptables.pm'],"VCL-1031
Added iptables comment to all rules added by VCL in iptables.pm -- some of the original NAT rules were not adding comments. Updated all comment text to begin with 'VCL: ' for consistency.",VCL-1031
303064799d67d6fcdc3c870be633cca1d3d4cbd5,,,1,['managementnode/lib/VCL/Module/OS/Linux/init/Upstart.pm'],"VCL-966
Added check to Upstart.pm::_get_service_info to not set the service control method to the service utility if a service was previously detected as being controlled by initctl.",VCL-966
29951aac6e6c8a0910af3ef6204d786e15d93776,,,3,"['managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm']","VCL-1031
Removed setting of default gateway in ifcfg file in Linux.pm::set_static_public_address. This sub calls set_static_default_gateway so it doesn't need to be explicitly set in the ifcfg file. It also wasn't using OS.pm::get_correct_default_gateway.

Removed optional $default_gateway argument from Linux.pm::set_static_default_gateway to eliminate duplicate logic in figuring out which address to use.

Changed Ubuntu.pm::set_static_public_address and Windows.pm::set_static_public_address to call OS.pm::get_correct_default_gateway instead of get_management_node_public_default_gateway.",VCL-1031
261d7ae2ebcd91e8e11afc3af3655512fd51b2c2,,,3,"['managementnode/lib/VCL/Module/OS/Linux/firewall/firewalld.pm', 'managementnode/lib/VCL/Module/OS/Linux/firewall/iptables.pm', 'managementnode/lib/VCL/Module/OS/Linux/firewall/ufw.pm']","VCL-971
Updated ufw.pm::save_configuration to add the '*<table>' lines as it finds them which could be intermingled with lines containing 'vcl'. It was previously assuming everything belonged in 'filter'.

Updated iptables.pm::get_table_info to handle text in the jump section of a rule that contains special characters such as square brackets. The code was previously passing what it found to a s/// regex. This was failing if the text contained special regex characters. Rewrote regex which locates the jump section to exclude any part of a subsequent match section.

Tested using Ubuntu/ufw for both a NAT host and client and it worked fine.",VCL-971
8542c6974582b8bdde6f729cc754990be4c7a88c,,,5,"['web/.ht-inc/addomain.php', 'web/.ht-inc/utils.php', 'web/.ht-inc/vm.php', 'web/.ht-inc/xmlrpcWrappers.php', 'web/js/vm.js']","VCL-1045 - Method of encrypting sensitive database entries

addomain.php:
-modified AJsaveResource: $olddata['secretid'] should never be 0 so removed check for it; will need to handle setting password from a new web server that doesn't have an entry for $olddata['secretid'] in cryptsecret
-modified addResource: moved call to getSecretID and encryptDBdata to before inserting entry in addomain so that there can be a foreign key constraint on addomain.secretid

utils.php:
-modified encryptSecrets: changed to only encrypt $secret with cryptkeys for web servers; cryptsecret entries will be created for management nodes when reservations are made requiring access to them
-added updateSecrets: adds any entries to cryptsecret needed to process a given requestid
-modified addRequest: added call to updateSecrets
-modified getVMProfiles: removed getting password in query and added pwdlength and secretid; pwdlength can be checked to determine if a value is set or if it is NULL; this prevents the web server from ever even reading the password
-modified getDojoHTML: (unrelated to this JIRA) removed addOnLoad to connect hiding profileDlg to cancelVMprofileChange (never enabled modifying a vmhost's profile from the virtual hosts part of the site)

vm.php:
-modified editVMInfo: removed commented out code for changing a vm host's profile
-modified AJupdateVMprofileItem: encrypt password using new crypt code; older method using rsapub is still in place but will probably get removed later
-modified AJnewProfile: modified insert query to include repositoryimagetypeid and datastoreimagetypeid so that foreign key constraints are not violated

xmlrpcWrappers.php: modified XMLRPCupdateSecrets: updated to accept a reservation id; only adds cryptsecret entries needed for the management node processing the reservation id; this limits access to encrypted information to only systems that need it

vm.js:
-removed changeVMprofile, cancelVMprofileChange, submitChangeProfile, and submitChangeProfileCB: never enabled modifying a vmhost's profile from the virtual hosts part of the site
-modified getVMprofileDataCB: instead of setting password fields to the actual password, if pwdlength is not zero, fill them with placeholder data
-modified updateProfile: if field is password, check for original placeholder data; if placeholder data there, notify user that password is unchanged",VCL-1045
ad5c92b98640997d5ff1ceb855d5ba454d9f38a8,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-1045 - Method of encrypting sensitive database entries

vcl.sql:
-updated addomain: set username and password to not allow NULL; added secretid and key for secretid
-added cryptkey
-added cryptsecret
-updated vmprofile: added secretid and key for secretid
-added constraints for addomain
-added constraints for cryptsecret
-added constraint for vmprofile.secretid

update-vcl.sql:
-updated addomain: set username and password to not allow NULL; added secretid and key for secretid
-added cryptkey
-added cryptsecret
-added call to AddColumnIfNotExists to add vmprofile.secretid
-added call to AddIndexIfNotExists to add key for vmprofile.secretid
-added constraints for addomain
-added constraints for cryptsecret
-added constraint for vmprofile.secretid",VCL-1045
f37d1c90e8f7fd0188f73f47aa0db6f9fbdf7d0c,,,2,"['managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/State.pm']","VCL-1051
Added checkpoint state check in State.pm::reservation_failed and Windows.pm::create_update_cygwin_startup_scheduled_task.",VCL-1051
17834068022c82b37653851778cb0edbb57e49c5,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT.pm'],"VCL-1051
Added 'checkpoint' where checking for request state = 'image' in xCAT.pm.",VCL-1051
4ca655bd77c8f7cac6f823ee967602882c294a15,,,2,"['managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/utils.pm']","VCL-887
Removed utils.pm::switch_state. It's no longer called.",VCL-887
8af23f8f76908913a40d3b67759711f915f9b330,,,3,"['managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/reclaim.pm']","VCL-1051
Added checks in State.pm::state_exit for checkpoint state.

Removed condition that prevented the request state from being updated to 'complete' if current request state is 'deleted' and the new request state is anything other than 'complete'. If state_exit got called during the 'deleted' state with arguments set to 'failed', the request state would be left in 'pending' when the process ended.

VCL-887
Changed call in new.pm::process from switch_state to state_exit.

Removed no longer used utils.pm::switch_state subroutine.

Removed unused $self->data->get_* variables from new.pm.

Other
Removed unreachable call to exit; in reclaim.pm.",VCL-1051
798bcf47e2d1f8ffe50020201843a2cbcedeab1e,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-972
firewalld.pm::remove_direct_chain_rules calls 'firewall-cmd --permanent --direct --remove-rule'. This command only works if passed the exact output for a rule from 'firewall-cmd --permanent --direct --get-rules'. The output will contain single quotes under some circumstances such as if the existing rule contains a comment. There is no way I have found for the command to work if the output is altered such as replacing the single quotes with double quotes.

run_ssh_command doesn't work if the command argument contains single quotes because it encloses the argument in single quotes. There is no way to escape single quotes within a single quoted string. Instead, run_ssh_command was updated to break the argument up if it contains single quotes and enclose the single quotes in double quotes.",VCL-972
c44e51c6a2d4db9b732a83b463e83eb4c5d0f4df,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-887
Removed legacy subroutines that are no longer called:
* utils.pm::check_ssh
* utils.pm::getusergroupmembers
* utils.pm::is_request_imaging
* utils.pm::known_hosts
* utils.pm::update_reservation_addomain (decided not to use reservation.addomainid)

Other
Added utils.pm::pfd which prints format_data output. It is only used for development.",VCL-887
0981e42c5eadebb3fdbb743cabb7086f16855f9e,,,1,['managementnode/lib/VCL/Module/OS/Linux/init/systemd.pm'],"VCL-915
Fixed bug introduced in revision 1794763. Removed attempt to delete 'ext_ssh' if 'ext_sshd' was passed as the argument to systemd.pm::delete_service. There's no need to attempt to delete 'ext_ssh' with systemd (Upstart only).",VCL-915
9fc55cb938fc2d30c9deb4a90fccddfebaecd10c,,,2,"['managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/new.pm']","VCL-1051
Added check for 'checkpoint' state in:
* xCAT.pm::DESTROY
* new.pm::computer_not_being_used",VCL-1051
5efafdb3fdd5bbaeb4fcf254a69c8d193c862e43,,,2,"['managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/reserved.pm']","VCL-1048
Rearranged State.pm::state_exit so that the request state is updated as late as possible. Previously, the NAT cleanup was done after the request was set to 'complete'. This caused the 'complete' state to be processed and the request was deleted before the previous process exited.",VCL-1048
e4fdff954201a9c535ad9c7977d28639193e431a,,,8,"['managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm', 'managementnode/lib/VCL/Module/OS/Linux/firewall/firewalld.pm', 'managementnode/lib/VCL/Module/OS/Linux/firewall/iptables.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/utils.pm']","VCL-1031

Updated Module.pm::create_nathost_os_object to check to make sure various things were correct before returning true, including:
* public IP and internal IP defined
* firewall object is defined
* firewall object implements nat_configure_reservation and nat_configure_host

Added code to set NAT host public and internal IP addresses in NAT host OS's DataStructure object. These were available to the OS object of the computer being loaded but not the NAT host OS or its firewall object.

Moved calls to nat_configure_host and nat_configure_reservation from OS.pm::process_connect_methods to OS.pm::reserve. process_connect_methods is called after the user clicks Connect. These NAT steps added time between clicking Connect and actually being able to connect. These steps can be safely done earlier in reserve.

Renamed Linux.pm::set_default_gateway  and Windows.pm::set_public_default_route to set_static_default_gateway so they match.

Updated Linux.pm::set_default_gateway to add DEFROUT=no to ifcfg files in order to completely override a different DHCP-assigned route.

Added call to set_static_default_gateway in OS.pm::update_public_ip_address if computer is assigned to a NAT host, DHCP is used, and the computer's current gateway isn't the NAT host's internal IP address. This forces the computer to use the NAT host's address as its gateway.

Added OS.pm::get_correct_default_gateway to reduce duplicate code. It checks if NAT is used, or public IP is static/DHCP assigned.

Added OS.pm::set_config_file_parameter to make it easier to add or modify settings in various types of config files.

Added code to Linux.pm::pre_capture to delete any route files that may have been added by set_static_default_gateway. Also added lines to clean out HOSTNAME and GATEWAY lines from network file if they exist.

Improved Linux.pm::enable_ip_forwarding to configure /etc/sysctl.conf rather than simply calling 'echo 1 > /proc/sys/net/ipv4/ip_forward'. This wasn't persisting across reboots which is problematic for NAT hosts.

Updated firewalld.pm::delete_chain to accept a chain name pattern argument.

Updated iptables.pm NAT host configuration to use dedicated chains.",VCL-1031
6e77b04885da92f933776d4d98749fa791fff0ad,,,4,"['web/.ht-inc/addomain.php', 'web/.ht-inc/secrets-default.php', 'web/.ht-inc/utils.php', 'web/.ht-inc/xmlrpcWrappers.php']","VCL-1045 - Method of encrypting sensitive database entries

addomain.php:
-added submitToggleDeleteResourceExtra: needed to be able to delete entries from cryptsecret before deleting entries from addomain
-modified AJsaveResource and addResource: added code to encrypt password field and set secretid field for entry corresponding to encrypted password

secrets-default.php:
-changed description for $cryptkey to generate a 32 byte string instead of 16
-removed $cryptiv: this should be random for every encrypted piece of data

utils.php:
-moved require_once for phpseclib files to initGlobals and only if needed
-modified initGlobals: added check for existance of openssl_encrypt function; if exists, set USE_PHPSECLIB to 0 and base64 decode $cryptkey, otherwise, require_once needed files and set USE_PHPSECLIB to 1; set global $ivsize to 16
-added checkCryptkey
-modified encryptData: made more generic; accepts $cryptkey as an argument, randomly generates $iv each call, changed cypher to be 256 bit, if encryption fails, return NULL, prepend $iv to encrypted data before base64 encoding it
-modified decryptDAta: made more generic; accepts $cryptkey as an argument, splits base64 decoded data in to $iv and $cryptdata, changed cypher to be 256 bit, return false if decryption failes
-added encryptDBdata
-added decryptSecret
-added getSecretID
-added deleteSecrets
-added getCryptKeyID
-added encryptSecret
-added encryptSecrets
-modified getADdomains: added secretid to returned data
-modified addContinuationsEntry: pulled in $cryptkey global; pass $cryptkey to encryptData
-modified getContinuationsData: pulled in $cryptkey global; pass $cryptkey to decryptData
-modified xmlrpccall: added registration for XMLRPCupdateSecrets

xmlrpcWrappers.php: added XMLRPCupdateSecrets",VCL-1045
750c561b3b51473c9bb7755bcbc6f473dde7916d,,,33,"['web/.ht-inc/phpseclib/Crypt/AES.php', 'web/.ht-inc/phpseclib/Crypt/Base.php', 'web/.ht-inc/phpseclib/Crypt/Blowfish.php', 'web/.ht-inc/phpseclib/Crypt/DES.php', 'web/.ht-inc/phpseclib/Crypt/Hash.php', 'web/.ht-inc/phpseclib/Crypt/RC2.php', 'web/.ht-inc/phpseclib/Crypt/RC4.php', 'web/.ht-inc/phpseclib/Crypt/RSA.php', 'web/.ht-inc/phpseclib/Crypt/Random.php', 'web/.ht-inc/phpseclib/Crypt/Rijndael.php', 'web/.ht-inc/phpseclib/Crypt/TripleDES.php', 'web/.ht-inc/phpseclib/Crypt/Twofish.php', 'web/.ht-inc/phpseclib/File/ANSI.php', 'web/.ht-inc/phpseclib/File/ASN1.php', 'web/.ht-inc/phpseclib/File/X509.php', 'web/.ht-inc/phpseclib/Math/BigInteger.php', 'web/.ht-inc/phpseclib/Net/SCP.php', 'web/.ht-inc/phpseclib/Net/SFTP.php', 'web/.ht-inc/phpseclib/Net/SFTP/Stream.php', 'web/.ht-inc/phpseclib/Net/SSH1.php', 'web/.ht-inc/phpseclib/Net/SSH2.php', 'web/.ht-inc/phpseclib/PHP/Compat/Function/array_fill.php', 'web/.ht-inc/phpseclib/System/SSH/Agent.php', 'web/.ht-inc/phpseclib/System/SSH_Agent.php', 'web/.ht-inc/phpseclib/bootstrap.php', 'web/.ht-inc/phpseclib/crypt.html', 'web/.ht-inc/phpseclib/docbook.css', 'web/.ht-inc/phpseclib/intro.html', 'web/.ht-inc/phpseclib/math.html', 'web/.ht-inc/phpseclib/misc_crypt.html', 'web/.ht-inc/phpseclib/net.html', 'web/.ht-inc/phpseclib/openssl.cnf', 'web/.ht-inc/phpseclib/sym_crypt.html']","VCL-1045 - Method of encrypting sensitive database entries

updating version of phpseclib to 1.0.6",VCL-1045
125ed0c7ba9fb531fc584b3d672cd4579ddc5678,,,1,['web/.ht-inc/groups.php'],"VCL-1050 - Adding a new user group doesn't include the affiliation of the default owner

group.php: modified editOrAddGroup: modified default for $data['owner'] when adding a new user group to include affiliation",VCL-1050
8c404d224de1563e5e8dfe82d8f6daca10825cd0,,,3,"['managementnode/lib/VCL/Module/OS/Linux/firewall/firewalld.pm', 'managementnode/lib/VCL/Module/OS/Linux/firewall/iptables.pm', 'managementnode/lib/VCL/utils.pm']","VCL-1049
Added subroutines:
* iptables.pm::nat_delete_orphaned_reservation_chains
* iptables.pm::get_table_chain_names
* utils.pm::get_all_reservation_ids

VCL-1031
Updated regex's in iptables.pm::get_table_info to detect exclamation marks enclosed in single quotes, as may be returned by 'firewall-cmd --permanent --direct --get-all-rules'. The quotes were throwing off the detection of a MASQERADE rule when a CentOS 7/firewalld host is used as a NAT host.

Commented out some notify messages in iptables.pm and firewalld.pm which were generating a lot of noise.",VCL-1049
ddcd12f1b0ce3aa84bd8964ab4f715c0bf76249c,,,1,['managementnode/lib/VCL/Module/State.pm'],"VCL-1048
Rearranged steps to determine if nat_sanitize_reservation should/can be called in State.pm::state_exit to prevent OS and firewall objects from being created needlessly.",VCL-1048
3632e2d00f2a486257f335fecbeeab8eff806ffd,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-1048
While working on NAT cleanup code, noticed utils.pm::update_log_ending could use some cleanup. Cleaned up header comments. Improved vcld.log messages a bit.",VCL-1048
fc95d26498ea6f4409b7dbea9fc7ba19179662b5,,,1,['managementnode/lib/VCL/DataStructure.pm'],"VCL-1040
Removed *_inuse_check keys from DataStructure.pm's %SUBROUTINE_MAPPINGS variable. They were not being used and get_cluster_inuse_check would never work as written because of case inconsistency.

Other
Removed inclusion of a potential argument from a notify() call in DataStructure.pm::automethod. It may not be defined.",VCL-1040
8a5853819b3d8d50d9928f49a510ad91b0005c9c,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-1013
Removed Windows.pm::setup_check subroutine and vcld -setup 'Check Windows OS Module' menu item. It was only checking for XP and 2003 product keys.",VCL-1013
cde8f8379abbf422ea7a8c773f4eb7cadb4b9cfa,,,2,"['managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/init/Upstart.pm']","VCL-966
Added optional check for a @PROHIBITED_COMMANDS array in an init module when being initialized by Linux.pm::get_init_modules.

Added @PROHIBITED_COMMANDS containing 'chkconfig' to Upstart.pm. CentOS images were trying to use Upstart.pm because it was only checking for the existence of the 'initctl' command, which exists on CentOS.",VCL-966
1df23e51ebcd14028724a8064bbde96c072db458,,,4,"['managementnode/lib/VCL/Module/OS/Linux/firewall/iptables.pm', 'managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/image.pm', 'managementnode/lib/VCL/reclaim.pm']","VCL-1048
Replaced calls in image.pm from legacy utils.pm::switch_state to state_exit and removed explicit calls to exit.

Renamed iptables.pm::sanitize_nat_reservation to nat_sanitize_reservation to match format of other NAT subroutines.

Added code to State.pm::state_exit to call nat_sanitize_reservation if NAT is used and (argument was passed to set log.ending or the next request state is (timeout|deleted|complete|image|checkpoint).

Removed call to sanitize_nat_reservation from reclaim.pm::process.",VCL-1048
b6eb1c00a59ba77c6070977ea54fa4099354a59e,,,1,['web/.ht-inc/utils.php'],"VCL-1044 - getVariable returns wrong value if $incparams == 1 and variable has been set in $_SESSION['variables']

utils.php: modified getVariable: added to conditional checking for variable in $_SESSION['variables'] to skip check and get data from database if $incparams is passed as 1",VCL-1044
7e360105dd69a22b4882f093b8f6486a63032113,,,2,"['managementnode/lib/VCL/inuse.pm', 'managementnode/lib/VCL/reserved.pm']","VCL-866
Added call to request_state_changed in reserved.pm and inuse.pm after the connection timeout is reached. There's a small window where a user may have initiated a capture or made a revision production which wouldn't have been caught.",VCL-866
959212ce8fc0479fa63ac1b6c943d668ff6d0254,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-1043
Modified regex in utils.pm::kill_child_processes to not generate a warning if a ps output line begins with a space. Also added a check to make sure it was passed an argument.",VCL-1043
24fb74b35d7c0543d13e51260fe33a62beca4abe,,,3,"['managementnode/bin/vcld', 'managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/utils.pm']","VCL-919
Added dedicated utils.pm::database_update which returns the number of rows affected, including 0. Separated this from database_execute due to the numerous return type scenarios depending on the query type. Existing calls to database_execute for INSERT statements are unchanged. utils.pm::check_messages_need_validating is the only subroutine currently using database_update;

Renamed utils.pm::message_needs_validating to check_messages_need_validating and reworked it. It's now fully functional.

Changed the regex's used in DataStructure.pm::substitute_string_variables and get_invalid_substitution_identifiers to detect additional invalid patterns such as [], [ ], and [foo].

Added call to check_messages_need_validating in vcld.",VCL-919
a7243869ca1d05add67eb3f07ef2930aab96b4f9,,,1,['web/.ht-inc/utils.php'],"VCL-1006 - performance improvements for 2.5

utils.php: modified encryptData and decryptData: changed 4th argument to openssl_[en|de]crypt from defined constant to 1 because defined constant doesn't exist in some versions of php",VCL-1006
4eb8a5447bded9f5c185162a647a1a1ade1eea54,,,2,"['web/.ht-inc/addomain.php', 'web/js/resources/addomain.js']","VCL-277 - Add support for images to join Active Directory domains
VCL-867 - Active Directory Authentication for Windows VM's

modified code to display something in the password field when editing an AD Domain to prevent users from being confused thinking no password was set for the entry - the form is not actually filled with the real password

addomain.php:
-modified addEditDialogHTML: set password fields to be required
-modified validateResourceData: only allow the submitted password field to be empty if editing an existing entry

addomain.js:
-modified addNewResource: removed calls to set required to true for password fields (always required now); added lines to set password values to empty string
-modified inlineEditResourceCB: removed calls to set required to false for password fields (always required now); added lines to set password values to placeholder values
-modified saveResource: if editing an AD Domain and password field values equal the placeholder values, set the password elements in the data array to empty strings",VCL-277
51e02b380d36c00188d2f1780df9df36601527f1,,,1,['web/.ht-inc/privileges.php'],"VCL-1042 - add max reservation times to user lookup information

privileges.php: modified userLookup: added section to display Initial, Extend, and Total times for the user",VCL-1042
aaa4a8f3b0716149a7e5d3318302635372ae70ff,,,2,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/utils.pm']","VCL-919
Extended DataStructure.pm::substitute_string_variables to allow the use of the subroutines explicitly defined in DataStructure.pm such as [is_parent_reservation].

Added subroutines:
* DataStructure.pm::get_invalid_substitution_identifiers
* utils.pm::get_message_variable_info
* utils.pm::message_needs_validating",VCL-919
134454b26cbed6c69ed061e8419ed87dd380b9dd,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-919
Changed replacement strings in (admin|user)message variables in vcl.sql and update-vcl.sql to match updated key names in DataStructure.pm:
[PID] --> [process_pid]
[IMAGE_CAPTURE_TYPE] --> [image_capture_type]
[NOTICE_INTERVAL] --> [notice_interval]

Removed 'substitutions' hash key from each value since it's no longer used.",VCL-919
d38835230475fc442b72c49bc0167def9db9c2b5,,,7,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/image.pm', 'managementnode/lib/VCL/inuse.pm', 'managementnode/lib/VCL/utils.pm']","VCL-919
Removed all custom $substitution_hashref parameters in calls to get_admin_message and get_user_message. The previous values have been added to DataStructure.pm so all replacements are consistent.

Replaced substitution code in Module.pm::_get_message_variable with calls to DataStructure.pm::substitute_string_variables. This code was mostly duplicated and improved in DataStructure.pm.

Added the following keys to DataStructure.pm %SUBROUTINE_MAPPINGS. These allow the backend code to update the values in $self->data and have them available to be substituted in user and admin values:
* image_capture_type
* notice_interval

Added calls to set_notice_interval in inuse.pm::notify_user_future_endtime and notify_user_endtime_imminent so that [notice_interval] is properly replaced in messages.

Renamed keys in DataStructure.pm %SUBROUTINE_MAPPINGS:
* request_pid --> process_pid
* request_ppid --> process_ppid

Updated State.pm::initialize to call set_process_pid/ppid rather than passing DataStructure object to clunky utils.pm::set_hash_process_id. Removed utils.pm::set_hash_process_id.

Removed keys from DataStructure.pm %SUBROUTINE_MAPPINGS:
* request_is_cluster_parent (redundant, replaced calls with is_parent_reservation)
* request_is_cluster_child (was not called)",VCL-919
9fdc19eb1fc8ef8134e3e37f5b7f4c47278045e4,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-915
Added '-o retry=0' to mount command in Linux.pm::nfs_mount_share. By default, NFS mount will retry for up to 2 minutes. VCL's execute attempt was giving up before the mount command.",VCL-915
547e19eac6dc746d537ae8e79c04f0533a527948,,,1,['web/.ht-inc/xmlrpcWrappers.php'],"VCL-277 - Add support for images to join Active Directory domains
VCL-867 - Active Directory Authentication for Windows VM's

xmlrpcWrappers.php: modified XMLRPCautoCapture: added adauthenabled to $data array passed to $obj->addResource; set its value from base image; if value is 1, also add addomainid and baseou from base image; this was causing auto captures to fail because adauthenabled was not definied when referenced in addResource",VCL-277
d939e397f63991ac223e82ee2f935dd925dd0a71,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-915
Added call to OS.pm::unmount_nfs_shares in Linux.pm::pre_capture.

Updated Linux.pm::add_fstab_nfs_mount to add a comment after every line it adds to /etc/fstab that includes 'Added by VCL'.

Added calls to Linux.pm::remove_matching_fstab_lines with the argument 'Added by VCL' to Linux.pm::pre_capture and sanitize.",VCL-915
dc5d58506bc34d42f5e020e0ad3c0132f5809cbf,,,8,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm', 'managementnode/lib/VCL/Module/OS/Linux/init/SysV.pm', 'managementnode/lib/VCL/Module/OS/Linux/init/systemd.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/utils.pm']","VCL-915
Renamed subroutines to make them easier to find in a list:
* Linux.pm::mount_nfs_share --> nfs_mount_share
* Linux.pm::unmount_nfs_share --> nfs_unmount_share

Added OS.pm::unmount_nfs_shares which reverts what mount_nfs_shares does for the sanitize stage.

Added code to nfs_mount_share and nfs_unmount_share to add/remove corresponding lines from /etc/fstab.

Added code to delete the local mount directory after unmounting if it is empty. Also added code to delete the local directory if nfs_mount_share fails and the directory did not exist beforehand.

Added call to OS.pm::unmount_nfs_shares in Linux.pm::sanitize.

Reworked how the Linux code caches service info:
* Added Linux.pm::_delete_cached_service_info
* Added $no_cache argument to Linux.pm::service_exists

Added calls to Linux.pm::_delete_cached_service_info to install_package subroutines.

Removed service_exists subroutine from systemd.pm. By design it should be a utility module and shouldn't ever check this. All logic should be in Linux.pm.

Fixed parsing issue in SysV.pm. It was considering a line beginning with ""Info:"" to be a service name.

Other
Found a few locations where lines were missing trailing semicolons but no Perl warnings were being generated.",VCL-915
94a28e9952cda0e066d7bb121c34962c21981191,,,1,['managementnode/lib/VCL/Module/OS/Linux/firewall/iptables.pm'],"VCL-1031
Removed $no_cache option from iptables.pm::get_table_info. Stale table info was causing warnings and any speed increase isn't worth the trouble.",VCL-1031
8315a8b4331041e9600492df95e0ccf1a64967a3,,,1,['managementnode/lib/VCL/Module/OS/Linux/firewall/iptables.pm'],"VCL-1031
Fixed iptables.pm::get_table_info to work with older versions of iptables such as with CentOS 5 which don't support the --list-rules (-S) argument. If the iptables command fails for this reason, an attempt is made to call iptables-save. If successful, its output is parsed to match the format of iptables --list-rules.

Updated iptables.pm::_insert_rule to use full iptables argument names for consistency.",VCL-1031
acfed978e00c9b53aca80912f39f7a31552c3f62,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-915
Added check in the section of Linux.pm::mount_nfs_share that installs missing NFS packages. It was attempting to yum install nfs-common on CentOS 7 and that package only exists for Ubuntu.",VCL-915
ec4fcfa64e099036bc3cfbb60540fd6ed0afef1e,,,2,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/State.pm']","Fixed trivial typos in OS.pm::mount_nfs_shares (there was a double semicolon) and State.pm::request_state_changed (""begain""). Commented out notify() call in request_state_changed if nothing changed to reduce useless vcld.log output.",
8b3069f12076fb2e0d4241503b3cc9982ac23e05,,,1,['managementnode/lib/VCL/reserved.pm'],"VCL-866
Changed call to is_request_deleted in reserved.pm::user_acknowledged to request_state_changed. It wasn't detecting makeproduction before a user clicked Connect.",VCL-866
34e67a201fc185f9f3260a9b50bbf88afa7da6c3,,,1,['managementnode/lib/VCL/Module.pm'],"VCL-1038
Added check in Module.pm::create_nathost_os_object. If the NAT host OS object would have been a non-Linux.pm-based module or UnixLab.pm, 'VCL::Module::OS::Linux' is used.",VCL-1038
7fd548e5d61a8b11a42347b960f389d23a0eaccf,,,3,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm']","VCL-915
Added OS.pm::mount_nfs_shares. It is currently only called from Linux.pm::reserve but was added to OS.pm so support for Windows can be added in the future.

Made minor changes to how arguments are handled in Linux.pm::mount_nfs_share. Added $ignore_missing_remote_directory_error argument to allow warnings to be suppressed the first time an attempt is made to mount a share.",VCL-915
95da39d7ad35c398090fca49fb8e4da6d8b6c5cf,,,1,['managementnode/bin/install_perl_libs.pl'],"VCL-1037
Commented out hard-coded URL to CPAN mirror in install_perl_libs.pl. The URL is no longer available. If not specified, it automatically selects a mirror.",VCL-1037
0b68a86067acf134eacc8a9ee1ee02cd7d67e6e4,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-867
Commented out code in Windows.pm::ad_join which checks if the computer's PowerShell version supports Rename-Computer and attempts to join the domain and set the hostname with a single reboot. This was not consistently working. The rename occasionally fails with 'The directory service is busy.' This needs additional troubleshooting and problem detection/recovery. Fow now, 2 reboots will be required.

Added command to set registry key to disable 'Change primary DNS suffix when domain membership changes' in Windows.pm::set_computer_hostname. When joining AD, the computer's DNS suffix was getting set to the AD domain name regardless of whether it was correct.",VCL-867
84565cd01eff559fcb000315c30ef423ac9994aa,,,1,['managementnode/lib/VCL/Module/OS/Linux/init/Upstart.pm'],"VCL-966
Fixed typo in Upstart.pm from previous commit of the file.",VCL-966
1e902dec8a2650f9d402b2a1ffba3ad251334f3f,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-867
Updated AD code to use user service principal formatted names when authenticating. It was failing if the username was longer than 15 characters.

Added experimental Windows.pm::ad_join_wmic subroutine. It joins a computer to the domain using wmic.exe instead of constructing a PowerShell script.",VCL-867
15e03932c3ce0f8de7467d3d04c2fa6e9fe02186,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm'],"Made trivial change to VMware.pm regarding whether or not to fully initialize the object if request.state = 'test'. AFAIK, I'm the only one who uses this state during development.",
0085ae059649cff00c741c4366948cd576be3ea2,,,55,"['managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/ESXi.pm', 'managementnode/lib/VCL/Module/OS/Linux/ManagementNode.pm', 'managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm', 'managementnode/lib/VCL/Module/OS/Linux/UnixLab.pm', 'managementnode/lib/VCL/Module/OS/Linux/firewall.pm', 'managementnode/lib/VCL/Module/OS/Linux/firewall/firewalld.pm', 'managementnode/lib/VCL/Module/OS/Linux/firewall/iptables.pm', 'managementnode/lib/VCL/Module/OS/Linux/firewall/ufw.pm', 'managementnode/lib/VCL/Module/OS/Linux/init.pm', 'managementnode/lib/VCL/Module/OS/Linux/init/SysV.pm', 'managementnode/lib/VCL/Module/OS/Linux/init/Upstart.pm', 'managementnode/lib/VCL/Module/OS/Linux/init/systemd.pm', 'managementnode/lib/VCL/Module/OS/OSX.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_10/10.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_10/2016.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5/2003.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5/XP.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/2008.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/2012.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/7.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/8.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/Vista.pm', 'managementnode/lib/VCL/Module/Predictive.pm', 'managementnode/lib/VCL/Module/Predictive/Level_0.pm', 'managementnode/lib/VCL/Module/Predictive/Level_1.pm', 'managementnode/lib/VCL/Module/Predictive/Level_2.pm', 'managementnode/lib/VCL/Module/Provisioning.pm', 'managementnode/lib/VCL/Module/Provisioning/Lab.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vmware_cmd.pm', 'managementnode/lib/VCL/Module/Provisioning/libvirt.pm', 'managementnode/lib/VCL/Module/Provisioning/libvirt/KVM.pm', 'managementnode/lib/VCL/Module/Provisioning/one.pm', 'managementnode/lib/VCL/Module/Provisioning/openstack.pm', 'managementnode/lib/VCL/Module/Provisioning/vbox.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/Module/Semaphore.pm', 'managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/blockrequest.pm', 'managementnode/lib/VCL/healthcheck.pm', 'managementnode/lib/VCL/image.pm', 'managementnode/lib/VCL/inuse.pm', 'managementnode/lib/VCL/makeproduction.pm', 'managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/reclaim.pm', 'managementnode/lib/VCL/reserved.pm', 'managementnode/lib/VCL/utils.pm']","VCL-887
Horizontal separator comments were of varying lengths between 77 and 80 characters. Made them all 80 characters.",VCL-887
5dcb05fed2184bf36126ca1caacdbcea7c5b00fe,,,1,['managementnode/lib/VCL/DataStructure.pm'],"VCL-915
Added DataStructure.pm::substitute_string_variables. It will be used to substitute parts of the NFS remote or local storage paths allowing custom mounts for each user/reservation/etc.

Also cleaned up some comments in DataStructure.pm.",VCL-915
2896b865d9699d532a8f04ff5282629fca11c6b6,,,2,"['managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/init/Upstart.pm']","VCL-966
Reworked Upstart.pm to be able to control some service control functions for services that can't be controlled by initctl.

Added Upstart.pm::_get_service_info. Much of it was previously in get_service_names. Added call to 'service --status-all' after 'initctl list' is executed. The service command may show additional services which can't be controlled by initctl such as xrdp. A hash is constructed containing service name keys and the utility used to control the service (service/initctl) as the values.

Added subroutines:
* Upstart.pm::_controlled_by_service_command
* Upstart.pm::_call_service_start
* Upstart.pm::_call_service_stop
* Upstart.pm::_call_service_restart
* Upstart.pm::_call_service_status

Added code to start_service, stop..., etc to check if the initctl or service command should be used via _controlled_by_service_command. If service is used, the corresponding _call_service_* subroutine is called.

Included code in _call_service_stop to overcome problems due to bugs in the xrdp service. It doesn't always clean up the .pid file and this prevents the service from being restarted.",VCL-966
8c8b5f00990a478179a93db81cc0abc68ed68d02,,,2,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/Predictive/Level_0.pm']","VCL-887
Cleaned up inconsistent code formatting:
* Spacing before/after if statements, parenthesis, etc.",VCL-887
1e319731d8a90a36bbb47f005dd6b775dd4bd5d9,,,20,"['managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/OSX.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/Provisioning.pm', 'managementnode/lib/VCL/Module/Provisioning/Lab.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm', 'managementnode/lib/VCL/Module/Provisioning/libvirt.pm', 'managementnode/lib/VCL/Module/Provisioning/libvirt/KVM.pm', 'managementnode/lib/VCL/Module/Provisioning/one.pm', 'managementnode/lib/VCL/Module/Provisioning/openstack.pm', 'managementnode/lib/VCL/Module/Provisioning/vbox.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/Module/Semaphore.pm', 'managementnode/lib/VCL/blockrequest.pm', 'managementnode/lib/VCL/healthcheck.pm', 'managementnode/lib/VCL/image.pm', 'managementnode/lib/VCL/reclaim.pm', 'managementnode/lib/VCL/utils.pm']","VCL-887
Cleaned up inconsistent code formatting:
* Random mixed-case variable name: Total_days, IPaddress
* Spacing before/after if statements, parenthesis, etc.",VCL-887
3de4c7a6eb56d54e804dd56bc5a56ac02198650e,,,13,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/ESXi.pm', 'managementnode/lib/VCL/Module/OS/Linux/ManagementNode.pm', 'managementnode/lib/VCL/Module/OS/Linux/UnixLab.pm', 'managementnode/lib/VCL/Module/OS/OSX.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6.pm', 'managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/reclaim.pm', 'managementnode/lib/VCL/reserved.pm', 'managementnode/lib/VCL/utils.pm']","VCL-1000
Renamed:
* OS.pm::run_management_node_tools_scripts --> run_stage_scripts_on_computer
* ManagementNode.pm::run_management_node_stage_scripts --> run_stage_scripts_on_management_node

Added:
* OS.pm::run_stage_scripts
run_stage_scripts which calls both run_stage_scripts_on_computer and run_stage_scripts_on_management_node to avoid making the same 2 calls in many locations. Replaced individual calls with single call to run_stage_scripts.

The following were added and only contain a call to OS.pm::run_stage_scripts with the corresponding stage argument:
* OS.pm::post_load
* OS.pm::post_reserve
* OS.pm::post_initial_connection
* OS.pm::post_reservation
* OS.pm::pre_reload

Removed calls to the run*scripts subroutines and added calls to the new subroutines in OS.pm:
* Linux.pm::post_load --> $self->SUPER::post_load
* Linux.pm::post_reserve --> $self->SUPER::post_reserve
* Linux.pm::post_reservation --> $self->SUPER::post_reservation
* ESXi.pm::post_load --> $self->SUPER::post_load (Note: this module is not supported yet)
* OSX.pm::post_load --> $self->SUPER::post_load
* Windows.pm::post_load --> $self->SUPER::post_load
* Windows.pm::post_reserve --> $self->SUPER::post_reserve
* Windows.pm::post_reservation --> $self->SUPER::post_reservation
* Windows.pm::pre_reload --> $self->SUPER::pre_reload
* Version_5.pm.pm::pre_reload --> $self->SUPER::pre_reload
* Version_6.pm.pm::pre_reload --> $self->SUPER::pre_reload

Replaced call to run_management_node_tools_scripts with OS.pm::post_initial_connection in reserved.pm::process causing both computer and management node scripts to be executed.

Changed location where scripts reside that are executed on the management node during the stages to better align with other directories under tools:
* tools/mn_stage_scripts --> tools/ManagementNode/Scripts

Moved execution of vcl_post_load.cmd from Version_5.pm and Version_6.pm to Windows.pm::post_load.


Other
Fixed bug in Windows.pm::_get_os_perl_package. It was using the wrong package for Windows 10 and 2016.

Updated utils.pm::help to include information for all command line options.

Cleaned up and added debugging information to utils.pm::check_time. Parameterized timing window for when preloads are processed to make it easier to configure it to use the variable table in the future.",VCL-1000
a86ac04cb79b87cb8bc90ea5bbaad56b2f8d8425,,,0,[],"VCL-1000
Set svn:ignore=* on all tools/*/Scripts, Updates,  directories except for under Windows/. Removed explicit property on all x86* directories since it's inherited.",VCL-1000
005b455e0f1cc16ce466b1b38563801fec85de50,,,0,[],"VCL-1000
Added tools/ManagementNode.",VCL-1000
ec8c8fa4742490fa2df85edc41341b235b818675,,,0,[],"VCL-1000
Added pre_reload directory for each OS under tools. Removed unwieldy x86* directories under each stage directory.",VCL-1000
cec7468f699ee22aa4ecec6fde8c77c6ec444e8b,,,3,"['managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/inuse.pm']","VCL-866
Added State.pm::request_state_changed subroutine. It returns true if request/lastrequest is different than that of the current process.

Replaced calls to is_request_deleted and check_imaging_request with a call to request_state_changed in State.pm::user_connected and inuse.pm::process.

Removed State.pm::check_imaging_request since it's no longer called.

Other
Added optional $provisioning_perl_package argument to Module.pm::create_provisioning_object. This is only used for testing/development.",VCL-866
a2486445c4a626c32f4b6ab3a637db3074e0bb31,,,1,['managementnode/lib/VCL/Module/Provisioning/libvirt.pm'],"VCL-913
Added logic to libvirt.pm::get_domain_name to limit the maximum length to 48 characters.

Other
Extended libvirt.pm::generate_domain_xml to include some potentially useful information in the domain/VM's description including the load time, management node, request and reservation IDs. It previously only included the image display name.",VCL-913
ef4e97409c5329a399d5e3de3af83b5387eee5e7,,,1,['managementnode/lib/VCL/Module/Provisioning.pm'],"VCL-1036
Updated Provisioning.pm::retrieve_image to calculate the percentage complete when transferring multiple image files and display the progress in vcld.log.",VCL-1036
d9364ce0c5ea09cd3e6e3b1bf99c655bb798ce46,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-1010
Added Windows Server 2016 entries to vcl.sql and update-vcl.sql.",VCL-1010
ddcc3a665dd5619989434ab2207b1e63948a4e3a,,,1,['web/.ht-inc/image.php'],"minor change

image.php: modified Image::addEditDialogHTML: changed 'Cancel' to 'Close' because changes can be done without clicking the submit button",
ee80320b8286d206528f68b9efe43739f6a801c9,,,1,['web/.ht-inc/siteconfig.php'],"VCL-1029 - add a section for managing affiliations to Site Configuration

siteconfig.php: modified Affiliations::deleteValue: fixed bug where most of the stuff in the variable table was getting deleted when deleting an affiliation - backslashes needed another set of escaping",VCL-1029
e9920462f7076ffd7f6e036b15b073421468153a,,,0,[],,
c8e67dddc7be2858548d286efba90b12d7d19480,,,2,"['managementnode/lib/VCL/Module/OS/Linux/UnixLab.pm', 'managementnode/lib/VCL/Module/OS/Linux/firewall/iptables.pm']","VCL-1035
Updated iptables.pm::initialize to make sure 'iptables -L' can be executed without permission denied errors.

Added UnixLab.pm::firewall subroutine which simply returns a generic VCL::Module::OS::Linux::firewall object. This prevents attempts to needlessly initialize other types of firewall modules.",VCL-1035
6af89ca813e4d4090ee179ec5e3489d086a4f20f,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-1031
Updated Linux.pm::firewall to return a generic VCL::Module::OS::Linux::firewall object if none of the specific (iptables, firewalld, ufw) modules could be initialized. This allows you to call '$self->os->firewall->can(...)' without having to check if $self->os->firewall is defined and valid first. Without this, many warnings were generated from Lab.pm.",VCL-1031
6edf68e4b41d1adf0c7774fa18d054db759891b1,,,1,['managementnode/lib/VCL/Module/Provisioning/Lab.pm'],"VCL-1034
Updated Lab.pm::load to not call exit. This was causing the state to get stuck in 'pending' for preload requests. Cleaned up load and node_status subroutines. node_status now returns 'READY' if the computer is responding to SSH, and 'RELOAD' if it is not. The load() subroutine also performs an SSH check. If it is not responding, node_status forces load to be called, which will return false, causing the reservation to fail before the user is presented with the connect button.",VCL-1034
71c3fc13189b68b8604f72e242e8a03b17e4f807,,,1,['web/js/requests.js'],"VCL-1035 - selecting Manage Images->Create/Update an Image doesn't work

requests.js: modified initViewRequests: added a check for dijit.byId('deployimage') being undefined to conditionals at top that cause a timeout to get set to attempt the function later",VCL-1035
0c91eb9088a7bab5009092000f9d3e53e7361d80,,,4,"['web/.ht-inc/siteconfig.php', 'web/.ht-inc/states.php', 'web/.ht-inc/utils.php', 'web/js/siteconfig.js']","VCL-1029 - add a section for managing affiliations to Site Configuration

siteconfig.php:
-modified generalOptions: reordered several options; added conditional to only print AffilShibName block if user has global config permission or the user's affiliation is not Local
-modified AffilTextVariable: added $updatefailmsg, $affils, $allowempty, $allowglobalempty, $globalid, and initializations for them in the __construct function
-modified AffilTextVariable::validateValue: escaped any slashes in $this->constraints before doing the preg_match
-modified AffilTextVariable::getHTML: modified to better handle users not having global site config so that they see the default value from the Global setting and can set the value to an empty string to cause the default value to be used
-modified AffilTextVariable::AJaddAffiliationSetting: set $affils from $this->affils instead of calling getAffiliations
-modified AffilTextVariable::AJupdateAllSettings: modified to better handle users not having global site config so that they can set the value to an empty string to cause the default value to be used
-modified AffilHelpAddress: set $this->allowempty to 1
-modified AffilHelpAddress::setValue: modified to handle $value being NULL
-added AffilWebAddress
-modified AffilKMSserver: set $this->allowempty to 1; set $this->allowglobalempty to 1
-modified AffilTheme: set $this->allowempty to 1
-modified AffilTheme::deleteValue: added code to set theme value to NULL in database rather than just returning 0
-added AffilShibOnly
-added AffilShibName

states.php:
-added affilwebaddress classmapping
-added affilshibonly classmapping
-added affilshibname classmapping

utils.php: modified getAffiliationTheme: updated query to return theme from Global affiliation if passed in affiliation's setting is NULL; if no value found for either, return DEFAULTTHEME setting

siteconfig.js:
-modified AffilTextVariable.prototype.addAffiliationSettingCBextra: fixed problem when adding a new value where the savekeys value was getting an empty string in the list
-modified AffilTextVariable.prototype.saveSettings: if a value of 0 is going to be submitted, change it to 'zero' so that the php function processInputVar will handle it correctly
-added affilwebaddr
-added affilshibonly
-added affilshibname
-modified messages.prototype.init: changed setTimeout from calling this.init to calling messages.init or messages.prototype.init, depending on which one exists",VCL-1029
8cf4eae255c3ac26500898301155a526b0d0a774,,,3,"['managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm']","VCL-974
Added a is_nested_virtualization_supported subroutine to VIM_SSH.pm and vSphere_SDK.pm.

Added call to is_nested_virtualization_supported to VMware.pm::prepare_vmx. The .vmx parameters required for nested VMs now only get added if it can be verified that the host supports it.",VCL-974
a13c89e6875887af51c1b4b85094792f62bd272b,,,1,['managementnode/lib/VCL/Module/Provisioning/libvirt/KVM.pm'],"VCL-911
Oops. Forgot to remove a 'if (1)' condition used for testing in the previous commit.",VCL-911
c041052eed76eb459b8d39a958bc56150d46f008,,,1,['managementnode/lib/VCL/Module/Provisioning/libvirt/KVM.pm'],"VCL-911
Added '-o compat=0.10' option to qemu-img command in KVM.pm::copy_virtual_disk if the destination is the repository.",VCL-911
4c8b79b6618348ada566aa94cc1f0cd9258fdd75,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-962
Added check in set_scheduled_task_credentials for tasks with a curly bracket in the name. These never work. Warning is suppressed.",VCL-962
67659ca6d358aa248f7189e7878081b32cb5bf4f,,,1,['managementnode/lib/VCL/Module/OS/Linux/firewall/firewalld.pm'],"VCL-972
Uncommented call to remove_service in iptables.pm::process_post_load which removes the SSH service to enhance security. SSH is added to a direct rule.

Added a few subroutines to firewalld.pm:
remove_service
* create_zone
* delete_zone
* get_zone_info
* set_zone_target
* add_source
* remove_source
* add_interface
* add_port
* remove_port
* add_service

These could be used to control firewalld in a more traditional manner rather than using direct rules. These aren't currently being called, but are committed in case another approach is explored in the future.",VCL-972
2e1547885ec3503e7bac21f818694e5dfb62e468,,,1,['managementnode/lib/VCL/Module/OS/Linux/firewall/ufw.pm'],"VCL-971
Set subversion properties on ufw.pm.",VCL-971
178710ad1b419207c198fcf316fdf9aca85267b4,,,2,"['managementnode/lib/VCL/Module/OS/Linux/firewall/iptables.pm', 'managementnode/lib/VCL/Module/OS/Linux/firewall/ufw.pm']","VCL-971
Initial commit of ufw.pm which adds support for Ubuntu's ufw firewall configuration.

Updated iptables.pm::delete_chain_references to call delete_rules with the correct parameters rather than looping through rules. This logic was added to delete_rules after delete_chain_references was written.",VCL-971
2fc41e70df28a519ebab99963b8d5f277d96fb52,,,1,['managementnode/lib/VCL/new.pm'],"VCL-874
Moved the call to change the computer state to 'reloading' to before when an image may be transferred from another management node.",VCL-874
071677fde7cb0c94f07ecd9c28a894731bf464a6,,,2,"['managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6.pm']","VCL-1033
Improved Windows.pm::post_load to attempt to retrieve or set the public IP before settings a persistent default route.

Added code in post_load if the retrieval failed and DHCP is used to call 'ipconfig /renew' and check again.

Cleaned up and modernized Windows.pm::ipconfig_renew.

Changed Version_6.pm::wait_for_response to check if the computer is a VM. If so, the total wait time is reduced to 5 minutes from 10-30. If the wait time is reached without a response, an attempt is made to call the provisioning object's power_reset subroutine, then another response loop is attempted.",VCL-1033
666f8b8c527f9fc848aa6307de9a6097e8a32dbe,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-962
Updated Windows.pm::create_startup_scheduled_task to display the command in the vcld.log output if it fails.

Updated create_update_cygwin_startup_scheduled_task to check if the request state is 'image'. If so, set root's password to the known value.  If not, use the reservation password or generate a new one.",VCL-962
35d78a48e76246c666fc60c1888de1fb73b66ea0,,,1,['managementnode/bin/monitor_vcld.pl'],"VCL-923
Updated monitor_vcld.pl to display the PID on every output line, as well as format the lines to match normal vcld.log output for easier parsing.",VCL-923
2e6403931072378fb500aab388eeddf4c76de2d0,,,2,"['managementnode/lib/VCL/Module/OS/Linux/firewall/firewalld.pm', 'managementnode/lib/VCL/Module/OS/Linux/firewall/iptables.pm']","VCL-972
Initial commit of firewalld.pm module.  It's mostly done but needs some finishing touches.  It relies heavily on iptables.pm.",VCL-972
f74196394579da74b4b9cc2c19e4c853d4f8725c,,,3,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux/firewall/iptables.pm']","VCL-1031
Added subroutines:
* DataStructure.pm::is_cluster_request
* DataStructure.pm::get_other_cluster_computer_public_ip_addresses
* iptables.pm::process_cluster
* iptables.pm::get_cluster_chain_name

Added call to firewall module's process_cluster if implemented subroutine in OS.pm::update_cluster.",VCL-1031
23d80a9bc2f6acd87051ebf3a721f97925e64ab2,,,0,[],"VCL-1010
Another try... Set svn properties on Windows_Server_2016 subdirectories.",VCL-1010
79d4beac19b8af3550efce67710e16c48b1f3ad1,,,0,[],"VCL-1010
Set svn properties on Windows_Server_2016 subdirectories.",VCL-1010
eda1566eac3f6a41619fc82285a150ab2ef4d36d,,,0,[],"VCL-1010
Set svn properties on Windows_Server_2016 subdirectories.",VCL-1010
fde84f088fd513e7760b6c79571dc2d5086a44c4,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-1010
Added Windows Server 2016 to OS table.",VCL-1010
66710dacadcfa898cf2469d379bd95ebd2ff47c9,,,1,['managementnode/lib/VCL/Module/OS/Windows/Version_10/2016.pm'],"VCL-1010
Set svn properties on 2016.pm.",VCL-1010
35ee3f000c2037f210061dfc5fc571f3ee18895f,,,1,['managementnode/lib/VCL/Module/OS/Windows/Version_10/2016.pm'],"VCL-1010
Added 2016.pm.",VCL-1010
25ac4340d97eb1fb625930d63564158acff04eee,,,0,[],"VCL-1010
Added tools/Windows_Server_2016.",VCL-1010
a6a924dc3ea4736a04e5aceadda6c0002d434f88,,,2,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/utils.pm']","VCL-1030
Added explicit subroutines to DataStructure.pm:
get_user_affiliation_sitewwwaddress
get_user_affiliation_helpaddress

These get the values for the Global affiliation if not defined for the user's affiliation.

Removed code which had been setting default values from utils.pm::get_user_info.",VCL-1030
1e5fe48410736db3198f693ac29a451edc5fc62e,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm'],"Trivial
Added optional $force argument to VMware.pm::initialize. It normally skips initialization if the request state is 'test'. (This state is probably only used by me for development.) I was often changing the line in initialize that checks if the state is 'test' back and forth when working on VMare and non-VMware code.

Added check to VMware.pm::api.  If the data is undefined, try to call initialize with the force argument set to one. Now, the VMware module gets fully initialized from test.pm as long as $self->provisioner->api() is called once.",
b31c0cc264cc615d19159c78466968413f64e35c,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-1010
Updated regex in Windows.pm::_get_os_perl_package to include checks for '2016' and '10'.",VCL-1010
cced185487accfb5a8e56f77d7ae7d12c68ea05a,,,1,['managementnode/lib/VCL/new.pm'],"VCL-867
Added call to is_ssh_responding before calling pre_reload to eliminate a useless retry delay if the computer is down.",VCL-867
f5db649cd5b1c53c36f8e38f7f4ee2715d066c81,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-1032
Removed /s from 2 regex's in utils.pm causing very slow text processing.

Other
Added utils.pm::format_array_reference. It's currently only used for generating output to help development.",VCL-1032
4a074839e1c6f9c8f0c11d2904acff883bd5e3c8,,,7,"['managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm', 'managementnode/lib/VCL/Module/OS/Linux/firewall/iptables.pm', 'managementnode/lib/VCL/Module/Provisioning.pm', 'managementnode/lib/VCL/reclaim.pm', 'managementnode/lib/VCL/reserved.pm', 'managementnode/lib/VCL/utils.pm']","VCL-1031
(Note: accidentally hit enter on previous commit before finished typing comments. See 1789585 for additional changes.)

Removed all iptables code from Linux.pm and rewrote it in iptables.pm. It now creates and utilizes a different chain for each reservation stage: vcl-post_load, vcl-reserved, vcl-inuse, vcl-pre_capture. When access needs to be revoked, the corresponding chain is simply flushed and deleted. This makes it much safer and easier to determine which rules vcld added and are safe to delete.

Added subroutines:
DataStructure.pm::get_connect_method_protocol_port_array
Linux.pm::get_management_node_connected_ip_address
utils.pm::get_collapsed_hash_reference
firewalld.pm::process_post_load
firewalld.pm::process_reserved
firewalld.pm::process_inuse
firewalld.pm::process_sanitize
firewalld.pm::process_pre_capture
firewalld.pm::get_matching_rules
firewalld.pm::delete_connect_method_rules
firewalld.pm::chain_exists
firewalld.pm::get_pre_capture_chain_name
firewalld.pm::get_post_load_chain_name
firewalld.pm::get_reserved_chain_name
firewalld.pm::get_reservation_chain_name
firewalld.pm::get_inuse_chain_name

Removed subroutines and all calls to them:
Linux.pm::grant_management_node_access
Linux.pm::enable_firewall_port
Linux.pm::disable_firewall_port
Linux.pm::save_firewall_configuration
Linux.pm::get_firewall_configuration
Linux.pm::parse_firewall_scope
Linux.pm::clean_iptables
Ubuntu.pm::clean_iptables
Ubuntu.pm::enable_firewall_port
Ubuntu.pm::disable_firewall_port
Ubuntu.pm::get_firewall_configuration

Renamed subroutines:
iptables.pm::configure_nat --> nat_configure_host
iptables.pm::configure_nat_reservation --> nat_configure_reservation
iptables.pm::add_nat_port_forward --> nat_add_port_forward
iptables.pm::sanitize_reservation --> sanitize_nat_reservation

Added calls to firewall module subroutines if the object implements it:
OS.pm::firewall_compare_update --> firewall/process_inuse
Linux.pm::pre_capture --> firewall/process_pre_capture
Linux.pm::post_load --> firewall/process_post_load
Linux.pm::grant_access --> firewall/process_reserved
Linux.pm::sanitize --> firewall/process_sanitize
reserved.pm::process -->process_inuse

Reworked iptables.pm::delete_rule and renamed it delete_rules.


Other
Added file count to vcld.log output in Provisioning.pm::retrieve_image.

Commented out Linux.pm::get_user_remote_ip_addresses and added a warning comment. This sub isn't being called from anywhere.

Removed /s option from 2 regex's in utils.pm::run_ssh_command. They were causing a subroutine in VIM_SSH.pm to hang for 1-2 minutes while parsing the output.",VCL-1031
b17714a55d9cf49ffa48152c3e5596f32e5b5fca,,,2,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS.pm']","VCL-1031
Added subroutines:
DataStructure.pm::get_connect_method_protocol_port_array

Removed subroutines and all calls to them:
Linux.pm::grant_management_node_access
Linux.pm::
Linux.pm::
Linux.pm::
Linux.pm::
Linux.pm::
Linux.pm::
Linux.pm::


Renamed subroutines:
iptables.pm::configure_nat --> nat_configure_host
iptables.pm::configure_nat_reservation --> nat_configure_reservation
add_nat_port_forward --> nat_add_port_forward

Added calls to firewall module subroutines if the object implements it:
OS.pm::firewall_compare_update --> firewall/process_inuse
Linux.pm::pre_capture --> firewall/process_pre_capture
Linux.pm::post_load --> firewall/process_post_load
Linux.pm::grant_access --> firewall/process_reserved",VCL-1031
4edb51af4d4c15344517be59e223eeaab24f3264,,,1,['web/.ht-inc/siteconfig.php'],"VCL-1029 - add a section for managing affiliations to Site Configuration

siteconfig.php: modified generalOptions: ...and actually made it check for *having* global site configuration permissions rather than *not* having them",VCL-1029
96e0b0d5d3a3d377020a6c8f543425af17d6302b,,,1,['web/.ht-inc/siteconfig.php'],"VCL-1029 - add a section for managing affiliations to Site Configuration

siteconfig.php: modified generalOptions: fixed problem from last commit where conditional checking for user having global site configuration permissions was around the wrong lines",VCL-1029
13b9dd3af189bca120bf359e35027da4310be0c5,,,2,"['web/.ht-inc/siteconfig.php', 'web/js/siteconfig.js']","VCL-1029 - add a section for managing affiliations to Site Configuration
VCL-915 - Add ability to automatically mount NFS share when user logs in

siteconfig.php:
-modified generalOptions: restricted seeing block to manage Affiliations to users with 'Site Configuration (global)' access
-modified GlobalMultiVariable: added $allowduplicates variable
-modified GlobalMultiVariable::__construct: set $this->allowduplicates to 0 as default
-added GlobalMultiVariable::setValues
-modified GlobalMultiVariable::AJaddConfigMultiVal: added check for having proper permissions; added call to $this->setValues and regenerated add, delete, and save continuations which are then sent back in returned data
-modified GlobalMultiVariable::AJdeleteMultiSetting: added check for having proper permissions; added call to $this->setValues and regenerated save continuation which is then sent back in returned data
-modified GlobalMultiVariable::AJupdateAllSettings: wrapped check for duplicate values with check for $this->allowduplicates being false; added call to $this->setValues and regenerated save continuation which is then sent back in returned data
-modified NFSmounts::__construct: set $this->allowduplicates to 1
-added NFSmounts::setValues
-added Affiliations::setValues
-modified Affiliations::AJaddConfigMultiVal: added check for having proper permissions

siteconfig.js:
-modified GlobalMultiVariable.prototype.addNewMultiValCBextra: update add, delete, and save continuations with returned data; added check for keys[0] being an empty string and if so, set it to the id of the item being added
-modified GlobalMultiVariable.prototype.deleteMultiValCBextra and GlobalMultiVariable.prototype.saveCBextra: update save continuation with returned data",VCL-1029
f3c2659e0f857e0ea4506eeef32c7bebad7cf0b3,,,4,"['web/.ht-inc/siteconfig.php', 'web/.ht-inc/states.php', 'web/css/siteconfig.css', 'web/js/siteconfig.js']","VCL-1029 - add a section for managing affiliations to Site Configuration

siteconfig.php:
-modified generalOptions: added affiliation section to top of left column
-modified timeSourceHTML, TimeVariable::getHTML, AffilTextVariable::getHTML, GlobalSingleVariable::getHTML, and GlobalMultiVariable::getHTML: changed object for siteconfigdesc from span to div
-modified GlobalMultiVariable: added $addCBextra, $deleteCBextra, and $saveCBextra class variables
-modified GlobalMultiVariable::__construct: set $type as $this->type; set default values for $addCBextra, $deleteCBextra, and $saveCBextra
-modified GlobalMultiVariable::getHTML: added a div wrapper for everything after the h3 title with a class name of GMV{$this->domidbase}wrapper
-modified GlobalMultiVariable::AJaddConfigMultiVal: changed extrafunc value from hard coded ""addNewMultiValCBextra"" to ""$this->addCBextra""
-modified GlobalMultiVariable::AJdeleteMultiSetting: changed call to deleteVariable to wrapper that calls $this->deleteValue that also checks for return value
-added GlobalMultiVariable::deleteValue
-modified GlobalMultiVariable::AJupdateAllSettings: if call to $this->validateValue returns false, also check for function having set a specific error message; added check for duplicate values being submitted; added check for nothing being changed and if so, return 'noaction' status; changed call to setVariable to call $this->updateValue instead; added extrafunc to returned data
-added GlobalMultiVariable::updateValue
-added Affiliations class that inherits from GlobalMultiVariable


states.php: added $actions['classmapping']['affiliations'] = 'siteconfig';

siteconfig.js:
-modified generalSiteConfigCB: added section to handle 'noaction' response status
-modified GlobalMultiVariable.prototype.addNewMultiValCBextra: added missing semicolon after var func = this.deleteMultiVal
-added GlobalMultiVariable.prototype.saveCBextra
-added affiliation class and instantiation

siteconfig.css:
-modified "".configwidget h3"": set margin-bottom to 0
-modified .siteconfigdesc: set top padding to 5px
-added .GMVaffiliationwrapper
-added #siteconfigconfirmoverlay
-added #affiliationconfirmbox
-added #affilconfirmname
-added #affilconfbox-table
-added #affilconfbox-cell",VCL-1029
69a187fe7f3c2651218a13002ad4309ecd64c816,,,1,['web/.ht-inc/utils.php'],"VCL-959
Changed value of winposstr that gets added to the .rdp files so that when launching the file, the RDP window is opened with the maximum extents. The previous settings caused the window to open with scrollbars and the remote desktop partially hidden.",VCL-959
2407175863a6616c0d5532893547a355422a0fb3,,,4,"['managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/new.pm']","VCL-867
Added Windows.pm::pre_reload. This deletes a computer object from AD before a domain-joined computer gets reloaded, preventing orphaned objects.

Added $self->can check and call to pre_reload in new.pm::reload_image.

Updated OS.pm::get_os_perl_package to try to reuse the module object used to call it if appropriate.

Added Module.pm::create_current_os_object.",VCL-867
d26ed5df2998d1e662516dfb1c8b8974000dcb91,,,1,['managementnode/lib/VCL/Module/Provisioning/vbox.pm'],"VCL-865
Updated 'if (defined(@$x))' calls in vbox.pm to 'if (defined($x))'.",VCL-865
54711a1d5ebafe0e9d4d7c30a50d549a6c393610,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-957
Updated Linux.pm.  Added patterns to $CAPTURE_DELETE_FILE_PATHS so /tmp gets cleaned up.",VCL-957
9025c3d8098814b0ebe11e439063a56de0e3919e,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm'],"VCL-1025
Changed VMware VM naming convention to use an underscore instead of a colon. This only affects the display name. Also removed the shared/dedicated part.",VCL-1025
d072c02048fde57ec74a863d6ee68baac20f99aa,,,1,['managementnode/lib/VCL/Module/OS/Linux/init/systemd.pm'],"VCL-1027
Updated systemd.pm::add_ext_sshd_service to ensure the following lines exist under [Service] in /lib/systemd/system/ext_sshd.service:
StartLimitInterval=0
RestartSec=3s
Restart=on-failure",VCL-1027
4c35215cfc13bb64e69b97f5c3e559f79c4dd7ca,,,1,['managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm'],"VCL-1026
Added Ubuntu.pm::get_product_name.",VCL-1026
9c8a28eb5867c18929ff8f837bd13da626634208,,,1,['managementnode/lib/VCL/Module/OS.pm'],"Trivial
Cleaned up comments in OS.pm::run_management_node_tools_scripts.

Other
Commented out sleep in execute_new. It may not be necessary.",
18b5134bb5e2db6170ba6b5089f0e40be732958e,,,2,"['managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm']","VCL-1010
Added Windows 10 and 2016 keys to %VM_OS_CONFIGURATION in VMware.pm.

VCL-1026
Updated the default values in %VM_OS_CONFIGURATION from WinXPPro to windows7 and other to otherlinux. Also changed the associated default NIC and storage models to the recommended defaults for the corresponding guestOS choice.

Added code to VMware.pm::capture to attempt to retrieve the OS product name and architecture from the running VM before being shutting down. These values are added to the VM's .vmx file after it is powered off, which in turn winds up in the reference .vmx file.

Added VIM_SSH.pm::get_highest_vm_hardware_version_key. It queries the host's capabilities and determines the highest VM virtual hardware version supported.

Added VIM_SSH.pm::get_supported_guest_os_ids. It also queries the host's capabilities and generates a list of valid guestOS values. This is used to verify a particular guestOS is supported. If not, a lesser default is used.

Updated VMware.pm::get_vm_virtual_hardware_version to call the API module's get_highest_vm_hardware_version_key subroutine if implemented. This is used to select the host's latest supported version.

Reworked VMware.pm::get_vm_guest_os to attempt to get both the guestOS and newly added OS product name comment from the reference .vmx. If the product name was retrieved, it attempts to figure out the best guest OS from it. If not, it resorts to the guestOS value from the captured computer. If all else fails, the default value from %VM_OS_CONFIGURATION is used.


Other
Updated experimental code to support VMware ESXi's built-in VNC server in VMware.pm::node_status and prepare_vmx. All of this code is commented out.",VCL-1010
d166b13d36fa0c68d2523ad54ee662db4af2a0b2,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm'],"VCL-1004
Updated VMware.pm::copy_vmdk to use a value of 1 if the copy was extremely fast and the duration was calculated to be 0 seconds.",VCL-1004
aa10b011d3a38b1a54ca47187340e62dad0b2e61,,,7,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/ManagementNode.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Semaphore.pm', 'managementnode/lib/VCL/new.pm']","VCL-1023
Reworked Semaphore.pm to use the new vcldsemaphore table instead of a lockfile on the management node. This allows semaphores to be obeyed for vcld processes running on different management nodes.

Added VMware.pm::get_datastore_directory_semaphore which retrieves a datastore's URL/UUID identifier and uses this to obtain a semaphore instead of the descriptive datastore name. This allows semaphores to be obeyed for a particular directory on a datastore, even if different hosts to mount the same datastore with using different names.

Updated VMware.pm::prepare_vmdk to use get_datastore_directory_semaphore.

Deleted no longer used subroutines:
* Module.pm::does_semaphore_exist
* Semaphore.pm::get_process_semaphore_ids
* Semaphore.pm::get_reservation_semaphore_ids
* Semaphore.pm::semaphore_exists
* Semaphore.pm::get_lockfile_paths
* Semaphore.pm::release_lockfile

Updated Module.pm to not call 'use VCL::Module::Semaphore' at the beginning. This causes subroutine redefined warnings because there's sort of a circular reference the way Module.pm uses Semaphore.pm and Semaphore.pm inherits from Module.pm. Added require and import statement inside of Module.pm::get_semaphore contained within an eval block as a replacement.

Updated new.pm::computer_not_being_used to use utils.pm::get_vcld_semaphore_info instead of calling Semaphore.pm::get_process_semaphore_ids.


Other
Added DataStructure.pm::get_connect_method_info_matching_name. It was used for some experimentation and isn't currently being called, but may be useful in the future.

Updated Linux.pm::get_network_bridge_info to check for exit statuses > 0 instead of anything != 0. Perl occasionally returns -1 even though the command was successful.",VCL-1023
67aba777805a316fd1c85459bb249956720db27d,,,2,"['web/.ht-inc/addomain.php', 'web/js/resources/addomain.js']","VCL-277 - Add support for images to join Active Directory domains
VCL-867 - Active Directory Authentication for Windows VM's

addomain.php: modified AJeditResource and addResource: removed some commented out references to logindescription

addomain.js: removed ADdomain.prototype.colformatter because the only difference from the base class function was for logindescription, which has been removed",VCL-277
5f242bedcf7b35d772f958fc302980f8c1a40093,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-1023
Added subroutines to utils.pm:
* delete_vcld_semaphore
* get_vcld_semaphore_info
* insert_vcld_semaphore

Updated utils.pm::database_execute to return an array with the result and a possible error message. This is used by insert_vcld_semaphore to determine if a duplicate row was attempted to be inserted.",VCL-1023
f3fe12024be0c10ccf55de074ec31fdf7bb59760,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-1023
Added vcldsemaphore table definition to vcl.sql and update-vcl.sql.",VCL-1023
54d875ba2f7d524ac65dfc44104214046a22b893,,,1,['mysql/update-vcl.sql'],"VCL-867
Removed unused columns from addomain table added during development in update-vcl.sql:
* domainNetBIOSName
* domainControllers
* logindescription",VCL-867
ded72ff18865dbb81ba40cf2e93f918ad60d9af9,,,1,['web/.ht-inc/xmlrpcWrappers.php'],"VCL-1022 - API function XMLRPCgetRequestConnectData shows Administrator account for all imaging reservations

xmlrpcWrappers.php: modified XMLRPCgetRequestConnectData: added to conditional checking for reservation being ""forimaging"" to also check that OStype is windows",VCL-1022
c32df1a550e5f4f0554dde90047bc34dfe3c6518,,,1,['web/.ht-inc/states.php'],"VCL-1024 - comment out Server Profile code

forgot to include states.php in last ci command, though I included the description of changes in the commit

states.php: commented out the following: serverProfiles, AJsaveServerProfile, AJserverProfileData, AJdelServerProfile, jsonProfileGroupingGroups, jsonProfileGroupingProfiles, AJaddGroupToProfile, AJremGroupFromProfile, AJaddProfileToGroup, AJremProfileFromGroup, AJserverProfileStoreData, AJfetchRouterDNS",VCL-1024
69a8511fb415032af1848cf51f2d55f5cf323496,,,1,['mysql/vcl.sql'],"VCL-867
Removed unused columns from addomain table added during development in vcl.sql:
* domainNetBIOSName
* domainControllers
* logindescription",VCL-867
f6e3ba16b75b43a5172f139738bd9783b8f9c48c,,,6,"['web/.ht-inc/privileges.php', 'web/.ht-inc/requests.php', 'web/.ht-inc/utils.php', 'web/.ht-inc/xmlrpcWrappers.php', 'web/js/newresservercommon.js', 'web/js/requests.js']","VCL-1024 - comment out Server Profile code

privileges.php: modified getNodePrivileges and getNodeCascadePrivileges: added conditional to queries including userprivtype table
to not include records where name is configAdmin or serverProfileAdmin

requests.php:
-modified newReservationHTML: commented out block dealing with $extraimages; commented out block that displays dropdown for selecti
ng a Server Profile; changed div name from deployprofilediv to deployserverdiv
-modified AJupdateWaitTime: commented out block that adds additional images available from Server Profiles
-modified AJnewRequest: commented out 'serverprofileid' and $data['profileid'] from $fields and $values
-modified processRequestInput: commented out code dealing with $extraimages; commented out code processing $return['profileid']

states.php: commented out the following: serverProfiles, AJsaveServerProfile, AJserverProfileData, AJdelServerProfile, jsonProfileGroupingGroups, jsonProfileGroupingProfiles, AJaddGroupToProfile, AJremGroupFromProfile, AJaddProfileToGroup, AJremProfileFromGroup, AJserverProfileStoreData, AJfetchRouterDNS

utils.php:
-modified initGlobals: commented out require_once form serverprofiles.php when mode is xmlrpccall or xmlrpcaffiliations; commented
out require_once's in serverProfiles case
-modified checkAccess: commented out serverProfiles case in switch statement
-commented out getServerProfiles and getServerProfileImages
-modified getOverallUserPrivs and getTypes: added conditional to query to not return userprivtypes configAdmin or serverProfileAdmin
-modified getNavMenuData: commented out serverProfileAdmin section
-modified getDojoHTML: commented out serverProfiles cases; commented out continuation for AJserverProfileStoreData and addOnLoad call to populateProfileStore

xmlrpcaffiliations.php: modified XMLRPCdeployServer: commented out code related to $extraimages

newresservercommon.js: commented out populateProfileStore, populateProfileStoreCB, deployProfileChanged, getServerProfileData, getServerProfileDataDeployCB

requests.js:
-commented out profilestoredata global
-modified resetNewResDlg: commented out reset for deployprofileid
-modified selectResType: commented out adding hidden class to deployprofileslist; commented out code related to profilestore
-modified getDeployData: commented out line setting data.profileid",VCL-1024
f4c3cd7707b88ed10915287ce6ce8bebd3d9cf5e,,,1,['web/.ht-inc/utils.php'],"VCL-1006 - performance improvements for 2.5
VCL-277 - Add support for images to join Active Directory domains
VCL-867 - Active Directory Authentication for Windows VM's

utils.php:
-modified getUserResources: removed some checks for second level arrays existing before setting a value in them as the values can be set directly without directly defining the arrays first
-added $privdataset to header documentation for getUserResourcesUp, getUserResourcesDown, and addNodeUserResourcePrivs
-modified addOwnedResources and getResourcesFromGroups: if $includedeleted is 0 and $type is managementnode, add conditional to query to not include deleted managementnodes
-modified getRequestInfo: removed domainDNSName from header documentation
-modified getUserComputerMetaData: changed array_key_exists to isset
-modified selectInputHTML: reverted 3 issets back to array_key_exists because $dataArr[$id] could be a string
-modified getMaintItems: changed array_key_exists to isset
-modified sortKeyIndex: reverted 2 issets back to array_key_exists because $a could be a string
-modified getConnectMethods: changed array_key_exists to isset
-modified validateHostname: fixed bug where dashes were not allowed in the hostname
-modified getFSlocales: changed array_key_exists to isset",VCL-1006
ebe4decc3ca8b34d1341b0cecb38c1517888064c,,,1,['web/.ht-inc/siteconfig.php'],"VCL-915 - Add ability for Linux images to mount NFS shares

siteconfig.php: modified GlobalMultiVariable::existingValuesHTML: added check at beginning of foreach loop for $this->units[$key] being set and continuing to next iteration of loop if not",VCL-915
b51fef3ba2d995f0733eeedb796eba1fecefa06d,,,4,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/Provisioning.pm', 'managementnode/lib/VCL/utils.pm']","VCL-867
Made another attempt to update DataStructure.pm::_automethod to not display warnings when get_image_domain* is called and the data is not defined. The previous change wasn't catching all calls.

Added utils.pm::get_active_directory_domain_credentials. This is needed to determine the domain username and password in order to remove a computer from a domain after the preloaded image was reconfigured to not join a domain. The normal $self->data->get_image_domain* information is not available in this case.

Updated Provisioning.pm to check if OS module implements a node_status_os_check subroutine and call it if it does.

Added Windows.pm::ad_check. It contains all logic to determine if an image is configured for AD, if a computer is already joined to a domain, and calls the necessary subroutines to either unjoin the domain, join the domain, or both if the computer is joined to a different domain or located in the wrong OU. Removed similar logic from ad_join.

Replaced call from ad_join to ad_check in Windows.pm::post_load.

Added Windows.pm::node_status_os_check which simply returns the value of ad_check. Naming reason: ad_check is called elsewhere and Windows-specific. node_status_os_check is more general and may perform additional functions in the future.

Reworked Windows.pm::ad_unjoin to call wmic.exe rather than building Powershell script. Need to test this and determine which is better.

Updated Windows.pm::ad_search, ad_delete_computer, and ad_search_computer to accept domain DNS name argument. This is used when a computer is joined to a domain but shouldn't be (image was reconfigured after computer was loaded).",VCL-867
8e894fc7771ef5950cafa45ec59bccfbf337f8f0,,,1,['web/themes/dropdownmenus/page.php'],"VCL-981 - create a new theme that is more responsive for mobile devices

added check for $menu[$item] being set in section that generates drop down for Reporting because not all users see the dashboard and user lookup links",VCL-981
ced83c98ef1191d072fbeeedc46e211ae33456e5,,,1,['web/.ht-inc/privileges.php'],"privileges.php: modified userLookup: set inline style for table header for ""Images User Has Access To"" to vertical-align: top",
cddd8b1b5286511d0a60c5b897c38331125a0393,,,1,['web/.ht-inc/groups.php'],"VCL-1021 - restrict deleting newimages and newvmimages computer groups

groups.php:
-modified editOrAddGroup: added displaying of name under ""Edit Resource Group""; restricted editing name of manageNewImages user group; restricted editing name of computer/newimages and computer/newvmimages resource groups
-modified confirmEditOrAddGroup: changed check of when existing name of group is printed to handle resource groups as well as user groups
-modified AJconfirmDeleteGroup: restricted deleting manageNewImages user group; added code to restrict deleting computer/newimages and computer/newvmimages resource groups",VCL-1021
a82a2cb62025635f63549036f4609776728378e8,,,2,"['web/.ht-inc/requests.php', 'web/.ht-inc/utils.php']","VCL-277 - Add support for images to join Active Directory domains
VCL-867 - Active Directory Authentication for Windows VM's

requests.php: modified AJconnectRequest: if domainDNSName is set for image and password is empty, append domainDNSName to username

utils.php:
-modified getRequestInfo: added domainDNSName to returned data as part of the $data['reservations'] array
-modified sendRDPfile: if domainDNSName is set for image and password is empty, append domainDNSName to username",VCL-277
d1bdbe867cb654d20d69032990abff2eb1c412ff,,,1,['web/.ht-inc/authentication.php'],modified selectAuth: explicitly defined $methods as an array to clear a php warning message,
2df3070f506134320586b2d9c8da0cbde9fda28f,,,1,['managementnode/lib/VCL/DataStructure.pm'],"VCL-867
Updated DataStructure.pm::_automethod to not display warnings when get_image_domain* is called and the data is not defined.",VCL-867
459b5ca2eaca6950fcc8277cc607bdf7e314af31,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-867
Added $no_cache argument to get_image_active_directory_domain_info to cause vcld to pick up changes made to AD configuration.",VCL-867
036bae5be3adbcd3b174233e1a62b49e49c8193f,,,5,"['web/locale/po_files/es_CR/vcl.po', 'web/locale/po_files/es_MX/vcl.po', 'web/locale/po_files/fr_CA/vcl.po', 'web/locale/po_files/pt_PT/vcl.po', 'web/locale/po_files/vcl.po.template']","fixed spelling of ""receive"" from managementnode.php file",
eb3fe59c029ede59b918a5b06b1c16258c475f22,,,1,['web/.ht-inc/managementnode.php'],"modified addEditDialogHTML: fixed spelling of ""receive"" in ipconfighelp text",
e760851de0e37d994da03da778a1e1e7a8176e49,,,1,['web/.ht-inc/resource.php'],modified mapByResGroupHTML and mapByMapToGroupHTML: minor adjustment to width of Add and Remove buttons,
661bbbbea3d8de7a29440ab2cbe9a43526efdd0b,,,1,['web/.ht-inc/resource.php'],modified groupByResourceHTML and groupByGroupHTML: minor adjustment to width of Add and Remove buttons,
01314e959e2a0214ebc4e5c4495c54a721412145,,,3,"['web/.ht-inc/addomain.php', 'web/.ht-inc/utils.php', 'web/js/resources/addomain.js']","VCL-277 - Add support for images to join Active Directory domains
VCL-867 - Active Directory Authentication for Windows VM's

removed code referencing domainNetBIOSname, domaincontrollers, and logindescription

addomain.php:
-modified fieldWidth, fieldDisplayName, AJsaveResource, addResource, addEditDialogHTML, and validateResourceData to remove references to above listed fields
-modified AJsaveResource - removed check for duplicate name since it is being done in validateResourceData

utils.php: modified getADdomains: removed references to above listed fields

addomain.js:
-modified inlineEditResourceCB, resetEditResource, saveResource, and saveResourceCB to remove references to above listed fields",VCL-277
d751c671a284a9dd299fcce721b5b4cd0731f0c9,,,2,"['web/.ht-inc/privileges.php', 'web/js/privileges.js']","VCL-1003 - drag and drop support for moving privilege nodes

fixed problem where deleting a node and a set of children threw an error because nodes were not necessarily deleted from lowest children up, resulting in calling a child to be deleted after it had already been deleted due to its parent being deleted

privileges.php: modified AJsubmitDeleteNode: changed printing call to removeNodesFromTree to send 2 arguments - $deleteNodes and $activeNode; removed connecting fadeOut onEnd to deleteDialog hide

privileges.js: modified removeNodesFromTree: changed to accept 2 arguments, list of nodes to check for being an revert move parent, and node to delete along with any children; moved call to removeNodesFromTreeCB to outside of for loop",VCL-1003
6311c816faeab655c72889d1db3bf88e39f92ead,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-867
Fixed bug in regex in Windows.pm::ad_search which was preventing computer objects from being deleted from AD.",VCL-867
607ee4ae3902b10c4b2f6564398dc5a30c6a1cff,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-867
Removed extraneous argument from ad_search_computer that was used previously during development. It was causing warnings in vcld.log.",VCL-867
111a8ea1f90a9f59f7c4a4837a0688bcfd4c4976,,,1,['managementnode/lib/VCL/Module/Provisioning/docker.pm'],"VCL/VCL-854 Docker provisioning module
:https://issues.apache.org/jira/browse/VCL-854

This is a docker provisioning module for VCL and has been tested in VCL2.4.2 and Docker version 1.12.6. 
All the impelentation details and configurations will be shown in the Jira issue soon.",
f6f2b142aa8fec344536d6ff990b1d1e5b92940a,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-1013
Removed code to delete specific file patterns from clean_hard_drive.

Moved cleanmgr.exe code to run_cleanmgr. Removed explicit registry key paths. Added code to query registry and build .reg file dynamically based on what features exist.

Removed call to defragment_hard_drive in Windows.pm::pre_capture.

Removed code that deleted VCL*.cmd scripts under Windows group policy directory. This was pre-2.1.

Cleaned up Windows.pm::delete_files_by_pattern.",VCL-1013
523d9df8b01a87638cb6925bce68c54ec39ee8b7,,,1,['managementnode/lib/VCL/Module/Provisioning/libvirt.pm'],"VCL-1008
Updated libvirt.pm::capture to not fail if it finds multiple disks. However, only the first disk is captured as of now.",VCL-1008
163d5e2c1ebcd51c010f6356075ec76c2ab3353e,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-915
Tweaked Linux.pm::unmount_nfs_share to attempt a lazy unmount if the regular unmount fails.

VCL-1000
Updated Linux.pm to use $self->mn_os when calling run_management_node_stage_scripts.

Other
Added entry to $CAPTURE_DELETE_FILE_PATHS in Linux.pm to delete files in root's home directory containing *-v*.xml. KVM domain .xml files were being left over.",VCL-915
71c94363b4e2cb757ab983cbaa3f06ebbe018c48,,,4,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6.pm', 'managementnode/lib/VCL/utils.pm']","VCL-867
Initial commit for Active Directory code.

DataStructure.pm:
* Added image_domain* getters/setters
* Added get_image_domain_dns_servers sub (mainly added to return simple array for consistency)

utils.pm:
* Added get_image_active_directory_domain_info sub. Added call to get_request_info.
* Added update_reservation_addomain sub.

Windows.pm:
* Added code in pre_capture to call ad_unjoin.
* Added code to post_load to call ad_join. Reworked the code which may have rebooted the computer at the end of post_load to eliminate unnecessary reboots.
* Updated create_user to determine if a random password needs to be set.
* Added code to delete_user to remove the user from local groups if not a local account.
* Added subroutines:
** ad_get_current_domain
** ad_delete_computer
** ad_join
** ad_join_prepare
** ad_search
** ad_search_computer
** ad_search_ou
** ad_unjoin
** ad_user_exists
** create_update_cygwin_startup_scheduled_task
** enable_dynamic_dns
** enable_windows_feature
** get_ad_computer_ou_dn
** get_current_computer_hostname
** get_group_members
** get_windows_features
** get_windows_feature_info
** is_windows_feature_enabled
** powershell_command_exists
** remove_user_from_group
** run_powershell_as_script
** run_powershell_command
** set_static_dns_servers
** should_set_user_password


VCL-1010
Removed get_kms_client_product_key. It was previously moved to Windows.pm.
Added to Windows.pm:
* get_kms_client_product_keys
* get_kms_client_product_key

Other
Added insert_natport to export list in utils.pm so it can be called from elsewhere.

Modified utils.pm::notify to not strip leading spaces from every line. It was removing formatting which is useful.

Removed legacy calls to code in Windows.pm::pre_capture which disable/stop a ntsyslog service and disable dynamic DHCP.",VCL-867
826eb91db5d88803c3961317b88bfb63a4ecd369,,,1,['managementnode/lib/VCL/Module/Semaphore.pm'],"VCL-924
Determined running lsof command on management node is unsafe and commented out code. It was only used for vcld.log informational purposes do determine which process owned a lock on a file. The lsof command occasionally sends ALRM signals which may cause vcld processes to behave badly.",VCL-924
b09f6cabef738e6d005850ab5687153a1763ff8c,,,1,['managementnode/lib/VCL/Module/State.pm'],"VCL-1000
Added ability for management node OS object to call $self->os to access the computer OS object. This is used in ManagementNode.pm::create_management_node_reservation_info_json_file. It needs information from the computer OS's DataStructure.",VCL-1000
a3e4ca0072d40d30f5108804e08c9fc32bd633f6,,,2,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux/ManagementNode.pm']","VCL-1000
Moved the code for the execution of scripts on the management node to ManagementNode.pm because it's more appropriate. Updated calls in OS.pm to $self->mn_os.

VCL-867
Added subroutines to OS.pm, used to configure static DNS servers for the Active Directory code:
* get_dns_servers
* get_private_dns_servers
* get_public_dns_servers",VCL-1000
d931504081542f513be2710c047ba210bf7c7351,,,1,['managementnode/lib/VCL/image.pm'],Made trivial change to 3 notify messages in image.pm::process.,
36553a8917e61bed1277ba0da010266634a0bf67,,,1,['managementnode/lib/VCL/reserved.pm'],Fixed 2 trivial typos in comments.,
9758dbb5f1114f6d109054e137e8e0ffb8b47f0a,,,1,['web/themes/default/css/vcl.css'],"themes/default/css/vcl.css:
-added ""#usersDiv th.privheader > div"", ""#usergroupsDiv th.privheader > div"", and ""#resourcesDiv th.privheader > div"" to override the translation distance in primary vcl.css file",
858e0fe9d286eec340450c91e209dfefbfbf6f31,,,3,"['web/.ht-inc/privileges.php', 'web/.ht-inc/utils.php', 'web/.ht-inc/xmlrpcWrappers.php']","VCL-1006 - performance improvements for 2.5

privileges.php:
-added conditionals to skip configAdmin user privilege in several places in these functions: viewNodes, selectNode, and getUserPrivRowHTML
-changed uses of array_key_exists to isset in these functions: printUserPrivRow, getUserPrivRowHTML, getResourcePrivRowHTML, getNodePrivileges, getNodeCascadePrivileges, AJchangeUserPrivs, AJchangeUserGroupPrivs, AJsubmitAddUserGroupPriv, and AJsubmitAddResourcePriv
-reverted a few places that were mistakingly changed from in_array to isset in these functions: AJchangeResourcePrivs, AJsubmitAddUserPriv, AJsubmitAddUserGroupPriv, AJsubmitAddResourcePriv, and checkUserHasPriv
-modified AJchangeResourcePrivs: fixed issue preventing setting a resource attribute at a node where the same attribute was being blocked from being cascaded down

xmlrpcWrappers.php:
-changed uses of array_key_exists to isset in XMLRPCgetResourceGroupPrivs and _XMLRPCchangeResourceGroupPriv_sub

utils.php:
-removed places where subarrays were created by calling array() in these functions since it is unnecessary: getImages, getChildNodes, getResourceGroupMemberships, getResourceGroupMembers, findAvailableTimes
-changed uses of array_key_exists to isset in these functions: getImages, getServerProfiles, getServerProfileImages, getImageConnectMethods, getImageConnectMethodTexts, getProductionRevisionid, removeNoCheckout, getUserResources, getUserResourcesUp, addNodeUserResourcePrivs, addOwnedResources, addOwnedResourceGroups, getParentNodes, getChildNodes, getUserGroups, getResourceGroupMembers, getUserUnityID, checkUserHasPerm, findAvailableTimes, selectInputHTML, prettyDatetime, getMaintItemsForTimeTable, getNodeInfo, and sortKeepIndex
-changed uses of foreach(array_keys(...) as $) to foreach(... as $ => $tmp) in these functions: getUserResourcesDown, addNodeUserResourcePrivs
-modified getImageConnectMethods: split query to get all methods from a single query to a temporary table with 3 individual queries due to slowness caused by the OR's in the conditional of the ""LEFT JOIN connectmethodmap""",VCL-1006
57d34729da763ad1d76c785411bc05b465304663,,,2,"['managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6.pm']","VCL-1010
Moved $KMS_CLIENT_PRODUCT_KEYS class variable from Version_6.pm to Windows.pm so that the OS name keys can be used by Windows.pm::setup_product_keys rather than having duplicate lists of Windows versions.

Added Windows Server 2016 and Windows 10 Enterprise 2016 LTSB entries to $KMS_CLIENT_PRODUCT_KEYS.

Removed list of OS's from Windows.pm::setup_product_keys and modified it to use the keys from $KMS_CLIENT_PRODUCT_KEYS.",VCL-1010
03f6c00982b636f811fbe9407d67132dc79079b3,,,1,['web/js/privileges.js'],modified nodeCheck and changeCascadedRights to correctly handle cascaded checkboxes after changing the styling from being inline to using privCascade class from changed in privileges.php committed in r1744109,
69be70f73eade4cf08eb15ba52e8b8fb1aa1315e,,,1,['web/.ht-inc/Doxyfile'],"removed comments to be in compliance with licensing

see http://www.apache.org/legal/resolved.html#can-we-use-doxygen-generated-config-files

relevant text from above in case it goes away:

Can we use Doxygen-generated config files?
As long as the generated comments are removed from the Doxygen-generated files, these files may be used.",
90d599a1b75948f8f5ca89df964efff259db6cfe,,,6,"['web/locale/po_files/es_MX/vcl.po', 'web/locale/po_files/fr_CA/vcl.po', 'web/locale/po_files/ja_JP/vcl.po', 'web/locale/po_files/pt_PT/vcl.po', 'web/locale/po_files/vcl.po.template', 'web/locale/po_files/zh_CN/vcl.po']","VCL-968 - Localization updates for 2.5

corrected 'VM Host Porfile' to 'VM Host Profile' in any files already containing it

added 'AD Domains', 'Log in', and 'Log out' to each file",VCL-968
6283fcde95653140d166f9b25ee1c34077be0718,,,6,"['web/js/nls/es_MX/messages.js', 'web/js/nls/fr_CA/messages.js', 'web/js/nls/ja_JP/messages.js', 'web/js/nls/messages.js.template', 'web/js/nls/pt_PT/messages.js', 'web/js/nls/zh_CN/messages.js']","VCL-968 - Localization updates for 2.5

added 'unset' to end of each file (this shows up on the Edit Image Profiles page)",VCL-968
5867d98778d4a6be0252a56d416623c6f69a4f2f,,,4,"['web/js/nls/es_CR/messages.js', 'web/locale/es_CR/LC_MESSAGES/vcl.mo', 'web/locale/es_CR/language', 'web/locale/po_files/es_CR/vcl.po']",adding es_CR translation - thanks to Luis Zárate for the contribution!,
997a1db8b734c81d2c561e459487327c59871884,,,1,['web/.ht-inc/requests.php'],"minor layout changes in newReservationHTML:
-changed spans wrapping reservation type radio buttons and labels to divs that have classes of display:inline-block - this was done so that when they wrapped, the radio buttons and labels were kept together
-added a width to newreslabelfields div
-changed widths of deployadmingroup, admingroupnote, and deploylogingroup to be in em instead of px",
b379df39943e44cdf57c3074bba2754d7484c944,,,1,['web/js/resources/image.js'],wrapped 'unset' with translation function in Image.prototype.colformatter,
baaf7e37cb1e7791eaa6760f602e38e06cb273ec,,,1,['web/themes/dropdownmenus/page.php'],added check for mode not being inmaintenance to conditional that controls 'Log in' being displayed so that it is not displayed during maintenance windows,
ba75461819099c58a2351010a5fccde339322ba0,,,1,['web/themes/dropdownmenus/css/theme.css'],removed newreslabelfields label and .labeledform because the width was increased in the main vcl.css file,
bf2bf8e3c952e35661a22e1efe019723acb53b8e,,,1,['web/css/vcl.css'],changed the width of newreslabelfields label and .labeledform to accommodate longer translated strings,
987800b18e9070d5dff0ad2c38db17b11f494786,,,1,['managementnode/lib/VCL/Module/Provisioning/libvirt.pm'],"VCL-1008
Added libvirt.pm::get_master_xml_device_info to handle the common error checking when parsing the device section of the domain XML.",VCL-1008
35202d1f6526dd43d531a13322702115654549ff,,,1,['web/.ht-inc/schedule.php'],"wrapped ""Cancel"" with call to translation function in addEditDialogHTML",
2f6c5164139873e5bdec4fe6002a82f2b80a4390,,,1,['web/.ht-inc/computer.php'],"fixed minor typo: ""VM Host Porfile"" -> ""VM Host Profile""; updates to translation files will be committed later",
afda5519435a1abfe2f3d25abdf1095873d281ce,,,2,"['managementnode/lib/VCL/Module/Provisioning/libvirt.pm', 'managementnode/lib/VCL/Module/Provisioning/libvirt/KVM.pm']","VCL-1008
Added code to KVM.pm::copy_virtual_disk to copy the .xml file if it exists.

Tweaked some domain settings in libvirt.pm::generate_domain_xml. Images were not loading on all KVM hosts.
* Added: cpu->mode = host-model
* Added: cpu->model->fallback = allow
* Commented out: cpu->topology (not sure why this was added, was throwing off CPU count)
* Commented out: devices->disk->driver->cache = none (not sure why this was added, without it VM gets set to hypervisor default)
* Commented out: devices->interface->target (doesn't seem to be required)
* Commented out: devices->video (doesn't seem to be required)",VCL-1008
75840d46065e66c8032926cffd05a5d3919a43dc,,,1,['managementnode/lib/VCL/Module/Provisioning/libvirt.pm'],"VCL-1008
Added code and uncommented existing code to libvirt.pm::capture to save a .xml file in the image library and repository locations when an image is captured.

Added libvirt.pm::get_master_xml_info which reads the .xml file and convert it to a hash reference.

Updated libvirt.pm::generate_domain_xml to attempt to retrieve the disk and network interface types from the master XML file for an image revision.

Updated libvirt.pm::get_master_image_file_path to prevent it from ever returning the path to the .xml file saved for an image.",VCL-1008
1d66e8e5345d20bdb3ef9fe2d2f01e95407cd24f,,,1,['managementnode/lib/VCL/Module/Provisioning/libvirt.pm'],"VCL-988
Updated libvirt.pm::get_domain_name to construct names as <computer name>_<image name> with a single underscore.

Updated libvirt.pm::delete_existing_domains to check for existing domain names that begin with <computer name> followed by either a colon or underscore.

Updated libvirt.pm::delete_domain to correctly parse out the computer name portion of an existing domain name. It then checks for virtual disk image files assigned to the domain beginning with the parsed computer name. If they match, the disk files can be safely deleted.",VCL-988
5453b84f20eceee6f52611fb29e63a21c7eaf12f,,,3,"['web/.ht-inc/privileges.php', 'web/.ht-inc/secrets-default.php', 'web/.ht-inc/utils.php']","VCL-1006 - performance improvements for 2.5

made efforts to convert calls to in_array to use isset because it is notably faster - this required changing data so that rather than being an array of values, the data is an associative array with the keys being the needed information and the values just being set to 1

privileges.php:
-modified getNodePrivileges: modified returned data so that the arrays of privileges at each node are associative arrays with the key being the desired information and the value just being 1 for each key
-modified getNodeCascadePrivileges: modified returned data so that the arrays of privileges at each node are associative arrays with the key being the desired information and the value just being 1 for each key; for users and usergroups, moved queries outside of while loops and created static variables to hold all of the information so that it only had to be retrieved once per page load to decrease the time being spent performing queries
-modified printUserPrivRow, getUserPrivRowHTML, getResourcePrivRowHTML, AJchangeUserPrivs, AJchangeUserGroupPrivs, AJchangeResourcePrivs, AJsubmitAddUserPriv, AJsubmitAddUserGroupPriv, AJsubmitAddResourcePriv, and checkUserHasPriv: changed calls to in_array to check for user/usergroup permissions to call isset

utils.php:
-modified initGlobals: check for QUERYLOGGING not being defined and set it to 1 if it is not - did this so doQuery does not need to check if it is defined since that function is called so much
-modified doQuery: removed check for QUERYLOGGING being defined
-modified getUserResources and addNodeUserResourcePrivs: changed to check user privileges to use isset instead of in_array
-modified encryptData and decryptData: use openssl_encrypt and openssl_decrypt if they exist; fall back to Crypt_AES if they don't exist; openssl is notably faster
-modified getParentNodes: changed array_push($nodelist, $node) to $nodelist[] = $node

secrets-default.php:
-added $cryptiv
-changed comment for $cryptkey and set comment for $cryptiv to explain how to generate 16 random base64 encoded characters using openssl",VCL-1006
e30a5ad2758a9a33c932dc5d8d177cc45f99282e,,,2,"['web/.ht-inc/privileges.php', 'web/js/privileges.js']","VCL-1003 - drag and drop support for moving privilege nodes

moved loading of nodedropdata global javascript variable to an AJAX call to speed up page load time

privilege.php:
-modified viewNodes: removed block of code that prints global variable nodedropdata; added div that displays that drag and drop data is loading; set Add Child button to be disabled by default (adding a child modifies nodedropdata)
-modified AJrefreshNodeDropData: added check for nodedropdata not being initialized; if not, call initDropData

privilege.js:
-added declaration of global variable nodedropdata
-modified mouseRelease: added return if nodedropdata not initialized
-added initDropData - enabled Add Node button if it exists, hides loading div
-modified checkCanMove and checkNodeDrop: return false if nodedropdata not initialized
-modified refreshNodeDropData: added timeout parameter to call to RPCwrapper",VCL-1003
401d5a70772a73f42b0df14c7777bbfad096a50f,,,6,"['web/.ht-inc/privileges.php', 'web/.ht-inc/states.php', 'web/.ht-inc/utils.php', 'web/css/vcl.css', 'web/images/textimage.php', 'web/js/privileges.js']","VCL-1003 - drag and drop support for moving privilege nodes

privilege.php:
-modified viewNodes: 
  -added global javascript variable nodedropdata
  -added continuation to update nodedropdata
  -added javascript connection for onSet on nodestore
  -added ForestStoreModel between store and tree
  -added a bunch of javascript connections to tree
  -added Undo Move button at bottom of tree
  -changed text written vertically for user, user group, and resource groups to be done via css instead of generating images
  -added move confirmation dialog
  -added revert move confirmation dialog
-modified selectNode:
  -added Undo Move button at bottom of tree
  -changed text written vertically for user, user group, and resource groups to be done via css instead of generating images
  -added javascript to set undo button to be enabled if a move can be undone
-modified JSONprivnodelist2: added parent data to each node
-added nodeDropData
-added AJrefreshNodeDropData
-modified AJsubmitAddChildNode: added $parent as argument to addChildNode
-added AJmoveNode
-added AJsubmitMoveNode
-added AJrevertMoveNode
-modified AJchangeUserPrivs: check if user being modified is logged in user and if nodeAdmin, block, or cascade is being changed, if so, include refreshNodeDropData() in returned javascript
-modified AJchangeUserGroupPrivs: check if user group being modified is one logged in user is a member of and if nodeAdmin, block, or cascade is being changed, if so, include refreshNodeDropData() in returned javascript
-modified AJsubmitAddUserPriv: check if submitted user is logged in user and if nodeAdmin, block, or cascade is being added, if so, include refreshNodeDropData() in returned javascript
-modified AJsubmitAddUserGroupPriv: check if user group being added is one logged in user is a member of and if nodeAdmin, block, or cascade is being added, if so, include refreshNodeDropData() in returned javascript

utils.php:
-removed getImageText
-modified getDojoHTML: added dijit.tree.ForestStoreModel and dijit.tree.dndSource to $dojoRequires for viewNodes; added javascript for dojo.connect for onmouseup to document under case 'viewNodes'

states.php:
-added AJmoveNode
-added AJsubmitMoveNode
-added AJrevertMoveNode
-added AJrefreshNodeDropData

vcl.css:
-added th.privheader
-added th.privheader > div

privilege.js:
-added several globals: saveMoveNode, moveitem, nomove, dragnode, mouseontree, dragging, moveData object
-general changes in several functions:
  -removed some old commented out code
  -reworked how selected node is being displayed as selected, previously this was done by adding and removing the privtreeselected class; now using tree.attr('path') to set and get the selected node (this is the more proper way)
  -changed references to tree.store to refer to tree.model.store since the ForestStoreModel was added between them
-added mouseDown
-added mouseRelease
-modified addChildNode: added parentid as an additional argument; include parentid when calling store.newItem; added call to positionNode so that node gets put in the right sort order in the tree; add an entry to nodedropdata for the new node
-added positionNode
-modified removeNodesFromTree: added code to set the Undo Move button to disabled if the previous parent of the moved node is the one being removed
-modified removeNodesFromTreeCB: wrapped call to deleteItem with setting nomove to 1 and back to 0 so that moveNode just returns when invoked by the call to deleteItem
-modified renameNode: added code to put focus on submitRenameNodeBtn, if enter was used to submit the new name while the focus was on the text box, the new value of the text box was not saved in the widget and the old name was getting submitted; set focus back on text box if the name wasn't actually changed in the text box
-modified renameNodeCB: wrapped setValue with setting nomove to 0 and back to 1 so moveNode just returns when invoked by the call to setValue; added setTimeout to reposition node based on new name after half a second
-added moveNode
-added moveNodeCB
-added submitMoveNode
-added submitMoveNodeCB
-added submitRevertMoveNode
-added submitRevertMoveNodeCB
-added revertNodeMove
-added revertNodeMoveCB
-added setSelected
-added checkCanMove
-added checkNodeDrop
-added refreshNodeDropData

deleted images/textimage.php - changed code calling this to use css to write text vertically",VCL-1003
24cd057879fc063537d1e8bda056dd242b35efb9,,,1,['web/.ht-inc/image.php'],"VCL-1005 - allow dashes in image names

image.php: modified addEditDialogHTML and validateResourceData: changed error message and regexp to allow dashes",VCL-1005
a415ff53adfcfae53d1afb2712e5d46451b2c70e,,,15,"['web/.ht-inc/authentication.php', 'web/.ht-inc/dashboard.php', 'web/.ht-inc/groups.php', 'web/.ht-inc/privileges.php', 'web/.ht-inc/requests.php', 'web/.ht-inc/resource.php', 'web/.ht-inc/siteconfig.php', 'web/.ht-inc/statistics.php', 'web/.ht-inc/utils.php', 'web/.ht-inc/xmlrpcWrappers.php', 'web/css/vcl.css', 'web/js/privileges.js', 'web/js/resources.js', 'web/js/resources/computer.js', 'web/themes/dropdownmenus/page.php']","This commit is for a bunch of small changes, a good chunck of which are simply layout related.

authentication.php: modified printLoginPage: added link to select a different authentication method (useful for users who accidentally selected to save the wrong one)

dashboard.php: modified getNewReservationData: added states 16 and 24 (image and checkpoint) to query getting active reservation data

groups.php:
-modified viewGroups: changed pixel width of edit column in user and resource group tables from 38px to 43px
-modified editOrAddGroup: changed max allowed length of name field from 30 to 60 characters
-modified processGroupInput: changed checks for name fields to allow up to 60 characters

privileges.php: modified userLookup: added closing table tag to ""Server Reservations User Can Use"" section

requests.php: modified viewRequests: changed width of detailed reservation status pane from 350px to 380px

resource.php: modified viewResources: changed pixel based width of name column from 38px to 43px

siteconfig.php: modified AJvalidateMessagesPoll: removed query from JSON returned if there were invalids - this was just for debugging while writing the code

statistics.php: modified viewStatistics: added <br> after table containing unique user counts

utils.php:
-modified checkAccess: added several calls to addLoginLog for failed authentication during XMLRPC calls
-modified abort: added error_log to insert a separator so different errors can more easily be distinguished in the php error log
-modified isAvailable: added extra debugging information when $debug is true - number of mapped computers and number of computers available to the user
-modified prettyDatetime: added argument to prevent applying the timezone offset
-modified getDojoHTML: changed name of oneclick dojo filename from oneclick.js to vclgos.js; changed check for session being initialized from calling session_status (required fairly recent php version) to calling isset($_SESSION['persistdata'])

xmlrpcWrappers.php: modified XMLRPCgetImages: added ostype to data retured for each image

vcl.css:
-added .logincol
-added .logincell

privileges.js: modified updateNodeLabels: set value of newNodeName to nodename

resources/computer.js:
-modified initPage: changed width of first column from 18px to 21px
-modified buildExtraFilters: changed width of first column from 18px to 21px; added fetchProperties to comboboxes to sort on value
-modified saveResourceCB: added resourcegrid.store.setValue for imagerevision

resources.js: modified Resource.prototype.updateFieldCookie: added expires to each dojo.cookie call so that the cookies will be persistant instead of session cookies

themes/dropdownmenus/page.php: moved userLookup from Manage to Reporting, changed reporting items to be handled by a foreach loop instead of having them all inline",
3bf63eaec5d1ee675bb77d25d159f36b075de9e9,,,3,"['web/.ht-inc/requests.php', 'web/.ht-inc/utils.php', 'web/.ht-inc/xmlrpcWrappers.php']","VCL-1001 - changing a future reservation to a now reservation doesn't properly update the reserved computer

requests.php: modified AJsubmitEditRequest: added code to determine if old start time was in the future or not and pass 'now' or 'future' to updateRequest accordingly

utils.php: modified updateRequest: added additional argument $nowfuture and removed code that determined if the reservation was now or future based on the reservation start time - the problem was that if a future reservation got changed to a now reservation, the isAvailable could have changed the computerid, but nowfuture was determined to be now and then the 2nd half of the function where the computerid is updated was skipped; so the user ended up with a reservation on the same computer they had, which may or may not have another reservation on it

xmlrpcWrappers.php: updated XMLRPCextendRequest and XMLRPCsetRequestEnding: added 'now' to call to updateRequest",VCL-1001
d4982f54a913aa43ef7ad1e8dcbedf88dbfd723f,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-1000
Added post_reserve and post_reservation hooks to Linux.pm.",VCL-1000
0fb42a6c41bcecaf02a6a32d759f0f67f3633565,,,1,['managementnode/lib/VCL/Module/OS.pm'],"VCL-1000
Forgot to save this minor addition before last commit: In OS.pm::pre_capture, only gets executed if a 'enable_experimental_features' variable is true in the database.",VCL-1000
32ef3333c995b92ea89b389c25e709ee60fd6c11,,,2,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/image.pm']","VCL-1000
Added to OS.pm:
* create_management_node_reservation_info_json_file
* delete_management_node_reservation_info_json_file
* get_management_node_reservation_info_json_file_path
* post_capture
* run_management_node_stage_scripts

Added call to run_management_node_stage_scripts in OS.pm::pre_capture. It only gets executed if a 'enable_experimental_features' variable is true in the database.

Added call to post_capture at the end of image.pm::process. It calls run_management_node_stage_scripts which also only gets executed if a 'enable_experimental_features' variable is true in the database.",VCL-1000
6d868763c70bb750ab3945552ef1c48a987a4e6b,,,1,['web/.ht-inc/conf-default.php'],"VCL-843 - Remove ""VM limit""

conf-default.php: removed MAXVMLIMIT",VCL-843
825dfcae8c2b11d4bc893f17bebdba1141ac29c4,,,1,['web/js/requests.js'],"VCL-995 - Unable to change server reservation name if schedule no longer available

(forgot to include message about requests.js in last commit)

requests.js:
-modified showSuggestedTimesCB, editReservationCB, hideEditResDlg, resetEditResBtn, and resGone - set innerHTML for editResDlgPartialMsg to ''
-modified submitEditReservationCB: if status is not success and partialupdate exists in returned data, set innerHTML of editResDlgPartialMsg to contents of partialupdate",VCL-995
7f9511b906f463cb6a9254ad6d6adcdb3bd41075,,,2,"['web/.ht-inc/requests.php', 'web/js/requests.js']","VCL-995 - Unable to change server reservation name if schedule no longer available

requests.php:
-modified viewRequests: added additional status message div (editResDlgPartialMsg) to editResDlg for displaying when some items were successfully updated but there were errors with other items
-modified AJeditRequest: added ""No change"" option to duration change dropdown so that other items can be changed without submitting an extension to the reservation; needed to modify places that check for $lengths not being empty since it now contained a ""No check"" option in some cases
-modified AJsubmitEditRequest: moved where server request related items and nousercheck are updated in database to before isAvailable is called; if isAvailable does not return positive number and other items were already updated, send additional message (partialupdate) to notify user that parts were successfully updated",VCL-995
ef0b450c0eef249748591adfdb5bc3a5584ce571,,,5,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/reserved.pm', 'managementnode/lib/VCL/utils.pm']","VCL-862
Updated OS.pm::set_tainted_status to accept a $reason argument. This gets added to currentimage.txt instead of simply 'true'. Updated sub to append to previous 'vcld_tainted' messages instead of overwriting.",VCL-862
e59a8ce150c3e170ee25a4e1d49539dcb81f98b3,,,7,"['managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/UnixLab.pm', 'managementnode/lib/VCL/Module/Provisioning.pm', 'managementnode/lib/VCL/Module/Provisioning/openstack.pm', 'managementnode/lib/VCL/reclaim.pm']","VCL-999
Rewrote much of UnixLab.pm. Added initialize subroutine which sets ssh_port and ssh_user keys in the OS object. These are used by OS.pm::execute and is_ssh_responding so that the correct port and username are used.

Replaced OS.pm::get_current_image_info with get_current_imagerevision_id. The old subroutine accepted various text strings to specify which piece of data to retrieve. This isn't very elegant. Separate subs should be written for each if necessary. All of the callers of get_current_image_info really only needed the imagerevision ID.

Updated OS.pm::is_ssh_responding to not check both port 22 and 24. It now checks if $self->{ssh_port} is set. If not, defaults only to 22.

Added OS.pm::wait_for_port_open and wait_for_port_closed. Similar functionality had existed in UnixLab.pm but was messy and didn't use the code_loop_timeout sub for the looping countdown.

Other
Added double quotes to the message string in Linux.pm::notify_user_console. It wasn't working if the message contained a newline.",VCL-999
f7ec6e79f8f6022f8c7744e92be1b429e5a795b6,,,4,"['web/.ht-inc/addomain.php', 'web/.ht-inc/privileges.php', 'web/.ht-inc/utils.php', 'web/js/resources/addomain.js']","VCL-277 - Add support for images to join Active Directory domains
VCL-867 - Active Directory Authentication for Windows VM's

addomain.php:
-modified AJsaveResource, AJeditResource, and validateResourceData: commented out code for logindescription
-modified addResource: commented out code for logindescription; modified INSERT query for resource table to have a subselect to get resourcetype.id based on the type name addomain instead of having 19 hard coded
-modified addEditDialogHTML: added helpIcons for several input fields and corresponding tooltips - still need to fill in the content of the tooltips
-removed 2nd definition of checkResourceInUse (I think I had copied it from the image code to modify but then wrote it separately)

privileges.php:
-modified getResourcePrivRowHTML: added addomain exception to not print checkboxes for available and manageMapping
-modified jsonGetResourceGroupMembers: modified if/elseif conditionals that set $field to have an else to handle setting $field to 'name' and removed specific elseif's that set it to 'name'

utils.php:
-modified getResourceGroupMembers: changed hard coded resource type ids to be subselects to get the id based on the resource type name
-modified isAvailable and debugIsAvailable: found 2 locations calling debugIsAvailable with $loc being the same number (19), changed the 2nd one to be 22
-modified getADdomains: commented out code for logindescription

addomain.js:
-modified addNewResource: set password and password2 to be required
-modified inlineEditResourceCB: set password and password2 to not be required; commented out code for logindescription
-modified resetEditResource, saveResource, and saveResourceCB: commented out code for logindescription",VCL-277
da91530cab33b0ce53e040c3cad29aacde3e229e,,,2,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm']","VCL-997
Changed location to C:\Users\Administrator\reservation_info.json so that users without root/Administrator access can't read the file.  Changed location on Linux to /root/reservation_info.json and added a call to set the permissions to 600.",VCL-997
b8ef08a757cda25acb3eb3c5e5ae23ecb7bd15a8,,,4,"['web/.ht-inc/computer.php', 'web/.ht-inc/groups.php', 'web/.ht-inc/managementnode.php', 'web/.ht-inc/schedule.php']","very minor tweaks

computer.php: updated a comment in the header of getData

groups.php: modified viewGroups: added checks for Edge browser

managementnode.php: modified fieldWidth: added check for Edge browser

schedule.php: added param for $rscid to header of checkResourceInUse",
592b23b0a13b2a1223aba9c4eb9bcb7136499d63,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-277 - Add support for images to join Active Directory domains
VCL-867 - Active Directory Authentication for Windows VM's

vcl.sql:
-added definition of addomain table
-put backticks around field names for connectlog table (unrelated to this JIRA)
-added definition of imageaddomain table
-added addomain entry to resourcetype table
-added 'All AD Domains' entry to resourcegroup table
-added entries for administer and manageGroup for 'All AD Domains' group to resourcepriv table
-added addomainAdmin entry to userprivtype table
-added entries to give admin user and adminUsers group addomainAdmin privilege at admin node in userpriv table

update-vcl.sql:
-added definition of addomain table
-put backticks around field names for connectlog table (unrelated to this JIRA)
-added definition of imageaddomain table
-added insert for addomain entry to resourcetype table
-added insert for 'All AD Domains' entry to resourcegroup table
-added inserts for entries for administer and manageGroup for 'All AD Domains' group to resourcepriv table
-added insert for addomainAdmin entry to userprivtype table
-added inserts for entries to give admin user and adminUsers group addomainAdmin privilege at admin node in userpriv table",VCL-277
e1ac2f6f7b34fb5c4f05665f5fafe42614d3f60e,,,6,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/reclaim.pm', 'managementnode/lib/VCL/reserved.pm', 'managementnode/lib/VCL/utils.pm']","VCL-997
Added subroutines:
DataStructure.pm::get_reservation_info_json_string
OS.pm::get_reservation_info_json_file_path
OS.pm::create_reservation_info_json_file
OS.pm::delete_reservation_info_json_file
Windows.pm::get_reservation_info_json_file_path
utils.pm::prune_array_reference
utils.pm::prune_hash_child_references
utils.pm::prune_hash_reference

OS.pm::create_reservation_info_json_file gets called from reserved.pm::process only if a variable named 'enable_experimental_features' is true in the database.

This file is removed when a computer is sanitized in reclaim.pm::call_os_sanitize.",VCL-997
eeed714dac356cade07b4f925fe68a790a0df264,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-996
Updated Linux.pm::enable_firewall_port and disable_firewall_port to sort iptables rule IDs numerically.",VCL-996
d1dcd9f7edacd37e8d48b6f0ceb8448cc64da1f4,,,9,"['web/.ht-inc/addomain.php', 'web/.ht-inc/image.php', 'web/.ht-inc/resource.php', 'web/.ht-inc/states.php', 'web/.ht-inc/utils.php', 'web/css/vcl.css', 'web/js/resources/addomain.js', 'web/js/resources/image.js', 'web/themes/dropdownmenus/css/theme.css']","VCL-277 - Add support for images to join Active Directory domains
VCL-867 - Active Directory Authentication for Windows VM's

incorporated patches from Junaid Ali attached to VCL-867; the VCL resource code has been largely rewritten since the patches were generated, so that part needed to be rewritten as well; shortened some of the names of fields and tables

addomain.php: initial add; definition of ADdomain class which inherits from Resource class

image.php:
-modified fieldWidth: added os, addomain, baseOU, adauthenabled
-modified fieldDisplayName: added adauthenabled, addomain, baseOU
-modified addEditDialogHTML: added fieldset and fields for AD authentication; added tooltip for baseOU
-modified AJsaveResource: added section that inserts/deletes/updates imageaddomain table as appropriate
-modified addResource: added section to insert into imageaddomain table as appropriate
-modified validateResourceData: added array keys and validation for adauthendabled, addomainid, baseou

resource.php:
-modified resource: added case statement for addomain
-modified viewResources and fieldWidth: added conditional for Edge browser for setting widths (unrelated to these JIRAs)
-added checkExistingField 

states.php:
-added addomain to $actions[""entry""]
-added addomain to $actions['mode'], $actions['args'], and $actions['pages']

utils.php:
-modified initGlobals: added case for addomain in section that require_once's resource.php
-modified getImages: added addomainid, addomain, and baseOU to query and returned data; added adauthenabled to returned data
-modified getResourceGroupMembers: added conditional for $type == addomain; added addomain to $names, $joins, and $orders
-added getADdomains
-modified labeledFormItem: added case for password to go along with text case; changed hard coded 'text' for input type to be $type so it matches the passed in type to be either text or password
-added validateHostname
-modified getNavMenuData: added AD Domains menu entry for users with addomainAdmin
-modified getDojoHTML: added addomain case statement to include addomain.js to switch statement in groupMapHTML, viewResources, and editConfigMap case statements

image.js:
-modified Image.prototype.colformatter: added adauthenabled for true/false part; added addomain and baseOU to (unset) part
-modified inlineEditResourceCB: added showing/hiding of imageadauthbox; added setting of adauthenable, addomainid, and baseou
-modified resetEditResource: added resets for adauthenable, addomainid, and baseou
-modified saveResource: added for validation of baseou; added adauthenabled, addomainid, and baseou to submitted data
-modified saveResourceCB: added setting for adauthenabled, addomainid, addomain, and baseOU fields in store object
-modified startImageCB: added resetting of adauthenable, addomainid, and baseou and showing/hiding of imageauthbox based on OS type
-added toggleADauth

vcl.css:
-added:
#addomaindlgcontent label
#addomaindlgcontent .labeledform

dropdownmenus/css/theme.css:
-added:
#renameDialog tbody tr:hover td
#renameDialog tbody tr td
div.dijitDialog h2
div.dijitDialog h3
#confdelcontent h3
#groupbyresourcediv table.dojoxGridRowTable tbody tr:hover td
#groupbyresourcediv div.dojoxGridRowSelected table.dojoxGridRowTable tbody tr td
#imageadauthbox label
#imageadauthbox .labeledform",VCL-277
8429b6d618fb8485bd596bfe8c0ae810fa3a0702,,,3,"['web/.ht-inc/authmethods/itecsauth.php', 'web/.ht-inc/authmethods/ldapauth.php', 'web/.ht-inc/utils.php']","VCL-993 - web code should handle user.IMtypeid being NULL

utils.php: modified getUserInfo: changed query to use LEFT JOIN for the IMtype table

itecsauth.php: modified updateITECSUser: changed query to use LEFT JOIN for the IMtype table

ldapauth.php: modified updateLDAPUser: changed query to use LEFT JOIN for the IMtype table",VCL-993
fbb1a0df11e7855fd2a6b88e5e12bcc7d39b732d,,,1,['managementnode/lib/VCL/Module/OS/Linux/init/systemd.pm'],"VCL-989
Updated systemd.pm to handle Ubuntu 15.04+'s usage of ssh as a service name instead of sshd.

Added code to delete_service to attempt to delete both ext_ssh and ext_sshd.

Added _get_service_unit_file_path subroutine which retrieves the name of the unit file used by a service. This is called from add_ext_sshd_service instead of assuming the file is named sshd.service.

Modified regular expressions in add_ext_sshd_service which manipulate ext_sshd.service.  They now:
* Remove any $ variables from the ExecStart line containing ""OPT"" including $OPTIONS and $SSHD_OPTS
* Remove any explicit -f <sshd_config path> sections from ExecStart line
* Remove all Alias= lines",VCL-989
2afa4fa60e0ea9b16ec26ee342c69f689b5b3336,,,1,['managementnode/lib/VCL/Module/Provisioning/libvirt.pm'],"VCL-988

replaced : with __ in the domain name. This matches what Josh was using in local sandbox to fix the issue.
Thanks Josh",VCL-988
6dff31058e42d0ba4995c1cac9059e8afc17e335,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm'],"VCL-844
Added option to select method of suspending a VM prior to migration in VMware.pm.",VCL-844
20150ac4ac3ee99a5ea9e01d34cea76461f326f5,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-844
Added option to select a range in utils.pm::setup_get_hash_multiple_choice.",VCL-844
7bd60d27c915212b16a302a0a2610887379b104c,,,1,['web/.ht-inc/utils.php'],"VCL-846 - Improve flow of handling nodes for deleted reservations assigned to new reservations

utils.php:
-modified isAvailable: changed set of ignored states when getting a list of computers for an immediate (now) reservation from 'reloading,reload,timeout,inuse' to 'timeout,inuse'; changed set of states for determing reserved computers from 'deleted,failed,complete' to 'failed,complete,reload,pending/reload'
-modified getSemaphore: changed set of states checked to see if another process allocated the same computer from '1,5,12' to '5,12,19,14/19'",VCL-846
64392ebd07e99e9becbcab490b56998ec8811ed6,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT.pm'],"VCL-987
Pulled logic out of xCAT.pm::get_image_repository_directory_path to dedicated get_nodetype_image_os_name subroutine since it needs to be used elsewhere.

Added calls to get_nodetype_image_os_name in get_image_repository_directory_path and _edit_nodetype.",VCL-987
1797686ee8f941c5e2b5088e4ac01afb2872a52d,,,5,"['web/.ht-inc/groups.php', 'web/.ht-inc/states.php', 'web/.ht-inc/utils.php', 'web/css/vcl.css', 'web/js/groups.js']","VCL-986 - make add, edit, and delete on Manage Groups stay on the page

groups.php:
-modified viewGroups: removed text when $mode = submitDeleteGroup that says group successfully deleted; changed continuation creation from confirmDeleteGroup to AJconfirmDeleteGroup; changed user and resource stores to be of type ItemFileWriteStore; added comparatorMap to definition of usergroupstore; added dijit.Dialog for deleting groups
-modified checkForGroupUsage: added call to wordwrap to wrap $msg at 75 characters using <br> before returning it
-changed confirmDeleteGroup to AJconfirmDeleteGroup
-modified AJconfirmDeleteGroup: send response in JSON format instead of printing it directly; removed form elements
-changed submitDeleteGroup to AJsubmitDeleteGroup
-modified AJsubmitDeleteGroup: send response in JSON format instead of calling viewGroups

states.php:
-added AJconfirmDeleteGroup and AJsubmitDeleteGroup to $noHTMLwrappers
-changed confirmDeleteGroup to AJconfirmDeleteGroup
-changed submitDeleteGroup to AJsubmitDeleteGroup

utils.php: modified getDojoHTML: added dijit.Dialog to viewGroups mode

groups.js:
-modified confirmDeleteUserGroup: changed to make an AJAX call instead of changing window.location.href
-added confirmDeleteGroupCB
-added clearHideConfirmDelete
-added submitDeleteGroup
-added submitDeleteGroupCB
-modified confirmDeleteResourceGroup: changed to make an AJAX call instead of changing window.location.href

vcl.css: added #confdelcontent th",VCL-986
5c9dbfa9e554ee71793a707817bbe4cb95d8a8bc,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT.pm'],"VCL-987
Extended xCAT.pm::get_image_repository_directory_path to attempt to locate a suitable Linux Kickstart directory if the default location does not exist.",VCL-987
fe8be6255f7a8fe64d9f8f1cce0d8263ed559056,,,1,['web/themes/dropdownmenus/css/theme.css'],"VCL-981 - create a new theme that is more responsive for mobile devices

dropdownmenus/css/theme.css: added div.dijitDialog h2, div.dijitDialog h3, and #confdelcontent h3",VCL-981
d5b7009b72ca80434a277493d64727213981210b,,,3,"['web/js/nls/es_MX/messages.js', 'web/js/nls/fr_CA/messages.js', 'web/js/nls/pt_PT/messages.js']","VCL-968 - Localization updates for 2.5

added updated strings from messages.js.template",VCL-968
5c548e8921c66cd4db482069a44b9308b7f9e7ca,,,3,"['web/.ht-inc/authentication.php', 'web/.ht-inc/states.php', 'web/.ht-inc/utils.php']","VCL-985 - login page and change locale form use continuations when user is logged out

authentication.php: modified printLoginPage: removed hidden input for continuation, added 2 hidden inputs - mode and authtype

states.php: added changeLocale to $actions['entry']

utils.php:
-modified getDojoHTML: added $filename for oneclick section
-modified changeLocale: split into 2 sections, depending on the value of $authed, set $newlocale, $oldmode, and $authtype from continuation if $authed is true, set them from form input variables if $authed is false
-modified getSelectLanguagePulldown: split into 2 sections, depending on the value of $authed, print a select form element based on continuations if $authed is true, print it based on input variables if $authed is false",VCL-985
8f767eb3398a76557dd6c0b8841df04f856626fe,,,1,['vcl-install.sh'],"VCL-979 - install script - prompt for timezine during installation

vcl-install.sh:
-added arguments to accept timezone
-added info to help message explaining how to specify timezone
-added TZDEFAULT (America/New_York) and TIMEZONE variables
-added check if doing web installation to ensure timezone specified
-added check that specified timezone consists of valid characters
-added prompt for inputing timezone when doing interactive installation
-added section that sets date_default_timezone_set to $TIMEZONE in conf.php",VCL-979
356b6da98b64564ba008d532b76e2f4f0bb9cf65,,,4,"['web/.ht-inc/siteconfig.php', 'web/.ht-inc/states.php', 'web/.ht-inc/utils.php', 'web/js/siteconfig.js']","VCL-981 - create a new theme that is more responsive for mobile devices

added section to Site Configuration for selecting affiliation theme

siteconfig.php:
-modified generalOptions: added call to include AffilTheme section
-modified class AffilTextVariable: added $vartype and $allowdelete; changed $regexp to $constraints
-modified AffilTextVariable::__construct: set defaults for $vartype and $allowdelete
-added AffilTextVariable::validateValue
-modified AffilTextVariable::getHTML: changed type from 'text' to $this->vartype for labeledFormItem calls; only show delete button if $allowdelete is true; added switch statement for input for new items; only include delete continuation if $allowdelete is true
-modified AffilTextVariable::AJaddAffiliationSetting: changed validation of $value from being inline to calling validateValue; modified returned array of data - changed regexp to constraints, added vartype, allowdelete, and width
-modified AffilTextVariable::AJupdateAllSettings: changed validation of $newval from being inline to calling validateValue
-modified AffilHelpAddress::__construct: changed $regexp to $constraints
-modified AffilKMSserver::__construct: changed $regexp to $constraints
-added class AffilTheme

states.php: added classmapping for affiltheme

utils.php: modified labeledFormItem: added width specification for cases select and selectonly

siteconfig.js:
-modified AffilTextVariable.prototype.addAffiliationSettingCBextra: added check for data.items.vartype and section to handle it being selectonly; added check for data.items.allowdelete and only include delete button if true
-added affiltheme class",VCL-981
e49c556e929f540b818d24b7f48d9e58cb58871b,,,1,['web/js/resources/computer.js'],"VCL-983 - Manage computers does not update ""Computers in table"" count after ""Refresh Computer Data"" is clicked

computers.js: modified initPage: added dojo.connect for resourcegrid._onFetchComplete to update the row count; removed setTimeout that updated the row count after 3 seconds because the connected function handles this now",VCL-983
4b648a7345134507d2f73eda511d78ab0e2f9fee,,,1,['managementnode/etc/systemd/system/vcld.service'],"VCL-984
Moved vcld.service to more appropriate managementnode/etc/systemd folder.",VCL-984
a153e7e7955ad25fcd4093bef259b50593d0168a,,,0,[],"VCL-984
Added managementnode/etc/systemd folder.",VCL-984
a53374e76721a4313344eee0ea724f282f9ce13e,,,1,['web/.ht-inc/privileges.php'],privileges.php: modified userLookup - added user's IP address to reservation history; added affiliation to admin and access user groups for current reservations and server reservations shared to user,
379eca187ad1febf107089bfd72b06c197ccd04b,,,1,['web/.ht-inc/requests.php'],"requests.php: modified AJconfirmDeleteRequest - if start of reservation is more than 6 months old, display the year along with the start time",
29ce3499918c11d5c3d3570deb5ede95e4de7c66,,,1,['managementnode/bin/vcld.service'],"VCL-984
Added ASF header to vcld.service.",VCL-984
95acabd174a539649ba2b97f67b4a8dba62a23db,,,1,['managementnode/bin/vcld.service'],"VCL-984
Added initial systemd vcld.service file.",VCL-984
632b0c1f401ed1cc9c22e936fc9e377c26bf0bee,,,1,['managementnode/bin/vcld'],"VCL-984
Added check in vcld::make_new_child to determine if the parent's file handle to the /var/lock/subsys/vcld file was shared with the child. This behavior seems somewhat unpredictable and occurs when vcld was started by systemd. When this happens, the child keeps the file locked if the parent dies preventing the parent vcld process from being able to restart. Added code to close the child's handle it receives it from the parent.

Other
Improved check if hash returned from get_management_node_requests is defined in vcld.",VCL-984
21e2d325afaa7cf41a9a7b9dffc9e2c123886fb8,,,157,"['web/.ht-inc/authentication.php', 'web/.ht-inc/dashboard.php', 'web/.ht-inc/siteconfig.php', 'web/.ht-inc/utils.php', 'web/css/vcl.css', 'web/themes/dropdownmenus/css/dojo/Calendar.css', 'web/themes/dropdownmenus/css/dojo/Calendar_rtl.css', 'web/themes/dropdownmenus/css/dojo/ColorPalette.css', 'web/themes/dropdownmenus/css/dojo/Common.css', 'web/themes/dropdownmenus/css/dojo/Dialog.css', 'web/themes/dropdownmenus/css/dojo/Dialog_rtl.css', 'web/themes/dropdownmenus/css/dojo/Editor.css', 'web/themes/dropdownmenus/css/dojo/Editor_rtl.css', 'web/themes/dropdownmenus/css/dojo/Menu.css', 'web/themes/dropdownmenus/css/dojo/Menu_rtl.css', 'web/themes/dropdownmenus/css/dojo/ProgressBar.css', 'web/themes/dropdownmenus/css/dojo/TimePicker.css', 'web/themes/dropdownmenus/css/dojo/TimePicker_rtl.css', 'web/themes/dropdownmenus/css/dojo/TitlePane.css', 'web/themes/dropdownmenus/css/dojo/TitlePane_rtl.css', 'web/themes/dropdownmenus/css/dojo/Toolbar.css', 'web/themes/dropdownmenus/css/dojo/Tree.css', 'web/themes/dropdownmenus/css/dojo/Tree_rtl.css', 'web/themes/dropdownmenus/css/dojo/dropdownmenus.css', 'web/themes/dropdownmenus/css/dojo/dropdownmenus.css.save', 'web/themes/dropdownmenus/css/dojo/dropdownmenus_rtl.css', 'web/themes/dropdownmenus/css/dojo/form/Button.css', 'web/themes/dropdownmenus/css/dojo/form/Checkbox.css', 'web/themes/dropdownmenus/css/dojo/form/Common.css', 'web/themes/dropdownmenus/css/dojo/form/RadioButton.css', 'web/themes/dropdownmenus/css/dojo/form/Select.css', 'web/themes/dropdownmenus/css/dojo/form/Slider.css', 'web/themes/dropdownmenus/css/dojo/form/Slider_rtl.css', 'web/themes/dropdownmenus/css/dojo/images/accordionItemActive.gif', 'web/themes/dropdownmenus/css/dojo/images/accordionItemHover.gif', 'web/themes/dropdownmenus/css/dojo/images/buttonActive.png', 'web/themes/dropdownmenus/css/dojo/images/buttonDisabled.png', 'web/themes/dropdownmenus/css/dojo/images/buttonEnabled.png', 'web/themes/dropdownmenus/css/dojo/images/buttonHover.png', 'web/themes/dropdownmenus/css/dojo/images/calendarDayLabel.png', 'web/themes/dropdownmenus/css/dojo/images/calendarMonthLabel.png', 'web/themes/dropdownmenus/css/dojo/images/calendarYearLabel.png', 'web/themes/dropdownmenus/css/dojo/images/checkmark.gif', 'web/themes/dropdownmenus/css/dojo/images/checkmark.png', 'web/themes/dropdownmenus/css/dojo/images/checkmarkNoBorder.gif', 'web/themes/dropdownmenus/css/dojo/images/checkmarkNoBorder.png', 'web/themes/dropdownmenus/css/dojo/images/circleIcon.gif', 'web/themes/dropdownmenus/css/dojo/images/circleIcon.png', 'web/themes/dropdownmenus/css/dojo/images/comboArrowDown.gif', 'web/themes/dropdownmenus/css/dojo/images/dijitProgressBarAnim.gif', 'web/themes/dropdownmenus/css/dojo/images/dijitProgressBarAnim.psd', 'web/themes/dropdownmenus/css/dojo/images/dndCopy.png', 'web/themes/dropdownmenus/css/dojo/images/dndMove.png', 'web/themes/dropdownmenus/css/dojo/images/dndNoCopy.png', 'web/themes/dropdownmenus/css/dojo/images/dndNoMove.png', 'web/themes/dropdownmenus/css/dojo/images/dojoTundraGradientBg.gif', 'web/themes/dropdownmenus/css/dojo/images/dojoTundraGradientBg.png', 'web/themes/dropdownmenus/css/dojo/images/doubleArrowDown.png', 'web/themes/dropdownmenus/css/dojo/images/doubleArrowUp.png', 'web/themes/dropdownmenus/css/dojo/images/folderClosed.gif', 'web/themes/dropdownmenus/css/dojo/images/folderOpened.gif', 'web/themes/dropdownmenus/css/dojo/images/i.gif', 'web/themes/dropdownmenus/css/dojo/images/i_half.gif', 'web/themes/dropdownmenus/css/dojo/images/i_half_rtl.gif', 'web/themes/dropdownmenus/css/dojo/images/i_rtl.gif', 'web/themes/dropdownmenus/css/dojo/images/leaf.gif', 'web/themes/dropdownmenus/css/dojo/images/loading.gif', 'web/themes/dropdownmenus/css/dojo/images/menu.png', 'web/themes/dropdownmenus/css/dojo/images/minusButton.gif', 'web/themes/dropdownmenus/css/dojo/images/no.gif', 'web/themes/dropdownmenus/css/dojo/images/noX.gif', 'web/themes/dropdownmenus/css/dojo/images/plusButton.gif', 'web/themes/dropdownmenus/css/dojo/images/popupMenuBg.gif', 'web/themes/dropdownmenus/css/dojo/images/preciseSliderThumb.gif', 'web/themes/dropdownmenus/css/dojo/images/preciseSliderThumb.png', 'web/themes/dropdownmenus/css/dojo/images/preciseSliderThumbFocus.gif', 'web/themes/dropdownmenus/css/dojo/images/preciseSliderThumbFocus.png', 'web/themes/dropdownmenus/css/dojo/images/progressBarAnim-1.png', 'web/themes/dropdownmenus/css/dojo/images/progressBarAnim-2.png', 'web/themes/dropdownmenus/css/dojo/images/progressBarAnim-3.png', 'web/themes/dropdownmenus/css/dojo/images/progressBarAnim-4.png', 'web/themes/dropdownmenus/css/dojo/images/progressBarAnim-5.png', 'web/themes/dropdownmenus/css/dojo/images/progressBarAnim-6.png', 'web/themes/dropdownmenus/css/dojo/images/progressBarAnim-7.png', 'web/themes/dropdownmenus/css/dojo/images/progressBarAnim-8.png', 'web/themes/dropdownmenus/css/dojo/images/progressBarAnim-9.png', 'web/themes/dropdownmenus/css/dojo/images/progressBarAnim.gif', 'web/themes/dropdownmenus/css/dojo/images/progressBarAnim.psd', 'web/themes/dropdownmenus/css/dojo/images/progressBarEmpty.png', 'web/themes/dropdownmenus/css/dojo/images/progressBarFull.png', 'web/themes/dropdownmenus/css/dojo/images/radioButtonActive.png', 'web/themes/dropdownmenus/css/dojo/images/radioButtonActiveDisabled.png', 'web/themes/dropdownmenus/css/dojo/images/radioButtonActiveHover.png', 'web/themes/dropdownmenus/css/dojo/images/radioButtonDisabled.png', 'web/themes/dropdownmenus/css/dojo/images/radioButtonEnabled.png', 'web/themes/dropdownmenus/css/dojo/images/radioButtonHover.png', 'web/themes/dropdownmenus/css/dojo/images/sliderEmpty.png', 'web/themes/dropdownmenus/css/dojo/images/sliderEmptyVertical.png', 'web/themes/dropdownmenus/css/dojo/images/sliderFull.png', 'web/themes/dropdownmenus/css/dojo/images/sliderFullFocus.png', 'web/themes/dropdownmenus/css/dojo/images/sliderFullVertical.png', 'web/themes/dropdownmenus/css/dojo/images/sliderFullVerticalFocus.png', 'web/themes/dropdownmenus/css/dojo/images/sliderThumb.png', 'web/themes/dropdownmenus/css/dojo/images/sliderThumbFocus.gif', 'web/themes/dropdownmenus/css/dojo/images/sliderThumbFocus.png', 'web/themes/dropdownmenus/css/dojo/images/smallArrowDown.png', 'web/themes/dropdownmenus/css/dojo/images/smallArrowUp.png', 'web/themes/dropdownmenus/css/dojo/images/splitContainerSizerH-thumb.png', 'web/themes/dropdownmenus/css/dojo/images/splitContainerSizerH.png', 'web/themes/dropdownmenus/css/dojo/images/splitContainerSizerV-thumb.png', 'web/themes/dropdownmenus/css/dojo/images/splitContainerSizerV.png', 'web/themes/dropdownmenus/css/dojo/images/spriteArrows.gif', 'web/themes/dropdownmenus/css/dojo/images/spriteArrows.png', 'web/themes/dropdownmenus/css/dojo/images/spriteRoundedIconsSmall.gif', 'web/themes/dropdownmenus/css/dojo/images/spriteRoundedIconsSmall.png', 'web/themes/dropdownmenus/css/dojo/images/tabActive.png', 'web/themes/dropdownmenus/css/dojo/images/tabClose.gif', 'web/themes/dropdownmenus/css/dojo/images/tabClose.png', 'web/themes/dropdownmenus/css/dojo/images/tabCloseHover.gif', 'web/themes/dropdownmenus/css/dojo/images/tabCloseHover.png', 'web/themes/dropdownmenus/css/dojo/images/tabDisabled.png', 'web/themes/dropdownmenus/css/dojo/images/tabEnabled.png', 'web/themes/dropdownmenus/css/dojo/images/tabHover.gif', 'web/themes/dropdownmenus/css/dojo/images/tabHover.png', 'web/themes/dropdownmenus/css/dojo/images/titleBar.png', 'web/themes/dropdownmenus/css/dojo/images/titleBarBg.gif', 'web/themes/dropdownmenus/css/dojo/images/tooltipConnectorDown.gif', 'web/themes/dropdownmenus/css/dojo/images/tooltipConnectorDown.png', 'web/themes/dropdownmenus/css/dojo/images/tooltipConnectorLeft.gif', 'web/themes/dropdownmenus/css/dojo/images/tooltipConnectorLeft.png', 'web/themes/dropdownmenus/css/dojo/images/tooltipConnectorRight.gif', 'web/themes/dropdownmenus/css/dojo/images/tooltipConnectorRight.png', 'web/themes/dropdownmenus/css/dojo/images/tooltipConnectorUp.gif', 'web/themes/dropdownmenus/css/dojo/images/tooltipConnectorUp.png', 'web/themes/dropdownmenus/css/dojo/images/treeExpand_leaf.gif', 'web/themes/dropdownmenus/css/dojo/images/treeExpand_leaf_rtl.gif', 'web/themes/dropdownmenus/css/dojo/images/treeExpand_loading.gif', 'web/themes/dropdownmenus/css/dojo/images/treeExpand_minus.gif', 'web/themes/dropdownmenus/css/dojo/images/treeExpand_minus_rtl.gif', 'web/themes/dropdownmenus/css/dojo/images/treeExpand_mius.gif', 'web/themes/dropdownmenus/css/dojo/images/treeExpand_plus.gif', 'web/themes/dropdownmenus/css/dojo/images/treeExpand_plus_rtl.gif', 'web/themes/dropdownmenus/css/dojo/images/treeHover.png', 'web/themes/dropdownmenus/css/dojo/images/validationInputBg.gif', 'web/themes/dropdownmenus/css/dojo/images/validationInputBg.png', 'web/themes/dropdownmenus/css/dojo/images/warning.png', 'web/themes/dropdownmenus/css/dojo/layout/AccordionContainer.css', 'web/themes/dropdownmenus/css/dojo/layout/BorderContainer.css', 'web/themes/dropdownmenus/css/dojo/layout/ContentPane.css', 'web/themes/dropdownmenus/css/dojo/layout/SplitContainer.css', 'web/themes/dropdownmenus/css/dojo/layout/TabContainer.css', 'web/themes/dropdownmenus/css/dojo/layout/TabContainer_rtl.css', 'web/themes/dropdownmenus/css/theme.css', 'web/themes/dropdownmenus/images/feather_tiny.png', 'web/themes/dropdownmenus/images/vcllogo.png', 'web/themes/dropdownmenus/js/topnav.js', 'web/themes/dropdownmenus/page.php']","VCL-981 - create a new theme that is more responsive for mobile devices

-added themes/dropdownmenus - theme based on Bootstrap
-modified some layout elements to allow for better theming

authentication.php:
-modified selectAuth: changed table layout to div layout with corresponding css in vcl.css to either make it display as a 2 column table or as a single column, based on screen width
-modified localLogin and checkExpiredDemoUser: changed $skin = 'default' to $skin = DEFAULTTHEME

dashboard.php: modified dashboard: changed table layout to div layout with corresponding css in vcl.css to either make it display as a 2 column table or as a single column, based on screen width

siteconfig.php: modified generalOptions: changed table layout to div layout with corresponding css in vcl.css to either make it display as a 2 column table or as a single column, based on screen width

utils.php:
-removed menulistLI
-modified getNavMenu to build a menu from data returned from getNavMenuData
-added getNavMenuData - function that did much of what getNavMenu used to do, but returns things in a structured array; useful for displaying the menu differently that how getNavMenu generates it
-added checkMenuItemSelected - functions similarly to how menulistLI did but just returns 0 or 1 if the item should be selected or not
-modified getDojoHTML: modified section under viewGroups case that defined javascript variable firstscroll; this is part of what was checked in previously in other files to remove the automatic scroll done when viewing the Manage Groups page
-modified getSelectLanguagePulldown: changed id to class; changed onChange to use this.form.submit instead of document.localeform.submit; added autocomplete=off to cause Firefox to display the correctly selected item

vcl.css:
-added #loginhelp
-added media selectors for max-width: 768px and min-width: 769px
-max-width 768px: displays loginlayout, siteconfiglayout, and dashlayout as normal block elements
-min-width 769px: displays loginlayout, siteconfiglayout, and dashlayout as 2 column table elements
-both include #loginlayout, #loginform, #loginhelp, #siteconfiglayout, #siteconfigleftcol, #siteconfigrightcol, #dashlayout, #dashleft, and #dashright",VCL-981
9101fc39638cafecf2ee464ea9b4e6493c7846ae,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-961
Updated Linux.pm::get_network_bridge_info to check if brctl command exists. Fixed bug where it returned 0 if the command was not installed and the caller was expecting a hash reference.",VCL-961
f6ae452bd2d7d17367cda06d6e88348a525cc5ff,,,5,"['web/.ht-inc/managementnode.php', 'web/locale/po_files/es_MX/vcl.po', 'web/locale/po_files/fr_CA/vcl.po', 'web/locale/po_files/pt_PT/vcl.po', 'web/locale/po_files/vcl.po.template']","managementnode.php, ex_MX/vcl.po, fr_CA/vcl.po, pt_PT/vcl.po, and vcl.po.template: modified addEditDialogHTML: tooltips for natpubliciphelp and natinternaliphelp had placeholders instead of actual text; added help text and updated in locale .po files",
089940e14909b3786cfca0e78c052f48dfe7cb1f,,,3,"['web/.ht-inc/siteconfig.php', 'web/.ht-inc/states.php', 'web/js/siteconfig.js']","VCL-980 - add KMS server configuration to Site Configuration page

siteconfig.php:
-modified AffilTextVariable class: added $width variable
-modified AffilTextVariable::__construct: set $width to 200px as a default
-modified AffilTextVariable::getHTML: changed hard coded '200px' to $this->width
-modified AffilTextVariable::AJupdateAllSettings: changed how $cdata['origvals'] is handled
-added AffilKMSserver class that extends from AFfilTextVariable

states.php: added affilkmsserver to classmapping

siteconfig.js:
-modified affilhelpaddr: (unrelaed to this JIRA) changed base class from GlobalSingleVariable to AffilTextVariable
-added affilkmsserver",VCL-980
8b31d1159b6718fe081ba7a03dd7b24568f6df7b,,,5,"['web/.ht-inc/computer.php', 'web/.ht-inc/groups.php', 'web/.ht-inc/requests.php', 'web/js/groups.js', 'web/js/resources/computer.js']","minor tweaks

computer.php:
-modified fieldWidth: added check for Edge browser when determining to set widths based in pixels or em
-modified AJshowReservations and AJshowReservationHistory: added check to return there are no reservations to list if no current reservations or history for the selected computer

groups.php: removed functionality that jumps to ""startscroll"" on page load
-modified viewGroups: removed id=startscroll for H2 header

groups.js: removed functionality that jumps to ""startscroll"" on page load
-modified buildUserFilterStores: removed check for firstscroll and call to doInitialScroll
-removed doInitialScroll

requests.php: modified AJconfirmDeleteRequest: removed preg_replace that wraps text at 70 characters to allow dijit.Dialog to handle the wrapping (it was getting wrapped at odd places)

computer.js: modified buildExtraFilters: added 'autoWidth: true' to definition of extrafiltergrid",
a920d0f8ffda9adaefd6d7fa48541146f66133c1,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm'],"VCL-977
Updated VIM_SSH.pm::vm_register to detect vim.fault.AlreadyExists. If so, retrieves the conflicting VM ID and attempts to unregister it.

Updated VIM_SSH.pm::vm_unregister to accept either a vmx file path or VM ID.

Updated VIM_SSH.pm::_run_vim_cmd to accept an $attempt_limit argument. If set to 1 and the exit status isn't 0, used to indicate that exit status and output should be returned and calling subroutine for checking.",VCL-977
47e887a823201382b7b7740c41ed9dc3541f6ddd,,,1,['managementnode/lib/VCL/inuse.pm'],"VCL-975

Added variable for collecting general_end_notice_second
updated conditional related to the hardcoded values mentioned in the jira issue",VCL-975
e1eb63a898de611cf9a859879fa4397d053fc12d,,,3,"['web/.ht-inc/siteconfig.php', 'web/.ht-inc/states.php', 'web/js/siteconfig.js']","VCL-964 - Allow default ""from"" email address to be set if affiliation.helpaddress is NULL

siteconfig.php:
-modified generalOptions: added AffilHelpAddress block to left section
-added AffilTextVariable class
-added AffilTextVariable::__construct
-added AffilTextVariable::getValues
-added AffilTextVariable::setValues
-added AffilTextVariable::deleteValue
-added AffilTextVariable::getHTML
-added AffilTextVariable::AJaddAffiliationSetting
-added AffilTextVariable::AJupdateAllSettings
-added AffilTextVariable::AJdeleteAffiliationSetting
-added AffilHelpAddress class inheriting from AffilTextVariable
-added AffilHelpAddress::getValues
-added AffilHelpAddress::setValues
-added AffilHelpAddress::deleteValue

states.php: added affilhelpaddress to classmapping

siteconfig.js:
-modified generalSiteConfigCB: added conditional for setting save continuation to failed block; this is for cases where some things may have failed and others succeeded
-added AffilTextVariable class
-added AffilTextVariable.prototype.addAffiliationSetting
-added AffilTextVariable.prototype.addAffiliationSettingCBextra
-added AffilTextVariable.prototype.saveSettings
-added AffilTextVariable.prototype.deleteAffiliationSetting
-added AffilTextVariable.prototype.deleteAffiliationSettingCBextra
-added affilhelpaddr class
-added instance of affilhelpaddr",VCL-964
0bb67dfa2c804c46a142fd8905141cf53c4ac5c3,,,2,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm']","VCL-961
Added generate_ifcfg_file subroutines to Linux.pm. Updated enable_dhcp and set_static_public_address to use it.

Reworked Linux.pm::set_static_public_address to not simply overwrite the ifcfg-* file. Changed set_static_public_address to use set_default_gateway and update_resolv_conf subroutines rather than using duplicated code.

Updated Linux.pm::get_network_configuration to retrieve network bridge information and add it to the hash returned. Updated OS.pm::get_public_interface_name to check if the configuration for an interface contains a 'master' key indicating that the interface is a slave -- usually because it is bridged. If this key is set then the interface isn't considered.

Fixed some regex/parsing issues with Linux.pm::get_network_bridge_info.


VCL-970
Added code to create a route-* file in Linux.pm::set_default_gateway so that the default gateway persists across reboots. Also added code to enable_dhcp to delete an interface's route-* file.


VCL-969
Added code to Linux.pm::pre_capture to disable the 'firstboot' service if it exists.",VCL-961
6632cbd8ea487ffd20b545abd11fdfcecb2c59cf,,,1,['web/js/nls/messages.js.template'],"VCL-968 - Localization updates for 2.5

changed a few double quotes to single quotes

added the following words/phrases:
weeks
Unmatched or empty brackets ( [ and ] ) in subject
Unmatched or empty brackets ( [ and ] ) in message
Unmatched or empty brackets ( [ and ] ) in short message
Values updated
Submit Changes
Add
Invalid item selected for new value
Invalid value submitted
Invalid item submitted for deletion
You do not have access to modify the submitted settings.
Invalid value submitted for 
NFS Mounts
NFS Mounts are NFS exports that are to be mounted within each reservation deployed by a given management node.<br>Values must be like
Invalid value - must be in the form
Messages
This section allows for configuration of messages that are sent to users and administrators about things such as reservations and image management. Every message has a default. Additionally, separate messages can be configured for each affiliation. Most of the messages will have parts that are in square brackets. These parts will have data substituted for them before the message is sent. A list of what can be used in squeare brackets can be found at the <a href=\""%s\"">Apache VCL web site</a>. Some messages also have a short form that may be sent such as in the form of a popup within a reservation when the reservation is about to end.
Save Message
Delete Message and Use Default
The following messages have invalid items included for substitution. Please correct the message contents and save them again for the backend to validate.
Message type %s for affiliation %s successfully deleted
Invalid item submitted to save
Message successfully saved
No changes to submitted message. Nothing saved.",VCL-968
9737ae176d566f8cabd55f8d5f06229ff1bee0f8,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-961
Added subroutines to Linux.pm:
get_ifcfg_file_info
get_network_bridge_info

Rewrote Linux.pm::enable_dhcp. It now checks if an interface is bridged and does not overwrite bridge or most other custom configurations. It selectively removes certain parameters which are specific to a particular network or computer.

Added ifcfg-* backup files to $CAPTURE_DELETE_FILE_PATHS to prevent backups from accumulating. When an image is captured, a single backup should remain since enable_dhcp is called after clean_known_files.",VCL-961
bf232b7ac365b0729e171696ae3c1b50df4d5192,,,8,"['web/.ht-inc/blockallocations.php', 'web/.ht-inc/requests.php', 'web/locale/po_files/es_MX/vcl.po', 'web/locale/po_files/fr_CA/vcl.po', 'web/locale/po_files/ja_JP/vcl.po', 'web/locale/po_files/pt_PT/vcl.po', 'web/locale/po_files/vcl.po.template', 'web/locale/po_files/zh_CN/vcl.po']","VCL-968 - Localization updates for 2.5

blockallocations.php:
-modified blockAllocationForm: fixed typo where 'User' should have been 'Users' - also updated this in all of the vcl.po files
-modified viewBlockStatus: wrapped notice about block allocation not existing with translation function

requests.php:
-modified newReservationHTML: wrapped ""Please select a valid environment"" with translation function
-modified newReservationConfigHTML: wrapped an error message with translation function; this part of the code is currently not used

vcl.po.template:
-regenerated using 'xgettext -o ../locale/po_files/vcl.po.template --no-wrap -ki *.php authmethods/*.php' from within .ht-inc directory

vcl.po files:
-regenerated each file using 'msgmerge --no-wrap -N vcl.po ../vcl.po.template > vcl-new.po'",VCL-968
2980aca72da6160a744271cc1a865885996fadf9,,,1,['web/.ht-inc/utils.php'],"VCL-956 - display reservation times in user's own timezone

utils.php: modified getDojoHTML: added check for PHP session being started before checking for tzoffset being set in $_SESSION; this was generating a PHP notice",VCL-956
6551be8e460a0a47e02a24e41f46a79beaa6958d,,,2,"['web/.ht-inc/requests.php', 'web/js/newresservercommon.js']","VCL-956 - display reservation times in user's own timezone

requests.php: modified viewRequests: added offsetreloading variable to printed javascript block to act as a flag that the page is getting reloaded

newresservercommon.js: modified populateProfileStore: added check for offsetreloading being defined and set to 1; if so, do not make AJAX call to populate profile store; there was a race condition where the initial page load would continue even after the browser started to reload the page that caused the continuation to get deleted from the database from the initial page load, after it was populated into the database from the 2nd page load, but before the 2nd page load attempted the AJAX call to load it; therefore, when the 2nd page load tried to load it, it had already been deleted from the database",VCL-956
7f766ce5654a7191e513fd4b7aa96f7685d36867,,,1,['managementnode/lib/VCL/Module/Provisioning/libvirt.pm'],"VCL-967
Added subroutines to libvirt.pm:
get_node_network_info
get_node_network_xml_string
get_node_interface_info
get_node_interface_xml_string

Added check to libvirt.pm::initialize to make sure the VM networks configured in the VM profile actually exist on the VM host. If not, a critical message is sent.

Updated libvirt.pm::generate_domain_xml to check if the VM network matches a virtual network on the host. If so, the interface type gets set to 'network'. Otherwise, it gets set to 'bridge'.",VCL-967
e27c0e7b88a91b932c680215a1e5976e43d20a2e,,,1,['managementnode/lib/VCL/Module/OS/Linux/ManagementNode.pm'],"VCL-963
Extended ManagementNode.pm::execute to allow a hash reference to be passed as the argument.",VCL-963
93edee85b8b14113a57a23d67010567551f9ae6b,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-965
Updated utils.pm::kill_child_processes to use ps instead of pgrep.",VCL-965
13bd04bb2350bea2f5d30fc7d7b89cea8cc22e51,,,1,['managementnode/lib/VCL/utils.pm'],"Trivial
Made minor addition to utils.pm::string_to_ascii to output the ASCII numerical code in addition to the character for the extended ASCII characters.",
a62ac8367fe8af209c7e816baba6efc2fcf0a677,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-915
Added start_nfs_client_service and stop_nfs_client_service to Windows.pm which use nfsadmin.exe to control the service. Updated start_service and stop_service to call these new subroutines if the service name is NfsClnt.

Other
Cleaned up old code in add_user_group_policy_script and remove_user_group_policy_script. Added get_user_group_policy_script_info.",VCL-915
ec801eed12704256c0618a70fc556e5fc996c329,,,15,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/ESXi.pm', 'managementnode/lib/VCL/Module/OS/Linux/UnixLab.pm', 'managementnode/lib/VCL/Module/OS/OSX.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6.pm', 'managementnode/lib/VCL/Module/Provisioning.pm', 'managementnode/lib/VCL/Module/Provisioning/openstack.pm', 'managementnode/lib/VCL/image.pm', 'managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/reclaim.pm', 'managementnode/lib/VCL/reserved.pm']","VCL-862
Added subroutines to OS.pm:
get_current_image_tag
set_current_image_tag
set_post_load_status
get_post_load_status
set_tainted_status
get_tainted_status

Removed subroutine from OS.pm:
set_vcld_post_load_status

Removed call to set_vcld_post_load_status from each OS module.

Added call to set_post_load_status in image.pm after post_load is called when a checkpoint is saved.

Added call to set_tainted_status in reserved.pm::process after the user connection check is successful.

Added call to set_tainted_status in OS.pm::run_management_node_tools_scripts if a post_reserve script gets executed. The logic is that the post_reserve script does something specific to the reservation that may not be reverted if the computer is sanitized.  Added call to set_tainted_status to Linux.pm::post_reserve and Windows.pm::post_reserve for the same reason.

Added call to get_tainted_status in reclaim.pm::process. If true, node is always reloaded.

Removed 'computer_currentimage_vcld_post_load' from DataStructure.pm. It is no longer being used. Removed call to $self->data->set_computer_currentimage_vcld_post_load from OS.pm::get_current_image_info.

Updated Provisioning.pm::node_status to call get_tainted_status and return RELOAD if it is set. Reworked node_status and new.pm::reload_image to clean things up.

Other
Added optional $suppress_key_missing_error argument to Windows.pm::reg_query. Also added check for key or value which doesn't exist.

Added currently unused NFS-related subroutines to Windows.pm.",VCL-862
272694a885a37e33df18602febd1d4d8eb6b974c,,,2,"['managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm']","VCL-929
VIM_SSH.pm::get_virtual_disk_hardware_version still wasn't parsing the hardware version correctly. '1' was being returned if the value was supposed to be '11'. Updated to regex to include the /g flag.

Also added check to VMware.pm::get_vm_virtual_hardware_version to catch if get_virtual_disk_hardware_version returns a value less than 7 and ESXi is being used.",VCL-929
27b23e536c9694bc4906a77c3230d0d2030d4c26,,,1,['managementnode/lib/VCL/inuse.pm'],Fixed typos for a subroutines I decided to rename in a previous commit. I removed the underscore from the subroutine names but not the calls.,
c93beecb50a148901e48efe544f375b5f9d9b27e,,,3,"['managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/image.pm', 'managementnode/lib/VCL/utils.pm']","VCL-898
Removed log ID argument from utils.pm::insert_request and updated calls to it.  Added argument to suppress warning from calls to get_request_log_id if it is NULL.",VCL-898
fc363f94c458804acb6052c5aa88f5e1bb634c81,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],Changed notify message in Linux.pm::get_firewall_configuration and disable_firewall_port from warning to debug if iptables service doesn't exist. It was causing many warnings for RH/CentOS 7 images.,
e34950ac9e05df16639d96682754632b78c92b35,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],Trivial: Removed unused variables from Linux.pm::grant_access.,
c1ae89267b918790f6240d34a5a0e10ef1f98139,,,1,['managementnode/lib/VCL/image.pm'],Added check to make sure post_load subroutine is implemented in image.pm where post_load is called during checkpoint state.,
29443ff289197d4f6b50fa3a50533175fbb543fc,,,3,"['managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6.pm']","VCL-958
Removed call to set_vcld_post_load_status from Windows.pm. Added call to the very end of the post_load subroutine in Version_5.pm and Version_6.pm.",VCL-958
fa82ecfbe7ef2c9c8c4a99da74154c9bfac87525,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-898
Updated schema to allow request.logid to be NULL.",VCL-898
539bdbd148b078cc554455013b9dafc9f429d67c,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-943
Added calling subroutine checks to avoid deep recursion in utils.pm::get_computer_info.",VCL-943
2e9dd1624fff9e59862d3dd86af5f7f960573645,,,4,"['managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm', 'managementnode/lib/VCL/utils.pm']","VCL-953
Added subroutines:
Module.pm::get_class_variable_hierarchy
utils.pm::wrap_string
Linux.pm::start_network_interface
Linux.pm::stop_network_interface
Linux.pm::delete_default_gateway
Linux.pm::set_default_gateway
Linux.pm::clear_file
Linux.pm::update_resolv_conf

Reworked Linux.pm::get_exclude_list. Added code to allow for * wildcards in the list entries. Added:
Linux.pm::get_exclude_regex_list
Linux.pm::is_file_in_exclude_list
Rewrote Linux.pm::generate_exclude_list_sample to explain the wildcard feature. It was also a mess.

Rewrote Ubuntu.pm::enable_dhcp and set_static_public_address. It was clobbering the /etc/network/interfaces file if an image had been configured with anything other that the default interface configuration such as setting up bridge.

Rewrote Linux.pm::clean_known_files. Added $CAPTURE_DELETE_FILE_PATHS and $CAPTURE_CLEAR_FILE_PATHS class variables to Linux.pm and Ubuntu.pm. These are array references which list files to clear or delete.

VCL-957
Added command to set the root password in Linux.pm::pre_capture. It's currently using the $WINDOWS_ROOT_PASSWORD variable name but that's fine for now.

Other
Removed call to process_connect_methods from Linux.pm::pre_capture. It wasn't doing anything other than generate warning messages.

Added optional $display_output argument to Linux.pm::file_exists. This is used from Linux.pm::delete_file to reduce vcld.log messages.

Added command to delete /etc/ssh/external_sshd_config in Linux.pm::delete_service when the ext_sshd service is deleted. This file was getting left.

Removed useless/sloppy code in Ubuntu.pm::clean_iptables. Set this subroutine to always return 1. All it had been doing was displaying a warning when it detected the iptables service didn't exist.",VCL-953
1896d91b8e2bcbfde6954b42d6b9ab7677d5140b,,,13,"['web/.ht-inc/blockallocations.php', 'web/.ht-inc/dashboard.php', 'web/.ht-inc/privileges.php', 'web/.ht-inc/requests.php', 'web/.ht-inc/schedule.php', 'web/.ht-inc/states.php', 'web/.ht-inc/statistics.php', 'web/.ht-inc/utils.php', 'web/.ht-inc/vm.php', 'web/js/blockallocations.js', 'web/js/code.js', 'web/js/requests.js', 'web/js/resources/schedule.js']","VCL-807 - indicate timezone on schedules / reservations
VCL-956 - display reservation times in user's own timezone

blockallocations.php:
-modified blockAllocationForm: added hidden input fields containing a timestamp of the current time on the server and the short code for the timezone of the server; added timezone short code after input fields where dates or times are input or displayed
-modified getCurrentBlockHTML: modified nextstart for listed block allocations to have the user's local timezone; added a hidden input field containing the short code for the timezone of the server
-modified viewBlockStatus: added the server's timezone to the start and end time of the block allocation
-modified viewBlockAllocatedMachines: added line containing short code of server's timezone and stating all listed times are in that timezone

dashboard.php: modified dashboard: added line containing short code of server's timezone and stating all listed dates and times are in that timezone

privileges.php: modified userLookup: added short code of server's timezone to login times; added short code of server's timezone to reservation start/end times

requests.php:
-modified viewRequests: added a block at the top that gets the timezone offset of the user's browser, submits it back as a GET request, and saves it in a session variable
-modified newReservationHTML: add tzoffset to time used to generate drop down values for selecting start time; removed timezone short code of server displayed next to the start time
-modified AJshowRequestSuggestedTimes: added tzoffset to start time of time slots; changed reference in foreach loop from $slot['startts'] to $slots[$key]['startts']
-modified AJeditRequest: generate date/time values for displaying and for forms that are in the user's timezone
-modified AJsubmitEditRequest: convert submitted start/end times from user timezone to server timezone
-modified getReserveDayData: add tzoffset to time when generating list of days for start select input

schedule.php: modified addEditDialogHTML: added timezone short code next to start/end input times; added a hidden input field containing the short code for the timezone of the server

states.php: added AJsetTZoffset

statistics.php: modified viewStatistics: added line containing short code of server's timezone and stating all listed dates and times are in that timezone

utils.php:
-modified setupSession: added persistdata to $_SESSION
-modified showTimeTable: added tzoffset to date/time labels to show in user's timezone
-modified prettyDatetime: added tzoffset to $stamp before formatting date/time
-added AJsetTZoffset
-modified getDojoHTML: added global javascript variable tzoffset that is set to $_SESSION['persistdata']['tzoffset'], or if that is not yet set, to 'unset'. also added timeout to call init() which uses AJAX to send the user time zone offset to the server that can get set in the session variable; this is to attempt to get tzoffset set in the session as soon as possible after a user visits the site

vm.php:
-modified vmhostdata: add timezone short code to times displayed for when VMs will be removed from hosts
-modified AJvmFromHost: add timezone short code to times displayed for confirming when VMs will be removed from hosts

blockallocations.js:
-modified blockFormAddListSlot: use now timestamp embedded in hidden field in page instead of current time in browser for validating submitted date so that it will be in the server's timezone
-modified gridDateTimePrimary, gridTimePrimary, timeFromTextBox, blockTimesGridStart, and blockTimesGridEnd: added timezone short code from embedded hidden field to returned date/time

code.js:
-added init() which is used to do any page initialization, but currently only sends the user's timezone offset via AJAX if it is not already set
-added getDayName function to Date object

requests.js:
-modified getDeployData: add user's timezone offset to value that gets put in data.start
-modified useSuggestedEditSlot: modified for loop that finds matching day of start day select input to compare by the day string instead of by the value of the select input

resources/schedule.js: modified getTime: added timezone short code from embedded hidden input field to returned string",VCL-807
26b4344a9a9a3393d703c3492709ec47d54cb71f,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm'],"VCL-928
Fixed bug where vmx.reference file was not being created under certain vmprofile configurations.",VCL-928
8712eaa7e8351def1f1395c0de446d032e38f05f,,,4,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm']","VCL-940
Added OS.pm::wait_for_public_ip_address. This gets called from OS.pm::update_public_ip_address.

Added $no_cache and $ignore_error arguments to several get_* networking subroutines to allow fresh data to be retrieves and to suppress warning messages.

Removed Windows.pm::get_public_interface_name and get_public_ip_address. These were already looping until the public IP was obtained. Having everything use the code in OS.pm is simpler.",VCL-940
3bef3b0f7d3b93f58bd5df001ebae5342112b985,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT.pm'],"Trivial change, added command which was executed to the output to 2 notify lines in xCAT.pm.",
66ffb331106be6fed2a41cc59e49b6bf5ad89fb0,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-843 - Remove ""VM limit""

vcl.sql: modified definition for vmhost: removed vmlimit

update-vcl.sql:
-removed ALTER TABLE for vmhost that changed vmlimit
-added CALL DropColumnIfExists for vmhost.vmlimit",VCL-843
2a6c9eae99b456f6c7cbbb153215a771cceccdb1,,,1,['web/.ht-inc/computer.php'],"VCL-843 - Remove ""VM limit""

computer.php: modified insert queries to the vmhost table in the following fuctions to remove inserting the vmlimit field: AJsaveResource, addResource, and updateVmhostProfile",VCL-843
bca07e076f84e036b955206c1ca8ad9642db50a5,,,2,"['web/.ht-inc/vm.php', 'web/js/vm.js']","VCL-843 - Remove ""VM limit""

vm.php:
-modified editVMInfo: removed row related to VM limit; added a line below the list of assigned VMs that shows how many VMs are currently assigned
-modified vmhostdata: removed vmlimit from returned data
-modified getVMHostData: removed vmlimit from returned data
-removed updateVMlimit
-modified AJvmToHost: removed section that checks if the host has too many assigned VMs

vm.js:
-modified VMHostDataCB: removed line that set vmlimit; added line that sets assignedcnt to the number of currently assigned VMs
-removed updateVMlimit
-removed updateVMlimitCB
-modified vmToHost: removed section that checks for exceeding vmlimit
-modified vmToHostCB: removed section that checks for error code of vmlimit; added line that sets assignedcnt to the number of currently assigned VMs
-modified vmFromHostCB: added line that sets assignedcnt to the number of currently assigned VMs",VCL-843
b8c2739a8a942ff6367402149e8146e8b06b470d,,,1,['web/.ht-inc/image.php'],"VCL-935 - modify layout of edit image dialog to distinguish what items are immediately changed 

image.php:
-modified addEditDialogHTML: moved revisiondiv to after editdlgbtns div so that the image revision section is displayed below the buttons
-modified getRevisionHTML: added note that changes in the image revision section are immediate",VCL-935
52e1f511192c8d21fdc46041a347442047d3a27c,,,1,['web/.ht-inc/utils.php'],"VCL-944 - typo in getUserResources prevents access to management nodes and groups

utils.php: modified getUserResources: changed 'mgmtnodeAdmin' to 'mgmtNodeAdmin'",VCL-944
b9fdd9e020fd98ca19e628d8c8d042edae4b1ee5,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-952 - API modifications to allow interaction via ""VCL go"" iOS app

vcl.sql:
-added definition for oneclick table
-added constraints for oneclick table

update-vcl.sql:
-added definition for oneclick table
-added constraints for oneclick table",VCL-952
167d3b8f0c5d95a10d45762ee1138b8a2c7757de,,,4,"['web/.ht-inc/oneclick.php', 'web/.ht-inc/states.php', 'web/.ht-inc/utils.php', 'web/.ht-inc/xmlrpcWrappers.php']","VCL-952 - API modifications to allow interaction via ""VCL go"" iOS app

the initial work for the VCL OneClick (renamed to VCL go) was done as a student project in the NCSU CSC Cloud Computing class in the Spring of 2012 by a group headed by Ignacio Dominguez

oneclick.php - initial commit

states.php:
-added newOneClick (also added to $actions['entry'])
-added submitOneClick
-added deleteOneClick
-added editOneClick
-added submitEditOneClick

utils.php:
-modified initGlobals: added case oneclicks to switch statement that includes files to include oneclick.php
-modified getUserRequests: added ostype to returned data for each reservation
-modified xmlrpccall: added XMLRPCgetOneClickParams, XMLRPCgetOneClicks, XMLRPCaddOneClick, XMLRPCeditOneClick, XMLRPCdeleteOneClick, and XMLRPCgetIP
-modified getNavMenu: added ""VCL gos"" to menu
-modified getDojoHTML: added cases newOneClick, editOneClick, submitOneClick, submitEditOneClick, and deleteOneClick to switch statement

xmlrpcWrappers.php:
-modified XMLRPCgetRequestIds: added ostype and serverowner to data returned for each reservation
-added XMLRPCgetOneClickParams
-added XMLRPCgetOneClicks
-added XMLRPCaddOneClick
-added XMLRPCeditOneClick
-added XMLRPCdeleteOneClick
-added XMLRPCgetIP",VCL-952
131db7d82b0bce50aa1f5d25344b40f2bc97fab6,,,1,['web/.ht-inc/requests.php'],"VCL-951 - suggested times not displayed for parent image of clusters when making imaging reservation

requests.php:
-modified newReservationHTML: (unrelated to JIRA) added check for $id being in $imagedata to conditional before checking for rootaccess == 1 or user being owner of image
-modified AJupdateWaitTime: if $type == imaging, set $imaging = 1; modified conditional checking for cluster to also check that not doing an imaging reservation",VCL-951
d0f71eb9a27eafb1baeb19e9e99f1cc318d904c0,,,2,"['web/.ht-inc/requests.php', 'web/js/requests.js']","VCL-950 - use web notifications to alert when a reservation is ready 

requests.php: modified viewRequests: changed $pendingcnt to an array of pendingids, keep track of the previous page load of pending ids in a session variable, compare the two and call notifyResReady if any of them have become ready

requests.js:
-added request for permission to display notifications
-added notifyResReady function",VCL-950
64af30913b5e2a2bb227d8e1f81f49c8ae9b7f67,,,1,['web/js/requests.js'],"VCL-932 - delete reservation from View Time Table does not work

requests.js:
-modified endReservation: added check for existence of deletecontholder before setting its value
-modified endReservationCB: added check for existence of serverdeletedlg before checking for it being open",VCL-932
d8efba5b612dbbde1d175c4c7503dabda7c9064c,,,1,['web/.ht-inc/privileges.php'],"VCL-949 - userlookup page - add vmhost to reservation history; add list of reservations user has access to but doesn't own 

privileges.php: modified userLookup: added vmhost to reservaiton history; changed message displayed if no reservations to display from saying none in that last week to none at all; added list of reservations user has access to but does not own",VCL-949
a81c5597ef6c9bc349272b8725bb73f05a592d5c,,,1,['web/.ht-inc/managementnode.php'],"VCL-936 - cannot update management node sysadmin or shadow email addresses

managementnode.php: modified AJsaveResource: added array $esc that contains mysql_real_escape_string data for sysadminemail and sharedmailbox",VCL-936
7d838f270469cc40506ba914779c93b22973c5a7,,,1,['web/.ht-inc/computer.php'],"VCL-948 - add admingroup and logingroup to reservation data displayed when looking up reservations on computers

computer.php: modified AJshowReservations: added admingroup and loging group to query and to message returned to user; (unrelated) also added set of states not to include (timedout, deleted, and complete)",VCL-948
1ce704604cfb87260945fa3ea1f0a511aef4a918,,,1,['web/.ht-inc/computer.php'],"VCL-872 - Computer notes not saved when changing state from vmhostinuse to maintenance

computer.php: modified AJsubmitCompStateChange: added $changenow to arrays merged together to make $comparr in conditional that checks to see if new state is maintenance and if there are any computers in $changeasap, $noaction, or $changenow",VCL-872
b891a99da01fc0b32889c0e702f893aa01f47ba8,,,1,['web/.ht-inc/blockallocations.php'],"VCL-947 - for block allocation accept/reject emails change sender address from ENVELOPESENDER to HELPEMAIL

blockallocations.php: modified AJacceptBlockAllocationSubmit and AJrejectBlockAllocationSubmit: changed address set for $mailParams from ENVELOPESENDER to HELPEMAIL",VCL-947
9fd5d2d5e7c6d9d7287c6933fdd10aba2853b546,,,2,"['web/.ht-inc/computer.php', 'web/.ht-inc/utils.php']","VCL-946 - add image revision to manage computers page

utils.php: modified getComputers: added ir.revision AS imagerevision to query

computers.php:
-modified fieldWidth: added case for imagerevision (also added cases for procnumber and ram to decrease the amount of space those columns took up)
-modified fieldDisplayName: added case for imagerevision",VCL-946
d88c435b655cd0c4ec418bcee9bc97676d7cbc59,,,7,"['web/.ht-inc/authentication.php', 'web/.ht-inc/blockallocations.php', 'web/.ht-inc/groups.php', 'web/.ht-inc/privileges.php', 'web/.ht-inc/requests.php', 'web/.ht-inc/resource.php', 'web/.ht-inc/userpreferences.php']","added DOM ids and css classes to many elements to allow for better control of the look of the site from theme/skin css; changed width of a few elements

authentication.php:
-modified selectAuth: added id=loginlayout to main layout table
-modified printLoginPage: added new div with id=loginbox around login content; added id=loginlayout to main layout table

blockallocations.php: modified getCurrentBlockHTML: changed width of Date field of viewtimesDialog from 60px to 65px

groups.php:
-modified viewGroups: changed width of edit button column for both user and resource groups from 3em to 3.5em
-modified editOrAddGroup: added id=groupmembershiptbl to layout table of section to edit user group membership

privileges.php:
-modified viewNodes, selectNode, printUserPrivRow, getUserPrivRowHTML, and getResourcePrivRowHTML: added css classes privBlock and privCascade to cells table cells where bgcolor=gray and bgcolor=#008000 were assigned
-modified viewNodes: added css class=noborder to tables containing buttons
-modified userLookup: added div with id=userlookupdata to wrap data about user looked up; added div with id=userlookupresdata to wrap data about user's reservations

requests.php: modified newReservationHTML: changed width for environment drop down in new reservation dialog from 400px to 95% to work with mobile devices better

resource.php: modified viewResources: changed width of edit button column from 3em to 3.5em

userpreferences.php: modified userpreferences: changed definition for width of separator table cell from width=50px to style=""width: 5em;""; added id=uipreffieldsets to table cell containing fieldsets of data to be modified",
2c227bf1cd47babc5226dc22e599e357eb707fc1,,,2,"['managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/utils.pm']","VCL-941
In State.pm::reservation_failed and utils.pm::switch_state, added checks for request state including 'reboot' and 'server' in order to prevent an inuse requests from being set to failed.",VCL-941
7d81617c802b0d7a256bf0cdae3c3dd6f32f34f6,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm'],"VCL-906
Added VMware.pm::node_status. This adds an additional check to make sure a VM's disk is dedicated if necessary. Even if the VM is responding and loaded with the correct image, this will return 'reload' if the disk is shared but a dedicated disk is required.

VCL-939
Updated VMware.pm::remove_existing_vms. It was not deleting VMs that resided on a datastore other than vmprofile.vmpath. Also added a ping check after the VMs should have been deleted.",VCL-906
1c55e8407de4809c36fc24bc57b496ca5d9f45f2,,,2,"['web/.ht-inc/computer.php', 'web/js/resources/computer.js']","VCL-938 - Add a count of computers listed in the table on the Edit Computer Profiles page

computer.php: modified extraResourceFilters: added a span for holding the computer count after the button for refreshing the table data

computer.js:
-modified initPage: added a timeout to update the displayed computer count 3 seconds after the page initializes
-modified applyExtraFilters: update the displayed computer count
-modified compGroupFilterSelectionCB: update the displayed computer count",VCL-938
281c522a69742d66a7c3bb5d37973a36692992c5,,,4,"['web/.ht-inc/groups.php', 'web/.ht-inc/requests.php', 'web/.ht-inc/utils.php', 'web/js/requests.js']","VCL-937 - Increase max length of duration limited images from 45 days to 20 weeks

groups.php:
-modified jsonUserGroupStore, editOrAddGroup, and confirmEditOrAddGroup: changed argument passed to getReservationLengths from 65535 to 201600
-modified submitDeleteGroup: changed update query to set groupid to NULL instead of 0 (unrelated to VCL-937)

requests.php: modified AJeditRequest: modified for loops that generate values for extending reservation to include 7 weeks through 20 weeks

utils.php:
-modified getReservationLengths: added extra for loop to generate values for reservation duration to include 7 weeks through 20 weeks
-modified getReservationLength: added conditional to return value in days if less than 64800 minutes; changed default return to be in weeks
-modified getReservationExtenstion: added conditional to return value in days if less than 64800 minutes; changed default return to be in weeks
-modified getReservationLengthCeiling: added extra for loop to generate values for reservation duration to include 7 weeks through 20 weeks; changed default return to be 201600

requests.js: modified setMaxRequestLength: added extra ""else if"" block to handle options greater than 45 days as weeks",VCL-937
70202f2534549736e6643acfe1fe2a75dcdc76d7,,,1,['web/.ht-inc/states.php'],"VCL-915 - Add ability for Linux images to mount NFS shares
VCL-919 - Allow customization of notification messages sent to users

forgot to include states.php in the last commit

states.php:
-added mode AJaddConfigMultiVal
-added mode AJdeleteMultiSetting
-added mode AJsaveMessages
-added mode AJdeleteMessages
-added mode AJvalidateMessagesPoll
-added above new modes to $noHTMLwrappers
-added classmapping nfsmounts
-added classmapping messages",VCL-915
ca5afa5a9d35237b22103d8be2413b1958feedde,,,5,"['web/.ht-inc/siteconfig.php', 'web/.ht-inc/utils.php', 'web/css/vcl.css', 'web/js/code.js', 'web/js/siteconfig.js']","VCL-915 - Add ability for Linux images to mount NFS shares
VCL-919 - Allow customization of notification messages sent to users

siteconfig.php:
-modified generalOptions: added call to get html for NFSmounts section; added call to get html for messages section
-added GlobalMultiVariable class
-added NFSmounts class that inherits from GlobalMultiVariable class
-added Messages class

siteconfig.js:
-added GlobalMultiVariable class
-added nfsmount class that inherits from GlobalMultiVariable class
-instantiated nfs class
-added messages class
-instantiated messages class

utils.php:
-modified labeledFormItem: modified styling for label for textarea elements to vertical align the text to the top
-modified getDojoHTML: added dijit.Dialog and dojox.layout.FloatingPane to siteconfig mode; added import for FloatingPane.css file for stieconfig mode

code.js: modified checkValidateObj: added check for isValid method existing in dijit object for passed in id before calling isValid on it

vcl.css: added .highlightnotice",VCL-915
7fed1a046fa2788de920b33cf39a93378ec51a1f,,,1,['managementnode/lib/VCL/reserved.pm'],"VCL-934
Added check in reserved.pm for server requests when retrieving 'initialconnecttimeout' computerloadlog entry to prevent warnings in vcld.log.",VCL-934
56182a26a86542152ed19aec90fb5fa089831c3e,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm'],"VCL-844
Made several improvements to VMware.pm::migrate_vm. Changed SSH key creation code so that it doesn't add comments to the keys. ESXi is very picky about this. Added code to check the firewalls on the ESXi hosts and open up port 22 if necessary.",VCL-844
669488c159baea28adfa4a588e75c4de00b6f0c6,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm'],"VCL-844
Added subroutines to VIM_SSH.pm:
firewall_ruleset_allow_ip
firewall_ruleset_enable
get_firewall_ruleset_info
get_matching_firewall_ruleset_info
is_firewall_port_allowed

These are used to determine configure the firewalls between 2 ESXi hosts to allow SSH traffic for a migration.

Fixed problem where a VMware snapshot would fail if taken on a powered off or suspended VM after a previous snapshot was successfully taken.

Added 6 minute timeout to vim-cmd power on command. Powering on a VM may take some time if it is suspended.",VCL-844
8eec3970ce8674058a8c89557797766353cd283b,,,1,['managementnode/lib/VCL/Module.pm'],"VCL-844
Added additional check to Module.pm::create_vmhost_os_object where it checks which OS module to use. Overrides to Linux.pm if OS is Windows 2003, XP, or Vista. A VM host OS module object would never use these modules.",VCL-844
075b96baced6b420204edd1c11399e86e96259ab,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-912
Added subroutines to utils.pm:
get_provisioning_table_info
get_vmhost_assigned_vm_provisioning_info

These are not being called yet. They may be used in the future to try to dynamically determine which provisioning module to use for a VM host.

VCL-844
Added $no_cache argument to get_vmhost_assigned_vm_info.",VCL-912
f6013fa6a413e876712debd25ba3d8cb6f4d400a,,,1,['mysql/phpmyadmin.sql'],"VCL-930
Updated phpmyadmin.sql to use double-underscores in pma__table_info table name.",VCL-930
f5c50cb027a578d72b7c896d858008ed3f8089d0,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm'],"VCL-929
Fixed regex bug in VIM_SSH.pm::get_virtual_disk_hardware_version.",VCL-929
06807b271bdd4813dfc85a31bbc6d3cc8bca0589,,,1,['managementnode/lib/VCL/Module/Semaphore.pm'],Fixed typo in notify messages: losf -> lsof,
56f72913bedb290c3c78d6a824b34f1eb35c1e4c,,,3,"['managementnode/lib/VCL/Module/OS/Linux/ManagementNode.pm', 'managementnode/lib/VCL/Module/Semaphore.pm', 'managementnode/lib/VCL/utils.pm']","VCL-924
Added $timeout_seconds argument to utils.pm::run_command. It uses an alarm if this argument is provided. Updated ManagementNode.pm::execute which calls utils.pm::run_command to pass the argument if provided. Added argument to lsof command in Semaphore.pm.",VCL-924
da63648f59f160c351d480e2d249b585349fde8d,,,1,['managementnode/lib/VCL/Module/OS/Linux/init/SysV.pm'],"VCL-923
Updated SysV.pm::service_running. It was only checking for either of the following strings: ""is running"", ""is not running"". The daemon file included with the VCL code does not display ""is not running"", but ""no vcld processes found"". As a result, it wasn't able to determine if the vcld service was running. Added a regex to look for ""no ... processes"". Also added code to check the exit status if none of the strings match.",VCL-923
015870c7aa14f01a27da06f2c962227c4e96866a,,,1,['managementnode/bin/monitor_vcld.pl'],"VCL-923
Rewrote monitor_vcld.pl. It now uses the ManagementNode.pm module and can utilize all of the init daemon code already in the VCL backend code. It should now allow the vcld daemon to be completely controlled by SysV, systemd, or Upstart.",VCL-923
4ab996dd5af72a9c4160ab37b8984712e0599460,,,1,['web/.ht-inc/siteconfig.php'],"VCL-918 - Site Config page uses wrong variable key for nat port range

siteconfig.php: modified NATportRange::__construct: changed $this->key from 'nat_port_range' to 'natport_ranges'",VCL-918
df1d77c69db84b0bd24fd2254cf4805cdf22a047,,,1,['web/.ht-inc/utils.php'],"VCL-908 - Image owner string is not validated when creating a new image

utils.php: modified validateUserid: added block to handle corner case where no affiliation is passed in as part of $loginid, shibboleth only authentication is being used for the default affiliation, ALLOWADDSHIBUSERS is set to 1, and there is an @ in $loginid",VCL-908
8162d0827f677269e22966af7a0006a7ecf9fd45,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-922
Added ""if defined"" check to Windows.pm::logoff_users to prevent ""Can't use an undefined value as an ARRAY reference"" errors.",VCL-922
5db9c93f49cc258ab2ffb781cd2030d123d2d969,,,9,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/image.pm', 'managementnode/lib/VCL/inuse.pm', 'managementnode/lib/VCL/makeproduction.pm', 'managementnode/lib/VCL/reserved.pm', 'managementnode/lib/VCL/utils.pm', 'mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-919
Added DataStructure.pm::can subroutine.

Updated utils.pm::get_calling_subroutine to go up another level if the caller is _ANON_. This allows it to return something useful for automethod subroutines from DataStructure.pm.

Updated utils.pm::get_affiliation_info to accept an affiliation name or ID argument instead of only an ID.

Changed utils.pm::set_variable to not alter the value by escaping backslashes. This was causing inconsistency in the user message text variables.

Added subroutines to Module.pm:
_get_message_variable
get_user_message
get_user_short_message
get_admin_message
set_admin_message_variable
set_user_message_variable

Removed hard-coded message text from the following and replaced with calls to the new Module.pm subroutines:
image.pm
inuse.pm
makeproduction.pm
reserved.pm",VCL-919
4c99f9e9907997f4219bc9d5fafe6c23d530177f,,,1,['web/.ht-inc/image.php'],"VCL-921 - changing owner of an image can cause a duplicate key error on resourcegroupmembers

image.php - modified addImagePermissions: changed query that inserts into resourcegroupmembers to be ""INSERT IGNORE"" instead of just ""INSERT""",VCL-921
ebee1cbcf27f376f02f35ca42389045269fbe473,,,1,['managementnode/lib/VCL/Module/OS/Windows/Version_6.pm'],"VCL-893
Changed $initial_delay_seconds in Version_6.pm::wait_for_response from 30 seconds to 5. Windows 10 images use this subroutine after a computer is powered on, and can boot faster than 30 seconds. This will decrease the load time if this is the case.",VCL-893
e1db945ad94a582b76acde24465f66c1ad68b69e,,,1,['managementnode/lib/VCL/Module/Provisioning/libvirt/KVM.pm'],"VCL-920
Changed timeout from 1800 to 7200 seconds in KVM.pm::copy_virtual_disk.",VCL-920
8a6c9bb1e60c8e84d7d0f8b593194651072bd92a,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-916
Removed $output from notify messages in Linux.pm::get_available_space and get_total_space to prevent undefined array reference warnings.",VCL-916
4d673cabaa8d56f8d3f8ed8dbd3ccafe28060328,,,1,['web/.ht-inc/utils.php'],"VCL-914 - VCL web utils.pm may block NCCU access

utils.php: modified initGlobals: commented out example code that sets skin based on IP address",VCL-914
97d1e486dc0750dfe457e496d79ed47a19a19382,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-898
Commented out utils.pm::insert_reservation. It's still being developed and has syntax problems.",VCL-898
d1a03147bcedcc093562b61d9b6c5a3691f3d7ea,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-898
Added utils.pm::insert_reservation. It isn't currently called from anywhere. The existing insert_request subroutine needed to be reworked. The new subroutine is a more flexible and only inserts a log table entry for reservations tied to a user such as if the request state is 'new'.",VCL-898
f6ada0ac2b454b097a8ed6a82148f60ecfec0ed7,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-909
Fixed minor bug in utils.pm::get_random_mac_address. It was selecting a random number from 0-255 inclusive. As a result, FF (256) was never chosen for a random MAC address. Changed to 0-256 inclusive.

VCL-910
Made minor, mostly cosmetic updates to utils.pm:
setup_get_hash_multiple_choice
setup_get_input_string
setup_print_wrap
setup_print_ok
setup_print_error
setup_print_warning

Other
Fixed badly named variables in add_imageid_to_newimages and added error output if the call failed.",VCL-909
577cbc2a24f5b30211b197d9051d8d37e1c8bf90,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-915
Added the following subroutines to Linux.pm. These are not currently being called from elsewhere:
mount_nfs_share
unmount_nfs_share
is_nfs_share_mounted
get_nfs_mount_string
add_fstab_nfs_mount
remove_matching_fstab_lines

Other
Added check to Linux.pm::configure_default_sshd and configure_ext_sshd to check if the sshd service exists first.",VCL-915
a34cd9fc96921b462249644a5caa1dadc2f12c98,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT.pm'],Removed impossible 'elsif' case in xCAT.pm.,
b58f02b255e9165751b7a96751ce791cb4d662b5,,,2,"['managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm']","VCL-910
Updated subroutines in VMware.pm:
setup_purge_repository_images
setup_purge_datastore_images

Added a setup_purge_images_helper subroutine which is now used by both of these. There was some duplicated code.

Updated code to use setup_get_hash_multiple_choice which allows individual images to delete to be selected.

VCL-844
Made some updates to unfinished VM migration code.

Other
Added VIM_SSH.pm::get_vm_cpu_usage. This isn't being called yet. It may be used in the future for monitoring.",VCL-910
035c63e35a1014868db87bbb846fae4c2046afb6,,,1,['web/.ht-inc/requests.php'],"VCL-907 - reload reservations page content soonish after Connect is clicked when reservation is in reserved state

requests.php: modified AJconnectRequest: added conditional block that checks for the reservation being in the reserved state, and if so, changes the timeout being sent back to be just one minute from now",VCL-907
53e39f3329c785f5f35a4d640c12180b379184f4,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm'],"VCL-906
Fixed some issues with VIM_SSH.pm::_parse_vim_cmd_output. It was not properly converting the output of some vim-cmd commands to Perl syntax before evaluating it.",VCL-906
d7b2e938f09b629c42ea8bc8c7f821bc8271e9f7,,,2,"['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm']","VCL-905
Added VMware.pm::find_datastore_files. It calls the OS module's find_files and prunes files under .snapshot directories. Changed calls in VMware.pm and vSphere_SDK.pm from find_files to find_datastore_files.

Other
Updated vSphere_SDK.pm::get_registered_vms to detect ""Unknown"" VMs and not include them in the return array. This was causing many warning messages in vcld.log.",VCL-905
861d98d29fcba16e40e8ea57414f159830734d4b,,,1,['web/.ht-inc/utils.php'],"VCL-904 - BIGINT UNSIGNED issue in isAvailable function

utils.php: modified isAvailable: changed definition of allocRAM in temporary table VMhostCheck to be int instead of mediumint unsigned; cast i.minram as SIGNED when selecting values from VMhostCheck",VCL-904
c0d97199b9165f49d806ee3859ca8342061c75ac,,,1,['web/.ht-inc/utils.php'],"VCL-861 - Web timetable endless loop

utils.php: modified findAvailableTimes: added conditional to all queries on the computer table that makes sure computer is not a VM or that the vmhostid field is not null",VCL-861
b0457d10505f20a6794722558d4c95f5bdd09b5e,,,1,['web/.ht-inc/userpreferences.php'],"VCL-901 - Cannot enter preferred name under user preferences if have reservation and custom RDP port set

userpreferences.php: modified processUserPrefsInput: if preferredname or newpassword are submitted, set rdpport to user's current value so that the checks for it are not performed (cannot submit rdp port at the same time as submitting preferred name or password)",VCL-901
f5718d6242fd65f3e65a6cb4a3cb500d97ebb3a6,,,1,['web/.ht-inc/computer.php'],"VCL-900 - Empty error box displayed on computer page with private DHCP and invalid server IP

computer.php: modified AJgenerateDHCPdata: updated JSON returned if private and invalid $mnip to use key of errormsg instead of errmsg",VCL-900
925d222b80db08b620e36da5d3e9da4b64779468,,,1,['web/.ht-inc/privileges.php'],"VCL-899 - Add request ID and management node to reservation history on User Lookup page

privileges.php: modified userLookup: added request ID and management node hostname to data displayed for reservation history",VCL-899
c9514c8c391a15053100ca5ab85bef05248f01d4,,,1,['web/.ht-inc/requests.php'],"VCL-888 - Web UI fails to handle translations containing single quotes

I could only find 1 function that was sending i() back as javascript

requests.php: modified AJupdateWaitTime: changed 2 occurances of i() to _() where it was actually being sent as javascript instead of calling the php function",VCL-888
55861ca5ca38821367c7974249012f96769d894e,,,7,"['web/js/blockallocations.js', 'web/js/code.js', 'web/js/newresservercommon.js', 'web/js/requests.js', 'web/js/resources.js', 'web/js/resources/image.js', 'web/js/siteconfig.js']","VCL-888 - Web UI fails to handle translations containing single quotes

-reverting name change of translation function from i() back to _()
-changing all calls of translation function from i() back to _()",VCL-888
7a148928932cf9a65faae07e1e806ceea2e62c64,,,3,"['web/.ht-inc/computer.php', 'web/.ht-inc/requests.php', 'web/.ht-inc/utils.php']","VCL-864 - selecting the first image id from the user's set of images can give an error when the user has no access to images

computer.php:
-modified AJsubmitDeleteComputers: use noimage as the image for the semaphore and call new function getAnyManagementNodeID to get management node id for semaphore
-modified AJsubmitCompStateChange: use noimage as the image for the semaphores and call new function getAnyManagementNodeID to get management node id for semaphores; removed other places that were getting the id of the noimage image/revision

requests.php: modified AJeditRequest: use id for noimage for $semimageid rather than just the first image a user has access to

utils.php:
-modified moveReservationsOffVMs: use id for noimage for $sem['imageid'] rather than just the first image a user has access to; use new function getAnyManagementNodeID to get id of management node instead of just using the first on the user has access to
-added getAnyManagementNodeID",VCL-864
111e5178f1f9d83ec6c135d8b0b30a9d237803f1,,,3,"['web/locale/es_MX/LC_MESSAGES/vcl.mo', 'web/locale/fr_CA/LC_MESSAGES/vcl.mo', 'web/locale/pt_PT/LC_MESSAGES/vcl.mo']","VCL-833 - Improve consistency and grammar of website

rebuilt binary versions of vcl.po files due to updates",VCL-833
b955fd58bf5715b935d94668fda0a25a9a3b8e4e,,,1,['web/.ht-inc/utils.php'],"VCL-809 - Information disclosure when accessing page you don't have access to

utils.php:
-modified initGlobals: if user is authed and mode is selectauth, set $mode to ""main"" (we were setting it to ""home""); also added check that if $mode doesn't exist in $actions['pages'], set $mode to ""main""
-modified menulistLI: if $mymode is empty, set $mode to ""main"" (we were setting it to ""home"")",VCL-809
5661d8e66018c854b08d87ec2cc15f8b66b4fd56,,,8,"['web/.ht-inc/computer.php', 'web/.ht-inc/image.php', 'web/.ht-inc/managementnode.php', 'web/.ht-inc/siteconfig.php', 'web/locale/po_files/es_MX/vcl.po', 'web/locale/po_files/fr_CA/vcl.po', 'web/locale/po_files/pt_PT/vcl.po', 'web/locale/po_files/vcl.po.template']","VCL-833 - Improve consistency and grammar of website

computer.php:
-modified addEditDialogHTML: changed ""Reason for maintenance"" to ""Reason for Maintenance"", ""No. Cores"" to ""cores""
-modified validateResourceData: changed ""No. Cores"" to ""Cores""

image.php:
-modified fieldDisplayName: changed
""Available for checkout"" to
""Available for Checkout""
-modified addEditDialogHTML: changed
""Available for checkout"" to
""Available for Checkout"",
""Check for logged in user"" to
""Check for Logged in User"",
""Users have administrative access"" to
""Users Have Administrative Access"",
""Set computer hostname"" to
""Set Computer Hostname"",
""Use sysprep"" to
""Use Sysprep"",
""Connect methods"" to
""Connect Methods""
-modified validateResourceData: changed
""Available for checkout must be Yes or No"" to
""Available for Checkout must be Yes or No"",
""Check for logged in user must be Yes or No"" to
""Check for Logged in User must be Yes or No"",
""Users have administrative access must be Yes or No"" to
""Users Have Administrative Access must be Yes or No"",
""Set computer hostname must be Yes or No"" to
""Set Computer Hostname must be Yes or No"",
""Use sysprep must be Yes or No"" to
""Use Sysprep must be Yes or No""

managementnode.php:
-modified addEditDialogHTML: changed
'SSH Port for this node' to
'SSH Port for this Node',
'Public NIC configuration method' to
'Public NIC Configuration Method',
'Affiliations using Federated Authentication for Linux Images' to
'Affiliations Using Federated Authentication for Linux Images'
-modified validateResourceData: changed
""Invalid data entered for Affiliations using Federated Authentication for Linux Images"" to
""Invalid data entered for Affiliations Using Federated Authentication for Linux Images""

siteconfig.php:
-modified reconnecttimeout->__construct: changed
'Re-connect To Reservation Timeout' to
'Reconnect To Reservation Timeout'

vcl.po.template, es_MX/vcl.po, fr_CA/vcl.po, pt_PT/vcl.po:
updated English versions of strings corresponding to those listed above (only capitalization changes and removal of a dash)",VCL-833
c20e92725c6f57f8b40eba7666d4980bbcec061a,,,1,['web/.ht-inc/computer.php'],"VCL-872 - Computer notes not saved when changing state from vmhostinuse to maintenance

computer.php: modified AJsubmitCompStateChange: added count($changenow) to conditional that checks to see if new state is maintenance and if there are any computers in $changeasap or $noaction",VCL-872
64cb1c08ebb3665f4d02e857830573a31ccbf898,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-870 - Synchronize foreign keys and other items between vcl.sql and update-vcl.sql

vcl.sql: changed usergroup entries, for groups that had maxextendtime set to 30, changed that value to 60 to match the default value for new groups

update-vcl.sql:
-added entry to add 'Default for Editable by' user group
-added entry to add admin user to 'Default for Editable by' user group
-added delete to remove connecttimeout entry from variable table (connecttimeout was renamed to reconnecttimeout)
-added entry to add 'xcat|timeout_error_limit' to variable table
-added entry to add 'xcat|rpower_error_limit' to variable table",VCL-870
e59e844e0dd3dc11085471c816803b46dd046ba0,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-897
Updated Windows.pm::create_user to use the add_user_to_group subroutine instead of using concatenating its own command for consistency. Removed grant_connect_method_access and grant_root_access subroutines. All they were doing is calling add_user_to_group.

Updated text in notify messages in Windows.pm: user_exists, add_user_to_group",VCL-897
a29ee8f7b9b575d31261797333cf57d9837c31ef,,,2,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm']","VCL-871
Updated OS.pm::create_text_file to ensure that text is added on a new line at the end of the file if called with the $append flag. This subroutine should correctly add newlines when necessary. Callers of append_text_file (which calls create_text_file) should not have to ensure a trailing newline exists in the string passed.

Removed trailing newline from the AllowUsers line appended to external_sshd_config in Linux.pm::grant_connect_method_access. It should no longer be needed.

Updated OS.pm::set_vcld_post_load_status to use create_text_file instead of echo.

VCL-896
Reworked and cleaned up Linux.pm::update_public_hostname. Added call to hostnamectl.  Removed Linux.pm::update_hostname_file which was using sed and echo instead of create_text_file.

VCL-897
Changed argument accepted by Linux.pm::grant_root_access to a simple string. Changed Linux.pm::create_user to only call grant_root_access if necessary.

Other
Added Linux.pm::install_package. This isn't currently being called but may be used in the future.",VCL-871
60d06bff3950a224e91c70127208d9c12d2c64ce,,,3,"['web/.ht-inc/computer.php', 'web/.ht-inc/states.php', 'web/js/resources/computer.js']","https://issues.apache.org/jira/browse/VCL-894

computer.php:
-modified extraResourceFilters: added menu items for ""Reservation Information"" and ""Reservation History""
-added AJshowReservations
-added AJshowReservationHistory

states.php:
-added AJshowReservations
-added AJshowReservationHistory

computer.js:
-added showReservations
-added showReservationHistory",
f5d791460f695cece8255f18d918ae2ced8e3e94,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-871
Trimmed notify message in run_ssh_command so that command length is not always displayed. This was added while testing this issue and adds unnecessary output to vcld.log.",VCL-871
0d1261e788fd11fd6b6e3e8f383b866435f72aad,,,2,"['managementnode/tools/Windows/Scripts/post_load.cmd', 'managementnode/tools/Windows_8/Scripts/post_load.cmd']","VCL-889
Removed call to post_load_custom.cmd in post_load.cmd scripts.",VCL-889
058f6b3efb78e8d5b0419ea8fa072b70e9a8b835,,,0,[],"VCL-893
Set svn properties on Windows 10 tools directories.",VCL-893
5baa5412f9a13b2026efbbbdeeb22ab6416ae89e,,,0,[],"VCL-893
Added Windows 10 tools directories.",VCL-893
ed4bd781f208dbc7b655d736c029ecef9beca8c7,,,1,['managementnode/lib/VCL/Module/OS/Windows/Version_10/10.pm'],"VCL-893
Set svn properties on 10.pm.",VCL-893
7d8db2898b64c8fbde42423e6871eeb8a1c6c4d7,,,1,['managementnode/lib/VCL/Module/OS/Windows/Version_10/10.pm'],"VCL-893
Added Version_10 directory and 10.pm which currently inherits from 8.pm.",VCL-893
fa67cd1b263a2420569e17ff4905888fcd5f7e46,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-893
Added module and OS entries for Windows 10 to vcl.sql and update-vcl.sql.",VCL-893
58f48eeca02aba68ea88b134d91c645b2e74ced0,,,1,['managementnode/bin/cygwin-sshd-config.sh'],"VCL-893
Updated section of cygwin-sshd-config.sh which configures the firewall. It now defaults to use the newer netsh command if the Windows version is greater than 5.x.",VCL-893
f0e1068400720ab7404112724baaa4ba1f09ceaf,,,1,['managementnode/lib/VCL/Module/OS/Windows/Version_6.pm'],"VCL-893
Added Windows 10 KMS client keys to Version_6.pm.",VCL-893
68bb6e597389f93bc0423afc8e940f62f00a24b3,,,1,['web/.ht-inc/userpreferences.php'],"VCL-873 - web UI only accepts 1 ssh identity key under User Preferences

userpreferences.php: modified submitGeneralPreferences: added \n\r to the accepted characters in the preg_match for $pubkeys",VCL-873
65963572c02ec26dfef699a1544928604b0ca62e,,,1,['managementnode/lib/VCL/Module/Provisioning/vbox.pm'],"VCL-869
Removed $vmtype_name variable from vbox.pm. It was only being used in a notify message and the corresponding DataStructure.pm value no longer exists.",VCL-869
707e18338bdcb4b66123308fc862033ada25ac33,,,2,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm']","VCL-871 

OS.pm - removed -n from the echo command
Linux.pm removed trailing new line from sudoers string",VCL-871
44dcb0c61150ad116178cf286a8ebebcb2bb6445,,,1,['web/.ht-inc/authentication.php'],"VCL-892 - $authtype gets undefined when clearselection submitted to selectAuth

authentication.php: modified selectAuth: changed unset($authtype); to $authtype = '';",VCL-892
bc6cdca5e7b470a9c7f5fc0c1ef7332a32b12d69,,,3,"['web/.ht-inc/privileges.php', 'web/css/vcl.css', 'web/js/privileges.js']","privileges.php: modified viewNodes: removed commented out lines that set up dojo events for the Tree on getIconClass and onClick - these were commented out a long time ago and were the only references to stuff in privileges.js also being removed

privileges.js: removed getTreeIcon - only references to openedtreefolder and closedtreefolder css classes also being removed

vcl.css: removed .closedtreefolder and openedtreefolder - no longer used, images referenced in them no longer exist",
3dccd2804c7f030b89a733a95f6e601810bfe97c,,,2,"['web/locale/po_files/pt_PT/vcl.po', 'web/locale/pt_PT/LC_MESSAGES/vcl.mo']","VCL-882 - Add Portuguese translation

corrected a few places having a space in a close strong tag (</ strong>)",VCL-882
77b56f07cc04dc2d95129428d9d3d57233c02dc9,,,1,['web/js/nls/messages.js.template'],"messages.js.template: added the following for translation:
match
no match
Error encountered
Please try again later",
067a5413123099c2f8d62f48b712e5e3903c922b,,,7,"['web/js/blockallocations.js', 'web/js/code.js', 'web/js/newresservercommon.js', 'web/js/requests.js', 'web/js/resources.js', 'web/js/resources/image.js', 'web/js/siteconfig.js']","VCL-888 - problem with translations containing single quotes

changed all calls to _() to call i()",VCL-888
96968ce6b7dc8518944779589b5102f1adedb8de,,,1,['web/js/code.js'],"VCL-888 - problem with translations containing single quotes

code.js: renamed _() function to i()",VCL-888
be735afc5354de2155f63eb08e1ecad5f4f4ed4c,,,14,"['web/.ht-inc/authentication.php', 'web/.ht-inc/blockallocations.php', 'web/.ht-inc/computer.php', 'web/.ht-inc/image.php', 'web/.ht-inc/managementnode.php', 'web/.ht-inc/privileges.php', 'web/.ht-inc/requests.php', 'web/.ht-inc/resource.php', 'web/.ht-inc/schedule.php', 'web/.ht-inc/siteconfig.php', 'web/.ht-inc/statistics.php', 'web/.ht-inc/userpreferences.php', 'web/.ht-inc/utils.php', 'web/.ht-inc/vm.php']","VCL-888 - problem with translations containing single quotes

changed all occurances of calls to _() function to call i() instead",VCL-888
f62375932f56477f653f62987a2734f2f26aa3f6,,,1,['web/.ht-inc/utils.php'],"VCL-888 - problem with translations containing single quotes

utils.php: changed escq() function to i() which calls _() on the passed in string and is to be used as a wrapper anywhere _() was called",VCL-888
7e5ab233d6b761a691499f425f3c2066378b959f,,,1,['web/.ht-inc/requests.php'],"VCL-888 - problem with translations containing single quotes

requests.php: reverted change where some calls to _() were wrapped with a call to escq() as well",VCL-888
ab71f54a1b4d872ddf576cc71e9d383148cf1ca2,,,5,"['managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/7.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/Vista.pm']","VCL-889
Added call to execute vcl_post_load.cmd in post_load subroutine in Version_5.pm and Version_6.pm.

Other
Fixed POD comments in a few places where numbered lists are used. The syntax was incorrect.",VCL-889
ab61f66ed86001d1f54349cc540a9b1a790df9b2,,,1,['web/.ht-inc/computer.php'],"VCL-890 - add button to edit computer profile page to reload table contents

computer.php: modified extraResourceFilters: added button to reload the contents of the table",VCL-890
5112b2324a35c13ecd6dfcc9ca0b7a910c990a27,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-871
Removed recently added check for $OS_ERROR in run_ssh_command. This variable isn't reliable as it may be set for something other than the last executed command.

Extended code in utils.pm::run_ssh_command which checks if a command is very long. It truncates the command displayed in vcld.log.",VCL-871
1f74d895a00a535a0d0a9ea9ee41f96538d8a1e8,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT.pm'],"VCL-887

fixed nonsensical statement :)",VCL-887
b53104a826781348b9c02356b04bce4a2d4a331c,,,1,['web/js/nls/es_MX/messages.js'],added a few missing lines,
57bc8e210553321dea8d9ef6e35ca7147018ddfa,,,2,"['web/.ht-inc/requests.php', 'web/.ht-inc/utils.php']","VCL-888 - problem with translations containing single quotes

utils.php: added escq - replaces single quotes with &#39;

requests.php: modified locations where translated strings could be sent as javascript in AJupdateWaitTime, printImageDescription, and AJnewRequest to call escq on the translated string",VCL-888
edfb78a67f9f5c6e397f15cdaeb47ef415c151b7,,,1,['web/.ht-inc/dashboard.php'],"VCL-878 - show stalled checkpoint attempts on dashboard

dashboard.php:
-modified getFailedImagingData: removed s1_name and s2_name from query (not used), changed escaped double quotes to single quotes
-modified AJrestartImageCapture: fixed check for laststateid not being equal to 16 or 24; removed $laststate and inlined reference to $request['laststateid']",VCL-878
accef165060e310d4451c7b40f2359d731613906,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT.pm'],"VCL-886

cleaned up code to remove defined for @array warning
replaced run_command with execute",VCL-886
7d1e1d3b638fd33904d1931ccb85a746118b6b78,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-885
Updated Windows.pm::sanitize_files to attempt to retrieve the default Windows root password from autologon_enable.cmd. If it finds a password which is different than the current default password, it adjusts the sed search pattern to include both the old and new passwords.",VCL-885
6560af55a18aecac440a7a445e912b40e515d5f8,,,1,['web/.ht-inc/dashboard.php'],"VCL-878

updated query to return maintenance requests with laststate in either image or checkpoint

updated AJrestartImageCapture routine to restart either image or checkpoint requests",VCL-878
da5138efa104dd920f471b33d6213cda5e046194,,,3,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux/ManagementNode.pm', 'managementnode/lib/VCL/utils.pm']","VCL-871
Updated OS.pm::create_text_file to create a temporary file on the management node and copy it to the computer if the file is large or if the initial echo command attempt fails.

Added create_text_file and get_file_contents subroutines to ManagementNode.pm. These use Perl's IO methods rather than calling cat or echo on the OS. This allows larger file sizes than the echo method.

Added a warning handler to the eval block in run_ssh_command. This should catch some errors such as 'Argument list too long'. Also added a check to make sure $ssh_output is defined after the eval block executes.

Updated OS.pm::set_text_file_line_endings to retrieve the contents of the file, update lines, then recreate the file instead of using sed. The sed command was producing inconsistent line endings.


Other
Updated code in OS.pm::execute and utils.pm::run_ssh_command that relates to calling execute_new. It will not use execute_new for shutdown and reboot commands.",VCL-871
91316612d2ea07a12e8a2415fb1cad514a53c47a,,,1,['managementnode/lib/VCL/Module/OS/Windows/Version_6/8.pm'],"VCL-883
Updated 8.pm::pre_capture to retrieve $self->{end_state} after the parent class's pre_capture subroutine has been executed and parsed the arguments.",VCL-883
611ef652f180ba0f74d7bf020244c5663994950f,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-884
Changed command in Windows.pm::set_computer_hostname to use double quotes.

Other
Fixed minor regex issue in Windows.pm::delete_file. If a file name was passed as the argument, it would generate an undefined value warning.",VCL-884
3830ba4f2342c3781a6cdd1a3a69cc3403ecdf8c,,,1,['web/js/nls/pt_PT/messages.js'],"VCL-882 - Add Portuguese translation

pt_PT/messages.js: added translation for last 4 lines",VCL-882
c52de6db9222b200c95a6533ebdece5f833a4feb,,,4,"['web/js/nls/pt_PT/messages.js', 'web/locale/po_files/pt_PT/vcl.po', 'web/locale/pt_PT/LC_MESSAGES/vcl.mo', 'web/locale/pt_PT/language']","VCL-882 - Add Portuguese translation

adding translation files contributed by Antonio Aragao",VCL-882
826cc6a8b2707a8fa64f6586d69f5a7a7a0f4bbf,,,3,"['web/js/nls/fr_CA/messages.js', 'web/locale/fr_CA/LC_MESSAGES/vcl.mo', 'web/locale/po_files/fr_CA/vcl.po']",updated with content contributed by Charles Roger Simeu,
fab596959784a2db10fe253dfd51d9fc50ff4a3e,,,2,"['vcl-install.sh', 'vcl-upgrade.sh']",modified ARCHIVEURLPATH to include VCL release version in download path,
09e7788da9bb623b460bb3c423630e4b1cc5c5e8,,,1,['web/.ht-inc/resource.php'],"VCL-881 - cannot delete schedules

modified toggleDeleteResource - moved call to $this->submitToggleDeleteResourceExtra to before the query to delete the entry from the specific resource (i.e. ""schedule"" table, not ""resource"" table) table so that foreign key constraints on any entries deleted by the Extra function will not prevent the entry from being deleted from the specific resource table",VCL-881
530c85654bc55ca8855707614962eac2c368b4f1,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-875
Updated Linux.pm::enable_firewall_port to ignore existing multiport rules when determining if adding a rule is necessary.",VCL-875
b77dbc7256d8d178b1809e0f958a92be48de9a82,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-880
Updated Linux.pm::clean_iptables to sort rule numbers numerically.",VCL-880
5bc4dc72fad9c80d3d7eeaa85268da274b2dc7c2,,,2,"['managementnode/lib/VCL/Module/Provisioning/libvirt.pm', 'managementnode/lib/VCL/image.pm']","VCL-877

updated libvirt.pm to also check for checkpoint state

updated image.pm to set laststatid to use request_state_name variable",VCL-877
1bb95d1e989c8f290b0fe5ad9256caed128b6ddc,,,1,['managementnode/lib/VCL/Module/OS/Linux/firewall/iptables.pm'],"VCL-879
Added calls to obtain semaphore before all execute calls which modify the firewall in iptables.pm.",VCL-879
32547cffe4da98e1ab6691fbf3c90514bfd5bd7d,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm'],"VCL-844
Added check to VMware.pm::prepare_vmdk to not attempt to delete an existing dedicated vmdk directory for a VM unless the request state is new or reload.

Added check to migrate_vm so that the migration fails if the VM has multiple virtual disks. Support for this may be added later.",VCL-844
f1e108ab13754a7d144976b173930593e7f19644,,,1,['managementnode/lib/VCL/Module/OS.pm'],"VCL-871
Added code to OS.pm::create_text_file to attempt to echo the original content argument of the escaped hex value method fails.",VCL-871
acfc342674c43ccb3ef45773bca7c6c69382a203,,,1,['mysql/update-vcl.sql'],"VCL-870 - the foreign keys are not in sync between the vcl.sql and update-vcl.sql files

The idea with these changes is to allow innocuous changes to cascade, but to restrict changes that could be a problem. Updates to id fields for most tables are allowed to cascade. It is unlikely that someone would need to change the id of most entries, but changing them should not be a problem were someone to do it. However, changes to id fields for resources are not allowed because those changes cannot be cascaded to resource.subid. In those cases, updates to the ids are restricted. Additionally, cascading deletes are not allowed for fields where records should never be deleted. These would include (but not be limited to) entries in the user, computer, image, managmentnode, and log tables. Schedules are allowed to be deleted. So schedule deletes can be cascaded.

changes to update-vcl.sql file:

table structure changes:
-modified affiliation.sitewwwaddress to allow up to 128 chars (was 56)
-modified addition of 3 column unique index for changelog on userid,reservationid,remoteIP to be in than order instead of reservationid,userid,remoteIP
-added key on continuations.deletefromid
-modified image.prettyname to allow up to 80 chars (was 60)
-modified image.basedoffrevisionid to allow NULL and have the default as NULL
-added key on loginlog.timestamp
-added key on loginlog.authmech
-added key on loginlog.code
-added unique key on managementnode.hostname
-moved where openstackcomputermap and openstackimagerevision table creations are located
-modified sublog.blockRequestid to allow NULL and have the default as NULL
-modified sublog.blockStart to allow NULL and have the default as NULL
-modified sublog.blockEnd to allow NULL and have the default as NULL
-added index on sublog.blockRequestid
-modified user.IMtypeid to allow NULL and have the default as NULL
-modified usergroup.initialmaxtime to be mediumint(8) (was smallint(5))
-modified usergroup.totalmaxtime to be mediumint(8) (was smallint(5))
-modified usergroup.maxextendtime to be mediumint(8) (was smallint(5)) and to have a default value of 60 (was 30)
-moved where unique keys are changed for userpriv table
-removed index on userpriv.usergroupid
-modified vmhost.vmlimit to be smallint(5) (was tinyint(3))
-modified vmhost.vmprofileid to have no default
-modified unique index on vmhost.computer to be on computerid,vmprofileid
-added unique key on vmtype.name
-modified xmlrpcLog.xmlrpcKeyid to be mediumint(8) (was smallint(5))
-added key on xmlrpcLog.timestamp

data changes:
-update user.IMtypeid to be NULL where there is not a matching entry in the IMtype table
-update image.basedoffrevisionid to be NULL where there is not a matching entry in the imagerevision table

constraint changes:
-dropped existing constraint on blockComputers.imageid so update is forced
-modified blockComputers.computerid
-modified blockComputers.imageid
-modified blockRequest.imageid
-modified blockRequest.managementnodeid
-dropped existing constraint on changelog.logid so update is forced
-dropped existing constraint on changelog.userid so update is forced
-dropped existing constraint on changelog.computerid so update is forced
-added changelog.computerid
-dropped existing constraint on clickThroughs.userid so update is forced
-dropped existing constraint on clickThroughs.imageid so update is forced
-dropped existing constraint on clickThroughs.imagerevisionid so update is forced
-modified clickThroughs.imageid
-dropped existing constraint on computer.vmhostid so update is forced
-dropped existing constraint on computer.ownerid so update is forced
-dropped existing constraint on computer.scheduleid so update is forced
-dropped existing constraint on computer.currentimageid so update is forced
-dropped existing constraint on computer.nextimageid so update is forced
-added computer.vmhostid
-added computer.ownerid
-added computer.scheduleid
-added computer.currentimageid
-modified computer.nextimageid
-dropped existing constraint on computerloadlog.loadstateid so update is forced
-modified computerloadlog.computerid
-modified computerloadlog.loadstateid
-modified computerloadlog.reservationid
-moved location of changes for connectlog
-dropped existing constraint on connectlog.logid so update is forced
-dropped existing constraint on connectlog.userid so update is forced
-modified connectlog.logid
-modified connectlog.userid
-dropped existing constraint on connectmethodmap.OStypeid so update is forced
-dropped existing constraint on connectmethodmap.OSid so update is forced
-dropped existing constraint on connectmethodmap.imagerevisionid so update is forced
-modified connectmethodmap.OStypeid
-modified connectmethodmap.OSid
-modified connectmethodmap.imagerevisionid
-added continuations.userid 
-dropped existing constraint on image.ownerid so update is forced
-added image.ownerid
-added image.basedoffrevisionid
-dropped existing constraint on imagerevisioninfo.imagerevisionid so update is forced
-modified imagerevisioninfo.imagerevisionid
-dropped existing constraint on localauth.userid so update is forced
-modified localauth.userid
-dropped existing constraint on log.imageid so update is forced
-dropped existing constraint on log.computerid so update is forced
-added log.imageid
-modified log.computerid
-dropped existing constraint on managementnode.imagelibgroupid so update is forced
-added managementnode.imagelibgroupid
-dropped existing constraint on nathost.resourceid so update is forced
-modified nathost.resourceid
-dropped existing constraint on natlog.sublogid so update is forced
-modified natlog.sublogid
-dropped existing constraint on natport.connectmethodportid so update is forced
-dropped existing constraint on natport.reservationid so update is forced
-dropped existing constraint on natport.nathostid so update is forced
-modified natport.connectmethodportid
-modified natport.reservationid
-modified natport.nathostid
-dropped existing constraint on openstackcomputermap.computerid so update is forced
-modified openstackcomputermap.computerid
-dropped existing constraint on openstackimagerevision.imagerevisionid so update is forced
-modified openstackimagerevision.imagerevisionid
-dropped existing constraint on provisioningOSinstalltype.provisioningid so update is forced
-dropped existing constraint on provisioningOSinstalltype.OSinsalltypeid so update is forced
-dropped existing constraint on querylog.userid so update is forced
-added querylog.userid
-dropped existing constraint on request.userid so update is forced
-added request.userid
-added request.logid
-dropped existing constraint on reservation.computerid so update is forced
-dropped existing constraint on reservation.imageid so update is forced
-added reservation.computerid
-added reservation.imageid
-dropped existing constraint on reservationaccounts.reservationid so update is forced
-dropped existing constraint on reservationaccounts.userid so update is forced
-modified reservationaccounts.reservationid
-modified reservationaccounts.userid
-dropped existing constraint on resourcemap.resourcetypeid1 so update is forced
-dropped existing constraint on resourcemap.resourcetypeid2 so update is forced
-dropped existing constraint on scheduletimes.scheduleid so update is forced
-modified scheduletimes.scheduleid
-dropped existing constraint on semaphore.computerid so update is forced
-dropped existing constraint on semaphore.imageid so update is forced
-dropped existing constraint on semaphore.imagerevisionid so update is forced
-dropped existing constraint on semaphore.managementnodeid so update is forced
-modified semaphore.computerid
-modified semaphore.imageid
-modified semaphore.managementnodeid
-dropped existing constraint on serverprofile.ownerid so update is forced
-dropped existing constraint on serverprofile.admingroupid so update is forced
-dropped existing constraint on serverprofile.logingroupid so update is forced
-modified serverprofile.ownerid
-modified serverprofile.admingroupid
-modified serverprofile.logingroupid
-dropped existing constraint on shibauth.userid so update is forced
-modified statgraphcache.affiliationid
-dropped existing constraint on subimages.imageid so update is forced
-dropped existing constraint on subimages.imagemetaid so update is forced
-modified subimages.imageid
-dropped existing constraint on sublog.logid so update is forced
-dropped existing constraint on sublog.imageid so update is forced
-dropped existing constraint on sublog.imagerevisionid so update is forced
-dropped existing constraint on sublog.computerid so update is forced
-dropped existing constraint on sublog.managementnodeid so update is forced
-dropped existing constraint on sublog.predictivemoduleid so update is forced
-dropped existing constraint on sublog.hostcomputerid so update is forced
-modified sublog.imageid
-modified sublog.computerid
-modified sublog.managementnodeid
-modified sublog.hostcomputerid
-added sublog.blockRequestid
-dropped existing constraint on user.affiliationid so update is forced
-dropped existing constraint on user.IMtypeid so update is forced
-added user.affiliationid
-added user.IMtypeid
-dropped existing constraint on usergroup.ownerid so update is forced
-dropped existing constraint on usergroup.affiliationid so update is forced
-modified usergroup.ownerid
-dropped existing constraint on usergroupmembers.userid so update is forced
-added usergroupmembers.userid
-dropped existing constraint on usergrouppriv.userprivtypeid so update is forced
-modified usergrouppriv.userprivtypeid
-dropped existing constraint on userpriv.userid so update is forced
-dropped existing constraint on userpriv.userprivtypeid so update is forced
-added userpriv.userid
-added userpriv.userprivtypeid
-added userpriv.usergroupid
-dropped existing constraint on vmhost.computerid so update is forced
-modified vmhost.computerid
-dropped existing constraint on vmprofile.imageid so update is forced
-added vmprofile.imageid",VCL-870
6fb9239b85b37f08af0045a8392f72bcbc0bb49d,,,1,['mysql/vcl.sql'],"VCL-870 - the foreign keys are not in sync between the vcl.sql and update-vcl.sql files

The idea with these changes is to allow innocuous changes to cascade, but to restrict changes that could be a problem. Updates to id fields for most tables are allowed to cascade. It is unlikely that someone would need to change the id of most entries, but changing them should not be a problem were someone to do it. However, changes to id fields for resources are not allowed because those changes cannot be cascaded to resource.subid. In those cases, updates to the ids are restricted. Additionally, cascading deletes are not allowed for fields where records should never be deleted. These would include (but not be limited to) entries in the user, computer, image, managmentnode, and log tables. Schedules are allowed to be deleted. So schedule deletes can be cascaded.

changes to vcl.sql file:

table structure changes:
-modified affiliation.sitewwwaddress to allow up to 128 chars (was 56)
-added key on continuations.deletefromid
-modified image.prettyname to allow up to 80 chars (was 60)
-modified image.basedoffrevisionid to allow NULL and have the default as NULL
-added key on loginlog.timestamp
-added key on loginlog.authmech
-added key on loginlog.code
-added unique key on managementnode.hostname
-modified sublog.blockRequestid to allow NULL and have the default as NULL
-modified sublog.blockStart to allow NULL and have the default as NULL
-modified sublog.blockEnd to allow NULL and have the default as NULL
-modified user.IMtypeid to allow NULL and have the default as NULL
-modified usergroup.initialmaxtime to be mediumint(8) (was smallint(5))
-modified usergroup.totalmaxtime to be mediumint(8) (was smallint(5))
-modified usergroup.maxextendtime to be mediumint(8) (was smallint(5)) and to have a default value of 60 (was 30)
-modified vmhost.vmlimit to be smallint(5) (was tinyint(3))
-modified key unique key on vmhost.computer to also include vmprofileid
-added unique key on vmtype.name
-modified xmlrpcLog.xmlrpcKeyid to be mediumint(8) (was smallint(5))
-added key on xmlrpcLog.timestamp

data changes:
-modified basedoffrevisionid value for insert into image table for ""No Image"" to be NULL (was 1)
-modified IMtypeid value for inserts into user table to be NULL (was 1)

constraint changes:
-added comments explaining guidelines for when/how ON DELETE and ON UPDATE should be handled for different fields
-modified blockRequest.groupid
-modified blockRequest.ownerid
-modified blockTimes.blockRequestid
-modified blockWebDate.blockRequestid
-modified blockWebTime.blockRequestid
-modified changelog.logid
-modified changelog.userid
-modified clickThroughs.userid
-modified clickThroughs.imagerevisionid
-modified computer.vmhostid
-modified computer.ownerid
-modified computer.scheduleid
-modified computer.currentimageid
-modified computer.nextimageid
-modified computerloadlog.loadstateid
-moved location of changes for connectlog
-modified connectlog.logid
-modified connectmethodmap.OStypeid
-modified connectmethodmap.OSid
-modified connectmethodmap.imagerevisionid
-added change for continuations.userid
-modified image.ownerid
-added image.basedoffrevisionid
-modified imagerevision.imageid
-modified imagerevisioninfo.imagerevisionid
-modified localauth.userid
-modified log.imageid
-modified log.computerid
-modified managementnode.imagelibgroupid
-modified nathost.resourceid
-moved location of changes for natlog table
-modified natlog.sublogid
-modified nathostcomputermap.computerid
-modified natport.connectmethodportid
-modified natport.reservationid
-modified natport.nathostid
-modified openstackcomputermap.computerid
-modified openstackimagerevision.imagerevisionid
-modified querlog.userid
-modified request.userid
-added request.logid
-modified reservation.computerid
-modified reservation.imageid
-modified reservationaccounts.userid
-modified reservationaccounts.reservationid
-modified resourcemap.resourcegroupid1
-modified resourcemap.resourcegroupid2
-modified resourcemap.resourcetypeid1
-modified resourcemap.resourcetypeid2
-modified scheduletimes.scheduleid
-modified semaphore.managementnodeid
-modified semaphore.computerid
-modified semaphore.imageid
-modified semaphore.imagerevisionid
-modified serverprofile.ownerid
-modified serverprofile.admingroupid
-modified serverprofile.logingroupid
-modified shibauth.userid
-modified statgraphcache.affiliationid
-modified statgraphcache.provisioningid
-modified subimages.imagemetaid
-modified sublog.logid
-modified sublog.imagerevisionid
-modified sublog.predictivemoduleid
-added sublog.blockRequestid
-modified user.affiliationid
-modified user.IMtypeid
-modified usergroup.ownerid
-modified usergroup.affiliationid
-modified usergroupmembers.userid
-modified usergrouppriv.userid
-modified usergrouppriv.userprivtypeid
-modified vmhost.computerid
-modified vmprofile.imageid",VCL-870
2310de7219220b79821f8a3a90394d4d1fc88e26,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm'],"VCL-844
Fixed issue with migrate_vm. prepare_vmdk was attempting to delete a dedicated VM directory.",VCL-844
4e6dd5ea3e637230d174691edbf4e864e93873f1,,,5,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm']","VCL-844
Reworked much of VMware.pm::migrat_vm to overcome issues with VMs which use dedicated vmdk files - mainly for server requests.

Added optional type argument to OS.pm::find_files and vSphere_SDK.pm::find_files.

Moved recently created SSH key subroutines from OS.pm to Linux.pm. They do not work as-is on Windows. Reworked new SSH subroutines in VMware.pm. Most of this code has been generalized and now exists in Linux.pm.

Added VMware.pm::add_ssh_host_key_to_known_hosts. SSH/SCP would hang on host to host operations without any warning. This should allow host-host communication to work without any manual changes.

Added caching to VIM_SSH.pm::_get_vm_id. This subroutine was inefficiently being called numerous times for basic operations such as register_vm. The cached VM ID is deleted when a VM is unregistered.

Updated vSphere_SDK.pm::initialize to attempt to load VIExt (vSphere SDK) after checking if vmprofile username and password are defined. If not defined, initialize returns immediately. This prevents unnecessary warnings from appearing in vcld.log.

Added code to vSphere_SDK.pm::initialize to attempt to use the result of determine_remote_connection_target.

Added vSphere_SDK.pm::get_vm_virtual_disk_file_paths to match VIM_SSH.pm. This is now used in VMware.pm::delete_vm. Reworked delete_vm. It was not deleting the directory containing the .vmdk for server reservations under some circumstances.

Renamed VMware.pm::_get_vmx_file_path_computer_name to _get_file_path_computer_name. Updated it to attempt to determine a computer name from any path, not just a .vmx file path. This allows a VM's working directory path to be passed to it. Updated VMware.pm::is_vmdk_directory_shared to call _get_file_path_computer_name as an extra security check.


VCL-853
Updated vSphere_SDK.pm::_get_resource_pool_view to return the root pool if a pool isn't configured in the VM profile and multiple pools are found on this host.",VCL-844
681e7cb8c523dc2d4a3eea5302de5800bed82ebd,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-844
Updated utils.pm::get_vmhost_info to allow vmprofile.profilename to be used for matching the $vmhost_identifier argument. The matching info is returned if the argument exactly matches vmprofile.profilename when multiple rows are retrieved. It had been returning null any time multiple rows were retrieved. This allows a specific vmhost-vmprofile to be retrieved when multiple vmhost entries exist for a computer.",VCL-844
2a8245a62009cfa1b57d4ed41ba708ac8b4109c6,,,1,['managementnode/bin/install_perl_libs.pl'],"VCL-844
Added Term::ANSIColor to install_perl_libs.pl. It is a standard Perl package but needs to be updated in order for some color features to work which are used in new vcld -setup code.",VCL-844
081334f93ce0b6237c193a77c9470cfdc8444e4a,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-868
Updated utils.pm::_pingnode to use determine_remote_connection_target to determine the IP address if a hostname argument is provided.",VCL-868
db0e9ffe1e4ee3951fb07b8e2a948a7cf82458db,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm'],"VCL-844
Added more useful warning and file size info to VMware.pm::migrate_vm. Fixed problem with sed command which replaces datastore paths in files. It was mangling paths where the datastores began with the same characters.",VCL-844
e5fe2cedad47b4f78b42ab5e7a2d066a335fa655,,,5,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/utils.pm']","VCL-844
Added subroutines to VMware.pm:
* get_vmx_url_base_directory_path
* get_vmx_intermediate_directory_path
* _get_datastore_url
* _get_url_path
* configure_vmhost_ssh_keys
* copy_vmhost_ssh_public_key_to_another_host
* copy_file_to_another_host
* setup_migrate_vm
* migrate_vm
* migrate_revert_source

Added subroutines to utils.pm:
* update_computer_vmhost_id.
* setup_get_hash_multiple_choice.

Updated Module.pm::new to call initialize on ManagementNode.pm objects even if $SETUP_MODE is true.

Updated Module.pm::create_object to accept an additional argument which allows arguments to be passed to the constructor of the object being created as well as the DataStructure.pm object.

Updated Module.pm::create_vmhost_os_object to accept an argument specifying which VM host to create an object for.

Updated DataStructure.pm to accept a vmhost_identifier argument rather than use a vmhost_id argument.

Changed where cached data is stored from %ENV to $self in order to allow it to work with multiple VMware.pm objects.


VCL-851
Added check to skip the attempt to use vSphere_SDK.pm if vmprofile.password is not configured.",VCL-844
ff3c308f67b89571c6da05c587d70b54231bdfad,,,5,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5.pm']","VCL-844
Added OS.pm::get_os_perl_package. Added Windows.pm::_get_os_perl_package which is called by OS.pm::get_os_perl_package.

Updated OS.pm::get_os_type to return 'linux-ubuntu' if Ubuntu is detected rather than just 'linux'.

Added generate_ssh_key_files,generate_ssh_public_key_string, and create_ssh_public_key_file subroutines to OS.pm. These are used to facilitate host to host copying of files for VM migrations.

Added hibernate subroutine to Linux.pm, Ubuntu.pm, Windows.pm, and Version_5.pm.

Added Windows.pm::enable_hibernation.

Added is_process_running and is_display_manager_running to Linux.pm. These are used by Ubuntu.pm::hibernate to overcome issues which cause hibernation to fail.

Added subroutines to Ubuntu.pm to help overcome issues with hibernation:
* grubenv_unset_recordfail
* install_package
* _install_package_helper
* simulate_install_package
* apt_get_update
* fix_debconf_db

VCL-860
Updated Linux.pm::create_user to display a warning if any output line begins with 'useradd:'.",VCL-844
6dab8d98854862c1357d39f0fec4c8d9f3545c9b,,,1,['web/.ht-inc/utils.php'],modified maintenanceCheck and main - minor formatting changes - some <br> tags were being concatenated to the end of some printf statements after the close ) so they were not actually getting added to the output,
013821fa6b2a83bc26c64fbad29478a97843592e,,,1,['CHANGELOG'],updated list of issues for 2.4.2,
257859b8943b56125bc284d9f68ac0aa39a711af,,,4,"['web/locale/fr_CA/LC_MESSAGES/vcl.mo', 'web/locale/po_files/es_MX/vcl.po', 'web/locale/po_files/fr_CA/vcl.po', 'web/locale/po_files/vcl.po.template']","VCL-859 - disable image creation for images with root access disabled

added string from dialog added to requests.php that explains why the user cannot create an image from the reservation",VCL-859
81562819bb71458b215ae59f4712dbaba15d4dc9,,,3,"['web/.ht-inc/requests.php', 'web/.ht-inc/resource.php', 'web/js/resources/image.js']","VCL-859 - disable image creation for images with root access disabled

requests.php:
-(unrelated) modified viewRequests: modified conditional that returns early if $newbtnh == '' to also require $requests be empty so that users with active reservations will still have access to them even if they no longer have access to make new reservations
-modified viewRequests: added dialog to display when a user trys to create an image from one where root access is disabled explaining why the user cannot create an image from the reservation
-modified newReservationHTML: added array that keeps track of images where image creation is not allowed due to root access being disabled for the image; pass that array along in the continuation for starting the imaging process
-modified processRequestInput: added check for attempting to submit a reservation for an image where root access has been disabled

resources.php: modified AJstartImage: added check for root access being disabled, if so, return 'rootaccessnoimage' for the status which will trigger the user being notified about not being able to create an image from current one

image.js: modified startImageCB: if returned status is 'rootaccessnoimage', display dialog explaining that user does not have access to create images from selected one",VCL-859
5f58606562417a8c28d8cdb67d43c7f766e2a1bf,,,1,['web/locale/fr_CA/LC_MESSAGES/vcl.mo'],"VCL-857 - admin access not granted if owner of server reservation in access user group

missed this file in the last commit",VCL-857
9143832794724bbcea5f53d9e9f2ca348e2cd24e,,,4,"['web/.ht-inc/requests.php', 'web/locale/po_files/es_MX/vcl.po', 'web/locale/po_files/fr_CA/vcl.po', 'web/locale/po_files/vcl.po.template']","VCL-857 - admin access not granted if owner of server reservation in access user group

requests.php:
-modified newReservationHTML: added div with text explaining that the admin user group does not grant admin access within images where root access is disabled
-modified AJupdateWaitTime: show or hide note added to newReservationHTML based on root access setting
-modified AJeditRequest: added div with text explaining that the admin user group does not grant admin access within images where root access is disabled; added divs and css styling to make is show up nicely

vcl.po files:
-added string from changes made in requests.php",VCL-857
871c4328742f9a302b9cb6c714e6158ce83609ea,,,2,"['managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/utils.pm']","VCL-857
Fixed problem with Linux.pm::grant_root_access. It was returning 0 if a 'root_access' = 0 parameter was passed, causing create_user to fail.

Commented out 2 notify lines in utils.pm which were generating a lot of unnecessary output.",VCL-857
946dc760a25a7f029822b7d5cb201bd86a8aeb39,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-857
Changed logic in utils.pm::get_request_info so that the imagemeta.rootaccess value is used for members of a server request admin group. This prevents the non-owner of an image from being able to make a server request and bypass the image owner's root access setting.

VCL-858
Added check to ensure request user is granted root access if request.forimaging = 1 and request user is the image owner.",VCL-857
1b8715acb0f9b6e55cbb0ae639d24c99a9adcd20,,,1,['CHANGELOG'],"added section for 2.4.2
added a few items missing from 2.4.1 section",
ea0a93871faed6666426924d39c6a72694c0e558,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-763 - Add missing constraints to database tables

vcl.sql and update-vcl.sql: (last commit was wrong) updated foreign key for nathostcomputermap.nathostid to be ON DELETE CASCADE ON UPDATE CASCADE",VCL-763
10afb8c41a6d334cbb8296f37b32eb7e71e2cf93,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-763 - Add missing constraints to database tables

vcl.sql and update-vcl.sql: modified foreign key constraint for nathostcomputermap.nathostid to be ON DELETE SET NULL ON UPDATE CASCADE",VCL-763
973c8e335a5baa28e812211b09309f2a206eea42,,,1,['managementnode/bin/install_perl_libs.pl'],"VCL-855
Updated install_perl_libs.pl to include the perl-JSON package.",VCL-855
e69fe9220c4cdeb8cfdda7083aa7f5838578d4a6,,,1,['managementnode/lib/VCL/Module/OS/Linux/firewall/iptables.pm'],"VCL-856
Updated iptables.pm::DESTROY to dereference the hash: %{$ENV{iptables_get_table_info_count}}",VCL-856
903eb1df3c3e1ee05dc13320635c93d36961e91f,,,3,"['mysql/update-vcl.sql', 'mysql/vcl.sql', 'web/.ht-inc/computer.php']","VCL-174 - NAT - support for sites that have small IP address ranges

update-vcl.sql and vcl.sql: removed nathost.deleted and nathost.datedeleted

computer.php: modified AJsubmitCompNATchange: changed order of id and $nathostid in INSERT INTO ... SELECT to match order of nathostid and computerid that is in vcl.sql file",VCL-174
43d59f3c0c4abfb1b90ad8c6d192c9d56478b646,,,2,"['web/.ht-inc/blockallocations.php', 'web/.ht-inc/utils.php']","VCL-763 - Add missing constraints to database tables

blockallocations.php:
-modified AJtoggleBlockTime - if setting skip from 1 to 0 in database, also set processed to 0 in case the blockTime had been processed already. Otherwise, when skip is set to 0, if the block time had been prevously processed, it will not get processed again (and what had been set up by the previous processing would have been undone when skip was set to 1)
-modified processBlockAllocationInput: if $return['groupid'] == 0, set it to 'NULL' so when it is used for an insert or update, it will be NULL instead of 0

utils.php: modified checkClearImageMeta - added check for query that gets existing imagemeta entry returning no rows - this can happen if the imagemeta entry is due to subimages, and someone deletes the subimages and then updates the image profile, in which case the deleting of the subimages will remove the imagemeta entry, but the continuation for editing the image profile will still have the imagemetaid",VCL-763
f230d698ce6e9e2407baf0c27b1559dc611d42f8,,,3,"['web/locale/po_files/es_MX/vcl.po', 'web/locale/po_files/fr_CA/vcl.po', 'web/locale/po_files/vcl.po.template']",fixed typo in error message string,
d00d4b276d6191b818b143a5a09c807aa7a72b77,,,1,['web/.ht-inc/image.php'],fixed typo in error message,
6f3352c7cd2dbd7f3afb2d900fae78b27523bea8,,,1,['web/.ht-inc/requests.php'],"VCL-849 - makeproduction state not processed correctly for cluster requests

requests.php: modified AJconfirmDeleteRequest: added to conditional that determines if the user should be prompted to make a non-production revision production to not show the prompt for cluster reservations",VCL-849
7ac9425646c76401d4aad1e5d9d31edbc7202676,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm'],"VCL-850
Commented out lines in VMware.pm::prepare_vmx which enable 3D.",VCL-850
82f6437fc2d5a4ce6adeffa017291c8160ac44a6,,,2,"['managementnode/lib/VCL/makeproduction.pm', 'managementnode/lib/VCL/utils.pm']","VCL-849
Updated utils.pm::is_request_deleted to only return true if the request state or laststate is deleted. It had been returning true if either was makeproduction.pm.  Changed is_request_deleted to utilize get_request_current_state_name - the query was duplicated.

Added utils.pm::set_production_imagerevision. Moved this code from makeproduction.pm.

Fixed how makeproduction.pm::process sets log.ending. It had been setting it to 'EOR' regardless of the previous state. Changed so ending is set to 'deleted' if the previous state is new or reserved, and 'released' if inuse.",VCL-849
db345365c51b43b5ea3e9e728f5e70190885cc31,,,1,['web/.ht-inc/statistics.php'],"VCL-763 - Add missing constraints to database tables

statistics.php: modified addToStatGraphCache: added code to set $affilid and $provid to 'NULL' when they are passed in as 0 so that NULL is used in the insert query instead of 0 to prevent a foreign key constraint error",VCL-763
78e0ca7176b90ebe6a05b8113c27d636b89ffc65,,,7,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/reclaim.pm', 'managementnode/lib/VCL/reserved.pm', 'managementnode/lib/VCL/utils.pm']","VCL-845
Removed reference to blockRequest.admingroupid from utils.pm::get_management_node_blockrequests and from DataStructure.pm.

VCL-847
Fixed problem in utils.pm::reservation_being_processed. The $parent_reservation_id variable was getting initialized every time. Later on it is set to the actual ID if not defined. As a result, it would never be set to the correct reservation ID.

Added State.pm::wait_for_reservation_loadstate. Updated reserved.pm so that child reservations wait for the parent to generate an ""acknowledgetimeout"" computerloadlog entry. The timestamp of this entry is used to determine when to stop checking for acknowledgment. 

Updated reclaim.pm to call state_exit instead of switch_state.

Commented out section in State.pm::wait_for_child_reservations_to_exit where it exited immediately if the request was deleted. This causes problems with cluster requests. Added a comment explaining the problem for future reference.

Updated how State.pm::state_exit handles setting request.state if the current state is deleted. It was skipping the request.state update instead of changing it to completed.

Other
Added code to new.pm::wait_for_child_reservations to use a short interval between checks at the start, and then increase it. This speeds things up when all child reservations are ready early on.",VCL-845
03e27d909ef6824ba227b8ebafde407601bef0e9,,,65,"['INSTALLATION', 'README', 'RELEASE_NOTES', 'UPGRADE', 'managementnode/bin/health_check.pl', 'managementnode/bin/monitor_vcld.pl', 'managementnode/bin/upgrade_database.pl', 'managementnode/bin/vcld', 'managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/ESXi.pm', 'managementnode/lib/VCL/Module/OS/Linux/ManagementNode.pm', 'managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm', 'managementnode/lib/VCL/Module/OS/Linux/UnixLab.pm', 'managementnode/lib/VCL/Module/OS/Linux/firewall.pm', 'managementnode/lib/VCL/Module/OS/Linux/firewall/iptables.pm', 'managementnode/lib/VCL/Module/OS/Linux/init.pm', 'managementnode/lib/VCL/Module/OS/Linux/init/SysV.pm', 'managementnode/lib/VCL/Module/OS/Linux/init/Upstart.pm', 'managementnode/lib/VCL/Module/OS/Linux/init/systemd.pm', 'managementnode/lib/VCL/Module/OS/OSX.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5/2003.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5/XP.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/2008.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/2012.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/7.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/8.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/Vista.pm', 'managementnode/lib/VCL/Module/Predictive.pm', 'managementnode/lib/VCL/Module/Predictive/Level_0.pm', 'managementnode/lib/VCL/Module/Predictive/Level_1.pm', 'managementnode/lib/VCL/Module/Predictive/Level_2.pm', 'managementnode/lib/VCL/Module/Provisioning.pm', 'managementnode/lib/VCL/Module/Provisioning/Lab.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vmware_cmd.pm', 'managementnode/lib/VCL/Module/Provisioning/libvirt.pm', 'managementnode/lib/VCL/Module/Provisioning/libvirt/KVM.pm', 'managementnode/lib/VCL/Module/Provisioning/one.pm', 'managementnode/lib/VCL/Module/Provisioning/openstack.pm', 'managementnode/lib/VCL/Module/Provisioning/vbox.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/Module/Semaphore.pm', 'managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/blockrequest.pm', 'managementnode/lib/VCL/healthcheck.pm', 'managementnode/lib/VCL/image.pm', 'managementnode/lib/VCL/inuse.pm', 'managementnode/lib/VCL/makeproduction.pm', 'managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/reclaim.pm', 'managementnode/lib/VCL/reserved.pm', 'managementnode/lib/VCL/utils.pm', 'mysql/update-vcl.sql', 'mysql/vcl.sql', 'vcl-install.sh', 'vcl-upgrade.sh', 'web/index.php']",updated version numbers from 2.4.1 to 2.4.2,
822f6074520a6bd76564dc036099f7b855344696,,,1,['mysql/update-vcl.sql'],"update-vcl.sql: modified insert into provisioning table for OpenNebula, changes subselect to select from ""module"" instead of ""vcl.module"" for sites where the vcl database name is not ""vcl""",update-
de0d1ee9638071ef3a0c00d4ebe7e566e489289e,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-763 - Add missing constraints to database tables

vcl.sql:
-modified blockRequest.groupid to allow NULL
-modified statgraphcache.affiliationid and statgraphcache.provisioningid to allow NULL

update-vcl.sql:
-changes for blockRequest table: change groupid and managementnodeid to allow NULL; added updates to change any entries that had those fields set to 0 to be NULL
-changes for statgraphcache table: changed fields affiliationid and provisioningid in create table for statgraphcache to allow NULL; added alter tables to change those fields to allow NULL for when the table already exists; added updates to change any entries that had those fields set to 0 to be NULL; added deletes to remove any entries from statgraphcache where affiliationid or provisioningid have values that are not in the corresponding tables
-changes for blockRequest constraints: changed foreign keys for groupid and managementnodeid to set null on delete and cascade on update
-changes for statgraphcache constraints: remove existing constraints, recreate them with cascade for both detele and update",VCL-763
039a5f629d6322ca693f636494c77d9992984abc,,,2,"['web/.ht-inc/requests.php', 'web/.ht-inc/xmlrpcWrappers.php']","VCL-763 - Add missing constraints to database tables

requests.php: modified AJeditRequest: fixed call to retryGetSemaphore where '1' was passed for $imageid and $imagerevisionid - the image being added to the semaphore table is not important in this case, but with the foreign key constraint, they need to be values actually in those tables

xmlrpcWrappers.php: modified XMLRPCextendRequest and XMLRPCsetRequestEnding: fixed calls to retryGetSemaphore where '1' was passed for $imageid and $imagerevisionid - the image being added to the semaphore table is not important in this case, but with the foreign key constraint, they need to be values actually in those tables",VCL-763
fd9a7d69b8425e59eda3cb2a132e63c10de1bdc5,,,5,"['mysql/update-vcl.sql', 'mysql/vcl.sql', 'web/.ht-inc/groups.php', 'web/.ht-inc/utils.php', 'web/.ht-inc/xmlrpcWrappers.php']","VCL-845 - Remove blockRequest.admingroupid column

vcl.sql:
-modified definition for blockRequest, removed admingroupid column
-removed ALTER TABLE ... ADD CONSTRAINT for blockRequest.admingroupid

update-vcl.sql:
-removed removed ALTER TABLE statement that changed blockRequest.admingroupd
-added DropColumnIfExists for blockRequest.admingroupid
-removed AddConstraintIfNotExists for blockRequest.admingroupid

groups.php: modified checkForGroupUsage: modified check of blockRequest table to not look at admingroupid

utils.php: modified getBlockTimeData - removed admingroupid from returned data

xmlrpcWrappers.php: modified XMLRPCblockAllocation: removed inserting admingroupid as part of insert query into blockRequest table",VCL-845
218c5bfcba509652495cdcc932337273ffc580b5,,,1,['vcl-upgrade.sh'],"VCL-837 - Prepare VCL 2.4.1 release

corrected line that gzipped backup sql dump to use ${VCL_VERSION} instead of having the version number hard coded",VCL-837
5f457d1ab3cfa38066d07bf1c73bf4b69431ac75,,,3,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/ManagementNode.pm']","VCL-839
Changed Linux firewall code so that it doesn't rely on the management node private IP address which cannot be reliably determined. Instead, access firewall access is granted to all IP addresses bound on the management node.

Added Linux.pm::grant_management_node_access. This allows traffic on any port to all of the MN's IP addresses.

Added check in Linux.pm::enable_firewall_port if an attempt is made to enable port 22 with the force option. This subroutine now calls grant_management_node_access and only proceeds if it returns true. This should help eliminate the possibility of a MN locking itself out.

Added call to grant_management_node_access in disable port if the port is 22. It only proceeds if grant_management_node_access returns true.

Added OS.pm::get_ip_addresses which is used by grant_management_node_access.

Changed Linux.pm::post_load to call disable_firewall_port('tcp', 22) instead of attempting to enable TCP/22 for the management node's private IP address.

Changed Linux.pm::sanitize to call process_connect_methods with an argument of 127.0.0.1 instead of the MN's private IP address.

Changed ManagementNode.pm::initialize to not return false if the management node's private IP address cannot be determined.",VCL-839
02d00079f3a1ece6be956e48b5948cea305973e8,,,1,['managementnode/lib/VCL/DataStructure.pm'],"VCL-842
I added a condition to DataStructure.pm to not display warnings in vcld.log if mangementnode.keys is not populated. Because get_management_node_keys is called from several places, it was cleaner to disable the warnings from the source rather than add an argument to each call.",VCL-842
d947063833dbd48a783b3035a08aae5c2a0eadd3,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm'],"VCL-841
Updated VMware.pm so that configure_vmhost_dedicated_ssh_key is only called for ESXi 4.x. It is no longer needed for 5.x and causes warnings in vcld.log.",VCL-841
7af46842e60ca3f7f71b7ab55345f3e8cd1c1e93,,,1,['vcl-upgrade.sh'],"VCL-838
Updated name of file which database gets backed up to in vcl-upgrade.sh to 2.4.1.",VCL-838
02f4f7409d3c4f25112a20ca11a87ef3d6e8a259,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-838
Updated version comments in vcl.sql and update-vcl.sql.",VCL-838
57dcc94c269fb0b09b73c0410d6e59883ccbf590,,,6,"['CHANGELOG', 'INSTALLATION', 'README', 'RELEASE_NOTES', 'UPGRADE', 'web/index.php']","VCL-837 - Prepare VCL 2.4.1 release

updated for 2.4.1",VCL-837
4100679a363594c093f6029063d5bdcabcd1221e,,,1,['doap_vcl.rdf'],"VCL-838
Updated doap_vcl.rdf file up to 2.4. It was also missing 2.3.2.",VCL-838
60dbe3c4fbed199876b98c266565f921fba1f621,,,2,"['vcl-install.sh', 'vcl-upgrade.sh']","VCL-838
Updated VCL_VERSION variable in vcl-install.sh and vcl-upgrade.sh.",VCL-838
1665ddbe03152ad139c8ca960be35bdc74cfbbcc,,,56,"['managementnode/bin/health_check.pl', 'managementnode/bin/monitor_vcld.pl', 'managementnode/bin/upgrade_database.pl', 'managementnode/bin/vcld', 'managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/ESXi.pm', 'managementnode/lib/VCL/Module/OS/Linux/ManagementNode.pm', 'managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm', 'managementnode/lib/VCL/Module/OS/Linux/UnixLab.pm', 'managementnode/lib/VCL/Module/OS/Linux/firewall.pm', 'managementnode/lib/VCL/Module/OS/Linux/firewall/iptables.pm', 'managementnode/lib/VCL/Module/OS/Linux/init.pm', 'managementnode/lib/VCL/Module/OS/Linux/init/SysV.pm', 'managementnode/lib/VCL/Module/OS/Linux/init/Upstart.pm', 'managementnode/lib/VCL/Module/OS/Linux/init/systemd.pm', 'managementnode/lib/VCL/Module/OS/OSX.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5/2003.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5/XP.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/2008.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/2012.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/7.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/8.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/Vista.pm', 'managementnode/lib/VCL/Module/Predictive.pm', 'managementnode/lib/VCL/Module/Predictive/Level_0.pm', 'managementnode/lib/VCL/Module/Predictive/Level_1.pm', 'managementnode/lib/VCL/Module/Predictive/Level_2.pm', 'managementnode/lib/VCL/Module/Provisioning.pm', 'managementnode/lib/VCL/Module/Provisioning/Lab.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vmware_cmd.pm', 'managementnode/lib/VCL/Module/Provisioning/libvirt.pm', 'managementnode/lib/VCL/Module/Provisioning/libvirt/KVM.pm', 'managementnode/lib/VCL/Module/Provisioning/one.pm', 'managementnode/lib/VCL/Module/Provisioning/openstack.pm', 'managementnode/lib/VCL/Module/Provisioning/vbox.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/Module/Semaphore.pm', 'managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/blockrequest.pm', 'managementnode/lib/VCL/healthcheck.pm', 'managementnode/lib/VCL/image.pm', 'managementnode/lib/VCL/inuse.pm', 'managementnode/lib/VCL/makeproduction.pm', 'managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/reclaim.pm', 'managementnode/lib/VCL/reserved.pm', 'managementnode/lib/VCL/utils.pm']","VCL-838
Updated VERSION variable in backend files to 2.4.1.",VCL-838
62d58ade3f8ce9ad5f41bd51d20818c810d93bb8,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-16
Changed utils.pm::get_request_info to not use cached data if no argument is specified. This was causing the cluster_info file to contain incorrect information if a computer's public IP address changed.",VCL-16
f0250cb704128b3ef1722f60d933350f89591737,,,1,['managementnode/lib/VCL/Module/Provisioning/one.pm'],VCL-722: new integration single image error,VCL-722
00586aca3a0c57c8d88a0256d8df361f6f4f0d39,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm'],"VCL-685
Added check in vSphere_SDK.pm::DESTROY so that a warning isn't generated if the vSphere SDK isn't installed.",VCL-685
aa022568c37ed710688ed9882bb7f7c655e13b65,,,1,['CHANGELOG'],added VCL-834,
dd14d71c5a09298492b32d62f78603ca7c50262f,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","vcl.sql: changed prettyname of predictive loading modules as follows:
Predictive Loading Module Level 0 -> Reload with last imag
Predictive Loading Module Level 1 -> Reload image based on recent user demand
Predictive Loading Module Level 2 -> Unload/power off after reservation

update-vcl.sql: added updates to change prettyname of predictive loading modules as follows:
Predictive Loading Module Level 0 -> Reload with last imag
Predictive Loading Module Level 1 -> Reload image based on recent user demand
changed prettyname for insert of level 2 from ""Predictive Loading Module Level 2"" to ""Unload/power off after reservation""",
498a75e47985cfd323e266580d9ae855b3e9accf,,,1,['web/js/requests.js'],"VCL-834 - Disable timeout for disconnected users is meaningless for imaging reservations

I listed the wrong JIRA issue in the last commit. I added a newline at the bottom of the file to do another commit.

requests.js: modified selectResType: only show ""Disable timeout for disconnected users"" for basic reservations; previously it was shown for basic and imaging reservations; imaging reservations are not timed out when users are disconnected. So, having this option for them didn't make sense.",VCL-834
93d0a36e88b3e975c67dc1465b500675d083f222,,,1,['web/js/requests.js'],"VCL-178 - enable checkuser flag for per reservation instead of image only

requests.js: modified selectResType: only show ""Disable timeout for disconnected users"" for basic reservations; previously it was shown for basic and imaging reservations; imaging reservations are not timed out when users are disconnected. So, having this option for them didn't make sense.",VCL-178
c53f9abbef213442c8fb4b5bc20cf6610ae7d715,,,1,['mysql/update-vcl.sql'],"VCL-174 - NAT - support for sites that have small IP address ranges

update-vcl.sql: removed insert that populated nathost table with existing management nodes. This was initially added before there was a way to add nat hosts and all added management nodes would also be added as nat hosts. The code was added to be able to set any management node or computer as a nat host. So, this initial population of the nathost table with management nodes is unnecessary.",VCL-174
884efbaba78ea7d9cb28b97153eb96388d17fef5,,,1,['web/.ht-inc/siteconfig.php'],"VCL-797 - system admin setting for randomly generated passwords

siteconfig.php: modified userPasswordSpecialChar.__construct: set default value to 0 to match what vcld does if nothing is set in the database",VCL-797
49c18a1e053999450fc1a1b5a9439ffa5823edce,,,2,"['mysql/vcl.sql', 'web/.ht-inc/utils.php']","VCL-764
vcl.sql: Changed vmprofile.vmdisk values from localdisk/networkdisk to dedicated/shared in insert statement.

utils.php: Changed description of getVMProfiles from localdisk/networkdisk to dedicated/shared.",VCL-764
b08d381034028e895f2d5a7f3780e3cfbbbdcf0f,,,1,['mysql/update-vcl.sql'],"VCL-764

vcl-update.sql 
Added statement to insert exited state to computerloadstate table.",VCL-764
7110401ed9065412430a26e714649cfc9dfe4a7e,,,1,['managementnode/lib/VCL/Module/Provisioning/one.pm'],"VCL-722
Removed -d argument from perl command in first line.",VCL-722
1c8616ef2f2158aa1a83ceba448915e2cfc7d7c4,,,1,['web/js/resources/computer.js'],"VCL-776 - rework resource code to have a base class for all resources and inheriting classes for each resource type

computer.js: modified initPage and refreshcompdata: set comparatorMap for fields procnumber, procspeed, network, and ram so they will sort in numerical order instead of string order",VCL-776
bc039624917dce8c38c2b66be74553fbb9cb36fe,,,1,['web/locale/fr_CA/LC_MESSAGES/vcl.mo'],"VCL-392 - Add option to rename computer separate from Sysprep

(missed this file in previous commit to translation files) added 'Set Hostname', 'Set computer hostname', 'Set Computer hostname must be Yes or No', and ""Invalid value specified for 'Set computer hostname'"" to translation files",VCL-392
30161e0d4251bd1bba3d933e712bbcd63905727d,,,2,"['vcl-install.sh', 'vcl-upgrade.sh']",removed test paths; added --rc= option that allows scripts to be used to test release candidates,
80e384ce9167b2b9133b11ee202bfaf25aae9edc,,,2,"['CHANGELOG', 'RELEASE_NOTES']","CHANGLOG: added release notes items for 2.4
RELEASE_NOTES: improved description of NAT",
16ef9c7f664ee804a1b4e60322fced77a21d8bcc,,,3,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm']","VCL-392
Added accessor to imagemeta.sethostname to DataStructure.pm.

Added Windows.pm::set_computer_hostname subroutine. Updated Windows.pm::post_load to set the computer hostname if imagemeta.sethostname = 1. If the hostname is changed, the computer is rebooted during post_load. If a reboot is to be done, a scheduled task to execute update_cygwin.cmd is added to run at startup. This task is also deleted during pre_capture to avoid conflicts with other scripts.

Added condition to Linux.pm::post_load to call update_public_hostname only if imagemeta.sethostname is not set to 0. The subroutine is called if imagemeta.sethostname is undefined or set to 1.",VCL-392
17cb693b73a9c22f8bf4c02ba3b70015b4e844b0,,,1,['managementnode/bin/install_perl_libs.pl'],Fixed alphabetic order.,
9cb1fbd5a83375275075bdbb988105261ed83415,,,1,['mysql/update-vcl.sql'],"VCL-764 - Database changes for VCL 2.4

update-vcl.sql: modified AddConstraintIfNotExists: extended to accept 'nullCASCADE' for constraintAction with constraintType is both; this causes the constraint to be set as ""ON DELETE SET NULL ON UPDATE CASCADE""; modified constraint for image.imagemetaid to call AddConstraintIfNotExists with nullCASCADE for constraintAction so things will match what is in vcl.sql (and allow entries in imagemeta to be deleted)",VCL-764
c2b7c6ff7235904bbe9292a2e38d7d020bf62845,,,6,"['web/js/nls/es_MX/messages.js', 'web/js/nls/fr_CA/messages.js', 'web/js/nls/messages.js.template', 'web/locale/po_files/es_MX/vcl.po', 'web/locale/po_files/fr_CA/vcl.po', 'web/locale/po_files/vcl.po.template']","VCL-392 - Add option to rename computer separate from Sysprep

added 'Set Hostname', 'Set computer hostname', 'Set Computer hostname must be Yes or No', and ""Invalid value specified for 'Set computer hostname'"" to translation files",VCL-392
6bfcb73772b5eff1fa2103540e68b387863535ba,,,5,"['web/.ht-inc/image.php', 'web/.ht-inc/resource.php', 'web/.ht-inc/utils.php', 'web/.ht-inc/xmlrpcWrappers.php', 'web/js/resources/image.js']","VCL-392 - Add option to rename computer separate from Sysprep

image.php:
-modified fieldDisplayName: added sethostname to fields for which a custom value is returned
-modified addEditDialogHTML: (unrelated) wrapped description text for Usage Notes and Revision Comments; added sethostname widget that is wrapped with a div that can be hidden; wrapped sysprep with a div that can be hidden
-modified AJsaveResource: added sethostname to fields that trigger imagemeta table being updated
-modified createImage: added ostype to fields added to $data for passing to addResource
-modified addResource: added sethostname to fields that trigger entry being added imagemeta table
-modified validateResourceData: added sethostname to fields returned and validated

resource.php: modified AJstartImage: added ostype to array of json data returned

utils.php: getImages: added 'sethostname' to set of fields returned for each image

xmlrpcWrappers.php: modified XMLRPCautoCapture: added 'ostype' and 'sethostname' to array of data passed to addResource function

image.js:
-modified colformatter: added sethostname to fields for which true/false is returned
-modified inlineEditResourceCB: added sethostname to widgets having their value set; show/hide sethostnamediv based on ostype
-modified resetEditResource: added sethostname to fields reset
-modified saveResource: added sethostname to data that is validated, only show error if sethostnamediv is displayed
-modified saveResourceCB: added sethostname to fields updated in store and to widgets being reset
-modified startImageCB: added code to show/hide sethostnamediv and to initialize value for sethostname widget; added code to show/hide new div that wrpas the sysprep widget so it is only shown for Windows images",VCL-392
f0059adf607281620a5289e866de96b6a6681a42,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-392 - Add option to rename computer separate from Sysprep

vcl.sql and update-vcl.sql: added sethostname field to imagemeta table",VCL-392
ce72f8b96e6a037fce1406979acac2d1a6e18369,,,4,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux/firewall/iptables.pm', 'managementnode/lib/VCL/reclaim.pm', 'managementnode/lib/VCL/utils.pm']","VCL-174
Renamed utils.pm::get_connect_method_info to get_reservation_connect_method_info and changed argument from $imagerevision_id to $reservation_id. Updated all calls to this subroutine.

Added iptables.pm::sanitize_reservation. Changed call in reclaim.pm from delete_chain to sanitize_reservation to make things more generic and flexible for future modules.

Removed required $chain_name argument from iptables.pm::add_nat_port_forward. Added get_reservation_chain_name subroutine so that the chain name used for individual reservations is only defined in 1 location.

Added iptables.pm::save_configuration subroutine. This gets called from sanitize_reservation and configure_nat_reservation.

Other
Updated utils.pm::get_vmhost_info to accept either a VM host computer name or ID.",VCL-174
f6b6ce0f34fcf65eeb10fdd7dc8842671c9cfb7c,,,1,['managementnode/bin/install_perl_libs.pl'],VCL-722: added Frontier::Client perl module to install_perl_libs.pl,VCL-722
e712f7b3574ffb4b72a0effb05efed0bf357f165,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']",VCL-722: Database changes for OpenNebula module,VCL-722
53bf7f1c85469c0ed187afb9db1ca36deccec112,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-174
Changed natlog.internalIPaddress column to nullable since nathost.internalIPaddress can be null. The statement to update the natlog table would fail if nathost.internalIPaddress was null.",VCL-174
1ac9ddd9413f8fe3044f594de554d814537586ec,,,1,['managementnode/lib/VCL/Module/OS.pm'],"VCL-818
Removed 'virtual' from the list of ignored network interface descriptions in OS.pm::get_public_interface_name. This string may appear in the description of some valid network interfaces.",VCL-818
da088bdd76f115a6eac0a23944570a5bb8e9616a,,,1,['managementnode/lib/VCL/Module/OS.pm'],"VCL-564
Added post_reservation and post_initial_connection options to OS.pm::run_management_node_tools_scripts.",VCL-564
22214881a7148b74f13b6afd59ef33b9fc580c80,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-815
Added check to Windows.pm::get_cygwin_unix_file_path to make sure file path argument contains a slash and/or colon before attempting to execute cygpath.exe. Unnecessary warnings were being generated if a simple file name was passed.",VCL-815
204a57bd81cad83b10928ac2504c8f507f3e843d,,,0,[],"VCL-564
Added post_reservation and post_initial_connection directories for each OS under tools/Scripts.",VCL-564
0591566290b866c9c7a01101be6163dee7076531,,,3,"['managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/reserved.pm']","VCL-564
Added call in reserved.pm to attempt to execute post_initial_connection scripts residing on the management node after an initial user connection is detected.

Added ability to execute scripts stored on management node during the 'post_reservation' stage.",VCL-564
2de55522d0ad065ac5e976197132b35bfc61fbf9,,,4,"['web/.ht-inc/image.php', 'web/js/nls/es_MX/messages.js', 'web/js/nls/messages.js.template', 'web/js/resources/image.js']","when editing images, changed to allow 1 for max concurrent usage

image.php: modified validateResourceData: updated text of error message for concurrent to specify between 0 and 255

image.js: modified saveResource: updated conditional and error message for concurrent to allow 0 to 255 and specify that

messages.js and messages.js.template: updated error message for max concurrent usage to match update in image.js",
31919252f4e2d6f9b460c917e50ed9dc41ffd624,,,4,"['web/js/nls/fr_CA/messages.js', 'web/locale/fr_CA/LC_MESSAGES/vcl.mo', 'web/locale/fr_CA/language', 'web/locale/po_files/fr_CA/vcl.po']",inital add of fr_CA locale,
e01f1dd4048abdebc4295f40750c204caf64a9f9,,,1,['web/.ht-inc/groups.php'],"groups.php: modified processGroupInput: added constraint to conditional for validating editgroupid, do not check it for federated or course roll groups",
29e16d6605afbbac9c0536549fbedb88b85c1c79,,,2,"['web/.ht-inc/utils.php', 'web/js/groups.js']","utils.php: modified getDojoHTML: added dojo initialization javascript for viewGroups section to set comparatorMap['name'] to nocasesort for usergroupstore and resourcegroupstore; this makes case get ignored when the tables are sorted by name

groups.js: added nocasesort",
eaa58af181e6e621dac0311b50ecbcbe15b1b955,,,1,['web/locale/po_files/vcl.po.template'],"removed spanish from translated string for last 3 entries (list, weekly, monthly)",
42eab55e7b6aa79bbe9807546c0d10e67406d72f,,,1,['web/.ht-inc/userpreferences.php'],"userpreferences.php: modified userpreferences: changed printing of title to only pass ""User Preferences"" to translation function instead of ""<H2 align=center>User Preferences</H2>\n""",
99efbd36076d0b9c5f9d95addbdd7d174b150c9d,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm'],"VCL-685
Added missing 'use English' to VIM_SSH.pm.",VCL-685
fef25f1ecca814c2fb059992faba0513a77ac8de,,,2,"['managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm']","VCL-685
Updated VMware.pm::is_vmdk_file_shared and is_vmdk_directory_shared to check for an existing .vmdk file beginning with one of the OS.name values and also the OS.name value with 'vmware' omitted from the beginning. The beginning 'vmware' gets trimmed if an image is created on KVM and then loaded on VMware.

Updated VIM_SSH.pm to detect some common errors if a host is overloaded with multiple vim-cmd commands being run at the same time.

Added subroutines to VIM_SSH.pm which retrieve the host's capabilities. These are not currently being called (may use these in the future):
get_config_option_descriptor_info
get_config_option_info
get_config_option_guest_os_info
_print_compatible_guest_os_hardware_versions
_parse_vim_cmd_output",VCL-685
feb9df6c78a2e53bc37a6460f777740d3aad8b4a,,,5,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/firewall/iptables.pm', 'managementnode/lib/VCL/reserved.pm', 'managementnode/lib/VCL/utils.pm']","Updated reserved.pm::process to check for a computerloadlog 'initialconnecttimeout' entry for the parent reservation ID. The frontend only inserts the entry for the parent. This was generating warnings.

VCL-174
Changed OS.pm::process_connect_methods to pass a string consisting of the vcld process name and reservation ID to add_nat_port_forward instead of just the reservation ID. This will make it easier to identify which firewall chains/rules were created by a particular vcld daemon.

Updated iptables.pm::get_table_info to parse the table information and create a hash reference.

VCL-678
Commented out unnecessary vcld.log messages in utils.pm::is_management_node_process_running.

VCL-702
Updated Linux.pm::activate_interfaces to use OS.pm::create_text_file. It had been calling echo with a \E argument to create ifcfg* files. The argument was generating warnings.",
2fc65f5b49659fddc7b35e9a06c9b3169ab9db6e,,,1,['web/.ht-inc/blockallocations.php'],blockallocations.php: modified getPendingBlockHTML: wrapping of explination text for accept and reject dialogs was too short; changed from 50 to 100,
7b9669e588d695018dc64743237a8d667de1fec4,,,5,"['managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/image.pm', 'managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/utils.pm']","VCL-817
(pgrep command arguments have changed with RHEL/CentOS 7.x)

Updated utils.pm::is_management_node_process_running to not use pgrep. The ps and grep commands are used instead.

Added utils.pm::get_reservation_vcld_process_name_regex. It returns a regex formatted to match the name generated by rename_vcld_process. This is called by utils.pm::reservation_being_processed and passed to is_management_node_process_running.

Removed utils.pm::kill_reservation_process. The code was old and buggy. Added Linux.pm::kill_process. This is called from new.pm::computer_not_being_used.


VCL-174
(NAT Support)
Moved the calls to populate_reservation_natport and update_reservation_natlog back to utils.pm::get_request_info. Removed calls from State.pm::initialize. They were being called too late and the connect method info contained in the DataStructure object didn't have the natport info. Added check to where they are called so that they are only called for the reservation currently being processed -- not all reservations in a cluster.

Changed name of iptables chain added to NAT host to include the vcld process name.

Udated iptables.pm::get_table_info to parse the iptables rule specifications and construct a hash.


Other
Changed the email subject generated in utils.pm::notify to include the VM host's short computer name rather than the full name. The subject can be quite long and truncated in some email clients.

Changed the vcld process name generated in utils.pm::rename_vcld_process to also use the shorter VM host name.

Added utils.pm::character_to_ascii_value - This returns the decimal, hex, or octal value of a single character. It may be used to include special characters in a regex passed to a subroutine such as is_management_node_process_running. This isn't currently being called.

Updated image.pm::setup_capture_base_image to call get_reservation_vcld_process_name_regex to determine the pattern to filter the vcld.log output displayed after the image capture begins.",VCL-817
ed9e39dddb881dea9f6ab2c4a35a8b65cf78c0b1,,,1,['web/.ht-inc/xmlrpcdocs/xmlrpc__example_8php-example.html'],removing old file,
bec94a9a11046d58a0aa7df1aa219793a2acd9e4,,,1,['web/.ht-inc/doxyfile.xmlrpc'],"removed obsolete keywords: USE_WINDOWS_ENCODING, DETAILS_AT_TOP, SHOW_DIRECTORIES, HTML_ALIGN_MEMBERS, MAX_DOT_GRAPH_WIDTH, and MAX_DOT_GRAPH_HEIGHT",
d485ea84f6df14cb41ea703d3eef8858d9047320,,,1,['web/.ht-inc/xmlrpcWrappers.php'],"updates for running doxygen to generate documentation

-modified header for XMLRPCaddRequestWithEnding: missing 3rd '/' at beginning of line for $nousercheck argument
-modified header for XMLRPCgetUserGroups: removed \b for each item listed in return section; doxygen was unhappy with them (maybe because there is no description after them?)
-modified header for XMLRPCfinishBaseImageCapture: 1st parameter is $ownerid, first documented param was $ownerdata; changed to $ownerid",
57529c5cb459a178e1260f7c05366100a64ba984,,,2,"['web/.ht-inc/xmlrpcdocs/xmlrpc_example_8php-example.html', 'web/.ht-inc/xmlrpcdocs/xmlrpcdocs.css']","-removing xmlrpc__example_8php-example.html and adding xmlrpc_example_8php-example.html
-doxygen no longer generates xmlrpc__example_8php-example.html
-updated xmlrpcdocs.css to format xmlrpc_example_8php-example.html correctly",-
519a1dc02cecc1f6547e63aada6b0d89a1a31300,,,3,"['web/.ht-inc/xmlrpcdocs/xmlrpcWrappers_8php.html', 'web/.ht-inc/xmlrpcdocs/xmlrpc__example_8php-example.html', 'web/.ht-inc/xmlrpcdocs/xmlrpcdocs.css']","-updated for 2.4
-created a css file (xmlrpcdocs.css) to replace file generated by doxygen - couldn't find license on doxygen.css, but since doxygen is under GPL, the file probably is too",-
126ecd026dbbc73b8e8bb5489bb8186df363b9fe,,,5,"['web/js/nls/es_MX/messages.js', 'web/js/nls/messages.js.template', 'web/locale/es_MX/LC_MESSAGES/vcl.mo', 'web/locale/po_files/es_MX/vcl.po', 'web/locale/po_files/vcl.po.template']","internationalization work

-updated locale/po_files/vcl.po.template and js/nls/messages.js/template with latest strings from these files:
utils.php
requests.php
userpreferences.php
statistics.php
resource.php
image.php
blockallocations.php
authentication.php
requests.js
newresservercommon.js
resources.js
resources/image.js
blockallocations.js

-updated es_MX files (vcl.po, messages.js) to be based on these new template files and regenerated vcl.mo from vcl.po",
52d52377515bd68b026212750b026146491ea2f0,,,1,['web/js/code.js'],"code.js: modified _() function to check for value of translated string in nlsmessages being '' and, if so, return the passed in string rather than the empty string",
c1cd0b2248534fef515229dde2b70e29c815d0e3,,,17,"['web/.ht-inc/authentication.php', 'web/.ht-inc/blockallocations.php', 'web/.ht-inc/computer.php', 'web/.ht-inc/image.php', 'web/.ht-inc/managementnode.php', 'web/.ht-inc/requests.php', 'web/.ht-inc/resource.php', 'web/.ht-inc/schedule.php', 'web/.ht-inc/statistics.php', 'web/.ht-inc/userpreferences.php', 'web/.ht-inc/utils.php', 'web/index.php', 'web/js/blockallocations.js', 'web/js/newresservercommon.js', 'web/js/requests.js', 'web/js/resources.js', 'web/js/resources/image.js']","lots of internationalization work

finished setting up translation for blockallocations.php, requests.php, blockallocations.js, and requests.js
set up translation for all of image.php, resource.php, newresservercommon.js, image.js, and resources.js
set up some translation in computer.php, managementnode.php, schedule.php
updated translation code in authentication.php, statistics.php, userpreferences.php, utils.php

-tried to remove as much html from translation strings as possible
-tried to remove as many variables from translation strings as possible
-changed strings into single, long lines instead of broken into fragments to enable better translations
-moved leading and trailing spaces from translation strings
-changed use of <strong> and <b> tags in various places; <strong> means emphasis, <b> just means display in bold font (similar but different, especially for things like screen readers)
-removed double spaces in a few places

authentication.php:
-touched these functions: selectAuth and printLoginPage

blockallocations.php:
-touched these functions: blockAllocations, blockAllocationForm, AJblockAllocationSubmit, getCurrentBlockHTML, getPendingBlockHTML, AJdeleteBlockAllocationConfirm, AJacceptBlockAllocationConfirm, AJacceptBlockAllocationSubmit, AJrejectBlockAllocationConfirm, AJrejectBlockAllocationSubmit, AJtoggleBlockTime, processBlockAllocationInput, AJpopulateBlockStore, and viewBlockAllocatedMachines

computer.php:
-touched these functions: extraResourceFilters and addEditDialogHTML

image.php:
-touched these functions: fieldDisplayName, checkResourceInUse, extraSelectAdminOptions, addEditDialogHTML, connectmethodDialogContent, subimageDialogContent, AJeditResource, createImage, getRevisionHTML, AJaddSubimage, AJremSubimage, validateResourceData, AJaddImageConnectMethod, AJremImageConnectMethod, and AJdeleteRevisions

managementnode.php:
-touched this function: addEditDialogHTML

requests.php:
-touched these functions: viewRequests, getViewRequestHTMLitem, newReservationHTML, AJupdateWaitTime, printImageDescription, AJshowRequestSuggestedTimes, AJnewRequest, detailStatusHTML, AJeditRequest, AJsubmitEditRequest, AJconfirmDeleteRequest, AJconfirmDeleteRequestProduction, AJshowReinstallRequest, AJconnectRequest, processRequestInput, AJsetImageProduction, and AJsubmitSetImageProduction

resource.php:
-touched these functions: selectionText, viewResources, AJpromptToggleDeleteResource, groupByResourceHTML, groupByGroupHTML, mapByResGroupHTML, mapByMapToGroupHTML, and AJstartImage

schedule.php:
-touched this function: addEditDialogHTML

statistics.php:
-touched these functions: selectStatistics and viewStatistics

userpreferences.php:
-touched these functions: userpreferences and confirmUserPrefs

utils.php:
-touched these functions: initGlobals, maintenanceCheck, maintenanceNotice, main, abort, getRequestInfo, showTimeTable, minToHourMin, prettyLength, getReservationLengths, getReservationLength, getReservationExtenstion, continuationsError, and getNavMenu
-modified labeledFormItem: no longer translate $label, $errmsg, or $help; these now need to be translated by the calling function (all calling functions were updated in other files)

blockallocations.js:
-touched these functions: blockFormVerifyMonthly, deleteBlockConfirmCB, viewBlockAllocationCB, acceptBlockConfirmCB, rejectBlockConfirmCB, and updateAllocatedMachinesCB

newresservercommon.js:
-touched these functions: deployProfileChanged, getServerProfileData, and getServerProfileDataDeployCB

requests.js:
-touched these functions: initViewRequests, selectResType, and addRevisionSelection

image.js:
-touched these functions: Image.prototype.colformatter, inlineEditResourceCB, saveResource, addSubimage, addSubimageCB, remSubimages, remSubimagesCB, addConnectMethod3, addConnectMethodCB, remConnectMethod, remConnectMethodCB, deleteRevisions, startImageCB, updateImageCB, and submitUpdateImageClickthroughCB

resources.js:
-touched these functions: Resource.prototype.DeleteBtn, Resource.prototype.EditBtn, Resource.prototype.addRemItemCB, toggleDeleteResourceCB, submitToggleDeleteResourceCB, and populateListsCB

index.php: moved setVCLLocale to be before initGlobals so the definition of $days in initGlobals will get translations done on it",
ab9d6bb2dcfd9042cd151e7d1cddaea5ae088663,,,1,['RELEASE_NOTES'],"-removed Roadmap section as per discussion on dev list
-added Notable Changes section",-
4166721c5dbb312f8571700aad708b8a8b513327,,,2,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm']","VCL-815
Reworked OS.pm::update_cluster. Each reservation now only creates a cluster_info file for itself. The firewall processes was also improved to be much more efficient.

Fixed problem with Windows code which creates the cluster_info file. The line endings were not Windows-style because the sed command in OS.pm::set_text_file_line_endings was failing. Sed under Cygwin can't handle a Windows-style file path if the ""-i"" switch is used. Added get_cygwin_unix_file_path subroutine. This gets called and the result gets passed to set_text_file_line_endings.

Other
Cleaned up and renamed Windows.pm::get_cygwin_path --> get_cygwin_installation_directory_path. It was messy. There were notify messages obviously copied/pasted from another subroutine which made no sense. Its name had also become vague with the addition of get_cygwin_unix_file_path, both of which call cygpath.exe.",VCL-815
e3bafa351b7e846b72f3d334240fdc972e8304dc,,,2,"['managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/utils.pm']","VCL-816
Added ""-n"" switch to the command in utils.pm::nmap_port. This causes the command to run much faster.

VCL-16
Changed utils.pm::get_request_info to use cached info by default. For large cluster requests, each reservation process was retrieving the same image and other information over and over - n-squared problem.

VCL-174
Removed section from utils.pm::get_request_info which populates the natport table. This was being done by every cluster reservation for all other cluster reservations. Moved to State.pm::initialize.

Updated utils.pm::get_computer_info to only call get_computer_nathost_info if a nathostcomputermap entry exists for the computer.",VCL-816
25ac080ac174d4469194f465cf6293bfc1685a67,,,1,['managementnode/lib/VCL/DataStructure.pm'],"VCL-815
Added DataStructure.pm::get_child_reservation_ids. It will be used by OS.pm::update_cluster.",VCL-815
9a30dcbf23669cdb16e0592dc6ca553e5d8943f9,,,3,"['managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/reserved.pm', 'managementnode/lib/VCL/utils.pm']","VCL-814
Moved code which sends the ready for connection email from new.pm to reserved.pm. The email now gets sent immediately after the Connect button appears.

VCL-174
Updated utils.pm::update_sublog_ipaddress. It was only handling a single sublog entry per request, meaning the sublog.IPaddress value was not being updated correctly for cluster requests. Changed it to accept a sublog.id argument. Updated the call to update_sublog_ipaddress in new.pm::reserve_computer to pass the updated arguments.",VCL-814
98e43edd596ab3766f7cc811631d4b4d3e7e09a9,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-813
Added Windows.pm::disable_set_network_location_prompt subroutine. This is called from post_load. It simply adds an empty registry key which prevents the ""Select a location for the network"" box from appearing when a user logs in. Updated reg_add to allow it to add a new key.",VCL-813
faac9dd4c1a92237ea9e52ac815c818bdabc9a51,,,1,['web/.ht-inc/computer.php'],"VCL-776 - rework resource code to have a base class for all resources and inheriting classes for each resource type

computer.php: modified extraResourceFilters: removed ""height: 87%"" from style for complist; this was causing a large empty space below the content when selecting to display DHCP config data, but didn't seem to be useful in any way in other cases",VCL-776
d7048bd52a05a2216695588eb1cab8906cd16cd9,,,1,['managementnode/lib/VCL/Module/OS/Windows/Version_6.pm'],"VCL-812
Commented out the section of code which retrieves the activation status in Version_6.pm::activate. This will cause an activation attempt to occur every time an image is loaded.",VCL-812
ea1975022e79dcb72c33985c054a90965cfe8e0a,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-584
Fixed problem with Windows.pm::set_static_public_address. It was trying to ping the IP address before setting it. It it got a response it failed -- even if the response came from the current computer which should have the address. Added code to retrieve the current public IP address before attempting ping.


Other
Updated Windows.pm::get_installed_applications to check both the 32 and 64-bit registry locations.",VCL-584
d8a5143a25c27a499383f7d73c14aca76eff12c1,,,2,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux/firewall/iptables.pm']","VCL-174
Fixed issue with iptables.pm::configure_nat. It didn't have access to the nathost table information when called via nathost_os. Changed it to accept $public_ip_address and $internal_ip_address arguments.",VCL-174
514e315dc6bc47ad4a54531e624c7943f50ffea3,,,4,"['web/.ht-inc/computer.php', 'web/.ht-inc/managementnode.php', 'web/.ht-inc/utils.php', 'web/js/resources/computer.js']","VCL-174 - NAT - support for sites that have small IP address ranges

updated code so that the drop down for selecting a NAT host when changing the nat host setting for multiple computers gets dynamically updated as computers are configured/unconfigured as NAT hosts

computer.php: modified extraResourceFilters: set an id for the 'Confirm NAT Change' button

managementnode.php: (just removed unnecessary newlines)

utils.php: modified getNAThosts: added conditionals to not include deleted computers and management nodes

computers.js:
-modified initPage: added line to disable newnathostbtn if there are no options in newnathostid
-modified saveResourceCB: add option to netnathostid select when an added or edited computer is enabled as a nat host and set newnathostbtn to be enabled; if a computer is edited and removed as a nat host, remove the computer from the options in newnathostid, if no options left, disable newnathostbtn
-modified confirmNATchange: if no options in newnathostid, return",VCL-174
b650b9a8751edb8d7e147afc785a7ca19c9555d7,,,1,['managementnode/lib/VCL/Module/State.pm'],"VCL-16
Added check in State.pm::state_exit to ensure $request_state_name_new is defined before comparing it.",VCL-16
3acc6336034a6c4cb75f4ed01cf134c8d6018ca1,,,5,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/utils.pm', 'mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-174
Added sublog.id column to vcl.sql and update-vcl.sql, which is referenced by the natlog table.

Updated natlog table in vcl.sql and update-vcl.sql to reference sublog.id instead of containing a computer ID value.

Updated DataStructure.pm to reflect the schema changes.

Added utils.pm::get_request_log_info. This is called from DataStructure.pm::get_log_data. I reworked get_log_data because it was only retrieving data for a single sublog entry.

Added utils.pm::update_reservation_natlog. This is called from get_request_info when the NAT ports are determined.

Added checks to OS.pm::process_connect_methods to ensure that the NAT host firewall object implements the 'configure_nat' and 'configure_nat_reservation' subroutines before attempting to call them.",VCL-174
ee6e33b1a26f1ed86285048cd0111606a2da42bc,,,1,['web/js/requests.js'],"VCL-780 - combine new reservation and current reservations pages

requests.js: modified initViewRequests: added a check for dojo.byId('limitstart') being null to the initial conditionals that check if the page has finished being built yet; things worked fine in firefox before this, but not in chrome, safari, or ie",VCL-780
ab75afdd91999f19a643cc7b23fa83e677137d66,,,1,['web/.ht-inc/requests.php'],"VCL-780 - combine new reservation and current reservations pages

requests.php: modified viewRequests: moved width of 500px from connectDlg dialog to connectDlgContent content pane - this caused the vertical scroll bar to show up when needed",VCL-780
8c685237fcb8524408515ba21c9221c09a1c5d7f,,,1,['README'],"- added release version at top
- removed php-sysvsem and php-process from required php modules
- reworked section of required packages and perl modules; moved all perl modules to a single section with text above it explaining that as many as possible will be installed using package management and remaining ones will be installed via CPAN.
- added mysql/mariadb as required package (if only installing a management node, this won't be pulled in as a dependency with the server portion)
- added section stating that DHCP is required to be set up",-
37b00d6972df3801ac9b5414bf268b17f3c75aeb,,,1,['CHANGELOG'],"added sections for 2.3.1 and 2.3.2

started section for 2.4 - only completed dependency changes so far; need to add list of JIRA issues later",
22f97c4639d3afe7a212fcd707355ee4a5415d10,,,2,"['managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/new.pm']","VCL-16
Increased the timeout in State.pm::initialize from 90 to 300 seconds when waiting for child reservations to begin. Increased interval between checks while waiting for child reservations to begin and exit to 30 seconds.",VCL-16
253cc51517c278b24baba699124d59a6735f2607,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT.pm'],"VCL-594
Updated xCAT.pm to check if the nodeset state changed from install to boot while monitoring a load. The code was missing detection of an installation beginning under some circumstances.",VCL-594
c572784ae3d6f789524f5f53a0bf54ef3724a92b,,,1,['vcl-upgrade.sh'],"when determining old version of management node code, check for old version of web being 2.2.2 and management node being 2.2.1; if so, set management node old version to be 2.2.2 since 2.2.2 didn't upgrade any parts of the management node code

added lines that remove existing sha1 and gpg sig files; previously, if existing files were there, new ones would have a .<number> added to the end resulting in the existing ones being used for verification instead of the just downloaded ones

changed file referenced by sed lines when modifying conf.php to use $WEB_PATH-$VCL_VERSION/.ht-inc/conf.php instead of $WEB_PATH/.ht-inc/conf.php; previously, it was updating conf.php in the old version instead of in the new version

if only updating the database, dump to vcl-pre${VCL_VERSION}-backup.sql instead of to vcl-${OLD_VERSION}-backup.sql since we cannot determine the existing version if only the database portion is installed",
d57631e96aecf76dfcd0ebe67184550ac37ef60d,,,1,['vcl-install.sh'],"added lines that remove existing sha1 and gpg sig files; previously, if existing files were there, new ones would have a .<number> added to the end resulting in the existing ones being used for verification instead of the just downloaded ones",
0d0723bf965dbd4686ca0624bbd546ff1621fde7,,,1,['mysql/vcl.sql'],"added user group permissions ""Manage Federated User Groups (global)"" and ""Site Configuration (global)"" to the adminUsers group",
15c7319a9be556c2e8a3090dfdbcec0828ba62f4,,,1,['managementnode/lib/VCL/Module/Provisioning/one.pm'],updated $VERSION to 2.4,
214196ca9532eb46d1830ef50893d93558534e8c,,,1,['managementnode/lib/VCL/Module/Provisioning/one.pm'],VCL-722: Latest OpenNebula module uploaded (one.pm),VCL-722
192aa0681e93d430f4b151ce0b7b6856f7beac15,,,1,['README'],"VCL-722

Added entry in README for OpenNebula Frontier::CLient dependency

General: updated list of dependiences with descriptions.",VCL-722
e810a201db937613fbbf65f88aa3433a13591961,,,1,['README'],updated URL for install guide to 2.4 install guide at the CMS site,
2f0714db61d0a4b5ed8cb3a8dff19215ad35fe99,,,1,['managementnode/lib/VCL/reserved.pm'],"VCL-16
Changed timeout in reserved.pm from 180 to 360 seconds when it the parent cluster reservation is waiting for all child reservations to insert a 'postreserve' computerloadlog entry. It was timing out before child reservations completed running a vcl_post_load script. The timeout for each child running the script is 300 seconds.",VCL-16
f2989189a76e5934b0b98343a448b483dda049b1,,,1,['managementnode/lib/VCL/Module/State.pm'],"VCL-16
Accidentally left section of State.pm commented out for testing in last commit.",VCL-16
a46c97a6b81337ec8ddf00aa88a0ffe82cd5a8ec,,,2,"['managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/utils.pm']","VCL-16
Added code to State.pm::state_exit to check the state of computers when the parent of a cluster request exits. If the request failed, the state of computers assigned to child reservations which did not fail could be left in 'reloading'. If this is the case, the parent changes the state to available.

Cleaned up utils.pm::get_computer_current_state_name.",VCL-16
28753b09d3d77c52952be058b8568a17595af235,,,2,"['managementnode/lib/VCL/Module/Predictive/Level_1.pm', 'managementnode/lib/VCL/Module/Predictive/Level_2.pm']",Added '0' argument to $self->data->get_computer_nextimage_id in Level_1.pm and Level_2.pm to prevent warning messages in vcld.log if computer.nextimageid is not set.,
35a338259d776216a3fb786b649f7ea6e68f151f,,,3,"['managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm', 'managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/utils.pm']","VCL-16
Added utils.pm::get_reservation_management_node_hostname. This is used to display more useful information when a cluster request fails.

Changed utils.pm::set_reservation_lastcheck to allow multiple reservation IDs to be passed. Updated call in VIM_SSH.pm.

Updated utils.pm::reservation_being_processed to also retrieve the parent reservation ID from the database for cluster requests. Duplicate processes were being forked if a child reservation already ran before the parent finished.

Removed call to update_request_state in State.pm::reservation_failed. This gets handled by state_exit. It was not checking if the reservation was the parent.

Updated State.pm::wait_for_all_reservations_to_begin to display information about which management nodes the reservations belong to.

Updated State.pm::wait_for_child_reservations_to_exit to check for both a computerloadlog 'begin' and 'exited' entry for each reservation. It was only checking for 'exited'. As a result, the loop ran until it timed out if any child reservation process had never started and added a 'begin' entry.


VCL-767
Updated utils.pm::determine_remote_connection_target to check the argument for a '@' sign.  run_scp_command is passing user@x.x.x.x. This was failing. If it detects this, the 'user@' is removed from the argument.",VCL-16
4dcffd1292fe8be4299cf3d9aaaed1f759adcac6,,,2,"['vcl-install.sh', 'vcl-upgrade.sh']","VCL-810 - 2.4 install script

removed php-process from list of installed/checked for php modules - it used to be needed for semaphore support but that has been replaced",VCL-810
558646abaee06511fa26eeddbfaa41476923ac92,,,1,['web/.ht-inc/image.php'],"VCL-776 - rework resource code to have a base class for all resources and inheriting classes for each resource type

image.php: modified AJeditResource: decode html special characters for image description and usage notes before sending response; the textarea dijit widget does not need the strings html escaped, and leaving them escaped resulted in & repeatedly being converted to &amp;",VCL-776
2f6bedd74925c198f8d4249c4d8c541f2925f5d7,,,1,['web/.ht-inc/utils.php'],"VCL-776 - rework resource code to have a base class for all resources and inheriting classes for each resource type

utils.php: modified getProvisioningTypes: changed separate if's in while loop to if/elseif/else; handle bare metal and none types, then let everything else fall into being virtual - this allows people to add other types a little more easily (as long as they are virtual)",VCL-776
5a227f95d45d3e30c5521334645fd6c7670c034b,,,1,['mysql/update-vcl.sql'],"VCL-764 - Database changes for VCL 2.4

update-vcl.sql: modified Add3ColUniqueIndexIfNotExist: added ""AND NON_UNIQUE = 1"" to sql statement that gets list of existing non-unique indices; added ""AND NON_UNIQUE = 0"" to sql statement that checks to see if any existing unique indices are already there",VCL-764
6e64bcbcfd37879184739351c5ca35ea15484abf,,,1,['mysql/update-vcl.sql'],"VCL-764 - Database changes for VCL 2.4

Versions of vcl.sql before the 2.3 release had a unique key on userpriv.(userid, usergroupid, privnodeid, userprivtypeid) which, due to some fields being allowed to be NULL, didn't prevent duplicates. The vcl.sql file released as part of 2.3 fixed this by removing that unique key and adding separate ones on userpriv.(userid, privnodeid, userprivtypeid) and userpriv.(usergroupid, privnodeid, userprivtypeid). However, this never made its way into the update-vcl.sql file. This commit brings userpriv to the proper table structure.

update-vcl.sql:
-modified Add3ColUniqueIndexIfNotExist: added deleteduplicates argument - passing 1 for it will cause any existing duplicates in the table to be dropped by calling 'ALTER IGNORE TABLE' instead of 'ALTER TABLE'
-modified one existing call to Add3ColUniqueIndexIfNotExist to include extra argument
-added section to modify keys on userpriv table
  -drop existing constraints on userpriv.userid
  -drop existing indices on userpriv.userid
  -add 3 column unique index on userpriv.(userid, privnodeid, userprivtypeid)
  -add 3 column unique index on userpriv.(usergroupid, privnodeid, userprivtypeid)
  -add constraint on userpriv.userid to user.id with cascade on both delete and update",VCL-764
91be7cdec4dcdf0fc2e593e4b94a9caac28bac63,,,1,['mysql/update-vcl.sql'],"VCL-764 - Database changes for VCL 2.4

modified DELETE queries added in last commit that removed old entries from provisioningOSinstalltype - queries were deleting where provisioningid matched an id from the module table, but should have been matching id from provisioning table by joining the provisioning table and the module table in the subquery; corrected the problem",VCL-764
89a7b1c9bb529392d93afae269c92174df1a3e8e,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-737

legacy code
removed variables for wait_for_reboot call
the previous value was too low and caused unwanted warnings.
The wait_for_reboot has acceptable variables set if not passed to handle the process.",VCL-737
851363c65720095b4ba00bd8e401548574b056d7,,,1,['web/.ht-inc/utils.php'],"VCL-811 - server requests for owned user groups show up in reservation list

utils.php: modified getUserRequests: instead of using $user['groups'] for the list of user groups, call getUserGroups without specifying to include owned groups; this gives us a list of user groups that does not include user groups the user owns but is not a member of",VCL-811
91fb47db30a0fb075fc551e0d6be862c48600a33,,,1,['web/.ht-inc/groups.php'],"VCL-655 - Manage groups - create a default or none user group

groups.php:
-modified editOrAddGroup: added check for ""Default for Editable by"" user group not being in $affilusergroups, and if so, add it
-modified confirmEditOrAddGroup: modified call to getUserGroups to pass no arguments so that non-custom user groups (i.e. Default for Editable by) are also returned",VCL-655
1d88c5ae8afffd11c8cacc89c880abb3380e034b,,,1,['mysql/update-vcl.sql'],"VCL-764 - Database changes for VCL 2.4

modified queries that update computer.provisioningid and statgraphcache.provisioningid: queries were missing constraints that tied computer/statgraphcache to provisioning table which was causing all records in computer/statgraphcache to get updated

added DELETE queries in the same section that delete entries from provisioningOSinstalltype for the same provisioning modules being updated in that section",VCL-764
4743283a4429a6411900d13c776b6156c1875aef,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-16

Changed regex for user add output to not fail if it only detects a warning.
A user homedirectory might already exists for some reason. Don't fail it but continue to process.",VCL-16
99055df808179ec7d671cbc6466e7744295fe50d,,,1,['managementnode/lib/VCL/Module/Provisioning/openstack.pm'],"Change _pingnode($computer_name) to _pingnode($computer_private_ip_address)
Add sub node_status() again becasue sub node_status() of OS.pm does not work for OpenStack anymore",
4d9bcb11dce8ef1881a804a582f3304319c054d2,,,1,['managementnode/lib/VCL/Module/OS.pm'],"VCL-16

discovered and fixed and issue with reinstall.

The add_user_accounts routine was not adding user accounts for reinstalls. The routine will only skip users if there is 
an entry in the reservationaccounts table and if the state is servermodified. All other states will attempt to add the account",VCL-16
3f2a346a75a8e996ab06cd7c1827753ec76b98fb,,,6,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6.pm', 'managementnode/lib/VCL/reserved.pm']","VCL-564
Renamed OS.pm::run_scripts to run_management_node_tools_scripts to make it clear what it does. Made a few minor changes to this subroutine.

Added call to run_management_node_tools_scripts('post_load') in:
Linux.pm::post_load
Version_5.pm::post_load
Version_6.pm::post_load

Added call to run_management_node_tools_scripts('post_reserve') in:
Linux.pm::post_reserve
Windows.pm::post_reserve

Updated OS.pm::pre_capture to delete the node configuration directory so that old scripts and log files are removed. Added call to run_management_node_tools_scripts('pre_capture').


Other
Added timeout values to Windows activation commands in Version_6.pm.",VCL-564
3aca8c6c43561bc33623da975fc52a18a55ed31e,,,3,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm']","VCL-16

simplified OS:add_user_accounts routine
the create_user OS specific routines ensure if an account
already exists that the correct steps are taken so the user can log in",VCL-16
9df9312952b1a01e7f014f36980803775685cf45,,,1,['managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm'],"VCL-564
Added $SOURCE_CONFIGURATION_DIRECTORY variable to Ubuntu.pm so that other subroutines locate its tools/Ubuntu directory.",VCL-564
254c88f786b3f8c5522ba9cd29ad1bb6fb6a8f40,,,0,[],"VCL-564
Set svn:ignore property on tools/Ubuntu directory.",VCL-564
8f0d15cd0dcc3e0d5dd1e9acb8a304b1bf5ee1ed,,,0,[],"VCL-564
Added tools/Ubuntu directory.",VCL-564
3ccdbf1243c6569a8d1844ffb35415ef9d84b43e,,,0,[],"VCL-564
Added post_load, post_reserve, and pre_capture directories under tools/Windows_Server_2012/Scripts.",VCL-564
56632f6393a09b8fb33d27ce0637ceb86ea17f2a,,,0,[],"VCL-564
Added post_load, post_reserve, and pre_capture directories under tools/Windows_8/Scripts.",VCL-564
a35b88d411e52f65c63b6649c0b5094523faa5f3,,,2,"['vcl-install.sh', 'vcl-upgrade.sh']","VCL-810 - 2.4 install script

added Apache License header

removed todo task list from top of vcl-upgrade.sh",VCL-810
6e77bbf734fbe4c9159d5ad34015a3e82a69a921,,,1,['UPGRADE'],changed name of script listed in file from vcl-install.sh to vcl-upgrade.sh,
d0288d646daf2171b967349771dae2126e8b44c4,,,2,"['INSTALLATION', 'UPGRADE']",updated for 2.4 - replaced manual instructions with information on how to use the installation and upgrade scripts,
39f6bcc977a25e86cdf7493b54e0a60f2d69f03a,,,1,['vcl-install.sh'],"VCL-810 - 2.4 install script

-updated help info
-removed personal test URLs
-added a check for being root
-added ""Admin"" when prompting for admin password
-added error code check for wget that downloads archive
-removed php-CRYPT from list of php modules to install with yum
-modified web and mn installation to have ""-$VCL_VERSION"" on the end of the install directories and use a symlink for the ""vcl"" path",VCL-810
36b0e49eb2ea0a34e2677c5e806e33cd229e9664,,,1,['vcl-upgrade.sh'],"VCL-810 - 2.4 install script

removed personal download URLs",VCL-810
22529cd4171d6a086d3a2af1285c2b01eff49e7f,,,1,['vcl-upgrade.sh'],"VCL-810 - 2.4 install script

initial commit of upgrade script",VCL-810
f27163e6ee40f23ed6e48e84c776f348f46fd215,,,3,"['managementnode/lib/VCL/Module/OS/Windows.pm', 'mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-562
Added imagerevisioninfo table to database.

Added windows_ignore_users and windows_disable_users to variable table.

Updated Windows.pm::post_load to call check_image subroutine.",VCL-562
0cdd1c0dcf7bff40c5e34b7641fa04532c71aefe,,,1,['web/testsetup.php'],"VCL-5 - multiple web servers

removed sysvsem from $requiredexts array of php extensions",VCL-5
71e6ebfbb41b81c19b4ae4684193bae020f90ac3,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-16

correct made in grant_connect_method routine, it was failing if user didn't have the optional public ssh keys.",VCL-16
e792bd1ab616efb35b36ac9565f59c3649f5cb23,,,1,['mysql/update-vcl.sql'],"VCL-764
Added command to remove constraint on sublog.blockRequestid in update-vcl.sql. This should only exist in the database if the schema was created or updated from the schema files in trunk between 2.3.2 and 2.4.",VCL-764
a30e86f05d18df39d1e4dfc7ca3469caef3197e6,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-764
In vcl.sql and update-vcl.sql:

Changed default value of computer.predictivemoduleid from 1 to 9. Module 1 is not by default a predictive loading module. Module 9 is ""level 2"".

Changed default value of image.basedoffrevisionid from 0 to 1 (noimage).

Cleaned up connectmethod names and descriptions. These are shown to end users and should be formatted consistently.

Removed constraints:
image.basedoffrevisionid
serverrequest.serverprofileid
sublog.blockRequestid


In update-vcl.sql:
Added PrintMessage procedure for debugging.

Improved DropExistingConstraints procedure to make sure information_schema.KEY_COLUMN.REFERENCED_TABLE_NAME is not null. It's possible to have multiple entries which map a table and row. Only the entries with a REFERENCED_TABLE_NAME value represent actual constraints.

Added an exception handler in AddConstraintIfNotExists. If a constraint can't be added, the update would exit immediately. It now continues.

Added command to change blockRequest.admingroupid to a smallint(5) to match usergroup.id column. This is already correct in vcl.sql.

Added commands to change computerloadflow.computerloadstateid and nextstateid to unsigned to match computerloadstate.id.

Updated natlog table definition to match vcl.sql.

Changed capitalization of user.sshpublickeys to match vcl.conf and the backend code.

Fixed problem where duplicate entries were inserted into connectmethodport if the original connectmethod.protocol value was an empty string.

Added several constraints to match vcl.sql.",VCL-764
56fff335a8aef35cc2abd0c692c7d9ace620b969,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-16

moved code for root access to a seperate routine for create_user",VCL-16
750cae6a321f91f5a7647b151d0865b69763dc15,,,2,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm']","VCL-16

if account exists, also handle root access and ssh public keys",VCL-16
22755950eb99a1eafd35cf0ca0648f08e532e74b,,,1,['managementnode/lib/VCL/image.pm'],"VCL-409
Removed hard coded imagerevision ID value of 4 in image.pm::setup_capture_base_image.",VCL-409
e6141a4b2564fc9a2b55b9d6f2553fd70732a838,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-374
Moved call to apply_security_templates to immediately before set_password in Windows.pm::pre_capture to prevent errors related to password not meeting complexity requirements during base image captures.",VCL-374
5aa764b02acd10bfab8a27abf3507abca8f7d416,,,1,['vcl-install.sh'],"VCL-810 - 2.4 install script

initial commit",VCL-810
3b4bb7cb678bd1f91d4871df479983c1553c6915,,,1,['RELEASE_NOTES'],"updates for 2.4

removed 2.3 section
moved a few things from 2.4 to 2.5 that haven't been worked on
moved a few things from 2.5 to 2.4 that were worked on",
c0513ed262bce72ec9b95664fa57a2c0cf87319b,,,1,['managementnode/lib/VCL/Module/Provisioning/libvirt.pm'],"VCL-179

more corrections to detect if node is turned on and accessible for libvirt",VCL-179
b4a86b365ebd6bcf58e36cdb802eb0e5f5c83f93,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-750
Removed unused import of Shell perl Module in utils.pm.

Other
Updated rename_vcld_process to surround the section of the process name which matches the vcld.log lines in single quotes to make it a little easier to copy and paste into a grep command. Updated reservation_being_processed to check for the updated process name pattern.",VCL-750
f21f3405055bcd5e8991903cfcdc47bd3e360a52,,,1,['managementnode/lib/VCL/Module/Provisioning/libvirt.pm'],"VCL-179
updating libvirt to match VMware.pm changes to make sure node is powered on before attempting image capture",VCL-179
79ade6a16b9dc0fcf4edd5e8b3832b34433db8bd,,,1,['mysql/vcl.sql'],"VCL-763 - Add missing constraints to database tables

vcl.sql: removed constraint on userid field from continuations table. When a user is not logged in yet, there are a few times continuations are still used. In these cases, the userid field gets set to 0.",VCL-763
aafaeb05b0412ceb8bff4490369e32e309d933e5,,,1,['web/.ht-inc/dashboard.php'],"(no JIRA)

dashboard.php: modified getNewReservationData: changed start time from hh:mm:ss to ""Day hh:mm"" so that day information is included but length is still pretty short",
55e8357042a0985c5517e0092168e9a35d50a5bd,,,1,['web/.ht-inc/conf-default.php'],"changed BASEURL, COOKIEDOMAIN, and HOMEURL to use $_SERVER['HTTP_HOST'] as the default so users do not have to set them; moved them and SCRIPT out of ""required"" section",
3296c743e64c936897406da75ab26cfa3179272f,,,2,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm']","VCL-16

fix a corner case for when if a user account already exists on the target linux node, it will 
process the connect_method. In this case external sshd so the user can login.

Seperated out the external_sshd addition from the create_user routine because it didn't really fit there.
Future release will likely handle this better through connect method modules, or something similiar.",VCL-16
d86a121ee5807e0ba6cdd960a9266c4f4b16414f,,,1,['managementnode/bin/install_perl_libs.pl'],"VCL-750
Updated install_perl_libs.pl to set the exit status of 1 if an error occurred, 2 if the user did not accept the license notification, and 0 if successful.",VCL-750
b2a84e3831763f84a7d6a5f728f24d61f606d35e,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-16
Updated utils.pm::get_management_node_requests to return an empty hash reference if no requests are assigned to the management node.

Other
Updated rename_vcld_process so that the process name contains '|<request ID>|<reservation ID>|<state>'. This matches the lines writtent to vcld.log and makes it easier to copy the string and pass it to grep.",VCL-16
5870dc656e132e5ae3fc8a10aebd872c5a059ce2,,,1,['README'],Updated README file.,
99b2ad9f37c74a2e54fea4242b53b545d5b70016,,,5,"['managementnode/lib/VCL/Module/Provisioning/esx.README', 'managementnode/lib/VCL/Module/Provisioning/esx.pm', 'managementnode/lib/VCL/Module/Provisioning/esxthin.README', 'managementnode/lib/VCL/Module/Provisioning/esxthin.pm', 'managementnode/lib/VCL/Module/Provisioning/helloworld.pm']","Removed esx.pm, esxthin.pm, and associated README files.",
78af0a0d3e9c491f85c840545e6d8026b75a219b,,,58,"['managementnode/bin/health_check.pl', 'managementnode/bin/monitor_vcld.pl', 'managementnode/bin/vcld', 'managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/ESXi.pm', 'managementnode/lib/VCL/Module/OS/Linux/ManagementNode.pm', 'managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm', 'managementnode/lib/VCL/Module/OS/Linux/UnixLab.pm', 'managementnode/lib/VCL/Module/OS/Linux/firewall.pm', 'managementnode/lib/VCL/Module/OS/Linux/firewall/iptables.pm', 'managementnode/lib/VCL/Module/OS/Linux/init.pm', 'managementnode/lib/VCL/Module/OS/Linux/init/SysV.pm', 'managementnode/lib/VCL/Module/OS/Linux/init/Upstart.pm', 'managementnode/lib/VCL/Module/OS/Linux/init/systemd.pm', 'managementnode/lib/VCL/Module/OS/OSX.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5/2003.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5/XP.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/2008.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/2012.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/7.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/8.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/Vista.pm', 'managementnode/lib/VCL/Module/Predictive.pm', 'managementnode/lib/VCL/Module/Predictive/Level_0.pm', 'managementnode/lib/VCL/Module/Predictive/Level_1.pm', 'managementnode/lib/VCL/Module/Predictive/Level_2.pm', 'managementnode/lib/VCL/Module/Provisioning.pm', 'managementnode/lib/VCL/Module/Provisioning/Lab.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vmware_cmd.pm', 'managementnode/lib/VCL/Module/Provisioning/esx.pm', 'managementnode/lib/VCL/Module/Provisioning/esxthin.pm', 'managementnode/lib/VCL/Module/Provisioning/helloworld.pm', 'managementnode/lib/VCL/Module/Provisioning/libvirt.pm', 'managementnode/lib/VCL/Module/Provisioning/libvirt/KVM.pm', 'managementnode/lib/VCL/Module/Provisioning/one.pm', 'managementnode/lib/VCL/Module/Provisioning/openstack.pm', 'managementnode/lib/VCL/Module/Provisioning/vbox.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/Module/Semaphore.pm', 'managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/blockrequest.pm', 'managementnode/lib/VCL/healthcheck.pm', 'managementnode/lib/VCL/image.pm', 'managementnode/lib/VCL/inuse.pm', 'managementnode/lib/VCL/makeproduction.pm', 'managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/reclaim.pm', 'managementnode/lib/VCL/reserved.pm', 'managementnode/lib/VCL/utils.pm']",updated $VERSION to 2.4,
efa521d7d12424c11fe2ea926eaa7cd4cdc63b62,,,1,['NOTICE'],NOTICE: updated copyright year to 2015,
92dc40f7835f57823f4d20d62beee8abb5211f8f,,,2,"['LICENSE', 'README']","README: updated version number for Dojo

LICENSE and README: added info for spyc",
591d1bf74d6eb6bcd35c4b55e80def3a75b52e34,,,1,['web/js/newresservercommon.js'],added license header,
687a87e0ae79575ddf1013731e26715fde21e755,,,1,['mysql/update-vcl.sql'],"VCL-590 OpenStack Module
Add openstackcomputermap and openstackimagerevision tables
Insert openstack module into module table
Insert openstack OSinstalltype into OSinstalltype table
Insert openstack provisioning into provisioning table
Insert openstack provisioningOSinstalltype into provisioningOSinstalltype table",VCL-590
67a480884d8961e50b121a929415a1952c567e09,,,1,['mysql/vcl.sql'],"VCL-590 OpenStack Module
Add openstackcomputermap and openstackimagerevision tables
Insert openstack module into module table
Insert openstack OSinstalltype into OSinstalltype table
Insert openstack provisioning into provisioning table
Insert openstack provisioningOSinstalltype into provisioningOSinstalltype table",VCL-590
ca76b8557a4aea6d887b6bdda2c41932ad46d37d,,,1,['managementnode/lib/VCL/Module/Provisioning/openstack.pm'],Change database name from openstackComputerMap to openstackcomputermap,
5b0d97e8782711b86b16b01ad75b5431681389c1,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-16
Commented out debugging notify line in utils.pm::changetime.",VCL-16
f82ba65e778663bbb2bf822233e07a29923b50b5,,,2,"['managementnode/bin/vcld', 'managementnode/lib/VCL/utils.pm']","VCL-16
Updated utils.pm::get_management_node_requests to retrieve the timestamp of the most recent changelog entry which has remoteIP set.

Updated utils.pm::changetime to compare reservation.lastcheck to changelog.timestamp if the state is inuse. If the changelog entry is newer, 'poll' is returned.

Updated get_management_node_requests to return a hash reference and updated vcld accordingly.",VCL-16
111c0d62e0e852b9f919909d02e732139070d05b,,,1,['web/.ht-inc/groups.php'],"VCL-655 - Manage groups - create a default or none user group

groups.php: modified editOrAddGroup: fixed problem with conditional that ensures user can see the owning user group; changed $usergroups[$groupid]['editgroupid'] to $ownerid",VCL-655
95f8bfdcf4bdd552c5880e8c5bf9cde0ee9e9f89,,,2,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm']",add fix for missing newline on linux OS.,
23f8dd6062494e4cdb61319724f39f79cf906144,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-764
Changed computerloadlog.loadstateid to not allow null values.",VCL-764
adc09a5628021e87bd44e4f13f7401a8a99e6988,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-764
Removed reservation table from SQL query in delete_computerloadlog_reservation. It wasn't being used and may have been adversely affecting database performance.",VCL-764
f816c1d271bc24d87b67a30d29bf9efd75699af2,,,1,['managementnode/lib/VCL/Module/OS.pm'],Fixed sloppy indentation in OS.pm.,
fbea5edc9403bf8e7c97cf2d7fcb0a06a578be51,,,3,"['web/.ht-inc/computer.php', 'web/.ht-inc/utils.php', 'web/js/resources/computer.js']","VCL-174 - NAT - support for sites that have small IP address ranges

added code to dynamically manage list of computers that can be selected for use as a nat host in the add/edit dialog

computer.php: modified addEditDialogHTML: changed select for nathostid to specify 'selectonly'

utils.php: modified getComputers: added nathostenabledid to returned data

computer.js: modified saveResourceCB: add/remove computer from nathostid select for add/edit dialog if submitted computer has nathostenabled changed",VCL-174
cc170a19d34a35c4bf0520654cec2ed30a763c98,,,4,"['web/.ht-inc/computer.php', 'web/.ht-inc/managementnode.php', 'web/js/resources/computer.js', 'web/js/resources/managementnode.js']","VCL-174 - NAT - support for sites that have small IP address ranges

computer.php:
-modified fieldWidth: added natpublicIPaddress and natinternalIPaddress
-modified fieldDisplayName: added nathostenabled, natpublicIPaddress, and natinternalIPaddress

managementnode.php:
-modified fieldWidth: added natpublicIPaddress and natinternalIPaddress
-modified fieldDisplayName: added nathostenabled, natpublicIPaddress, and natinternalIPaddress

computer.js:
-modified colformatter: added nathostenabled
-modified saveResourceCB: when editing, added setValue calls for nathostenabled, natpublicIPaddress, and natinternalIPaddress

managementnode.js:
-modified colformatter: added nathostenabled
-modified saveResourceCB: when editing, added setValue calls for nathostenabled, natpublicIPaddress, and natinternalIPaddress",VCL-174
d9f92c7ae8cdb7d682b78b24e6233abcad245463,,,4,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-781
Added OS.minram column to database. Added explicit get_image_minram subroutine to DataStructure.pm which returns the larger of the image.minram and OS.minram values. Removed code from VMware.pm which determined minimum OS RAM values as it is now replaced by OS.minram.",VCL-781
b62cb6136a7ed84fb743122b411b55dba5214609,,,2,"['web/.ht-inc/requests.php', 'web/js/requests.js']","VCL-568 - refresh current reservations page 15 minutes after a reservation becomes available

requests.php:
-modified viewRequests: removed 'userconnected' from each entry in $requests, handling process a different way
-modified getViewRequestHTMLitem: changed how timeoutdata items are handled, base more things on entries in computerloadlog, if no entries in computerloadlog, refresh page after reconnecttimeout or at end of reservation, whichever is sooner; set id for each timeoutvalue based on request id
-modified AJconnectRequest: removed 'timeoutvalue' class from timeout, changed id from timeoutvalue to connecttimeout; switched to using getReservationNextTimeout instead of getReservationConnectTimeout; if timeout is not null, send it with returned data so javascript can update timeout value for reservation
-modified getReservationNextTimeout: changed connecttimeout to initialconnecttimeout, added reconnecttimeout, stopped using loadstate ids and added subquery to get ids from computerloadstate table based on the names
-removed getReservationConnectTimeout
-removed checkUserConnect
-modified addConnectTimeout: updated to get state id from computerloadstate based on state name instead of using id directly

requests.js:
-modified checkTimeouts: changed nextcheck to 15; delete timeoutvalue dom element when timeout expires; if no timeouts, set nextcheck to 60
-modified connectRequestCB: if timeoutid in data.items, update value to data.items.timeout
-modified checkConnectTimeout: if no connecttimeout object, return; updated to get value from connecttimeout instead of timeoutvalue; if value == 0, return; set value to 0 when expires before doing AJAX call",VCL-568
628fc7d95afb1ca086c0652cf4e76a5ed264e60f,,,1,['web/.ht-inc/utils.php'],"VCL-780 - combine new reservation and current reservations pages

utils.php: modified menulistLI: added check for $obj->restype being set before referencing it",VCL-780
bcaa64a90ee4845d60b6f05c62da0b37553071ec,,,1,['managementnode/lib/VCL/reserved.pm'],"VCL-16
Added argument so that the computer state gets set to inuse after a connection is detected in reserved.pm.",VCL-16
6dc75ac611973c583d7dcad6f6befa855fe9a279,,,8,"['managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/firewall.pm', 'managementnode/lib/VCL/Module/OS/Linux/firewall/iptables.pm', 'managementnode/lib/VCL/Module/OS/Linux/init.pm', 'managementnode/lib/VCL/Module/OS/Linux/init/SysV.pm', 'managementnode/lib/VCL/Module/OS/Linux/init/Upstart.pm', 'managementnode/lib/VCL/Module/OS/Linux/init/systemd.pm', 'managementnode/lib/VCL/utils.pm']","VCL-174
Fixed recusion problem with Linux init and firewall modules. They can't call $self->sub directly to access the OS. Instead, $self->os->sub must be called.

Added firewall.pm which iptables.pm inherits from.

Fixed recursion issue in utils.pm::get_computer_nathost_info if the computer and NAT host are the same computer.",VCL-174
60d38bf9845b45209c6e1062b1fd296ad5f94f47,,,1,['web/.ht-inc/groups.php'],"(no JIRA)

groups.php: modified viewGroups: added 'Trident' to preg_match of HTTP_USER_AGENT to determine if browser is MSIE for specifying table widths",
f94d021f5edbfcbc223e787c2fa178bcf1375d98,,,1,['managementnode/lib/VCL/Module.pm'],"VCL-685
Added condition to override the VM host OS object to Linux if an attempt to use VCL::Module::OS is made.",VCL-685
0b84e5dbea3f50c40309b529a505476fc6fb823d,,,2,"['managementnode/lib/VCL/inuse.pm', 'managementnode/lib/VCL/reserved.pm']","VCL-16
Updated reserved.pm to let the web frontend insert the 'initialconnecttimeout' entry and then retrieve the timestamp of it to determine when to timeout the reservation.

Moved _notify_user_no_login from inuse.pm to reserved.pm.",VCL-16
453b93ba003fea11e6dcc102e40f357aedec8db0,,,1,['web/.ht-inc/managementnode.php'],"VCL-174 - NAT - support for sites that have small IP address ranges

managementnode.php: modified validateResourceData: updated query checking for computers having reservations using a nat host to also ignore laststateid's 1,5,11,12 in addition to ignoring the same values for stateid",VCL-174
d71af424c4690adb3d2bdedd7ce7f53ea67356d5,,,1,['web/.ht-inc/computer.php'],"VCL-174 - NAT - support for sites that have small IP address ranges

computer.php: modified validateResourceData and AJcompNATchange: updated queries checking for computers having reservations using a nat host to also ignore laststateid's 1,5,11,12 in addition to ignoring the same values for stateid",VCL-174
8ce11a7e268fe59d1b0e14ac004f601e9d423397,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-637

for latest Linux OS's that use /etc/hostname",VCL-637
29f38f19ffd5a8235869770ba908745668c4824c,,,3,"['web/.ht-inc/siteconfig.php', 'web/.ht-inc/states.php', 'web/js/siteconfig.js']","VCL-758 - VCL timings - make various timings to be variables and edited by admin

states.php: (all changes to $actions['classmapping']
-changed timeoutvariable to timevariable
-removed duplicate entry for connectedusercheck
-changed connect to initialconnecttimeout
-changed reconnect to reconnecttimeout

siteconfig.php:
-class name changes: connect -> initialconnecttimeout; reconnect -> reconnecttimeout
-name changes affected generalOptions and __construct for each class
-modified TimeVariable class to include $minval; affected __construct, getHTML, AJaddAFfiliationSetting, and AJupdateAllSettings; set minval to 0 for connectedUserCheck

siteconfig.js:
-modified addAffiliationSettingCBextra: set min constraint to data.items.mainval
-class name changes: connect -> initialconnecttimeout; reconnect -> reconnecttimeout",VCL-758
ec98a3401611c49b73a6b5706ffabeadfbbdf4f9,,,5,"['web/.ht-inc/computer.php', 'web/.ht-inc/managementnode.php', 'web/.ht-inc/utils.php', 'web/js/resources/computer.js', 'web/js/resources/managementnode.js']","VCL-174 - NAT - support for sites that have small IP address ranges

added NAT host section to add/edit management node

utils.php: modified getManagementNodes: added nathostenabled, natpublicIPaddress, and natinternalIPaddress to returned data

managementnode.php:
-modified addEditDialogHTML: added form fields for nathostenabled, natpublicipaddress, and natinternalipaddress
-modified AJsaveResource: removed previous code that modified nathost table; added new code to handle entries from form fields for nathost table
-modified validateResourceData: added nathostenabled, natpublicIPaddress, and natinternalIPaddress to validated and returned fields
-modified addResource: removed previous code that modified nathost table; added new code to handle entries from form fields for nathost table

computer.php: modified validateResourceData: added conditional for nathostenabled being 1 in order to validate natpublicIPaddress and natinternalIPaddress; removed resource table from query that checks for reservations for computers using this computer as a nat host

managementnode.js:
-modified addNewResource: added initialization for nathostenabled, natpublicipaddress, and natinternalipaddress
-added toggleNAThost
-modified inlineEditResourceCB: added code to handle nathostenabled, natpublicipaddress, and natinternalipaddress
-modified resetEditResource: added natpublicipaddress natinternalipaddress to list of fields
-modified saveResource: added natpublicipaddress natinternalipaddress to list of fields; added nathostenabled to data submitted

computer.js: modified addNewResource: initialize nathostenabled to false",VCL-174
ad374c7bcb3a91339ac67e8bd4a908f39d90400f,,,4,"['managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/inuse.pm', 'managementnode/lib/VCL/reserved.pm', 'managementnode/lib/VCL/utils.pm']","VCL-16
Updated code which inserts computerloadlog 'acknowledgetimeout', 'initialconnecttimeout' and 'reconnecttimeout' so the the timestamp of these entries is used to determine when to stop checking for ack or connection.

Removed condition in utils.pm::check_time where it would return 'poll' whenever request.laststate = reserved. This is no longer necessary.

Moved initial connection check from inuse.pm to reserved.pm. This fixed problems where the state was left in inuse/inuse after the first connection check causing the computer to always be reloaded.

Moved user_connected and check_imaging_request subroutines from inuse.pm to State.pm since it is now used by both inuse.pm and reserved.pm.

VCL-174
Removed computer IP address from email messages sent to users. This information would not be accurate when NAT is used.

Other
Cleaned up utils.pm::insertloadlog.",VCL-16
c80a59b9de971ab8620d08a0cf32be9209e5ed47,,,1,['web/.ht-inc/requests.php'],"VCL-16 - Enhance cluster reservation process

requests.php: modified AJconnectRequest: removed updating of lastcheck; this was in place for the backend to quickly pick up when a user clicks Connect; backend behaviour has changed and it is no longer needed",VCL-16
15a169dedd93c41c0f1be6e2485c4b24015f1a70,,,1,['managementnode/lib/VCL/Module/OS.pm'],"VCL-702
Added check for usepublickeys in OS.pm::add_user_accounts.",VCL-702
1938f2a085ab45926e3b8840f8d7fe655ca1ff5a,,,1,['managementnode/lib/VCL/Module/OS.pm'],"VCL-702
Fixed typo in add_user_accounts. The $ssh_public_keys line had an extra hash component leftover from old code.

VCL-785
Updated get_timings to display log messages for debugging.",VCL-702
e5f2df1da4c9e48c0e78f1ada68943af73493046,,,3,"['web/.ht-inc/computer.php', 'web/.ht-inc/utils.php', 'web/js/resources/computer.js']","VCL-174 - NAT - support for sites that have small IP address ranges

added section to add/edit computer to configure settings for using as NAT host

computer.php:
-modified addEditDialogHTML: added form elements to configure settings for using as NAT host
-modified AJsaveResource: added queries for handling nathost entries
-modified validateResourceData: modified query that checks for reservations for node when modifying connect with NAT data to ignore reload reservations; added nathostenabled, natpublicIpaddress, and natinternalIPaddress; added check for reservations for nodes using this node as a NAT host, disallow changes to NAT host info if there are reservations
-modified addResource: when adding a single computer, include insert into nathost table if configured to be NAT host

utils.php: modified getComputers: added nathostenabled, natpublicIPaddress, and natinternalIPaddress

computer.js:
-modified addNewResource: set 'mode' to 'single' when opening dialog; added disabling natpublicipaddress and natinternalipaddress
-modified toggleAddSingle: remove 'hidden' from 'nathost' div
-modified toggleAddMultiple: add 'hidden' to 'nathost' div
-modified toggleNAT: if natenabled and nathostenabled, uncheck nathostenabled
-added toggleNAThost
-modified inlineEditResourceCB: added setting nathostenabled, natpublicipaddress, and natinternalipaddress
-modified resetEditResource: added natpublicipaddress and natinternalipaddress
-modified saveResource: added natpublicipaddress and natinternalipaddress; added check for both using nat and being nat host being selected",VCL-174
6a2d6b78590fac41b5b079cea9705a3dc28f3a82,,,1,['mysql/vcl.sql'],"VCL-763
Added constraints to the several columns which reference another table.",VCL-763
8567b57bcbc7abcdfde4b54f97f910ebf81a9bbe,,,1,['mysql/vcl.sql'],"VCL-763
Changed constraints to individual queries and removed explicit constraint names. This makes it easier to troubleshoot problems, as the exact line number of the problematic constraint is displayed.",VCL-763
46de18b560cf46951c29698e229964880fdfd21d,,,3,"['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/libvirt.pm', 'managementnode/lib/VCL/Module/Provisioning/vbox.pm']","VCL-678

for tomaintenance request, set currentimage to noimage",VCL-678
c95d7c4b76c87b3e8ff9c4d85c22e6be09eb078c,,,1,['mysql/vcl.sql'],"VCL-764
Fixed typo from removing explicit id values for computerloadstate table.",VCL-764
7e7b64f36984ed148b9d68e374ce60c8358c2703,,,9,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/inuse.pm', 'managementnode/lib/VCL/reclaim.pm', 'managementnode/lib/VCL/reserved.pm', 'managementnode/lib/VCL/utils.pm']","VCL-785
(VCL timings)
Updated reserved.pm to add 'acknowledgetimeout' just prior to ack checking, and to delete it after the checking. Added 'noinitialconnection' immediately after ack checking.

Updated utils.pm::delete_computerloadlog_reservation to accept a regex for more versatility.

Updated inuse.pm::process to use the initialconnecttimeout and reconnecttimeout variables.

Added call to insert computerloadlog 'connecttimeout' entry in inuse.pm before connection checking and call to remove it afterwards.

Updated State.pm::state_exit to delete computerloadlog entries correctly, as late as possible.


VCL-702
(Rework code and cleanup)
Reworked OS.pm::manage_server_access. Renamed it to add_user_accounts. This is called from OS.pm::reserve. Removed call to manage_server_access from reserved.pm. Everything now is handled by reserve which makes the sequence the same for all reservations.

Replaced update_reservation_accounts with separate add_reservation_account and delete_reservation_account subroutines in utils.pm.

Added OS.pm::delete_user_accounts.

Updated Linux.pm and Windows.pm create_user to only accept a hash reference containing the required user information.

Updated Linux.pm::reserve to not handle any ""standalone"" logic. Added Linux.pm::should_set_user_password, which is called from OS.pm::reserve to handle the ""standalone"" logic.

Updated sanitize in Linux.pm and Windows.pm to delete all user accounts, not just the request owner. Commented out section in reclaim.pm which caused server reservations to always be reloaded. This shouldn't be necessary now that all user accounts are being removed by sanitize.

Renamed changepasswd to set_password in Linux.pm and Ubuntu.pm.

Removed unused OS.pm::check_reservation_password.

Updated Linux.pm::disable_firewall_port to not fail if an attempt to disable TCP/22 is made. Instead of returning null, it now calls enable_firewall_port to enable the port only to the management node's private IP address.

Other
Updated OS.pm::is_ssh_responding to not display output.",VCL-785
9da0c9630dce6383a29b76593ab3afc11a6633f9,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-764
Removed explicit id values for computerloadstate table.

Updated computerloadstate entries:
Removed connected
Changed connecttimeout to reconnecttimeout
Added noinitialconnection, initialconnecttimeout

Changed variable name: connecttimeout --> reconnecttimeout
Added variable: initialconnecttimeout

VCL-763
Added indexes and constraints to computerloadlog for loadstateid and computerloadlog columns.",VCL-764
53e7a41629ea2ed0b147b27569b216abd3b11620,,,1,['managementnode/lib/VCL/Module/State.pm'],"VCL-308

accidently changed the clean out of the 'begin' state, needs to be removed in state_exit to speed things up on future forled processes",VCL-308
a4f710774bf4b236ef5f35513bfd4a7e9fb9064c,,,1,['managementnode/lib/VCL/inuse.pm'],"VCL-308

cleaning up entries related to user connected",VCL-308
73ccb2e3f68fd3e01d663f83bf9004a08e0c24c0,,,1,['web/.ht-inc/requests.php'],"VCL-174 - NAT - support for sites that have small IP address ranges

requests.php: modified AJconnectRequest: when using nat, added code to ensure a port is included in the connect method text; if it is not, added a key for it before doing substitutions in the text",VCL-174
d94fabccff502bc74dd3bd873cf423fbfcd71ccc,,,1,['web/.ht-inc/computer.php'],"VCL-174 - NAT - support for sites that have small IP address ranges

computer.php: modified AJcompNATchange: modified query checking for reservations of selected computers to ignore reload reservations",VCL-174
c4a53a93619b3c224b2c7f3a355cf3b76a8bb1f1,,,9,"['managementnode/bin/vcld', 'managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/image.pm', 'managementnode/lib/VCL/inuse.pm', 'managementnode/lib/VCL/makeproduction.pm', 'managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/reclaim.pm', 'managementnode/lib/VCL/reserved.pm', 'managementnode/lib/VCL/utils.pm']","VCL-428
Changed utils.pm::get_request_info to return a hash reference.",VCL-428
e63a30a1135b570b35841b036433b4e6f43d16c3,,,5,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS/OSX.pm', 'managementnode/lib/VCL/Module/Provisioning/vbox.pm', 'managementnode/lib/VCL/healthcheck.pm', 'managementnode/lib/VCL/utils.pm']","VCL-755
Fixed all locations that were using get_management_node_info()->{} to first get the info, check if defined, then access the hash key.",VCL-755
c48d0343f3d39174272739f83941c1db0095617f,,,2,"['managementnode/lib/VCL/Module/OS/Linux/firewall/iptables.pm', 'managementnode/lib/VCL/utils.pm']","VCL-174
Added utils.pm::get_natport_ranges to reduce duplicated code. Added possibility of allowing newline's in the natport_ranges variable.",VCL-174
b08fa46eb277b0a82655d07bca310850d5c8e760,,,3,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/utils.pm']","VCL-767
Added utils.pm::determine_remote_connection_target. This get passed an IP address or hostname of a target to connect to. It attempts to determine which to use to connect. The preference is now to use the private IP address. If this is not populated in the database, it attempts to resolve the hostname and use the resolved IP address. If all else fails, the original argument is returned.

Added utils.pm::get_computer_current_private_ip_address. This retrieves the current privateIPaddress from the database.

Updated utils.pm::nmap_port, run_ssh_command, and run_scp_command to use the value returned from determine_remote_connection_target.

Updated DataStructure.pm::get_computer_private_ip_address to check the value in the database. The database value is authoritative. DataStructure.pm will get the correct value if updated outside of DataStructure.pm.

Updated OS.pm::execute_new to call determine_remote_connection_target and use the result to make the remote connection.",VCL-767
889d956da6fe3e1a091119472d2a3fd829f002a1,,,3,"['web/.ht-inc/siteconfig.php', 'web/.ht-inc/states.php', 'web/js/siteconfig.js']","VCL-174 - NAT - support for sites that have small IP address ranges

siteconfig.php:
-modified generalOptions: changed id of table from 'dashboard' to 'siteconfig'; added NAT port range section
-modified TimeVariable::getHTML: added maxHeight of 250 for affiliation Select object
-modified GlobalSingleVariable::getHTML and GlobalSingleVariable::AJupdateAllSettings: added case for type 'textarea'
-added GlobalSingleVariable::validateValue
-added NATportRange class: extends GlobalSingleVariable

states.php: added 'natportrange' to $actions['classmapping']

siteconfig.js:
-modified generalSiteConfigCB: added check for data.items.contid and data.items.savecont existing before setting it
-added natPortRange class: extends GlobalSingleVariable class",VCL-174
f5bfe156195983faa6e9c7e0b4cf24ff14e3ada2,,,1,['web/.ht-inc/requests.php'],"VCL-780 - combine new reservation and current reservations pages

requests.php: expanded width of delete dialog from 300px to 315px because there was some poor string wrapping at 300px",VCL-780
c2a28b613042f5fb1d42e895051917d0b25fabec,,,1,['managementnode/lib/VCL/image.pm'],"VCL-717

do not resend ic delay notice if last state maintenance",VCL-717
8df55776aeb75fcbf2a32461d0345fa1d43b211c,,,3,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/Provisioning.pm']","VCL-783
The latest version of Cygwin doesn't install unix2dos by default. This causes problems. Removed Windows.pm::run_unix2dos. Added set_text_file_line_endings to Windows.pm and OS.pm. Changed all calls to run_unix2dos to set_text_file_line_endings.

Other
Removed unused Windows.pm::format_text_file.",VCL-783
584daa3d5e2b8a40456d13ddcf7d7b4b5800734e,,,6,"['web/.ht-inc/computer.php', 'web/.ht-inc/image.php', 'web/.ht-inc/managementnode.php', 'web/.ht-inc/resource.php', 'web/.ht-inc/schedule.php', 'web/js/resources.js']","VCL-776 - rework resource code to have a base class for all resources and inheriting classes for each resource type

added a function to all resources (except computer) to check for resource usage before prompting to confirm deleting it

computer.php: modified AJdeleteComputers: added query to check usage in blockComputers

image.php: added checkResourceInUse: checks for image usage in reservation, blockComputers, blockRequest, serverprofile, subimages, and vmprofile

managementnode.php: added checkResourceInUse: check for managment node usage in reservations and blockRequest

resource.php:
-modified AJpromptToggleDeleteResource: added call to checkResourceInUse before prompting to confirm deleting resource
-added checkResourceInUse stub function

schedule.php: added checkResourceInUse: check for schedule usage in computer table

resources.js: modified toggleDeleteResourceCB: if status is 'inuse' create dialog to display message to user about resource being in use",VCL-776
2fa2ab0c9997011e63f3dabd90cdbe9dd2c96bfd,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT.pm'],"VCL-308

prevent duplicate entries into loadlogflow",VCL-308
e83ee8ddcc583007b3fa0f5697b5d6a6ff58ff55,,,5,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/firewall/iptables.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/utils.pm']","VCL-174
Changed iptables.pm::initialize to only check for the iptables command, not the service. The command can be used if firewalld is used.

Updated configure_nat to figure out the internal network address and network bits. The MASQUERADE rule was tightened so that it matches only if the destination address is not on the internal network to allow things to work if the public and internal networks are using the same interface.

Added check to Windows.pm::grant_access when process_connect_methods is called. It was not returning if process_connect_methods failed. As a result, the reservation did not fail when it should have.

Other
Updated Linux.pm::update_public_hostname. It was generating unnecessary warnings if the public IP address did not resolve. Added utils.pm::ip_address_to_hostname. This is called by update_public_hostname instead of running ipcalc. If the hostname can't be resolved the hostname is set to the name in the VCL database.

Updated Linux.pm::set_static_public_address to continue to try to set the default route even if the IP address is correct to begin with.",VCL-174
f01253a25cbd8c18bc1602dd771575708ee528a1,,,3,"['web/.ht-inc/image.php', 'web/.ht-inc/requests.php', 'web/js/resources/image.js']","VCL-780 - combine new reservation and current reservations pages

fixed a problem where when the Reservations page is initially loaded, an image only has 1 revision. So, the data for imagestore contains 'revisions' = 0. However, if a user creates a new revision and never leaves the page, once the revision has been captured, the user will not be prompted to select a revision. Fixed this by setting 'revisions' in imagestore for the image to 1. There is a problem that needs to be fixed later where the new revision will not show up in the prompting until it is finished and has 'deleted' set to 0. This results in a user being prompted to select a revision when only 1 revision exists until the catpure is finished.

image.php: modified AJupdateImage: send imageid back with returned data

requests.php: modified newReservationHTML: changed imagestore from ItemFileReadStore to ItemFileWriteStore so we can change the value of 'revisions'

image.js: modified submitUpdateImageClickthroughCB: update value of 'revisions' for entry in imagestore to = 1 so that user will get prompted to select an image revision",VCL-780
42b3d993e69d990465654d84a900d9bbab51402f,,,1,['web/.ht-inc/image.php'],reverting a change that accidentally made it into the last commit,
afab9d13429e0cb073d26a4faf2e2fc8deb01685,,,6,"['web/.ht-inc/computer.php', 'web/.ht-inc/config.php', 'web/.ht-inc/image.php', 'web/.ht-inc/managementnode.php', 'web/.ht-inc/resource.php', 'web/.ht-inc/schedule.php']","VCL-759 - check user group access to image when creating block allocations

commit r1634677 to utils.php added an extra, optional parameter to getUserResources which affected the key that gets generated and saved in $_SESSION['userresources']; all the places where those keys are generated to clear them from $_SESSION['userresources'] needed to be updated to include the additional argument; these are the places where the key needed to be updated:

computer.php: AJsaveResource, AJsubmitDeleteComputers, AJsubmitCompStateChange, and AJsubmitCompScheduleChange
config.php: addResource
image.php: changeOwnerPermissions
managementnode.php: toggleDeleteResource and AJsaveResource
resource.php: toggleDeleteResource
schedule.php: AJsaveResource",VCL-759
b6eb905ef3fca4083c1bd74e0c3b2d2f13560863,,,3,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux/firewall/iptables.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm']","VCL-174
Made minor changes to vcld.log output related to NAT.",VCL-174
d69952f2abc682cbaf10ec5b08b4a53ff9bec087,,,2,"['web/.ht-inc/managementnode.php', 'web/.ht-inc/utils.php']","VCL-174 - NAT - support for sites that have small IP address ranges

utils.php: modified getRequestInfo and getNAThosts: changed natIP to publicIPaddress

managementnode.php: modified AJsaveResource and addResource: changed natIP to publicIPaddress",VCL-174
8e873337b9767892f41f2d133a47563dc5ce75be,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-174
Renamed nathost.natIP to publicIPaddress. Added nathost.internalIPaddress.",VCL-174
9236d054ccc750a1dd6f0eabe1af5cb0f10d99ed,,,9,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/firewall/iptables.pm', 'managementnode/lib/VCL/Module/OS/Linux/init/SysV.pm', 'managementnode/lib/VCL/Module/OS/Linux/init/Upstart.pm', 'managementnode/lib/VCL/Module/OS/Linux/init/systemd.pm', 'managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/utils.pm']","VCL-174
Updated OS.pm::process_connect_methods. It was not configuring the NAT forwarding correctly. Reworked NAT subroutines in iptables.pm.

Renamed nathost.natIP to publicIPaddress. Added nathost.internalIPaddress.

Added subroutines to Linux.pm and corresponding subroutines to init modules:
is_service_enabled
is_service_running
enable_service
disable_service",VCL-174
f0781f310204cda92aa8e8a2ae205469618f4cc5,,,8,"['managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/ESXi.pm', 'managementnode/lib/VCL/Module/Provisioning/esx.pm', 'managementnode/lib/VCL/Module/Provisioning/esxthin.pm', 'managementnode/lib/VCL/Module/Provisioning/openstack.pm', 'managementnode/lib/VCL/Module/Provisioning/vbox.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/utils.pm']","VCL-678

removed old routine write_currentimage_txt
pre-capture is using new routine create_currentimage_txt in OS.pm

removed debug statement from get_variable to cut down on log output",VCL-678
b2d03aa4066404281e966eba7b0f0c2f561d10a1,,,2,"['web/.ht-inc/requests.php', 'web/js/requests.js']","VCL-780 - combine new reservation and current reservations pages

requests.php:
-modified viewRequests: added 'notbyowner' variable to AJconfirmDeleteRequest continuation so it will prompt with the owner of the reservation instead of assuming the user is the owner; added dijit Dialog for prompting users when attempting to delete a server reservation owned by another user to make it clear that someone else owns it
-modified AJconfirmDeleteRequest: if user is not owner, return status to have user prompted that someone else owns the reservation

requests.js:
-modified endReservation: save passed in continuation in hidden form element so it can be reused when prompting user about deleting server reservation owned by another user
-added endServerReservation
-modified endReservationCB: if status is 'serverconfirm', prompt user that someone else owns the reservation; if prompt is open, hide it and enable the Confirm Delete button",VCL-780
41ba1c0e5df947681b4b275569330b2c6d896d46,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm'],"VCL-179
Updated VMware.pm to allow a powered off VM to be captured. Updated get_active_vmx_file_path to return the path of a powered off VM if:
-no powered on VMs were found with matching MAC addresses
-a singled powered off VM was found with matching MAC addresses

Removed calls to is_ssh_responding and write_currentimage_txt in capture. These is handled by the OS module.",VCL-179
83b5b8e9608f30385e79cb5959a77c50a0d1d1d1,,,1,['web/.ht-inc/managementnode.php'],"VCL-174 - NAT - support for sites that have small IP address ranges

managementnode.php: modified AJsaveResource and addResource: added code to add to/update nathost table when updating managementnode information; this is only for 2.4 and will be removed when a section is added to the site for managing nat hosts",VCL-174
7a53a921a13ef6136887b84d656bdf8c5f11b9f2,,,1,['web/.ht-inc/dashboard.php'],"VCL-717 - Prevent multiple failed image creation messages being sent to user

dashboard.php: modified AJrestartImageCapture: updated query to set request.laststateid to 10",VCL-717
106a83f455fa2d2ec8af40944e432daf1707d060,,,1,['managementnode/lib/VCL/Module/OS.pm'],Commented call to execute_new in OS.pm::execute. Inadvertently uncommented it in a previous commit.,
645601ffb8c96a2cc3ab1df6f2598b4d0c5a9e53,,,2,"['web/.ht-inc/requests.php', 'web/js/requests.js']","VCL-780 - combine new reservation and current reservations pages
VCL-568 - refresh current reservations page 15 minutes after a reservation becomes available
VCL-308 - Computer load log does not account for images that have to be transferred to another management node

requests.php:
-modified viewRequests: added 'userconnected' to each array in $requests for tracking if the user has actually connected to the reservation (previously, the request state did not go into 'inuse' until this happened, but that has changed); expanded height of detailed load status pane from 280px to 300px to allow for additional line for transferring image from another managementnode; changed how connectDlgContent gets cleared when connectDlg is closed to use dijit function instead of just setting innerHTML to ''
-modified getViewRequestHTMLitem: changed how we determine if timeoutvalue should be end of reservation to check if user has connected instead of checking for reservation being in 'inuse' state
-modified detailStatusHTML: added check for reservation being timedout and send appripriate message if so
-modified AJconnectRequest: add connecttimeout entry to computerloadlog when Connect button is clicked if remoteIP has not been set yet, this allows us to key off of it to know when to reload the reservations page data if the user never connects; added timeoutvalue class to timeoutvalue hidden input so it will be picked up by JS function that checks for when to reload reservation page data
-modified getReservationNextTimeout and getReservationConnectTimeout: added affiliation specific timeout to query
-added checkUserConnect

requests.js: modified checkConnectTimeout: removed TODO comments before it; added parseInt around getting timeoutvalue's value",VCL-780
64988e28aa9deb1405cb0d6ae892279734d16f0f,,,12,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/OSX.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/Provisioning.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/blockrequest.pm', 'managementnode/lib/VCL/healthcheck.pm', 'managementnode/lib/VCL/inuse.pm', 'managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/reclaim.pm', 'managementnode/lib/VCL/utils.pm']","VCL-702
Cleaned up more sloppy indentation and mixed space/tab strings.",VCL-702
f63be0ccaaf0741084af477f0c715c21b5010839,,,23,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm', 'managementnode/lib/VCL/Module/OS/Linux/UnixLab.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6.pm', 'managementnode/lib/VCL/Module/Predictive/Level_0.pm', 'managementnode/lib/VCL/Module/Predictive/Level_1.pm', 'managementnode/lib/VCL/Module/Predictive/Level_2.pm', 'managementnode/lib/VCL/Module/Provisioning/Lab.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm', 'managementnode/lib/VCL/Module/Provisioning/esxthin.pm', 'managementnode/lib/VCL/Module/Provisioning/one.pm', 'managementnode/lib/VCL/Module/Semaphore.pm', 'managementnode/lib/VCL/blockrequest.pm', 'managementnode/lib/VCL/healthcheck.pm', 'managementnode/lib/VCL/image.pm', 'managementnode/lib/VCL/inuse.pm', 'managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/utils.pm']","VCL-702
Renamed mixed-case hash keys in DataStructure.pm's $SUBROUTINE_MAPPINGS hash:
server_request_fixedIP > server_request_fixed_ip
server_request_DNSservers > server_request_dns_servers
server_request_fixedMAC > server_request_fixed_mac
user_usePublicKeys > user_use_public_keys
user_sshPublicKeys > user_ssh_public_keys
log_remoteIP > log_remote_ip
sublog_IPaddress > sublog_ip_address

Updated locations where these are used.

Cleaned up lots of poor indentation.

Other
Added ""no warnings 'redefine';"" to Semaphore.pm. If you tried to run it directly warnings would appear to to a require loop with Module.pm.",VCL-702
5531a71887340a4bb91c8d19d930e40581561513,,,1,['managementnode/lib/VCL/image.pm'],"VCL-702
Fixed more sloppy indentation in image.pm.",VCL-702
af03a999d078d50e7f6733070f5e78c5a92c4167,,,14,"['managementnode/bin/health_check.pl', 'managementnode/bin/vcld', 'managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/Provisioning/vbox.pm', 'managementnode/lib/VCL/blockrequest.pm', 'managementnode/lib/VCL/healthcheck.pm', 'managementnode/lib/VCL/image.pm', 'managementnode/lib/VCL/inuse.pm', 'managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/reclaim.pm', 'managementnode/lib/VCL/reserved.pm', 'managementnode/lib/VCL/utils.pm']","VCL-702
More sloppy code cleanup.  The backend code contains over 1,200 subroutines with all lowercase names. Why do subroutines with uppercase letters keep popping up? Renamed the following subroutines:

OS.pm
server_request_set_fixedIP > server_request_set_fixed_ip
confirm_fixedIP_is_available > confirm_fixed_ip_is_available
update_fixedIP_info > update_fixed_ip_info

DataStructure.pm
get_next_image_dataStructure > get_next_image_data_structure

blockrequest.pm
update_blockTimes_processing > update_block_times_processing
clear_blockTimes > clear_block_times
clear_blockComputers > clear_block_computers

vbox.pm
control_VM > control_vm

utils.pm
notify_via_IM > notify_via_im
get_current_image_contents_noDS > get_current_image_contents_no_data_structure",VCL-702
14969e17c6ad19b771dc7b177af68c79ad787353,,,25,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/ESXi.pm', 'managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm', 'managementnode/lib/VCL/Module/OS/Linux/UnixLab.pm', 'managementnode/lib/VCL/Module/OS/OSX.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/Predictive/Level_0.pm', 'managementnode/lib/VCL/Module/Predictive/Level_1.pm', 'managementnode/lib/VCL/Module/Predictive/Level_2.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm', 'managementnode/lib/VCL/Module/Provisioning/esxthin.pm', 'managementnode/lib/VCL/Module/Provisioning/libvirt.pm', 'managementnode/lib/VCL/Module/Provisioning/one.pm', 'managementnode/lib/VCL/Module/Provisioning/openstack.pm', 'managementnode/lib/VCL/Module/Provisioning/vbox.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/blockrequest.pm', 'managementnode/lib/VCL/healthcheck.pm', 'managementnode/lib/VCL/image.pm', 'managementnode/lib/VCL/inuse.pm', 'managementnode/lib/VCL/reclaim.pm', 'managementnode/lib/VCL/utils.pm']","VCL-702
Fixing sloppy inconsistent code:
Removed blank spaces from lines ending with {
Added space after ""if"" and ""while"" statements before opening parenthesis
Added space before closing curly bracket if they occur at the end of a line",VCL-702
822f278dcf3611ffe60374dcac0b226c4ad70d6e,,,2,"['managementnode/lib/VCL/Module/OS/Linux/firewall/iptables.pm', 'managementnode/lib/VCL/Module/OS/Linux/init.pm']","VCL-174
Set svn properties on iptables.pm and init.pm.",VCL-174
bce314504ec279448d9fba3d75bfbf15b00dd890,,,14,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/firewall/iptables.pm', 'managementnode/lib/VCL/Module/OS/Linux/init.pm', 'managementnode/lib/VCL/Module/OS/Linux/init/SysV.pm', 'managementnode/lib/VCL/Module/OS/Linux/init/Upstart.pm', 'managementnode/lib/VCL/Module/OS/Linux/init/systemd.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/reclaim.pm', 'managementnode/lib/VCL/utils.pm']","VCL-174
Added backend support for NAT.

Added entries to $SUBROUTINE_MAPPINGS hash in DataStructure.pm for new NAT-related database tables.

Added subroutines:
-Module.pm::create_nathost_os_object
-Module.pm::nathost_os
-Module.pm::set_nathost_os subroutines.
-utils.pm::get_computer_nathost_info
-utils.pm::get_nathost_assigned_public_ports
-utils.pm::populate_reservation_natport
-utils.pm::insert_natport
-utils.pm::get_reservation_request_id
-utils.pm::get_reservation_request_info
-Linux.pm::firewall
-Linux.pm::enable_ip_forwarding

Updated utils.pm::get_connect_method_info to retrieve natport information.

Added code to State.pm::initialize to create a NAT host OS object if necessary.

Updated Module.pm::create_mn_os_object to pass the reservation ID to the DataStructure.pm constructor if it is available.

Updated utils.pm::get_request_info to populate the natport table.

Updated utils.pm::get_computer_info to also retrieve NAT host info.

Added modularized Linux firewall framework. This will eventually dynamically figure out which Linux firewall commands to use. For now, only iptables is supported. Added Linux/firewall directory and iptables.pm.

Added code to process_connect_methods to check if NAT is used. If so, a NAT port forwarding is added for each connect method port.

Added block to reclaim.pm::process to delete the NAT rules created for a reservation if necessary.

Updated all places that use results from connect_method_info to handle new format of hash returned.


Other
Fixed sloppy indentation in reclaim.pm. Please stop this nonsense.

Updated Module.pm::new to attempt to use an existing ManagementNode.pm object if one exists.

Added init.pm file, which is not the parent class of the Linux init modules. Updated Linux.pm::get_init_modules to pass a ""base_package"" argument to the init module constructor. Changed base package in init modules from VCL::Module::OS::Linux to VCL::Module::OS::Linux::init.",VCL-174
db8d15ef9a2f0e2990f0b4a05fb5d5d6eed77e4f,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-764

OS additions",VCL-764
00b230b8d41c8c4d206d59b59feebdf9029dc458,,,2,"['managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/inuse.pm']","VCL-308

continued work on load flow states",VCL-308
7a5c527d0f33375b871efa51a711bd340cc13e9d,,,2,"['web/.ht-inc/computer.php', 'web/.ht-inc/utils.php']","VCL-174 - NAT - support for sites that have small IP address ranges

utils.php: modified getRequestInfo and getComputers: changed to reference nathostcomputermap table instead of natmap table

computer.php: modified AJsaveResource, addResource, and AJsubmitCompNATchange: changed to reference nathostcomputermap table instead of natmap table",VCL-174
1b611c24525feb23c318fbb7d47a930ed1f7856e,,,2,"['web/.ht-inc/siteconfig.php', 'web/js/siteconfig.js']","(no JIRA)

siteconfig.php: modified AJupdateAllSettings: create new continuation with updated origvals and send back to client

siteconfig.js: modified generalSiteConfigCB: updated passed in continuation element with passed in updated continuation",
968332a1a6794b1f14ab7e06b0147a4e35b0baf3,,,1,['web/.ht-inc/managementnode.php'],"VCL-776 - rework resource code to have a base class for all resources and inheriting classes for each resource type

managementnode.php: modified AJsaveResource: put backticks (`) around ""keys"" when adding it to the query since it is a reserved mysql keyword",VCL-776
98917d3c2d39158488632a2deee76ca1e73ff95b,,,1,['web/.ht-inc/dashboard.php'],"(no JIRA)

dashboard.php: general improvements to help status active reservations match graph of reservations
-modified getStatusDetail: added maintenance to list of states ignored when counting active reservations
-modified getActiveResChartData: ignore reservations that have active request entries that we can ignore",
d00ea160dae15997767255139c13841a6afacdce,,,1,['mysql/vcl.sql'],"VCL-174
Made changes to vcl.sql for NAT:
-Added unique key to connectmethodport on connectmethodid, port, protocol
-Renamed natmap table to nathostcomputermap
-Added nathostid column to natport table
-Added unique key to natport on reservationid, connectmethodportid
-Added unique key to natport on nathostid, publicport
-Added natport_ranges to variable table",VCL-174
58b66b8e451a4dc2ede5a2d81ef8c6a8f8acd583,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-308

updated prettyname of a load state",VCL-308
7cd198dc276fc7acd9f04982bf149990da00d792,,,1,['managementnode/lib/VCL/new.pm'],"VCL-308

fixed condition where a flow entry gets dropped if it has to retreive image",VCL-308
77cf35e5c9dc5b10b5bbb36b821b2b350726853c,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-568, VCL-308
   
more tweaks on the flow",VCL-568
573523b9864bedeb7eb520233caef25f21e01ad1,,,2,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/new.pm']","VCL-568, VCL-308

more tweaks on the flow",VCL-568
cbdd8ddf2d7b2cfe7fb13f014dbb781464679666,,,8,"['managementnode/lib/VCL/Module/Provisioning.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/libvirt.pm', 'managementnode/lib/VCL/Module/Provisioning/one.pm', 'managementnode/lib/VCL/Module/Provisioning/openstack.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/new.pm']","VCL-308, VCL-568

cleaned up modules in relation to the computer load flow. removed duplicates insertloadlog calls,
this caused duplicates to be presented to the end-user ""pending"" link for loading status.",VCL-308
c51627423829b560e70115735b9f711a5b73e83d,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-308, VCL-568

updated statements related to computerloadflow
As the loadstateid can change, need to insert based on name, not id's.",VCL-308
d7f37c8ca8fb7cf0b37db45d9774eb6508dba3fb,,,1,['managementnode/lib/VCL/new.pm'],"VCL-308

added entry for retrieving image for computerloadflow",VCL-308
1c091f805ae5fcd0d0933f6800bbf30048e77199,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']",VCL-568,VCL-568
63f90f61c174b362e01c78b1e6bcdf08882cc7a0,,,4,"['managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/reclaim.pm', 'managementnode/lib/VCL/reserved.pm', 'managementnode/lib/VCL/utils.pm']",VCL-568,VCL-568
bd026830eb7029abef8fc92612e59b545da568ff,,,1,['web/css/siteconfig.css'],initial add,
1e69bd4a4373187d4f97648e40dd20f855f86528,,,1,['web/.ht-inc/utils.php'],"(no JIRA)

messed up in last commit (1641942) - left out a ';'

utils.php: modified getVariable: added ';' at end of ""timestamp, "" line",
2551fc5f11d208cf695a251f4d766d3a3ad77542,,,1,['web/.ht-inc/utils.php'],"(no JIRA)

utils.php:
modified debugIsAvailable: added computer id to message when a computer is successfully allocated
modified addChangeLogEntry: do not update log table start or end time when wasavailable == 0
modified getVariable and getVariablesRegex: removed description and regexp from queries; never used these or added them to the database sql files",
a9be1326ed584046c08fce30441ec0b5cd47a668,,,2,"['managementnode/lib/VCL/image.pm', 'managementnode/lib/VCL/utils.pm']","VCL-409
Fixed bug in image.pm::setup_capture_base_image. It was using the computer's provisioning.name value as the install type. Added utils.pm::get_provisioning_osinstalltype_info. Updated image.pm to determine all of the OSinstalltype names which are mapped to the computer's provisioning ID. This is used to prune the list of OS's to choose from.

Fixed some poorly worded instructions displayed if other reservations exist for a computer used to capture a base image.",VCL-409
a6653af48acf738b36d4f4817e16e3b30f1af311,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-758
entries for start timeout for connect timings

VCL-308
entry for image transfer",VCL-758
bb321d5d9c4cc5e3a749abd2a9e579cfd2ed18a8,,,5,"['managementnode/lib/VCL/Module/Provisioning.pm', 'managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/inuse.pm', 'managementnode/lib/VCL/reclaim.pm', 'managementnode/lib/VCL/reserved.pm']","VCL-308
inserted loadlog entry for image copy

VCL-568
added loadstatenames for frontend to montior connect for refresh

VCL-758
removed check/restriction for connecttimeout. Previously it would not allow less than 10min. Now can allow down to 1 min

VCL-799
update_cluster, changed routine name in reserved",VCL-308
311d01e8b9ec6805538045264aa04865a38ec67e,,,1,['managementnode/bin/vcld'],Fixed typo in vcld left in for testing.,
2bf2313d4201a02c1a067dd83cf84d4d74c6a77c,,,3,"['managementnode/bin/vcld', 'managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/utils.pm']","VCL-800
Updated utils.pm::switch_state to not set log.ending to failed if the request.state = image, checkpoint, or inuse.

Updated State.pm::reservation_failed to only update log.ending to failed if the state is new or reserved.

Other
Changed abbreviated $reservation_cnt variable in vcld to $reservation_count.",VCL-800
fbbcea74d3cd4edf60bf4f1135bc249f5206ce84,,,1,['managementnode/bin/install_perl_libs.pl'],"VCL-750
Updated install_perl_libs.pl to be able to download and install EPEL under RHEL/CentOS 7.",VCL-750
9f050610125c77c9ac9dd2c4123bf5a4aed2fe61,,,1,['managementnode/lib/VCL/Module/OS.pm'],"VCL-799

renamed routine update_cluster
for each cluster node's IPaddress update the current reservation's node firewall",VCL-799
0bc90326b7a8ac0433cf649d74c402e9594b13e9,,,1,['web/.ht-inc/computer.php'],"VCL-776 - rework resource code to have a base class for all resources and inheriting classes for each resource type

computer.php: modified validateResourceData: added check to some conditionals for adding or editing so that $olddata will only be referenced when doing edits",VCL-776
04f093b591e5237481bf32bc53cec12a0ddafcde,,,3,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/reserved.pm', 'managementnode/lib/VCL/utils.pm']","VCL-799

moved update_cluster_info to OS.pm",VCL-799
f17a057a7e50167f2a8e53260e3dc1fd1e52f31a,,,1,['web/.ht-inc/image.php'],"VCL-776 - rework resource code to have a base class for all resources and inheriting classes for each resource type

image.php:
-modified connectmethodDialogContent and subimageDialogContent: changed text at bottom of dialog from ""Confirm Changes"" to ""Submit Changes"" to properly reflect text on button
-modified AJsaveResource: removed [$data['imageid']] key when referencing $olddata; $olddata is not indexed by imageid, it is just the data for a specific image; this was causing imagemeta information to get messed up when clicking the Save Changes button",VCL-776
0fc78395502aecc14975642e0e47e1ba14ca3388,,,2,"['managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/utils.pm']","VCL-797

some chars were causing issues, especially if in certain sequence, for now if special char is enabled - tacking one on the end",VCL-797
de2c3fc143f6007d85648fe2de9f68dfbec48fb9,,,1,['web/testsetup.php'],updated dojo version number in error message,
7e05cbcc7be0c1697b79d9be9080c4878c022d35,,,1,['mysql/update-vcl.sql'],"VCL-682

cleanup of older xCAT provisioning entries",VCL-682
b7beb02f92af4e31d306375e1175ac1651a92967,,,1,['mysql/vcl.sql'],"VCL-174 - NAT - support for sites that have small IP address ranges
VCL-706 - Allow a Connect Method to Specify a Port Range or Port List
VCL-655 - Manage groups - create a default or none user group

vcl.sql:
-modified natlog: changed types of fields to make more sense and to match any referenced fields
-added inserts for connectmethodport table
-added 'Default for Editable by' user group to inserts for usergroup table
-added 'Default for Editable by' to groups admin user is member of
-added constraints for nathost, natlog, natmap, and natport",VCL-174
0f6086f652d753db9b03e86a13527529b600abec,,,2,"['web/.ht-inc/groups.php', 'web/.ht-inc/utils.php']","VCL-655 - Manage groups - create a default or none user group

utils.php: modified sendHeaders: added section that sets a cookie for modes submitAddGroup or submitEditGroup named VCLOWNERGROUPID or VCLEDITGROUPID depending on whether a user group or a resource group was added

groups.php:
-modified editOrAddGroup: for user groups, set default ""editable by"" group to either what is saved in user's cookie from previous selection or to default owning user group ""Default for Editable by""; for resource groups, set default ""owning group"" to what is saved in user's cookie from previous selection; added 'Default for Editable by' to list of ""system"" groups that cannot be renamed; added displaying error to user if specified owning group not available to user
-modified processGroupInput: added editgroupids and ownergroupids to returned data; added checking that submitted edit group or owning group in allowed list for user
-modified confirmDeleteGroup: added 'Default for Editable by' to list of ""system"" groups that cannot be deleted",VCL-655
8bcf8236f4806c71050499c2069abf95eda5fd67,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-682

removed older references to xCAT 1, xCAT 2",VCL-682
22d0ce55b95a67b8e2f968e17b68e3dd4fbe7daf,,,1,['mysql/vcl.sql'],VCL-682,VCL-682
7dfb02bc3a8807fcb2671c87bd7c088dd0e4bc02,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-797

table structure edits for pw",VCL-797
e8bff24206b9eede2e7c93a950a591cf67dbeeb1,,,4,"['web/.ht-inc/siteconfig.php', 'web/.ht-inc/states.php', 'web/.ht-inc/utils.php', 'web/js/siteconfig.js']","VCL-797 - system admin setting for randomly generated passwords

siteconfig.php
-modified generalOptions: added calls to userPasswordLength and userPasswordSpeciakChar; okay to move these around, I'm not set on their location on the page
-added GlobalSingleVariable class
-added userPasswordLength and userPasswordSpecialChar as inheriting classes of GlobalSingleVariable 

states.php: added userpasswordlength and userpasswordspecialchar entries in $actions['classmapping']

utils.php: modified getDojoHTML: added dijit.form.CheckBox to siteconfig dojo includes

siteconfig.js
-added GlobalSingleVariable class
-added userPasswordLength and userPasswordSpecialChar as inheriting classes of GlobalSingleVariable",VCL-797
a158331e575fdb3aa758921345d7fd1154c0c3ba,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-797

backend edits",VCL-797
e2c29a30c8b0875078bbfc87b01e2c981dd3f155,,,1,['web/.ht-inc/computer.php'],"VCL-776 - rework resource code to have a base class for all resources and inheriting classes for each resource type

fixed problem where changing state of computer to maintenance could insert a tomaintenance reservation at the end of an indefinite server reservation

computer.php:
-modified AJsaveResource: moved adding update of notes field to after conditionals for state change - this prevents the ""your changes have been saved but"" text from showing up when the only thing changed was setting the notes field due to a state change when the state change was not allowed; added check for $reloadstart being '2038-01-01 00:00:00', if true, notify user that cannot schedule computer to be moved to maintenance state
-modified AJsubmitCompStateChange: added checks for $reloadstart being '2038-01-01 00:00:00', if true, add computer to $fails array and continue to next computer",VCL-776
1b07c451f83a41c9ce3415558b946d1f50bd13e1,,,1,['web/.ht-inc/xmlrpcWrappers.php'],"VCL-776 - rework resource code to have a base class for all resources and inheriting classes for each resource type

xmlrpcWrappers.php:
-modified XMLRPCautoCapture: changed keys of some fields in $data array to match what is in addResource; added query to set state of request to image and update imageid and imagerevisionid of reservation
-modified XMLRPCfinishBaseImageCapture: removed require_once for images.php; added require_once for resource.php and image.php; create Image object and call addImagePermissions on it instead of addImagePermissions directly (which does not exist anymore)",VCL-776
cb9e1eaced28a02f9b4974ecb5ca32332c234869,,,1,['web/js/resources/image.js'],"VCL-776 - rework resource code to have a base class for all resources and inheriting classes for each resource type

image.js: modified saveResource: added code to expand Advanced Options section if there is an error with one of the form elements inside it and then to put the focus on that item so that the error popup gets displayed. had a problem where submitting changed to an image with Advanced Options closed but with an error in that data made it seem like the Save Changes button did not work.",VCL-776
47150ad120f28b53e0dfee042d00a2dcdb00d23d,,,1,['web/js/requests.js'],"no JIRA

requests.js: modified resRefresh: if dojo.byId('detailreqid') == 0, set data.incdetails = 0 so php code does not try to send details of a reservation that does not exist",
e293ec83908f09329c1353d0b088b9b21cd492db,,,3,"['web/.ht-inc/requests.php', 'web/.ht-inc/utils.php', 'web/js/code.js']","no JIRA

utils.php:
-modified getRequestInfo and showTimeTable: changed links using mode=newRequest to mode=viewRequests
-modified continuationsError: added a div with an id of continuationserrormessage around error message so that error handler in code.js can parse contents of div out if whole page of html is returned

requests.php: modified detailStatusHTML: changed link using mode=newRequest to mode=viewRequests

code.js: modified returnCheck: added ""else if"" that gets html from continuationserrormessage div if ""-- continuationserror --"" is on the page so whole contents of page will not be displayed to user if header and footer are sent",
6c777f897c2d8cee23905501aa14853a23c6d246,,,4,"['web/.ht-inc/errors.php', 'web/.ht-inc/image.php', 'web/.ht-inc/resource.php', 'web/js/resources/image.js']","VCL-776 - rework resource code to have a base class for all resources and inheriting classes for each resource type

resource.php: modified AJstartImage: use $revid for value of $cdata['baserevisionid'] instead of getting it from $data['reservations']

image.php:
-modified createImage: get imageid from continuation instead of from request data; get baerevisionid from continuation instead of from request data. I was seeing a few problems where AJsaveResource was somehow getting submitted twice with the 2nd time using the imagerevisionid from the newly created image
-modified validateResourceData: include baserevisionid in returned data

errors.php: changed references to addImage to ""Image::addResource""

image.js:
-modified saveResourceCB, updateImageCB, and submitUpdateImageClickthroughCB: enable clickthroughDlgBtn after hiding clickthroughdlg
-modified clickThroughAgree: disable clickthroughDlgBtn when it is clicked so it cannot be double clicked
-modified hideClickThroughDlg: check to see if each dialog is open before calling .hide() on it",VCL-776
319e4f4449bad29ca88ef7510b1cd79a8d7f7d53,,,1,['web/testsetup.php'],added checks for dojo css in themes directories,
1992bc09ea1b392ccfde515043719c4c78a0e039,,,1,['managementnode/lib/VCL/inuse.pm'],fixed; not exiting cleanly after submit autoCapture for imaging reservations,
ba91a0fd508d6ff8c46eb87cfb07fa3a3fde8b98,,,2,"['web/.ht-inc/utils.php', 'web/js/code.js']","(no JIRA associated with this)

utils.php: modified continuationsError: added an html comment line before printing error for javascript code to key off of

code.js: modified returnCheck: added check for returned data not containing ""-- continuationserror --"" to check for html comment line added when returning error from a continuations error. if string is found, error text is passed along to user",
6eccc7841980945bb11cc5fd46750a9e21f1b6dd,,,1,['web/.ht-inc/computer.php'],"VCL-776 - rework resource code to have a base class for all resources and inheriting classes for each resource type

computer.php: modified AJsubmitCompStateChange: added 'timeout' to states in list for preg_match to put computer in availablenow array",VCL-776
ea70d85355fdc211107fa5996a0f2c2c32480a3b,,,1,['managementnode/bin/cygwin-sshd-config.sh'],"VCL-783

Added support to detect the cywgin path using cywpath -d /",VCL-783
5d0e85d6b33d0d1ea7e3b528a092da4394a2f711,,,1,['web/.ht-inc/computer.php'],"VCL-776 - rework resource code to have a base class for all resources and inheriting classes for each resource type

computer.php: modified AJsaveResource: fixed bug where no vmhost entry was being created in case of changing state of computer from maintenance to vmhostinuse when provisioning is None",VCL-776
b200b7e7f53e473824d3889000f3e63cb29f967b,,,1,['web/.ht-inc/computer.php'],"VCL-776 - rework resource code to have a base class for all resources and inheriting classes for each resource type

computer.php: modified AJsubmitCompStateChange: $resources['managementnode'] could be empty, causing $semmnid to be null, which was later passed to retryGetSemaphore; added check for it being empty, and if so, to get a management node id a different way; if that is empty, send an error to the user",VCL-776
ec5ecaa82c7bb0451dc79214c007a4d6824707dd,,,2,"['managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/utils.pm']","VCL-783

additional support for 64 bit cygwin:
- check for cygwin paths, by default cygwin x86_64 will be in C:\cygwin64
- if cygwin64 is installed C:\Windows\Sysnative will not exist",VCL-783
6217ad86f822b8146862ae991348ce0eb55cf49a,,,3,"['web/.ht-inc/resource.php', 'web/js/resources.js', 'web/js/resources/image.js']","VCL-776 - rework resource code to have a base class for all resources and inheriting classes for each resource type

updated confirm delete of resource to have user friendly field names and values

resource.php: modified AJpromptToggleDeleteResource: send array of field/name/value combinations instead of just html so that javascript function that generates user friendly values can be called on the values

image.js: modified colformatter: added conditional for maxinitialtime

resources.js: modified toggleDeleteResourceCB: generate html table for names/values from array instead of just using passed in html; join with passed in html when displaying so that data passed in via toggleDeleteResourceExtra gets displayed",VCL-776
283afb7900bd4de9c77f90eb94e6efabe8dcc5e6,,,3,"['web/.ht-inc/requests.php', 'web/.ht-inc/utils.php', 'web/js/requests.js']","minor changes

utils.php:
-modified abort: if $errcode == 8 (login problem) replace the password argument with *******
-modified getDojoHTML: added ""?v=$v"" to end of custom dojo file script include (was having problems with users using an older cached version of the file after doing an upgrade)

requests.php and requests.js: fixed typo (newReservationHTML and selectResType) changed indefinteend to indefiniteend",
036ad663f2b512b340a44ad7a637d810af11ea98,,,2,"['web/.ht-inc/authmethods/itecsauth.php', 'web/.ht-inc/authmethods/ldapauth.php']","VCL-253 - Allow users to specify RDP port

ldapauth.php: modified updateLDAPUser: added rdpport to returned data

itecsauth.php: modified updateITECSUser: added rdpport to returned data",VCL-253
38677b96398ec9f6a6297efff3ae68e4115a9b87,,,2,"['web/.ht-inc/blockallocations.php', 'web/js/blockallocations.js']","VCL-759 - check user group access to image when creating block allocations

updated so that only admins are warned about user group not having access to image; also added warning for accepting block allocaitons (instead of just for creating new ones)

blockallocations.php:
-modified getPendingBlockHTML: added row for warning message; added onChange tag to user group selection to clear submitacceptcont2; added submitacceptcont2 hidden input
-modified AJacceptBlockAllocationConfirm: added check for user group having access to image; added imageid to continuation data
-modified AJacceptBlockAllocationSubmit; get imageid and override from continuation data; added check for error having already been encountered before checking for empty set of management nodes; added overrideable check of user group having access to image; if user group does not have access to image, create a 2nd continuation that prevents the user group check from being done on the next submit
-modified processBlockAllocationInput: added conditional that $method must be new or edit to perform user group access to image check

blockallocations.js:
-modified acceptBlockConfirmCB: if warnmsg passed in, display it
-modified acceptBlockSubmit: if submitacceptcont2 is not empty, use that as the submitted continuation instead of the one from submitacceptcont
-modified clearCont2: added check for existance of submitcont2 before clearing; added conditional clearing of submitacceptcont2 as well",VCL-759
940edd969c64b63d037a8ee865a1ebe4fbc6d438,,,6,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/utils.pm', 'mysql/vcl.sql']","VCL-706
In vcl.sql, changed connectmethodport.protocol definition default value to TCP. Added connectmethodport.connectmethodid constraint.

Updated utils.pm::get_connect_method_info to retrieve connectmethodport information.

Changed all locations calling utils.pm::get_connect_method_info to $self->data->get_connect_methods for consistency.

Moved firewall_compare_update from Windows.pm, Linux.pm, and Ubuntu.pm to OS.pm since the code was duplicated.

Updated all locations which were using the protocol an port information to use the new multivalued connectmethodport information:
OS.pm::process_connect_methods
OS.pm::is_user_connected
OS.pm::get_connect_method_remote_ip_addresses
OS.pm::firewall_compare_update
Windows.pm::check_rdp_port_configuration

Other
Added additional registry keys to Windows.pm::clean_hard_drive. These allow the cleanup process to handle more items. Changed the cleanmgr.exe timeout from 120 seconds to 900. Newer versions seem to take a longer time.

Removed Linux.pm::sanitize_firewall. It was not called from anywhere and was not doing anything.

Cleaned up Ubuntu.pm's enable_firewall_port and disable_firewall_port.",VCL-706
05ad540e9e83d92fbba11d98ef40743d76630558,,,1,['web/testsetup.php'],added checks for spyc,
ec7e883406318f4fa85a08f29970befb8a97e180,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-764
Added subroutines to utils.pm used by update_database.sh:
get_database_table_names
setup_get_input_file_path
setup_print_error
setup_print_ok
setup_print_warning",VCL-764
582c374aa54ae238709d6347fc0b868a6cf7284a,,,4,"['web/.ht-inc/computer.php', 'web/.ht-inc/image.php', 'web/.ht-inc/managementnode.php', 'web/.ht-inc/resource.php']","VCL-776 - rework resource code to have a base class for all resources and inheriting classes for each resource type

resource.php:
-modified viewResources: moved printing of owner column to be included with general attributes; sort the fields by displayed name b
efore generating the columns
-modified addDisplayCheckboxes: sort the fields by displayed name before generating HTML
-modified fieldWidth: added owner as a default field that has a width set

computer.php: modified fieldWidth: added owner to have a width of 12

image.php: added fieldWidth: added so we could set width of 'os' to be a little wider

managementnode.php: modified fieldWidth: added owner to have a width of 12",VCL-776
1ea4bcb7d0d26f9c83f27aac129305cbd1e63f82,,,2,"['web/.ht-inc/privileges.php', 'web/.ht-inc/utils.php']","minor changes, no JIRAs for these

utils.php: modified abort: added call to clearPrivCache to clear up errors that may be caused by poorly cached data

privileges.php: modified AJchangeResourcePrivs: added ""$newprivval == 'true' to conditional that checks if user has access to modify privilege to make it match up with the comments above it and what is done in getResourcePrivRowHTML",
4e507dc65da82df201a4a44a0fefd31fe97a1e02,,,2,"['web/.ht-inc/conf-default.php', 'web/.ht-inc/utils.php']","VCL-713 - Add ability to turn off certain types of logging in the database

utils.php:
-modified doQuery: do not log queries to querylog table if QUERYLOGGING is defined and is set to 0 
-modified xmlRPChandler: do not log XMLRPC calls to xmlrpcLog table if XMLRPCLOGGING is defined and is set to 0 

conf-default.php:
-added QUERYLOGGING: boolean to control logging of queries to querylog table
-added XMLRPCLOGGING: boolean to control logging of XMLRPC calls to xmlrpcLog table",VCL-713
47bb4397ea73e47b7661e92efb02c03e78d10cc6,,,1,['managementnode/bin/upgrade_database.pl'],"VCL-764
Added Subversion properties to upgrade_database.pl script.",VCL-764
7fdae3027fe4fcfbe375b0e7396d34b3aa385fc3,,,2,"['managementnode/bin/upgrade_database.pl', 'mysql/vcl.sql']","VCL-764
Added upgrade_database.pl script.

Added version comment to vcl.sql. This is used by upgrade_database.pl to verify the file is correct. Rearranged insert statements in vcl.sql so that they work if constraints are already in place.",VCL-764
20284c0734717e162d9f4495d49222960b44b1ec,,,1,['web/.ht-inc/blockallocations.php'],"VCL-740 - Deletion of Block allocations not removing reload reservations

blockallocations.php:
-modified AJdeleteBlockAllocationSubmit: added a query to delete reload reservations corresponding to blockComputers entries
-modified AJtoggleBlockTime: updated query that deletes reload reservations to include laststateid and userid = $reloadid to more closely match new query in AJdeleteBlockAllocationSubmit:",VCL-740
d34f8ea5ae449cedbfb3e2dedea00a0c92103485,,,1,['managementnode/bin/S99vcld.linux'],typo,
e37d902693661b05da6626022c883d068fce0a1d,,,1,['web/.ht-inc/computer.php'],"VCL-776 - rework resource code to have a base class for all resources and inheriting classes for each resource type

computer.php: added extraSelectAdminOptions: used to add a note the Computer Utilities has been incorporated into Edit Computer Profiles",VCL-776
eb9acd9f6ada7fa82007110d6442dbac98fc0523,,,1,['web/.ht-inc/groups.php'],"VCL-747 - editOrAddGroup can have $ownerid undefined for add mode
VCL-696 - Improve resource group deletion options and information

groups.php:
-modified editOrAddGroup: if user has user groups available for owning resource groups, but all of those groups have a different affiliation from the user, use the full list of user groups for what can be selected as the owning user group; added check for user group being a special (system) group, and if so, do not allow the name of the group to be modified
-modified processGroupInput: do not perform checks of name of group if $editname == 0
-modified confirmEditOrAddGroup: display name same way as federated and courseroll groups if $editname == 0
-modified confirmDeleteGroup: do not allow special (system) user groups to be deleted",VCL-747
80514d63ce99dc95495ba9fa8ef60b1c77a9eaae,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm'],"VCL-685
Commented out ""tools.upgrade.policy"" setting in VMware.pm::prepare_vmx. It can cause a VM to automatically reboot after it is started up. This causes problems.",VCL-685
9afcffa628d8ac0b6b2221046e1aa2e86d929055,,,3,"['web/.ht-inc/blockallocations.php', 'web/.ht-inc/utils.php', 'web/js/blockallocations.js']","VCL-759 - check user group access to image when creating block allocations

blockallocations.php:
-modified blockAllocationForm: added onChange handlers to form for selecting environment and user group that call clearCont2; added hidden form value with id of submitcont2 - we end up storing a 2nd continuation here that has an override flag set to allow ignoring a warning that the submitted user group does not have access to the submitted environment
-modified processBlockAllocationInput: check for user group having access to image; do not do check if $override is set; if error and error was from user group not having access to image, send back a 2nd continuation that has override flag set

utils.php: modified getUserResources: added optional argument to end of argument list - $groupid; allows a group id to be passed in (along with $userid = 0) to get resources a user group has access to

blockallocations.js:
-modified blockFormSubmitWeekly, blockFormSubmitMonthly, and blockFormSubmitList: use continuation stored in submitcont2 if it has a non empty value
-added clearCont2",VCL-759
b62dbc41654d9264b8d7aaff925944a1e380cb12,,,2,"['web/.ht-inc/serverprofiles.php', 'web/.ht-inc/utils.php']","VCL-780 - combine new reservation and current reservations pages

serverprofiles.php: modified serverProfiles: added section as placeholder from previous Deploy Server page to let users know they now need to go to the Reservations page and click New Reservation

utils.php: modified getNavMenu: also allow users with serverCheckOut (in addition to serverProfileAdmin) to see link for Server Profiles; changed so they can see the placeholder page to let them know to go to the Reservations page to deploy servers now",VCL-780
3ea5041c05ff0649fbc159fc40bad0a0c655ff16,,,3,"['web/.ht-inc/requests.php', 'web/.ht-inc/states.php', 'web/js/requests.js']","VCL-780 - combine new reservation and current reservations pages

requests.php:
-modified viewRequests: added continuation and dialog for displaying preview of click through agreement
-modified AJconnectRequest: changed link for previewing click through agreement to fetch agreement and display in dialog box
-added AJpreviewClickThrough

requests.js:
-modified checkTimeouts: use parseInt to convert nodes[i].value to int for comparison to nextcheck
-added previewClickThrough and previewClickThroughCB

states.php: added AJpreviewClickThrough",VCL-780
259059a11bb0d2c71bb6cf24ea8c45a250f414e2,,,1,['web/.ht-inc/privileges.php'],"VCL-672 - privilege page does not handle user groups with the same name but different affiliations correctly

privileges.php:
-modified getUserPrivRowHTML and printUserPrivRow: moved 2 lines to a single line where $name was being set in 2 conditionals to the same thing
(unrelated to 672)
-modified viewNodes and printUserPrivRow: hid configAdmin since config code is not finished yet
-modified userLookup: call getNodePath for each node when listing privileges and print full path to node instead of just name",VCL-672
58adcfaeaf8765f25497c35ccdd93821da600149,,,1,['web/.ht-inc/computer.php'],"VCL-174 - NAT - support for sites that have small IP address ranges

computer.php: modified validateResourceData: if $olddata['nathostid'] == '', set it to 0 for comparison to $return['nathostid']",VCL-174
d8163dccac47f41911915a324106c4061d068f65,,,1,['web/.ht-inc/authmethods/shibauth.php'],"shibauth.php: modified updateShibGroups: changed default ""All <affil> Users"" group to have a capital U for Users",
7bfef8e58d22a2d029f9ba48587001148f965e0c,,,3,"['web/.ht-inc/requests.php', 'web/.ht-inc/resource.php', 'web/js/resources/image.js']","VCL-780 - combine new reservation and current reservations pages
VCL-776 - rework resource code to have a base class for all resources and inheriting classes for each resource type

requests.php: modified viewRequests: moved commands that run when ""I do not agree"" button clicked to a function connected to when the dialog is hidden

resource.php: modified AJstartImage: tell getImageRevisions to included deleted revisions when getting data; helps to handle case where a capture has already started which would have the deleted flag set on the image revision

image.js: created hideClickThroughDlg: this is called when clickthrough dialog is hidden; there was a problem where the circle/X button could be clicked to hide the dialog which would leave the comments dialog open; clicking the Submit button in that dialog at this point caused the request to be updated to the imaging state and a new entry created in the imagerevision table; moving things to run when the dialog is hidden causes thing to properly get cleared/cleaned up when the circle/X button is clicked instead of the ""I do not agree"" button",VCL-780
069ddc5cf1530c8cb534a56592bdaf4377d0112b,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm'],"VCL-685
Fixed problem in VIM_SSH.pm::_wait_for_task. It was calling _get_task_info and attempting to retrieve a hash element without checking if the hash was defined. Updated _get_task_info to always return a hash reference, which could potentially be empty.",VCL-685
679ecbefcb2947c95fc3dcb75afb453e12e42997,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm'],"VCL-685
Updated VMware.pm::prepare_vmx to add lines to the vmx file which allow nested hypervisors. Also added a CD drive to make installing VMware Tools easier.",VCL-685
5ee8c4b72caa3a129f68278f87879dfbba7fa591,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm'],"VCL-685
Updated VMware.pm::get_vm_virtual_hardware_version to check if the version of VMware on the host supports the hardware version of the image. If not supported, hardware version is overridden to the maximum version the host supports.",VCL-685
932119a7682048d1c3413618928fd2248e30ec12,,,2,"['web/.ht-inc/groups.php', 'web/.ht-inc/utils.php']","VCL-696 - Improve resource group deletion options and information

utils.php: added getNodePath

groups.php:
-modified checkForGroupUsage: looks for usage in individual places and sets a new passed in (by reference) argument to a string that can be displayed to the user as to where the group is being used
-modified confirmDeleteGroup: print message set in checkForGroupUsage when group is in use",VCL-696
4598a7147d6968da4985159c2f5fabe316038153,,,1,['managementnode/lib/VCL/Module/State.pm'],"VCL-795
Added condition to State.pm::reservation_failed to check if an 'inuse' process failed and the end time has been reached. If this is the case, the request state is set to complete and the computer state is set to failed. It had been setting the states back to 'inuse' causing the request to remain in the database indefinitely, constantly being processed.

Added code to check if reservation_failed was called from initialize. Added detail to the notify message to indicate if this is the case.",VCL-795
15b8fc08dd6388b49e7101696fcd5cb2266416d6,,,2,"['managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/utils.pm']","VCL-794
Added a warning message and return statement in new.pm::computer_not_being_used. This is reached if the attempt loop exhausts all attempts. It had not been explicitly returning a value if this case was reached.

Added an extra loop iteration in computer_not_being_used if it detects a competing process had successfully finished loading the correct image during the last iteration of checking the loop. This gives it one more chance.

Other
Made minor changes to notify statements in update_request_state and get_request_current_state_name in utils.pm.",VCL-794
c4fb9fdb84bfdc5f03b452c819751aaaea0e6ef2,,,1,['web/.ht-inc/image.php'],"VCL-695 - Change newimages membership if image owner is changed via website

image.php:
-modified AJsaveResource: when owner is changed, call changeOwnerPermissions
-added changeImagePermissions: changes image group membership; if image is in a new[vm]images group, adds image to new owner's corrsponding group, removes from previous owner's group",VCL-695
0e1f6eec5d101394d5ab6ac1f919d7fe0e5ef7a0,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm'],"VCL-685
Added variable to VIM_SSH.pm object to record if services.sh restart was run at any time during a process. This prevents a single process from running it more than once.",VCL-685
726e612254ce773513e1624dafd6b4af603d2478,,,3,"['managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm', 'managementnode/lib/VCL/Module/State.pm']","VCL-793
Updated State.pm::reservation_failed to catch a case where a 'deleted' process failed. The code was just checking for is_request_deleted, then setting the computer to available and leaving the request state intact. This caused vcld to attempt to spawn deleted processes indefinitely if there was a problem with the host.

VCL-685
Added DESTROY subroutine to vSphere_SDK.pm with an explicit call to Util::disconnect. The call is wrapped in an eval block and the die handler is overridden. Hoping to fix intermittent condition where die is called automatically when a process exits.",VCL-793
66d63b2f1948f26187701646749b98495d4d959b,,,5,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm', 'managementnode/lib/VCL/Module/Semaphore.pm', 'managementnode/lib/VCL/utils.pm']","VCL-685
Updated VIM_SSH.pm::_run_vim_cmd to detect if another process is attempting to run 'services.sh restart' to prevent multiple failed attempts. It does this by checking if the semaphore exists after a failed attempt. Added Module.pm::does_semaphore_exist. This calls Semaphore.pm::semaphore_exists.

Added utils.pm::set_reservation_lastcheck. This is called to set reservation.lastcheck to 20 minutes prior to the end of the reservation when VIM_SSH.pm detects uncorrectable problems. Updated utils.pm:update_reservation_lastcheck to not change the value if the current value is in the future.


Other
Added $no_cache=1 argument to calls to get_computer_info and get_vmhost_info in DataStructure.pm. This should always get fresh data.

Removed requirement to be called as an object method from Module.pm::create_mn_os_object. The '$self' variable wasn't being used anywhere.

Updated Module.pm::new to not create a new management node OS object if the 'mn_os' argument was specified. It had been needlessly creating multiple objects.",VCL-685
10b5a690d31f565c717d3317045f029bf6de1d15,,,1,['web/.ht-inc/xmlrpcWrappers.php'],"VCL-670 - user provided data loaded at request time

xmlrpcWrappers.php: modified XMLRPCdeployServer: added argument '$userdata'; this is placed into the variable table with a key of 'userdata|<reservation id>'; entries are created for each reservation that is part of a cluster; the data is then dropped in to /root/.vclcontrol/post_reserve_userdata by the backend at reservation time",VCL-670
0bde0652448ea1c44043de7edfd169c408b6e6ab,,,2,"['web/.ht-inc/privileges.php', 'web/.ht-inc/xmlrpcWrappers.php']","VCL-672 - privilege page does not handle user groups with the same name but different affiliations correctly

xmlrpcWrappers.php: modified XMLRPCgetUserGroupPrivs, XMLRPCaddUserGroupPriv, and XMLRPCremoveUserGroupPriv: use $groupid as key for data in arrays returned by getNodeCascadePrivileges and getNodePrivileges instead of $name

privileges.php:
-modified viewNodes, selectNode, printUserPrivRow, getUserPrivRowHTML, and checkUserHasPriv: use group id as key for data in arrays returned by getNodeCascadePrivileges and getNodePrivileges instead of group name
-modified userLookup: (unrelated to issue) expanded query for loginlog to include unityid@affiliation
-modified getNodePrivileges and getNodeCascadePrivileges: use group id as key in returned array of data instead of group name",VCL-672
75afe858e710a6c2589e901fafbc7619502302f4,,,1,['web/.ht-inc/image.php'],"VCL-584 - Extend features of Server loads

image.php: modified createImage and AJupdateImage: no longer update request.forimaging for checkpoints",VCL-584
0225968add1658291e4e81b86d112540e8d65aab,,,1,['web/.ht-inc/requests.php'],"VCL-780 - combine new reservation and current reservations pages

requests.php: modified AJsubmitEditRequest: changed $reqsets to $serversets in same place as [] added in last commit",VCL-780
acebe2375c316b09039d9760f7d30c12357ee8c0,,,1,['web/.ht-inc/requests.php'],"VCL-780 - combine new reservation and current reservations pages

requests.php: modified AJsubmitEditRequest: left off [] after $reqsets when setting name of server reservation",VCL-780
4c790ca373a4959b819d46450e50ce64a5082357,,,1,['web/.ht-inc/authentication.php'],"VCL-664 - hard coded references to ""Local Account""

authentication.php:
-modified submitLogin: added $authtype parameter for call to localLogin
-modified localLogin: added $authtype argument; changed addLoginLog calls to use passed in $authtype for 2nd parameter instead of 'Local' and to use it to get the right affiliationid from the $authMechs array instead of hard coding 'Local Account'; use $authtype as parameter for calling printLoginPageWithSkin instead of hard coding 'Local Account'",VCL-664
8fceb929342431331905e00cc54fd1a1d709517c,,,2,"['web/.ht-inc/states.php', 'web/.ht-inc/vcldocs.php']","VCL-606 - viewdocs interface removal

removed vcldocs.php

states.php:
-removed 'code documentation' which included these states: viewdocs, editdoc, confirmeditdoc, submiteditdoc, confirmdeletedoc, and submitdeletedoc",VCL-606
9daac07d502e3f0afcba6443ea8b24011973fe92,,,3,"['web/.ht-inc/conf-default.php', 'web/.ht-inc/utils.php', 'web/themes/default/page.php']","VCL-593 - Documentation Links on VCL Home Page

conf-default.php:
-changed DOCUMENTATIONURL to https://cwiki.apache.org/confluence/display/VCL/Using+VCL from https://cwiki.apache.org/VCLDOCS/ since the latter is way out of date
-added NOAUTH_HOMENAV define and array

utils.php: added getUsingVCL

themes/default/page.php: now set charset of Content-Type to utf-8 for all locales instead of just non-English ones; added printing of NOAUTH_HOMENAV links if not authed and NOAUTH_HOMENAV is set to 1",VCL-593
b4fca8ea53b2cc5f2ca67392560c8c3dcc91fcdd,,,1,['web/.ht-inc/xmlrpcWrappers.php'],"VCL-178 - enable checkuser flag for per reservation instead of image only

xmlrpcWrappers.php: modified XMLRPCaddRequest and XMLRPCaddRequestWithEnding: added check to verify user has access to set nousercheck flag if it is set to 1",VCL-178
0c044c6632bd0ca68ded9437d6c91b2195399abe,,,3,"['web/.ht-inc/dashboard.php', 'web/.ht-inc/utils.php', 'web/js/dashboard.js']","VCL-531 - additions to dashboard
VCL-773 - Dashboard View Update

dashboard.php:
-modified dashboard: moved blockallocation block to end of left column; added managementnodes block to top of right column
-modified AJupdateDashboard: added call to getManagementNodeData to include management node information with returned data
-modified getNewReservationData and getFailedImagingData: added code to honor selected affiliation
-added getManagementNodeData

utils.php: modified getDojoHTML: added dojox.string.sprintf to dashboard dojo includes

dashboard.js:
-modified updateDashboardCB: added call to clearTimeout for refreshtimer before calling setTimeout for it again, there was a problem where selecting an affiliation would cause lots of refreshes of the data; added call to updateManagementNodes
-modified updateNewReservations: added section for displaying user information
-added updateManagementNodes
-added secToMin
-added secToHour",VCL-531
f11c4f3115c98cd1826123b6ea732ac2ce20a010,,,4,"['web/.ht-inc/requests.php', 'web/.ht-inc/userpreferences.php', 'web/.ht-inc/utils.php', 'web/.ht-inc/xmlrpcWrappers.php']","VCL-253 - Allow users to specify RDP port

xmlrpcWrappers.php: modified XMLRPCgetRequestConnectData: if not using NAT, connectmethod is RDP, and connectmethodport is 3389, set port to user's rdp port instead of connectmethod port

utils.php: modified sendRDPfile: if not using NAT and port is 3389 and user has specified a different RDP port, add the user's RDP port to the 'full address'

userpreferences.php: modified processUserPrefsInput: use 3389 as the default port instead of user's specified port - this allows the user to enter an empty string to get 3389 as the default; added a check that prevents user from changing RDP port if user has active reservations

requests.php: modified AJconnectRequest: if not using NAT, connectmethod is RDP, and connectmethodport is 3389, set port to user's rdp port instead of connectmethod port",VCL-253
3d76595618392e581f6c4aca82ef5aee64bed639,,,1,['web/js/requests.js'],"VCL-780 - combine new reservation and current reservations pages

requests.js: modified editReservationCB: added checks for indefinitelabel and indefiniteradio existing before touching them",VCL-780
5018360ad1ed6e56b534deda9b3bc4579120225a,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm'],"VCL-685
Added subroutines to vSphere_SDK.pm:
_get_view
_find_entity_view
_find_entity_views
_get_service_content

Replaced all direct calls to Vim::* with calls to these subroutines. Most of the previous Vim:: calls were not surrounded with eval blocks. As a result, a process could terminate abruptly. This should prevent that from happening.",VCL-685
556bbd122cacbb502a345441ce7607e2322120f4,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-253 - Allow users to specify RDP port

added rdpport to user table",VCL-253
8e2dd546a96f524415c22b5f854c1f021174ce6e,,,2,"['web/.ht-inc/userpreferences.php', 'web/.ht-inc/utils.php']","VCL-253 - Allow users to specify RDP port

userpreferences.php:
-added RDPPORTERR
-modified userpreferences: changed 'RDP File Preferences' to 'RDP Preferences'; added input for setting rdp port
-modified confirmUserPrefs: changed 'RDP File Preferences' to 'RDP Preferences'; added confirm for rdp port
-modified submitUserPrefs: removed 'if' wrapping call to updateUserPrefs which didn't do anything; added rdpport to data passed to updateUserPrefs
-modified processUserPrefsInput: added rdpport
-modified printUserprefJavascript: if no error for 'personal' section and there is an error for rdpport, print js to show rdpfile section

utils.php:
-modified getUserInfo: added rdpport to returned data
-modified updateUserPrefs: added $rdpport argument and setting rdpport in query",VCL-253
a152623931ca2f307cae9f155abd1f1c53839c8a,,,1,['managementnode/bin/S99vcld.linux'],"VCL-170

accidently commited my local start up script",VCL-170
5a03a5040529ecfa355ba13516aa1da6da94ae89,,,4,"['managementnode/bin/S99vcld.linux', 'managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/Predictive/Level_0.pm', 'managementnode/lib/VCL/Module/Predictive/Level_1.pm']","VCL-170

changed DataStructure to check for exactly 4 values returned from Predictives modules
fixed missing action ""reload"" from Level_0, Level_1 modules 
this was causing noimage to be inserted for reload image

Update Level_0 to explictely return the current image that was previously being used",VCL-170
8813e0dcdf8f7c42c1865cf892cb8aa60dafdc8a,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-178 - enable checkuser flag for per reservation instead of image only

vcl.sql:
-added 'Allow No User Check' user group
-added admin user to be member of 'Allow No User Check' user group

update-vcl.sql:
-added stored procedure AddUserGroup - needed it to be a SP because mysql does not let you select from a table (usergroup) (to get values related to the edit user group) when inserting in that table (usergroup)
-added call to AddUserGroup to add 'Allow No User Check' user group
-added insert to add admin user to be member of 'Allow No User Check' user group",VCL-178
0a77608f6ce197f4f5543bd178190fb7367da89d,,,4,"['web/.ht-inc/requests.php', 'web/.ht-inc/utils.php', 'web/.ht-inc/xmlrpcWrappers.php', 'web/js/requests.js']","VCL-178 - enable checkuser flag for per reservation instead of image only

used method of having a special user group named ""Allow No User Check"" to determine who gets to see the checkbox that disables timeouts for disconnected users

requests.php:
-modified newReservationHTML and AJeditRequest: added $nousercheck and related HTML content
-modified AJnewRequest: added checkuser argument when calling addRequest
-modified AJsubmitEditRequest: handle newnousercheck; reworked how updates are done for serverrequest and request tables
-modified AJconfirmDeleteRequestProduction: changed preg_replace wrap character count from 60 to 48
-modified processRequestInput: added nousercheck


utils.php:
-modified addRequest: added $checkuser as argument and insert to request table
-modified getRequestInfo: added checkuser to returned data

xmlrpcWrappers.php: modified XMLRPCaddRequest and XMLRPCaddRequestWithEnding: added $nousercheck argument

requests.js:
-modified resetNewResDlg: added reset for nousercheck
-modified selectResType: hide/unhide nousercheckspan at proper times
-modified getDeployData and submitEditReservation: added nousercheck to submitted data
-modified hideEditResDlg: destroy newnousercheck",VCL-178
531b1578ae9c444c109e879a2c9118ffefb1b9c0,,,1,['web/.ht-inc/image.php'],"VCL-776 - rework resource code to have a base class for all resources and inheriting classes for each resource type

image.php: modified getRevisionHTML: added preg_replace to wrap lines of warning message when editing an image that is part of an active block allocation",VCL-776
c90a9429a6fd3b0dd1499b9546fa7b6d49a01c5f,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"modified useradd to use -s instead of --shell

some older OS's only understand -s",
e86ef248347ba017934a5d13e752e7ac06cceb83,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-764
Added utils.pm::get_database_names. This will be used by the database updating script.

Made minor formatting changes to utils.pm::setup_* subroutines. These are used by vcld -setup.",VCL-764
deea8336ff07675b44eb483c6e785c2bd864aeb1,,,1,['web/.ht-inc/computer.php'],"VCL-174 - NAT - support for sites that have small IP address ranges

computer.php: modified AJcompNATchange: added check for computers that have active reservations; notify user that those cannot be updated",VCL-174
672f59fc91a9c2675ef89ef8a5b6a73485430340,,,4,"['web/.ht-inc/computer.php', 'web/.ht-inc/requests.php', 'web/.ht-inc/utils.php', 'web/.ht-inc/xmlrpcWrappers.php']","VCL-174 - NAT - support for sites that have small IP address ranges

computer.php: modified validateResourceData: if natenabled or nathostid changed, check for active reservations on the computer; if found, report error that NAT settings cannot be changed during active reservations

requests.php: modified AJconnectRequest: substitute all port information from connectmethodports and natports for each connectmethod

utils.php:
-modified getImageConnectMethodTexts: added connectmethodport data to array of data returned for each connectmethod
-modified getRequestInfo: removed connectport from returned data; modified query to use rh.natIP as connectIP or, if that is NULL, use computer.IPaddress
-added getReservationNATports
-modified sendRDPfile: use connectmethods and natports to determine if a port should be appended to 'full address'

xmlrpcWrappers.php: modified XMLRPCgetRequestConnectData: return port data based on combination of connectmethods connectmethodports, and natports",VCL-174
574f2fb97d49d20aa1973c2704ac4d8b49f27400,,,1,['web/.ht-inc/computer.php'],"VCL-776 - rework resource code to have a base class for all resources and inheriting classes for each resource type

computer.php: modified addEditDialogHTML: changed 'select' for scheduleid to 'selectonly'",VCL-776
d1b7215d76d487a78ed5b878446c2e8a414bc557,,,3,"['managementnode/lib/VCL/Module/Predictive/Level_0.pm', 'managementnode/lib/VCL/Module/Predictive/Level_1.pm', 'managementnode/lib/VCL/Module/Predictive/Level_2.pm']","VCL-170

corrected return values if node is in block allocation",VCL-170
94437c417f7c86726e61695d04020e3a1b1b1352,,,3,"['web/.ht-inc/utils.php', 'web/.ht-inc/vm.php', 'web/js/vm.js']","VCL-636 - Allow vCenter folder to be specified in VM profile

utils.php: modified getVMProfiles: added folderpath

vm.php:
-modified editVMInfo: added Folder Path
-modified AJupdateVMprofileItem: added folderpath

vm.js:
-modified VMHostDataCB: added Folder Path to table created
-modified getVMprofileDataCB: added pfolderpath
-modified delProfile: added Folder Path",VCL-636
1eb696af899c19c613116de4c67204098c7bc886,,,2,"['web/.ht-inc/image.php', 'web/js/resources/image.js']","VCL-776 - rework resource code to have a base class for all resources and inheriting classes for each resource type

image.php: modified AJdeleteRevisions: added DISTINCT to select so each in use revision is only reported once

image.js:
-modified inlineEditResourceCB and resetEditResource: set contents of addeditdlgerrmsg to empty string
-modified deleteRevisionsCB: changed 'deletemsg' to 'addeditdlgerrmsg'",VCL-776
8dcb1e22a196cad226b9a7b33f0e7764c09d4d83,,,1,['mysql/update-vcl.sql'],"VCL-174 - NAT - support for sites that have small IP address ranges

update-vcl.sql: added conditional to WHERE for INSERT IGNORE INTO nathost to skip management nodes with stateid = 1",VCL-174
baebbbfd810787eccb06198b7a5a577ca5b041af,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-174 - NAT - support for sites that have small IP address ranges
VCL-706 - Allow a Connect Method to Specify a Port Range or Port List
VCL-170 - option to power off blades after reservation - new reload module
VCL-636 - Allow vCenter folder to be specified in VM profile
VCL-758 - VCL timings - make various timings to be variables and edited by admin

update-vcl.sql:
-modified DropExistingConstraints, DropExistingIndices, AddUniqueIndex, Add2ColUniqueIndexIfNotExist, and Add3ColUniqueIndexIfNotExist: updated length of several CHAR fields in stored procedures; there were some problems with names getting truncated
-added populateConnectMethodPort - populates connectmethodport, drops connectmethod.port and connectmethod.protocol
-changed ALTER TABLE for computer.predictivemoduleid to AddColumnIfNotExists 
-added connectmethodport table
-added DropColumnIfExists for imagemeta.usergroupid
-added DropColumnIfExists for managementnode.predictivemoduleid
-added nathost table
-added natlog table
-added natmap table
-added natport table
-added DropColumnIfExists for vmhost.vmkernalnic
-added DropColumnIfExists for vmhost.vmwaredisk
-added AddColumnIfNotExists for vmprofile.folderpath
-added 'INSERT IGNORE INTO nathost' to populate nathost table with entries from managementnode table
-added INSERT IGNORE's for connectmethodport
-added INSERT IGNORE's for 'Site Configuration...' entries for usergroupprivtype table

vcl.sql:
-moved managementnode.predictivemoduleid to end of table
-removed connectmethod.port and connectmethod.protocol
-added connectmethodport table
-added nathost table
-added natlog table
-added natmap table
-added natport table
-removed port values from INSERTs for connectmethod table
-added INSERTs for 'Site Configuration...' entries for usergroupprivtype table",VCL-174
decc18cdb8876b466c3be4a8bc3cec887355bcb3,,,4,"['web/.ht-inc/computer.php', 'web/.ht-inc/states.php', 'web/.ht-inc/utils.php', 'web/js/resources/computer.js']","VCL-174 - NAT - support for sites that have small IP address ranges
VCL-780 - combine new reservation and current reservations pages

computer.php:
-modified fieldWidth: added nathost 
-modified fieldDisplayName: added nathost and natenabled fields
-modified extraResourceFilters: added section for changing NAT
-modified addEditDialogHTML, AJsaveResource, validateResourceData, and addResource: added sections for natenabled and nathostid
-modified addResource: $values array for adding multiple computers was missing predictivemoduleid
-added AJcompNATchange
-added AJsubmitCompNATchange

states.php: added AJcompNATchange and AJsubmitCompNATchange to resource section

utils.php:
-modified getComputers: added natenabled and nathostid to returned data
-added getNAThosts

computer.js:
-modified colformatter: added natenabled
-modified addNewResource: added nathostid
-added toggleNAT
-modified inlineEditResourceCB, resetEditResource, saveResource, and saveResourceCB: added natenabled and nathostid
-added confirmNATchange",VCL-174
a1d7a66dc36e7ae036bdf7f441acb75fd6c328f9,,,2,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/utils.pm']","VCL-170

fixed issue with left over references to managementnode.predictivemoduleid",VCL-170
c3e3af3370506ae1c34985a19f7e1af783b16339,,,7,"['web/.ht-inc/computer.php', 'web/.ht-inc/managementnode.php', 'web/.ht-inc/states.php', 'web/.ht-inc/utils.php', 'web/js/resources.js', 'web/js/resources/computer.js', 'web/js/resources/managementnode.js']","VCL-170 - option to power off blades after reservation - new reload module
VCL-780 - combine new reservation and current reservations pages

computer.php:
-modified fieldWidth, fieldDisplayName, addEditDialogHTML, AJsaveResource, validateResourceData, and addResource: added predictive loading module
-modified extraResourceFilters: added section to change predictive loading module; reordered items to be alphabetical
-added AJcompPredictiveModuleChange
-added AJsubmitCompPredictiveModuleChange

managementnode.php: modified fieldWidth, fieldDisplayName, addEditDialogHTML, AJsaveResource, validateResourceData, and addResource: removed predictive loading module

states.php: added AJcompPredictiveModuleChange and AJsubmitCompPredictiveModuleChange to resource section

utils.php:
-modified getManagementNodes: removed predictive loading module
-modified getComputers: added predictive loading module
-modified addSublogEntry: get predictivemoduleid from computer table instead of managementnode table

computer.js:
-modified inlineEditResourceCB, resetEditResource, saveResource, and saveResourceCB: added predictive loading module
-added confirmPredictiveModuleChange

managementnode.js: modified inlineEditResourceCB, resetEditResource, saveResource, and saveResourceCB: removed predictive loading module

resources.js: modified initViewResources: added setTimeout to call resourcegrid.sort - was still seeing times when the data was not properly sorted",VCL-170
f3b5f09414120bfbae14ec21239f6b77049a7da4,,,1,['mysql/vcl.sql'],"VCL-170 - option to power off blades after reservation - new reload module
VCL-5 - multiple web servers

vcl.sql:
-modified managementnode table: removed trailing comma at end of KEY IPaddress line
-modified constraints for semaphore table: added semicolon at end of last ADD CONSTRAINT line",VCL-170
0393189f312f00770f47f96bbe3ad444a4864b38,,,1,['web/.ht-inc/statistics.php'],statistics.php: minor change - moved dividing time by 3600 to when $totalhours is displayed rather than when values are added to it to give a slight performance bump,
2a099a3253bf63bfcb4b4a74c8e034fd642dd38a,,,1,['web/.ht-inc/requests.php'],"VCL-237 - improve wording in error message about extending a reservation to overlap with a concurrently limited image

requests.php: modified AJsubmitEditRequest: updated wording for editing reservations that would cause a concurrent reservation problem",VCL-237
cc8c1d1de9b9a71c56bebe6544d73b257c9d2b39,,,4,"['web/.ht-inc/requests.php', 'web/.ht-inc/resource.php', 'web/js/requests.js', 'web/js/resources/image.js']","VCL-780 - combine new reservation and current reservations pages

requests.php:
-modified AJeditRequest, AJrebootRequest, and AJshowReinstallRequest: extended condition checking for expired reservation to check for expired states in addition to null
-modified AJconfirmDeleteRequest and AJconnectRequest: added section to check for expired reservation by checking expired states

resource.php: modified AJstartImage: added check for reservation being expired

requests.js: modified connectRequestCB and endReservationCB: added check for 'refresh' in data.items, and if it exists and == 1, refreshes the page

image.js: modified startImageCB: added section checking for 'resgone' status response",VCL-780
be778d8723242f0e34ffcbd1a22e9f40b06a8330,,,1,['web/js/resources/computer.js'],"VCL-776 - rework resource code to have a base class for all resources and inheriting classes for each resource type

computer.js: modified applyExtraFilters: fixed problem where selecting something with parenthesis in it resulted in nothing being displayed; added extra check to not use RegExp for value == inuse to also require the field to be 'state'",VCL-776
55f5c0b0087aec42cef070d31596464f8cb733c1,,,9,"['web/.ht-inc/resource.php', 'web/.ht-inc/utils.php', 'web/css/vcl.css', 'web/js/resources.js', 'web/js/resources/computer.js', 'web/js/resources/config.js', 'web/js/resources/image.js', 'web/js/resources/managementnode.js', 'web/js/resources/schedule.js']","VCL-776 - rework resource code to have a base class for all resources and inheriting classes for each resource type

added functionality to track which fields for a resource a users has selected to be displayed; stored in browser cookie

resource.php:
-modified viewResources: added check for $_COOKIE[type . selfields] that tracks which fields have been selected to be displayed; also pass array generated from that to addDisplayCheckboxes
-modified addDisplayCheckboxes: determine if checkbox should be checked or not based on content of $selfields

resources.js:
-added this.restype to class definition
-modified toggleResFieldDisplay - added call to this.updateFieldCookie
-added updateFieldCookie - tracks selected fields in a cookie

schedule.js: added definition for Schedule class so that we can set this.restype to 'schedule'

managementnode.js: added this.restype to class definition

config.js: added definition for config class

image.js: added this.restype to class definition

computer.js:
-added this.restype to class definition
-modified toggleResFieldDisplay - added call to this.updateFieldCookie

vcl.css: changed widths for computerdlgcontent label and .labeledform

utils.php:
-modified abort: added calls to error_log so that errors will also be logged to the php error log; makes it easier for people to debug errors that are sent back to a browser but not displayed
-modified getDojoHTML: added dojo.cookie to requires for viewResources",VCL-776
60933f76ac72c4afcffd31d6c220f5c9636d580a,,,2,"['web/.ht-inc/computer.php', 'web/.ht-inc/managementnode.php']",removed one error_log line left over from debugging,
aa2421bec52a599ef011955b35cf60c83a49a5f3,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-5 - multiple web servers
VCL-584 - Extend features of Server loads

vcl.sql, update-vcl.sql:
-added availablenetworks to managementnode table
-added semaphore table",VCL-5
9c56459a8a46f195916aee739ca2af1d89e09d9f,,,1,['web/.ht-inc/utils.php'],utils.php: modified abort: added global flag to prevent a loop where something in the abort function causes abort to get called,
a4f77094a05fa9d6367dc1d9043bf20fbb3a7cc6,,,1,['mysql/update-vcl.sql'],"VCL-170

alters computer table, adds predictive module
adds Level_2 module to module table",VCL-170
063484a409b47e04727ce3f487642c87cc34cdca,,,2,"['web/.ht-inc/requests.php', 'web/js/requests.js']","VCL-780 - combine new reservation and current reservations pages

requests.php: modified newReservationHTML: fixed placement of two <br> tags

requests.js: modified selectResType: added check for dojo.byId('endduration') existing before setting it to checked",VCL-780
83eb436a6a6477870cbda0900b9fdb4a4ff84fad,,,5,"['web/.ht-inc/computer.php', 'web/.ht-inc/managementnode.php', 'web/.ht-inc/resource.php', 'web/.ht-inc/utils.php', 'web/js/resources/computer.js']","VCL-776 - rework resource code to have a base class for all resources and inheriting classes for each resource type

added code to handle widths of resource tables better

computer.php:
- added fieldWidth
- modified extraResourceFilters: set autoComplete to false for reloadimageid select object; having it on caused problems when typing in the box to filter the results

managementnode.php: added fieldWidth

resource.php:
- modified viewResources: added extra check for user agent including 'trident' to catch IE11 so that grid widths are specified in px instead of em; removed unused values from $w array; make a call to $this->fieldWidth to get the width for grid cells after name and owner
- added fieldWidth

utils.php: modified getComputers: return image.prettyname for nextimg instead of image.name

computer.js:
- modified buldExtraFilters: added formatter function for comboboxes so that bool fields can show the right values to select from; there is still a problem in that once selected, the 0 or 1 gets displayed in the box instead of false/true; updated how width of comboboxes is set to handle widths specified in px differently from those specified in em
- added cbformatter",VCL-776
6c72785b6dcac0e22429bd12dda6f6132478ae7e,,,1,['mysql/vcl.sql'],"VCL-170

added predictive reload module Level_2
moved predictive reload module from managementnode table to computer table",VCL-170
e51cc01885f95605e9c4a1d95fa888fcfc76b5e2,,,13,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/Predictive/Level_0.pm', 'managementnode/lib/VCL/Module/Predictive/Level_1.pm', 'managementnode/lib/VCL/Module/Predictive/Level_2.pm', 'managementnode/lib/VCL/Module/Provisioning/Lab.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/libvirt.pm', 'managementnode/lib/VCL/Module/Provisioning/one.pm', 'managementnode/lib/VCL/Module/Provisioning/openstack.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/reclaim.pm', 'managementnode/lib/VCL/utils.pm']","VCL-170

Created Level_2 module
added unload routine to all active provisioning modules
updated new.pm to not always set the nextimageid, not sure why it was setting it
extended predictive reload modules return array to contain an action (reload/unload).
moved predictive reload info from management node to each individual computer
Updated Datastructure to pull predictive module info from computer section.",VCL-170
8f0f8a6519cf24c6cc3775a998f3e19d63e37102,,,1,['web/.ht-inc/vm.php'],fixed some indentations,
83a519361c10cfb39ebb7c890bafc6c4f45d661c,,,2,"['web/.ht-inc/utils.php', 'web/js/resources.js']","VCL-776 - rework resource code to have a base class for all resources and inheriting classes for each resource type

utils.php: modified getDojoHTML: added setTimeout to call initViewResources for viewResources mode
resources.js: added initViewResources",VCL-776
e4a53974ffd7cd5946f57b07705aebdae9ecb166,,,2,"['web/.ht-inc/requests.php', 'web/js/requests.js']","VCL-780 - combine new reservation and current reservations pages

requests.php:
- modified printImageDescription: added preg_replace to wrap text at 60 characters
- modified processRequestInput: commented out processing configs

requests.js: modified validateDeployInputs: check for endat being defined before checking its value",VCL-780
547d28ebe28bd30bfc7d7562c0e023c931eae21d,,,4,"['web/.ht-inc/siteconfig.php', 'web/.ht-inc/states.php', 'web/.ht-inc/utils.php', 'web/js/siteconfig.js']","VCL-758 - VCL timings - make various timings to be variables and edited by admin 

siteconfig.php:
(forgot to finish this before initial commit)
- added some checks for user having proper permissions before displaying anything
- added time source variables
- created a TimeVariable class to provide core functionality for each timing variable; contains these functions:
  - getHTML
  - AJaddAffiliationSetting
  - AJupdateAllSettings
  - AJdeleteAffiliationSetting
- added these inheriting classes based on TimeVariable:
  - connectedUserCheck
  - acknowledge
  - connect
  - reconnect
  - generalInuse
  - serverInuse
  - clusterInuse
  - generalEndNotice1
  - generalEndNotice2

states.php:
- added these states: AJupdateAllSettings, AJdeleteAffiliationSetting, AJaddAffiliationSetting
- added new section to $actions: classmapping - this maps a class name to a php file that should be included to implement a class object (without the .php part)

utils.php: modified __autoload: check $actions['classmapping'] for what file to include, if found include it and return

siteconfig.js:
(forgot to finish this before initial commit)
- modified generalSiteConfigCB to handle calling an extra CB function specified in returned data
- created a TimeVariable class to provide core functionality for each timing variable; contains these functions:
  - addAffiliationSetting
  - addAffiliationSettingCBextra
  - saveSettings
  - deleteAffiliationSetting
  - deleteAffiliationSettingCBextra
- added these inheriting classes based on TimeVariable:
  - connectedUserCheck
  - acknowledge
  - connect
  - reconnect
  - generalInuse
  - serverInuse
  - clusterInuse
  - generalEndNotice1
  - generalEndNotice2",VCL-758
418e6259596bf06ab0cb521a2ee28cf26e534b4e,,,2,"['managementnode/lib/VCL/Module/Predictive/Level_0.pm', 'managementnode/lib/VCL/Module/Predictive/Level_1.pm']",Cleaned up indentation and formatting in Level_0.pm and Level_1.pm.,
271e844e0a940352ed450dc6455e48ffe341e778,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm'],"VCL-685
Fixed typo in VIM_SSH.pm::_services_restart.",VCL-685
9c8666cbe6426ef4309896527706d4680612341a,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-782
Added condition to utils.pm::update_request_state to check if request was deleted when an unexpected state is encountered.",VCL-782
641de708f92421039247c11a5784b85afe5c54e9,,,3,"['managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm']","VCL-685

Updated VIM_SSH.pm::_services_restart and _check_service_pid. Occasionally '1' was returned as the PID of a service and the code had been writing this to the .pid file. This caused problems. Added a check for a valid value. Added additional services to check. 

Updated VMware.pm::is_vm_registered to accept datastore formatted paths.

Updated VMware.pm::delete_vm to remove the VM's parent directory if it was named after the VM.

Added VIM_SSH.pm::vm_suspend for a script I wrote to migrate VMs. This subroutine may be used at some point in the future.

Updated VMware.pm::get_datastore_info to strip away the leading 'ds://' in the vmdk's URL if it was present. This allows paths containing the URL to be used.

Updated vSphere_SDK.pm::copy_virtual_disk to delete the source VM it creates during a cloning operation if the clone fails.

VCL-724
Added VMware.pm::check_multiextent and vSphere_SDK.pm::is_multiextent_disabled. These are called by the copy/move_vmdk subroutines to detect if a 2gbsparse vmdk operation fails because multiextent is not enabled on the host.",VCL-685
257f173ccc1d7e28add6c951d832af2fe337fc69,,,1,['web/.ht-inc/utils.php'],"VCL-140 - General variable table

utils.php: updated require_once for spyc to use path for spyc 0.5.1",VCL-140
6cf951121638ffdf67e04a738b8a51c898f64288,,,1,['web/js/requests.js'],"VCL-780 - combine new reservation and current reservations pages

requests.js: modified selectResType: added to conditional that shows server profile list for server reservations that keeps it hidden if the only item in the server profile store is the ""New Profile"" item",VCL-780
d9b840160af42755f57e67c509b47755ee13cb72,,,1,['web/.ht-inc/serverprofiles.php'],serverprofiles.php: modified processProfileInput: changed conditional for validating dns to check for fixedIP != 'NULL' since it is now being set to 'NULL' further above if it == '',
efac42f45e56f59d1dab19771c58dac1c83ac647,,,1,['web/.ht-inc/utils.php'],"VCL-776 - rework resource code to have a base class for all resources and inheriting classes for each resource type

utils.php: modified getContinuationVar: added check for $contdata[$name] being an object to prevent php trying to convert an object to an int to compare with 'zero'",VCL-776
e786746a8dbc7a13eb41c1f85a552b9bdece017b,,,1,['web/themes/default/css/vcl.css'],"VCL-776 - rework resource code to have a base class for all resources and inheriting classes for each resource type

removed background setting from '.default #content table' so that selected rows on the view computer profiles page will be highlighted",VCL-776
d0f90181d604bff865485b3afbc3da408a31f640,,,1,['web/.ht-inc/blockallocations.php'],"VCL-776 - rework resource code to have a base class for all resources and inheriting classes for each resource type

blockallocations.php: made a change to getImages when doing the new resource code that returns maxconcurrent as 0 if it is NULL in the database; modified processBlockAllocationInput to not do concurrent check if maxconcurrent is 0",VCL-776
cebd883266b2a07dd0ce64fb5f86fb4b197c3dfb,,,1,['web/.ht-inc/conf-default.php'],"VCL-5 - multiple web servers

conf-default.php: missed adding SEMTIMEOUT previously",VCL-5
6dcb5396d0f68ce4df38eab2d5c692415cde8c55,,,1,['web/js/newresservercommon.js'],"VCL-776 - rework resource code to have a base class for all resources and inheriting classes for each resource type

forgot to add this file with the previous commit",VCL-776
2806c69b4de878ffe0390f71b89848618f2dc451,,,52,"['web/.ht-inc/authentication.php', 'web/.ht-inc/authmethods/ldapauth.php', 'web/.ht-inc/authmethods/shibauth.php', 'web/.ht-inc/blockallocations.php', 'web/.ht-inc/computer.php', 'web/.ht-inc/computers.php', 'web/.ht-inc/conf-default.php', 'web/.ht-inc/config.php', 'web/.ht-inc/dashboard.php', 'web/.ht-inc/errors.php', 'web/.ht-inc/groups.php', 'web/.ht-inc/image.php', 'web/.ht-inc/images.php', 'web/.ht-inc/managementnode.php', 'web/.ht-inc/managementnodes.php', 'web/.ht-inc/privileges.php', 'web/.ht-inc/requests.php', 'web/.ht-inc/resource.php', 'web/.ht-inc/schedule.php', 'web/.ht-inc/schedules.php', 'web/.ht-inc/serverprofiles.php', 'web/.ht-inc/siteconfig.php', 'web/.ht-inc/sitemaintenance.php', 'web/.ht-inc/states.php', 'web/.ht-inc/statistics.php', 'web/.ht-inc/storebackend.php', 'web/.ht-inc/userpreferences.php', 'web/.ht-inc/utils.php', 'web/.ht-inc/vm.php', 'web/.ht-inc/xmlrpcWrappers.php', 'web/css/vcl.css', 'web/index.php', 'web/js/blockallocations.js', 'web/js/code.js', 'web/js/computers.js', 'web/js/dashboard.js', 'web/js/images.js', 'web/js/managementnodes.js', 'web/js/privileges.js', 'web/js/requests.js', 'web/js/resources.js', 'web/js/resources/computer.js', 'web/js/resources/config.js', 'web/js/resources/image.js', 'web/js/resources/managementnode.js', 'web/js/resources/schedule.js', 'web/js/schedules.js', 'web/js/serverprofiles.js', 'web/js/siteconfig.js', 'web/js/sitemaintenance.js', 'web/js/statistics.js', 'web/js/vm.js']","VCL-5 - multiple web servers
VCL-552 - create an easy way to view deleted computers
VCL-555 - need a way to give users access to add management nodes
VCL-559 - convert pages with large tables to use dojo datagrids
VCL-568 - refresh current reservations page 15 minutes after a reservation becomes available
VCL-584 - Extend features of Server loads - only added specify IP address and offline capture
VCL-592 - honor user preference to only show user groups matching user's affiliation on server profile pages
VCL-669 - ssh identity keys for end-users
VCL-673 - imaging reservation for an image with subimages prompts for revisions for each subimage
VCL-690 - There is no default selection on Manage computer
VCL-694 - problem with conditional in editOrAddComputer - $data['compid'] can be used when adding a computer
VCL-730 - cannot update image revision comments under Edit Image
VCL-733 - editing a block allocation recreates past block time entries
VCL-741 - a tomaintenance reservation can be created right after another tomaintenance reservation
VCL-742 - server reservations cannot be modified if they cannot be extended
VCL-776 - rework resource code to have a base class for all resources and inheriting classes for each resource type
VCL-778 - add graph for seeing historical usage of block allocations
VCL-779 - add method to dashboard for restarting failed imaging reservations

(sorry for the massive commit)

added resource.php, computer.php, config.php, image.php, managementnode.php, schedule.php, and storebackend.php: these are a rewrite of how resources are handled. resource.php is a base class with basic functionality common to all resources. the other files are inheriting classes that implement things specific to each resource
removed computers.php, images.php, managementnodes.php, and schedules.php: these are the older files that handled managing resources are replaced by the files above
added siteconfig.php

authentication.php: changed call to semUnlock to cleanSemaphore

ldapauth.php:
-modified validateLDAPUser: added test to see if ldap server is responding using fsockopen so that there is a faster response for offline servers
-modified updateLDAPUser: added extra check for getting user data from database when uid in db is NULL, auth method provides a numericid, and unityid and affiliationid match an entry in db
-modified updateLDAPUser: get usepublickeys and sshpublickeys from user table

shibauth.php: modified updateShibGroups: changed $groups argument to allow for optional 2nd case of passing an array with a single entry with a key of 'shibaffil' and a value that matches the shibname entry from the affiliation table. in this case, the user is simply added to a single group named ""All <affil name> users"" where <affil name> is the name value from the affiliation table

blockallocations.php:
-modified createListBlockData: fixed recreating old time slots when editing an allocation
-modified getCurrentBlockHTML: added link to show historical usage of block allocation and dijit dialog for displaying it
-added AJviewBlockAllocationUsage

conf-default.php:
-added MAXINITIALIMAGINGTIME
-added MAXSUBIMAGES

dashboard.php:
-added section for seeing failed imaging reservations if user has global view dashboard permission; allows an admin to easily restart an imaging reservation after fixing whatever caused it to fail
-added ""in use"" computers to current status section
-changed ""Loading Reservations"" to ""Notable Reservations"" and included any reservations that have started to be loaded that have a start time within the next hour to handle showing preloading reservations

errors.php:
-added error code 400 for reporting semaphore expiration problem which would be caused by a really sluggish web server
-modified errorHandler to use new semaphore calls

groups.php:
-modified check for blockRequest table to only check for user group usage if block status is requested or accepted. removed check in imagemeta table (not sure why that was there, not currently a usergroupid field in imagemeta table)
-modified submitDeleteGroup - added query to update blockrequests to set groupid to 0 if deleting the selected user group

privileges.php:
-modified userLookup: added IP address assigned to node to reservation history. added list of current reservations
-modified jsonGetUserGroupMembers - allow users with Manage Federated User Groups to see user group membership for federated groups
-modified jsonGetResourceGroupMembers - no longer include deleted images and computers in list

requests.php:
-large rewrite to combine ""New Reservations"" and ""Current Reservations"" pages into a single, more dynamic page
-updated to use new semaphore code
-updated calls to isAvailable to include $holdcomps argument
-moved making server reservations from serverprofiles.php to here
-added option to keep reservation and create image
-fixed bug where user was prompted for image revisions for every subimage assigned to an image when making an imaging reservation
-fixed bug where all user group showed up in server reservation selection of admin and access user groups even when user preference to only see groups matching user's affiliation was set
-modifed places where string of text is wrapped at 50 characters to wrap at end of line in addition to space and newline

serverprofiles.php:
-moved deploy code to requests.php
-modified manageProfilesHTML: added netmask, router, and dns servers to go along with fixedIP and a boxed area around fixedIP fields
-modified AJserverProfileData, AJsaveServerProfile, and procesProfileInput: include netmask, router, and dns
-moved getServerProfiles and getServerProfileImages to utils.php
-added AJfetchRouterDNS

sitemaintenance.php: modifed places where string of text is wrapped at 50 characters to wrap at end of line in addition to space and newline

states.php:
-added to entry array: resource, config, image, computer, managementnode, schedule, RESTresourceBasic, RESTresourceDetail, siteconfig
-removed from entry array: newRequest, selectImageOption, viewSchedules, selectComputers, selectMgmtnodeOption, imageClickThrough
-added to noHTMLwrappers array: AJnewRequest, AJfilterCompGroups, AJfetchRouterDNS, AJviewBlockAllocationUsage, AJrestartImageCapture, jsonResourceStore, AJpromptToggleDeleteResource, AJsubmitToggleDeleteResource, AJsaveResource, AJeditResource, jsonResourceGroupingGroups, AJaddRemGroupResource, AJaddRemResourceGroup, jsonResourceGroupingResources, jsonResourceMappingMapToGroups, AJaddRemMapToGroup, jsonResourceMappingGroups, AJaddRemGroupMapTo, jsonConfigMapStore, AJeditConfigMapping, AJsaveConfigMapping, AJdeleteConfigMapping, AJsubmitDeleteConfigMapping, AJconfigSystem, RESTresourceBasic, RESTresourceDetail, AJstartImage, AJupdateImage, AJupdateTimeSource, AJreloadComputers, AJsubmitReloadComputers, AJdeleteComputers, AJsubmitDeleteComputers, AJcompScheduleChange, AJsubmitCompScheduleChange, AJgenerateDHCPdata, AJhostsData, AJcompStateChange, AJcompProvisioningChange, AJsubmitCompProvisioningChange, AJsubmitCompStateChange, AJsubmitComputerStateLater, AJconnectRequest
-removed from noHTMLwrappers: submitRequest, submitTestProd, AJupdateImage, jsonImageGroupingImages, jsonImageGroupingGroups, jsonImageMapCompGroups, jsonImageMapImgGroups, AJaddImageToGroup, AJremImageFromGroup, AJaddGroupToImage, AJremGroupFromImage, imageGroupingGrid, AJaddCompGrpToImgGrp, AJremCompGrpFromImgGrp, AJaddImgGrpToCompGrp, AJremImgGrpFromCompGrp, imageMappingGrid, jsonCompGroupingComps, jsonCompGroupingGroups, compGroupingGrid, AJaddCompToGroup, AJremCompFromGroup, AJaddGroupToComp, AJremGroupFromComp, generateDHCP, AJgetScheduleTimesData, AJsaveScheduleTimes, AJdeployServer, AJgenerateUtilData, submitEdit
-combined newReservations and viewRequests into reservations section
-removed manageImages, manageSchedules, manageComputers, and managementNodes sections
-added siteconfig, resource, and storebackend sections

statistics.php: modified to have load time counts for <2 min, 2-6 min, 6-8min, >8 min

userpreferences.php: added input and validation of public key fields to general preferences

utils.php:
-changed how semaphores are handled as described in http://mail-archives.apache.org/mod_mbox/vcl-dev/201307.mbox/%3C2232243.J55CAxcd2y@treebeard%3E
-removed modes that are no longer used due to changing resources to be class based
-added 'variables' to the session cache
-modified doQuery: skip recording 'UPDATE continuations SET expiretime ...' queries in the queryLog; added a loop around actually doing the query that checks for mysql error 1213 9deadlock) that makes a few more attempts if encountered
-modified getOSList: added installtype to returned data
-modified getImages: added deleted and datedeleted to image revision data; added ostypeid and ostype to image data; include maxconcurrent, checkuser, and rootaccess for all images
-moved getServerProfiles and getServerProfileImages here from serverprofiles.php
-modified getImageConnectMethods and getProductionRevisionid: added extra argument $nostatic that, if true, will get the data from the db again even if it had already been retrieved
-modified getUserResources: if managementnodeAdmin is in $userprivs, also add mgmtnodeAdmin; remove noimage from returned data
-modified addOwnedResources and getResourcesFromGroups: changed series of if/elseif to switch statement
-modified getUserInfo: added usepublickeys and sshpublickeys to returned data
-modified getOverallUserPrivs: if mgmtNodeAdmin in $privileges, add managementnodeAdmin
-modified isAvailable: added $holdcomps argument that is then passed to allocComputer to get insert a semaphore in the database for allocated computers; added ipwarning to $requestInfo that records if there may be a possible IP conflict with requested fixed IP at deploy time for future reservations; if $imagerevisionid is not an array, make it in to one; instead of returning values directly, return them through debugIsAvailable to allow for debugging what isAvailable is return unavailable; added code to check for requested fixedIP being in use on a management node; added code to prevent block allocations from counting toward max concurrent usage of an image for users that are part of the group specified for the block allocation; added code to ensure a management node is able to configure a node with specified fixedIP; added checks part way through that goes ahead and returns 0 if no computers are available so that later unnecessary parts are not run; changed how VMs are ordered when selecting from VMhostCheck temp table; added extra block that checks for use of requested fixed IP address
-added debugIsAvailable - function that provides a way for admins to debug why isAvailable is returning that the requested image is not available
-modified allocComputer: include calls to getSemaphore to hold computers for later scheduling
-added getSemaphore: adds entry to semaphore table to hold computer briefly so that other web server processes will not book the computer
-added retryGetSemaphore: function that loops through a few tries calling getSemaphore; useful when needing to do something with a specific computer
-modified addRequest: moved insertion of entry into changelog to much later in function; changed insert into reservation table to be an insert using a select from the semaphore table
-modified updateRequest: added ""LIMIT 1"" to query that updates reservation entry to fix a bug that causes strange behavior with cluster reservations
-modified deleteRequest: added code to delete any fixedIPsr* entries from the variable table for related server reservations
-modified moveReservationsOffComputer: calls to isAvailable result in computers being semaphore locked; calls to this function now need to call cleanSemaphore after calling this function
-added moveReservationsOffVMs
-modified getCompFinalReservationTime: added argument to allow passing an additional set of request states to ignore
-added getCompFinalVMReservationTime
-added getExistingChageStateStartTime
-added updateExistingToState
-added getProvisioningtypes
-modified getManagementNodes: added $includedeleted and $id arguments to make similar to other resources; added block to get timesource data from variable table
-added getMnsFromImage
-added checkAvailableNetworks
-modified findAvailableTimes: added linking in provisioningOSinstalltype to better limit which computers can be returned
-modified getComputers: changed returned name of currently loaded image to be prettyname instead of name; added vmhostcomputerid to returned data
-changed printSelectInput to selectInputHTML that returns a string of HTML instead of printing it; changed printSelectInput to be a wrapper that calls selectInputHTML and prints the returned string
-added selectInputAutoDigitHTML - determines if filtering select or regular dijit select should be used and calls selectInputHTML with appropriate arguments
-added labeledFormItem
-added dijitButton
-modified requestIsReady: removed currentstateid == 24 && computer stateid == 8
-modified sendRDPfile: when sending Administrator as the username check that OStype is windows in addition to being an imaging reservation
-added getResourceGroupName
-added getConfigTypes, getConfigDataTypes, getConfigMapTypes, getMappedConfigs, getMappedSubConfigs, getImageConfigVariables, getConfigClusters, getConfigClustersRec, and getConfigSubimages
-added getOStypes
-modified compareDashedNumbers: commented out returning based on difference in domains
-modified timeToNextReservation: updated to handle clusters better
-removed semLock and semUnlock
-added cleanSemaphore
-modified addContinuationsEntry: if HTTP_USER_AGENT exists in $_SERVER, include it in md5 for continuation id
-added getVariable, getVariablesRegex, setVariable, and deleteVariable
-added validateIPv4addr
-added validateEmailAddress
-modified xmlRPCabort: added mysql error number to returned error data
-added helpIcon
-added helpTooltip
-modified sendJSON: added $REST argument that causes to send only output of json_encode instead of wrapping it
-modified menulistLI: updated to handle resource classes
-modified getNavMenu: collapsed ""New Reservation"" and ""Current Reservations"" and updated for new resource classes; added Site Configuration section
-modified getDojoHTML: removed old modes and added new modes to match resource class modes; added sections for siteconfig

vm.php:
-modified editVMInfo: added sorting of profiles
-modified updateVMlimit: removed redundant javascript alert when user does not have access to manage host
-modified AJvmFromHost: updated to use new semaphore code

xmlrpcWrappers.php:
-updated calls to isAvailable to include holdcomps argument
-modified XMLRPCdeployServer: changed to require serverCheckOut permission instead of serverProfileAdmin
-modified XMLRPCgetRequestIds: added 'admin' to returned data which is if the user is an admin of a server reservation or not
-modified XMLRPCextendRequest and XMLRPCsetRequestEnding: use new semaphore code
-modified XMLRCPautoCapture: use new image resource code
-modified XMLRCPaddNode: fixed bug where $tmp was checked for being NULL instead of $nodeInfo
-modified XMLRCPaddUserGroupPriv: fixed a few bugs
-modified XMLRCPeditUserGroup: fixed a bug in a query where a comma was missing
-modified XMLRPCprocessBlockTime: USE NEW SEMAPHORE CODE





vcl.css:
-added html and body sections that set width and height to 100%
-added ready and wait classes that set the font color
-added gridcontainer table th, gridcontainer table td, extrafiltersdiv table th, extrafiltersdiv table td to section that sets font size to 1em
-added .editmntable, #deployprofilediv table, #serverprofiledata table
-added .boxedtablerows
-added #systemconfigdiv .dojoxMultiSelectSelectedOption, #groupbyresourcediv .dojoxMultiSelectSelectedOption, #groupbygroupdiv .dojoxMultiSelectSelectedOption, #mapbyresgroupdiv .dojoxMultiSelectSelectedOption, #mapbymaptogroupdiv .dojoxMultiSelectSelectedOption
-added #systemconfigdiv .dojoxGridHeader, #groupbyresourcediv .dojoxGridHeader, #groupbygroupdiv .dojoxGridHeader, #mapbyresgroupdiv .dojoxGridHeader, #mapbymaptogroupdiv .dojoxGridHeader, #configvariablegriddiv .dojoxGridHeader
-added #systemconfigdiv .dojoxGrid, #groupbyresourcediv .dojoxGrid, #groupbygroupdiv .dojoxGrid, #mapbyresgroupdiv .dojoxGrid, #mapbymaptogroupdiv .dojoxGrid, #subimagegriddiv .dojoxGrid, #configvariablegriddiv .dojoxGrid
-added #systemconfigdiv .dojoxGridRow, #systemconfigdiv .dojoxGridRowOdd, #groupbyresourcediv .dojoxGridRow, #groupbyresourcediv .dojoxGridRowOdd, #groupbygroupdiv .dojoxGridRow, #groupbygroupdiv .dojoxGridRowOdd, #mapbyresgroupdiv .dojoxGridRow, #mapbyresgroupdiv .dojoxGridRowOdd, #mapbymaptogroupdiv .dojoxGridRow, #mapbymaptogroupdiv .dojoxGridRowOdd, #subimagegriddiv .dojoxGridRow, #subimagegriddiv .dojoxGridRowOdd, #configvariablegriddiv .dojoxGridRow, #configvariablegriddiv .dojoxGridRowOdd
-added #content #systemconfigdiv table, #content #groupbyresourcediv table, #content #groupbygroupdiv table, #content #mapbyresgroupdiv table, #content #mapbymaptogroupdiv table, #content #subimagegriddiv table, #content #configvariablegriddiv table
-added #systemconfigdiv .dojoxGridRowSelected, #groupbyresourcediv .dojoxGridRowSelected, #groupbygroupdiv .dojoxGridRowSelected, #mapbyresgroupdiv .dojoxGridRowSelected, #mapbymaptogroupdiv .dojoxGridRowSelected, #subimagegriddiv .dojoxGridRowSelected, #configvariablegriddiv .dojoxGridRowSelected
-added #systemconfigdiv .dojoxGridRowSelected td, #groupbyresourcediv .dojoxGridRowSelected td, #groupbygroupdiv .dojoxGridRowSelected td, #mapbyresgroupdiv .dojoxGridRowSelected td, #mapbymaptogroupdiv .dojoxGridRowSelected td, #subimagegriddiv .dojoxGridRowSelected td, #configvariablegriddiv .dojoxGridRowSelected td
-added #systemconfigdiv .dojoxGridCell, #systemconfigdiv .dojoxGridCellFocus, #systemconfigdiv .dojoxGridCellOver, #groupbyresourcediv .dojoxGridCell, #groupbyresourcediv .dojoxGridCellFocus, #groupbyresourcediv .dojoxGridCellOver, #groupbygroupdiv .dojoxGridCell, #groupbygroupdiv .dojoxGridCellFocus, #groupbygroupdiv .dojoxGridCellOver, #mapbyresgroupdiv .dojoxGridCell, #mapbyresgroupdiv .dojoxGridCellFocus, #mapbyresgroupdiv .dojoxGridCellOver, #mapbymaptogroupdiv .dojoxGridCell, #mapbymaptogroupdiv .dojoxGridCellFocus, #mapbymaptogroupdiv .dojoxGridCellOver, #subimagegriddiv .dojoxGridCell, #subimagegriddiv .dojoxGridCellFocus, #subimagegriddiv .dojoxGridCellOver, #configvariablegriddiv .dojoxGridCell, #configvariablegriddiv .dojoxGridCellFocus, #configvariablegriddiv .dojoxGridCellOver
-added #systemconfigdiv .dojoxMultiSelectItemBox, #groupbyresourcediv .dojoxMultiSelectItemBox, #groupbygroupdiv .dojoxMultiSelectItemBox, #mapbyresgroupdiv .dojoxMultiSelectItemBox, #mapbymaptogroupdiv .dojoxMultiSelectItemBox, #subimagegriddiv .dojoxMultiSelectItemBox, #configvariablegriddiv .dojoxMultiSelectItemBox
-added #addeditdlgcontent label, #newreslabelfields label
-added #newreslabelfields label
-added #addeditdlgcontent .labeledform
-added #advancedoptions .labeledform
-added #mgmtnodedlgcontent label
-added #mgmtnodedlgcontent .labeledform
-added #computerdlgcontent label
-added #computerdlgcontent .labeledform
-added #advancedoptions label
-added #cfgvartypelbl
-added #addeditdlgcontent .labeledforminnerlabel
-added #newreslabelfields .labeledform
-added #configvariables
-added .strikethrough
-added #nrfixedipdiv
-added .boxedoptions
-added #imageRevisionDlg .dijitDialogPaneContent
-added .disabledlabel





index.php:
-updated $VCLversion
-changed to use cleanSemaphore instead of semUnlock
-modified how $actionFunction is called to check if in a continuation and there is an object in it if the specified function does not exist globally, then call the object's function if it exists there





in javascript files, moved RPCwrapper to code.js from all other files to centralize it

added resources.js, resources/computer.js, resources/config.js, resources/image.js, resources/managementnode.js, and resources/schedule.js: these are part of a rewrite of how resources are handled; resources.js handles things common to all resources; the other files handle things specific to each resource type
removed computers.js, images.js, managementnodes.js, and schedules.js which are replaced by the above files
added siteconfig.js

blockallocations.js: added viewBlockUsage and viewBlockUsageCB

code.js:
-moved RPCwrapper from all other files to here
-modified RPCwrapper to call returnCheck as the load function if dojson specified and do not actually handle returned content as json
-added returnCheck - trys to decode returned data as json, if fails, notifies user of error, if succeeds, calls the passed in callback function
-changed genericCB to generalCB
-modified setLoading and unsetLoading to use dijit.byId instead of dojo.widget.byId
-removed checkAllCompUtils
-removed uncheckAllCompUtils
-removed reloadComputerSubmit
-removed compStateChangeSubmit
-removed compScheduleChangeSubmit
-removed toggleRowSelect
-removed toggleColSelect
-added resizeRecenterDijitDialog
-added checkValidatedObj
-added resetSelect

dashboard.js:
-modified updateDashboardCB: added variable to track refresh timeout; added call to updateFailedImaging
-modified updateTopFailed: updated to include separate counts for user fails and reload fails
-added updateFailedImaging
-added restartImagingCB

privileges.js: modified submitAddUserGroup: fixed bug where cascade was not getting submitted

requests.js:
-large rewrite to combine ""New Reservations"" and ""Current Reservations"" pages into a single, more dynamic page
-added global variables: waittimetimeout, durationchanged, initialimageset, resconfigmapid, revisiongrids, waittimeobj, waittimeh, profilesstoredata
-added initViewRequests, showNewResDlg, resetNewResDlg, setLastImage, selectResType, checkSelectedInList, setFirstAvailableImage, validateDeployInputs, getDeployData, getConfigData, getImageDescription, durationChange, setEndDuration, resetDeployBtnLabel, configureSystem, configureSystemCB, showConfigureSystem, closeConfigureSystem, subimageSelected, addReservationConfig, configSelected, setApplyConfig, showConfigData, selectConfigVariable, saveSelectedConfig, saveSelectedConfigVar, promptRevisions, promptRevisionsCB, addRevisionSelection, showRevisionDlg, submitNewReservation, submitNewReservationCB, connectRequest, connectRequestCB
-removed useSuggestedEditSlot, showRDPbutton
-moved setStartNow, setStartLater, setEndIndef, and setEndAt from serverprofiles.js to here
-added 30 second timout to several RPCwrapper calls

serverprofiles.php:
-moved code related to deploying to either newresservercommon.js or requests.js
-moved populateProfileStore, populateProfileStoreCB, deployProfileChanged, getServerProfileData, and getServerProfileDataDeployCB to newresservercommon.js
-moved setStartNow, setStartLater, setEndIndef, and setEndAt to requests.js
-uncommented fixedIP stuff
-added code for netmask, router, and dns

sitemaintenance.js: moved RPCwrapper to code.js

statistics.js: added 5 minute timeouts to RPCwrapper calls for graphs",VCL-5
fcbf8252f0a2a8ed60654eeaef8902dbd33bf7d2,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-753

Due to older versions of iptables. We need to added each IP scope as a seperate INPUT rule

This mod, splits the new_scope into an scope array and then builds the commands array.",VCL-753
7f9de387803701b6dd168330ec9841d6c1c3ebe3,,,3,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/utils.pm']","VCL-777
fixed issue with server reinstalls

fixed other minor things - 
check_block requests if end time had pasted the blocktimeid entry was not being removed
changed Critical to warning for attempts to change firewall for port 22",VCL-777
6523e792091de29cb9cb16f8ce3502db58723d3a,,,2,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/reclaim.pm']","VCL-584

fixed issue for statically assign IPaddress were address could get lost
* If the MN is configured for static IP assignment, the original IPaddress needs to be saved
in the variable table and restored once the server reservation is over",VCL-584
fb0e1f6b8181e0e14f49ec4a46a5907ed37d12f9,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-775
Added code to utils.pm::get_request_by_computerid to check if a reservation assigned to the computer was deleted if the request info could not be retrieved.

Other
Added $no_cache argument to call to get_vmhost_info in get_computer_info. Assumption is if $no_cache is passed to get_computer_info, the vmhost info it retrieves should also not be cached.

Added $no_cache argument to get_database_table_columns for testing.",VCL-775
decdf677a3694abf9373c150e38e97671a3f128c,acoburn,acoburn,1,['managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm'],"VCL-774

When using vSphere provisioning, the _get_file_info subroutine is unnecessarily slow (measured in minutes rather than seconds) especially on systems with many VMs (e.g. vCenter clusters). This is due to an overly comprehensive query definition, when in fact only VmDiskFileQuery, FileQuery and FolderFileQuery need to be used.
This commit eliminates the unnecessary query parameters.",VCL-774
ee063420eafb4cb6f8f5f7d3edf789a45753a409,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-698

adding --shell /bin/bash as the default shell for useradd command",VCL-698
440550c020a703889c1c24ee74d037e634d0fb28,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-698

delete_user was failing on a non-critical return value",VCL-698
da5893e026634496d2d939eff2ea1a781e7869c2,,,2,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/inuse.pm']","VCL-684

DataStructure.pm: removed retrieve_user_data


inuse: fixed typo",VCL-684
c57c6fc5f3ebd7324d91137e102855b72b14a2a0,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],fixed typo with chanagepassword routine for standalone user accounts,
16daf8bcfd791443c6c13de2a8fe3b1c470fae43,,,2,"['managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/utils.pm']","VCL-584

added delete_variable to utils:
used to remove variables as needed based on the input var

added method in Linux post_reserve routine to add userdata to the machine.",VCL-584
68e52d8530226932b2585d750a37e735a4d1e3ac,,,1,['managementnode/lib/VCL/Module/OS/Linux/UnixLab.pm'],"VCL-772

leaving node_status in Lab.pm for now as it is handled differently than general images
added get_current_image_info routine, customized to return values pulled from the db instead of from the standalone lab machine",VCL-772
986fa7302e72f5543483c660afae7d82ac738680,,,3,"['managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/inuse.pm', 'managementnode/lib/VCL/utils.pm']","VCL-736

added notify_user_console to Windows module
cleaned up utils, removed notify_via_msg and notify_via_wall routines",VCL-736
ba261ff34b6c2a999d2f1e4b28cc32bc91b7e9da,,,2,"['managementnode/lib/VCL/Module/OS/Linux/UnixLab.pm', 'managementnode/lib/VCL/inuse.pm']","VCL-736

Improvements to notify_user_endtime.",VCL-736
3107501909f00f4ef2a5df32fa7cfc4790a20c36,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm'],"VCL-769
Added VIM_SSH.pm::_check_service_pid. This checks if the contents of a service's PID file matches the parent service process. If they do not match, the PID file is updated. This is done before 'services.sh restart' is called.

Added a semaphore to the _services_restart subroutine so that multiple processes for the same VM host do not attempt to restart the services at the same time.",VCL-769
ca2e56542ba257afea34475da5e3f975a092f59e,,,1,['managementnode/tools/Windows_8/Scripts/sysprep_cmdlines.cmd'],"VCL-770
Set svn properties on tools/Windows_8/Scripts/sysprep_cmdlines.cmd.",VCL-770
2df7c0edadd201ab3fd59c85f878c131c1bd94ef,,,2,"['managementnode/lib/VCL/Module/OS/Windows/Version_6/8.pm', 'managementnode/tools/Windows_8/Scripts/sysprep_cmdlines.cmd']","VCL-770
Updated code so that Windows 8/2012 Sysprep works. Modified 8.pm to add a scheduled task to configure Sysprep after boot. Copied sysprep_cmdlines.cmd to tools/Windows_8/Scripts/sysprep_cmdlines.cmd and updated it.",VCL-770
cd4290acc3f552364adcb401c0fbf16e6846c7f1,,,4,"['managementnode/bin/vcld', 'managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/utils.pm']","VCL-758

added a inuse check time variable for clusters cluster_inuse_check
On very large clusters inuse checks every 5 minutes can overload the system.",VCL-758
110f426031e5071e51f342d2cbf112431efc810e,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-770
Added pod comments for previous commit.",VCL-770
06782bcfee7b7727cf261a4ca33aee6ea4308445,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-770
Added Windows.pm::fix_cygwin_nodosfilewarning. Removed check_cygwin subroutine which had been setting a ""nodosfilewarning"" parameter for the sshd service. This parameter no longer works. The fix_cygwin_nodosfilewarning is called first during post-load. It intentionally triggers the warning so that it isn't encountered by other subroutines.",VCL-770
4ebb7a5fd2501498d4278c7527a68ac06167ba03,,,1,['managementnode/lib/VCL/Module/Provisioning/openstack.pm'],only log for the failure of terminsating an instance (Option 2),
92ca50d0e77210acf35823549740f996aafbcf33,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-770
Commented out call to check_cygwin in Windows.pm pre_capture subroutine. Setting the CYGWIN environment variable to ""nodosfilewarning"" does not seem to work correctly in the current version of Cygwin.",VCL-770
964ee5ef72bb1693fb381d568fd4b5ef82389767,,,1,['managementnode/lib/VCL/Module/OS/Windows/Version_5.pm'],"VCL-702
Updated run_ssh_command calls in Version_5.pm to use $self->execute. Changed call to run_scp_command to $self->copy_file_to.",VCL-702
a5b0ccecf1c496b36ef1c7479942080b82efe079,,,2,"['managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm']","VCL-702
Updated run_ssh_command calls in Linux.pm to use $self->execute.

Other
Updated changepasswd subroutine in Linux.pm and Ubuntu.pm. The code was not checking the output for problems.

Reworked Linux.pm::is_connected. It was not checking for undefined output.",VCL-702
e848d6aef33d63e36b79cb8674b460e15efdcbdb,,,3,"['managementnode/lib/VCL/Module/Provisioning/esx.pm', 'managementnode/lib/VCL/Module/Provisioning/esxthin.pm', 'managementnode/lib/VCL/Module/Provisioning/helloworld.pm']","VCL-772

removed node_status from helloworld.pm, esx.pm, esxthin.pm for consistency",VCL-772
065f12c0b2a5de417111acbc916fd584324f943f,,,1,['managementnode/lib/VCL/Module/OS.pm'],"VCL-702
Updated run_ssh_command calls in OS.pm to use $self->execute.",VCL-702
74bc0ad08d8f2f7d79db834a95304fb4759c3142,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-702
Updated all run_ssh_command calls in Windows.pm to use $self->execute.",VCL-702
f67e4de036d037bba9e93c5cc43a3f3f9e434094,,,1,['managementnode/lib/VCL/Module/OS/Windows/Version_6.pm'],"VCL-702
Updated all run_ssh_command calls in Version_6.pm to use $self->execute.",VCL-702
bb624bb3307d6a516695b335bb67defc16262ee3,,,1,['managementnode/lib/VCL/Module/Provisioning/openstack.pm'],removed node_status from openstack.pm,
b3334dcb6b408d57a90eb22bb3b982e478359def,,,2,"['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/vbox.pm']","VCL-772

removed node_status from VMware.pm and vbox.pm",VCL-772
bf00e5ab5dbdf79e963ccd05737b8ec75a3a2f8f,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT.pm'],"VCL-772

removed node_status from xCAT module",VCL-772
1402e7d669a935eecc0767544269768bae115c4a,,,2,"['managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/8.pm']","VCL-770
Added pre_capture and prepare_post_load subroutines to 8.pm. These configure the image to run a scheduled task to configure sshd when the image loads instead of having root log in and run the script via the Startup folder. This is necessary to allow the script to run with Administrator privileges with UAC enabled. A scheduled task can run as Administrator fairly easily. Startup folder scripts cannot.

Other
Rearranged Windows.pm::pre_capture. It was not locking down RDP and setting the Administrator password as the first steps. This was allowing an image creator to log back in during the capture process.",VCL-770
cbc53665c5ea6d23322169c99cef8586586692c2,,,0,[],"VCL-770
Set svn ignore propery on Windows Server 2012 tools directories.",VCL-770
14e723c12e4da06c53b75e75b2ef7368f0428a9d,,,0,[],"VCL-770
Set svn ignore property on Windows 8 tools directories.",VCL-770
444edc0e724ddab09e53792d482df32f28e355a4,,,1,['managementnode/tools/Windows_8/Scripts/post_load.cmd'],"VCL-770
Added tools directories for Windows 8 and Windows Server 2012. Added post_load.cmd script for Windows 8 which does not use the auto login sequence.",VCL-770
326ec505d929010aac344c5cc29aa89963286424,,,1,['managementnode/lib/VCL/Module/Provisioning/openstack.pm'],"use openstackComputerMap table to get_os_instance_id
add a checking loop in _terminate_os_instance to verify 
whether the instatnce is completely delted or not",
a44f4d4e9cad0976a3eb528669dd8d1f97ccac12,,,2,"['managementnode/lib/VCL/Module/OS/Windows/Version_6/2012.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/8.pm']","VCL-770
Added stub 8.pm and 2012.pm files.",VCL-770
8ec7e21cd04a02f84936086e6a717ceb13e4eddd,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-770
Added module and OS table entries for Windows 8.x and Windows Server 2012.",VCL-770
66cf9f67225c5b11ae9f75d5818a3e6fe5c136f6,,,1,['managementnode/tools/Windows_Version_6/Security/Disable_UAC.inf'],"VCL-770
Removed Disable_UAC.inf security policy file. It prevents Windows 8 from working properly. Configuration of UAC should be done manually during base image creation.",VCL-770
34a934d9c06fc27a75e4e427543015dddb213754,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm'],"VCL-770
Updated vSphere_SDK.pm to check the resultant vmdk file name after cloning a VM in copy_virtual_disk. With vSphere SDK 5.5 and possibly other versions, the file may be named something like copy-000001.vmdk instead of copy.vmdk. If it detects this, the vmdk is renamed.",VCL-770
5509028ea97c42d14f9079362460eb1e330d47f2,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-767
Added module table entries for ManagementNode.pm to vcl.sql and update-vcl.sql. This allows 'vcld -setup' options defined within ManagementNode.pm to appear.",VCL-767
73de71bac0f151cc6f929f460cd8a133e7823f63,,,1,['managementnode/lib/VCL/Module/OS/Linux/ManagementNode.pm'],"VCL-767
Added ManagementNode.pm::check_private_ip_addresses and setup_get_menu subroutines. This may be used to verify private IP addresses in database match what the hostnames resolve to.",VCL-767
6b2f5605759c89b38c45b14f5b5a5dea956287d6,,,1,['managementnode/lib/VCL/Module/Provisioning/openstack.pm'],"changed the name of sub _post_os_run_instance to _post_os_create_instance
fixed typos",
ad8077326f07cb9832a6ff05e06de89eaeb256e8,,,1,['managementnode/lib/VCL/Module/Provisioning/openstack.pm'],"Get flavor-id from database instead of using 'nova' and 'qemu-img' in get_os_flavor_id
Add get_image_size subroutine 
Change the openstanc instance id using OpenStack API with hostname",
3247121879541306a5e382651a3722f15448c814,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-27

fixed clear_next_image_id routine",VCL-27
0ab542a2cc5e6704a6f7b3e377300ba18151dbdf,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm'],"VCL-770
Added definitions to %VM_OS_CONFIGURATION for Windows 8 and 2012 in VMware.pm.",VCL-770
ff974701cc4824deed75ccfd1239dc8642ed6d7c,,,1,['managementnode/lib/VCL/Module/OS/Windows/Version_6.pm'],"VCL-770
Added KMS client keys to Version_6.pm for newest versions of Windows. Moved where keys are defined to top of file as a constant.",VCL-770
ff32596fa834a47e25934a547349b99c248cf411,,,2,"['managementnode/lib/VCL/Module/Predictive/Level_0.pm', 'managementnode/lib/VCL/Module/Predictive/Level_1.pm']","VCL-27

moved clear_next_image_id to proper location, it was being called too soon, thus next image was always empty.",VCL-27
1b1b3d307f3e1100e0c65d7efd5e72afe8615a1a,,,1,['managementnode/bin/vcld'],"VCL-584
Added checkpoint state to vcld.",VCL-584
4f95593dde512d628c0ae4da0568b331bd1daebd,,,1,['managementnode/lib/VCL/Module/Provisioning/openstack.pm'],"Replaced CLIs (novaclient) with OpenStack Compute APIs v2.
Use LWP::UserAgent to dispatch web requests.",
051694b57b9b621f3860acda6d53ff5b01b3aca1,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm'],"VCL-769
Expanded regex to handle additional error strings.",VCL-769
030552c9b856c69ad891a23b7c3f05bb6fe440cb,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm'],"VCL-769
Added critical message when _services_restart is called.",VCL-769
9fc5d8514180a264a2cc29485602bd8457ca6e5f,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm'],"VCL-769
Added _services_restart subroutine to VIM_SSH.pm. This calls 'services.sh restart'. It gets called from _run_vim_cmd after 3 'connection reset' errors occur.",VCL-769
715e275e7706e2b8d6eb65b509c0d3f84a961e66,,,8,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux/ManagementNode.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/libvirt.pm', 'managementnode/lib/VCL/Module/Provisioning/vbox.pm', 'managementnode/lib/VCL/image.pm', 'managementnode/lib/VCL/utils.pm']","VCL-584
Added functionality to backend to allow an image to be captured and then the reservation continued.

Added check to determine if request state is 'checkpoint' in image.pm::process. If the state is checkpoint, the computer isn't reloaded at the end of the capture. Instead, the computer is powered on and OS module's post_load and reserve subroutines are called. The request state is then changed to reserved.

Added utils.pm::update_request_checkuser. This is called from image.pm for checkpoint captures to prevent the reservation from timing out after the capture os complete in case anything went wrong.

Updated capture subroutines in libvirt.pm, VMware.pm, and vbox.pm to not delete the VM after an image is captured if the state is checkpoint.


VCL-767
Updated utils.pm::update_computer_private_ip_address to allow either a computer ID or hostname argument to be specified.

Added utils.pm::get_computer_private_ip_address_info. It is used to retrieve all of the private IP addresses from the database.

Added utils.pm::hostname_to_ip_address. It calls gethostbyname. It will be used to check if the private IP addresses in the database match what the hostnames resolve to. It is also used to determine the management node's private IP address instead of reading /etc/hosts.


Other
Added argument to get_user_sshPublicKeys in OS.pm so a warning isn't displayed if the value is not set for a user.",VCL-584
12c8f35ae087e57271805130db61fe3539f535d5,,,1,['managementnode/lib/VCL/Module/Provisioning/vbox.pm'],Cleaned up indentation in vbox.pm.,
f08bae84be093a203d9f3b48ff5fa91d9978cbc5,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-768
Updated Linux.pm::logoff_user to check for exit status 0 or 1 to prevent warnings from being generated if a user is not logged in.",VCL-768
2169bc598e91c93937d7b3b400242a45bb711975,,,1,['managementnode/lib/VCL/image.pm'],"VCL-127
Fixed spaces, they don't display properly depending on the email client settings.",VCL-127
b948413f78c296d56a4657a57d2e46cfe09f0aa1,,,1,['managementnode/lib/VCL/image.pm'],"VCL-127
Updated the section that assembles the sysadmin email message in image.pm::reservation_failed. Added additional information commonly needed to troubleshoot image creation problems such as VM host details.",VCL-127
e05b352fb75b3224343fcf768ef26f20eb126d60,,,1,['managementnode/lib/VCL/Module/OS.pm'],"VCL-754

changed case for rootaccess flag",VCL-754
95abcf04292058a95dd4f7b05280e8da3e3ca45c,,,1,['managementnode/lib/VCL/Module/Provisioning/openstack.pm'],remove List::BinarySearch package in _get_flavor_type subroutine.,
040b281e2c7f2155b92e6d3bb3795346e6f49762,,,1,['managementnode/lib/VCL/Module/Provisioning/openstack.pm'],"update _get_flavor_type to automatically select the flavor type by using List::BinarySearch package.
Required to install List::BinarySearch package.",
a3bcbb840c8a536ef5292cae6287a4322ee1ec65,,,1,['managementnode/lib/VCL/Module/Provisioning/openstack.pm'],use update_computer_private_ip in utils.pm instead of using /etc/hosts,
9f1a10d36c43c50177ca65d4b1f05aba8082c2e1,,,15,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/ESXi.pm', 'managementnode/lib/VCL/Module/OS/Linux/ManagementNode.pm', 'managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm', 'managementnode/lib/VCL/Module/OS/Linux/UnixLab.pm', 'managementnode/lib/VCL/Module/OS/OSX.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/Provisioning/Lab.pm', 'managementnode/lib/VCL/Module/Provisioning/vbox.pm', 'managementnode/lib/VCL/inuse.pm', 'managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/reserved.pm', 'managementnode/lib/VCL/utils.pm']","VCL-767
Updated DataStructure.pm::get_computer_private_ip_address to not read /etc/hosts to determine the private IP address.

Updated DataStructure.pm::set_computer_private_ip_address to also update the database if the address changed.

Updated utils.pm::update_computer_private_ip_address to accept an argument of 'null' to unset the value in the database.

Changed hash key in DataStructure.pm from 'computer_ip_address' to 'computer_public_ip_address' to make it clear which address is being worked with. Changed all calls to data->{get|set}_computer_ip_address to data->{get|set}_computer_public_ip_address in all files.",VCL-767
bf8abb6146e9e3d01e32a4aedbc25afe48a2650b,,,1,['managementnode/lib/VCL/Module/OS.pm'],"VCL-754

Updated manage_server routine to use reservation users from data structure",VCL-754
27b9aed080086465daa7445fdf9c90be5aa31d7c,,,3,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/utils.pm']","VCL-767
Added update_computer_private_ip_address subroutine to utils.pm. Renamed update_computer_address to update_computer_public_ip_address and updated calling subroutines in OS.pm.

VCL-753
Reworked enable_firewall_port and disable_firewall_port in Linux.pm. The clean_iptables subroutine was not working correctly because the old code didn't allow ""any"" to be passed for the scope.

Other
Alphabetized export list in utils.pm. Please put subroutine names in the correct location when adding to this and reorder it if you rename a subroutine.",VCL-767
63c7cdc3a9717862c98bbf7bf1a6329dd905a0f2,,,1,['managementnode/lib/VCL/new.pm'],"VCL-50

fixed issue related to moving a blade directly from maintenance to vmhostinuse",VCL-50
9893a98858b9b009214f48dc8c8e788fcf1c7ec3,,,1,['managementnode/lib/VCL/Module/OS/Windows/Version_6.pm'],"VCL-753
Added subroutines to Version_6.pm to query the event log for logon events which were intended to determine which address a particular user connected from. Unfortunately this is not reliable. These aren't currently being called but wanted to save the work in case it's useful in the future.",VCL-753
0a6e34ba9af89085e6c0bd7c64f91c00ef30f61b,,,5,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/utils.pm']","VCL-702
Reworked new.pm::reserve_computer to not include OS-specific code. Moved some of the old functionality to a new OS.pm::reserve subroutine. Updated reserve subroutine in Linux.pm and Windows.pm.

Removed new.pm::confirm_public_ip_address. The functionality exists in OS.pm::update_public_ip_address.

VCL-753
Added OS.pm::get_connect_method_remote_ip_addresses. Added Linux.pm: get_user_remote_ip_addresses, get_port_connection_info.

VCL-564
Added OS.pm::run_scripts, which was formerly in Windows.pm. This isn't called from anywhere yet.

Added $SOURCE_CONFIGURATION_DIRECTORY variable to Linux.pm.

VCL-253
Added Windows.pm::check_rdp_port_configuration. This is called from Windows.pm::post_load. If the port number for the RDP connect method doesn't match the registry it is configured.",VCL-702
16d924d959a18de0a24e028046b8c1d4d1edab8d,,,1,['managementnode/lib/VCL/Module/State.pm'],Minor whitespace change.,
5732277143f80716a8b8a89cad5aa0424c321fa7,,,1,['managementnode/lib/VCL/new.pm'],Fixed call to renamed subroutine: update_request_password --> update_reservation_password,
6ab45d21c1e717d9a9cc2063525db4d0d1fa7aff,,,1,['managementnode/lib/VCL/Module/Provisioning/openstack.pm'],Replaced _sshd_status with is_ssh_responding in node_status,
181aa3c7797e5e3560d9756a690fc6045c90bcc6,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-753
Added subroutines to utils.pm:
get_changelog_info
get_connectlog_info
get_connectlog_remote_ip_address_info
remove_array_duplicates
update_connectlog
update_changelog_request_user_remote_ip
update_changelog_reservation_remote_ip
update_changelog_reservation_user_remote_ip


VCL-765
Updated utils.pm::get_computer_ids to not include deleted computers.


Other
Renamed update_request_password to update_reservation_password because passwords reside in the reservation table.

Added more info to notify messages generated by delete_computerloadlog_reservation.

Enhanced utils.pm::string_to_ascii to merge consecutive special character codes and display the number found.

Added optional $force_array argument to xml_string_to_hash.",VCL-753
86e9f6cb454161550ad7671eb62ac196258a7d53,,,1,['managementnode/lib/VCL/image.pm'],"VCL-766
Added message argument to image.pm::reservation_failed. Added missing subroutine POD information.",VCL-766
469ee7eda2edb2a0aee3e2c3de2b73185a9a92a1,,,1,['managementnode/lib/VCL/DataStructure.pm'],"VCL-753
Added get_reservation_user_login_ids to DataStructure.pm. This returns user.unityid valuses for all reservation users. It will be used by new connection checking code.",VCL-753
e53be7d51e7ddb9b7e4e36ed4635134aca772a58,,,1,['mysql/phpmyadmin.sql'],"VCL-764
Added table display column information to phpmyadmin.sql for tables: connectlog, connectmethod, reservationaccounts, serverrequest.",VCL-764
4eed7949cf21564e8863a77133800a1e54fd5e0d,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-586
Fixed typo in vcl.sql in definition for imagemeta table introduced in previous commit.

VCL-753
Added connectlog table to vcl.sql and update-vcl.sql.
Added ignored_remote_ip_addresses to variable table.

VCL-763
Added constraints to computer table columns: vmhostid, imagerevisionid, nextimageid.",VCL-586
17c56e17d29f93482be74d65989bc7933304d402,,,2,"['managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm']","VCL-584

updated create_user routines to not grant admin access when imagemeta_rootaccess is set to no
Case in manage_server_access routine where root access is passed as a variable",VCL-584
b94417815ce5d4ec4d5669ca1c9ed57376d44eed,,,1,['managementnode/lib/VCL/Module/Provisioning.pm'],"VCL-761
Updated Provisioning.pm::retrieve_image to add a directory named after the image name to the destination repository path. This causes images to be named consistently.",VCL-761
1963ed9392e9575048c7405b38ee6deded3b055d,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-760

fixed path for vcl_post_reservation to new location
set new location for post_load and post_reserve, leaving the old path in for compatibilty",VCL-760
d24ddf0ff083b5d59100240530593a9c468e314e,,,3,"['managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/reclaim.pm']","VCL-760

code for vcl_post_reservation",VCL-760
5c93a642b330cca1b4ae152a5c7a036022d1998e,,,2,"['managementnode/bin/vcld', 'managementnode/lib/VCL/utils.pm']","VCL-758

code to use server_inuse_check timing.
If serverrequest is detected, check_time routine will compare the server_inuse_check time variable instead of general_inuse_check variable",VCL-758
3a676d16602e180b79970aca1eb01130c0111188,,,1,['managementnode/bin/vcld'],"VCL-758
commented out notify statement to reduce vcld.log clutter",VCL-758
1e4deaf2bb39dae8544e579e5bbb8aed4827f141,,,1,['managementnode/bin/vcld'],"VCL-758

added step to refresh management node information every 2 minutes, needed to pick any changes to check_in intervals and inuse check timings",VCL-758
a947d5b3fb738772585b2673aef99024a4351445,,,1,['mysql/vcl.sql'],"VCL-586

removed imagemeta.usergroupid from schema",VCL-586
20ca25184556cb4347aad432c642b33aad1919e9,,,2,"['managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/new.pm']","VCL-280

- extended reservation_failed routine to accept optional computer state
- updated the code location for when image is not found it will not fail the computer",VCL-280
d1449a41b884e851509158e83b974da4f457c63e,,,2,"['managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/inuse.pm']","VCL-736

using write command now

added ability to extend other OS's. Need to add notify_via_console routine",VCL-736
e943ca579f867e6d03291d9f9840fced4244cf7d,,,1,['managementnode/lib/VCL/inuse.pm'],"VCL-758

timing for end of reservation notification",VCL-758
e3235f7e2290b657770bd19f265e1305e2f2c4a7,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-758

added defaults for when to notify user before reservation end time",VCL-758
688a7059e4a7aa71736cc2dec119fe29f12ce6e5,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-758

baseline entries for the variable table",VCL-758
3f54ddbcc061b7449b67f6cf078973f1c91a0b89,,,10,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/Provisioning/Lab.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/inuse.pm', 'managementnode/lib/VCL/reclaim.pm', 'managementnode/lib/VCL/reserved.pm', 'managementnode/lib/VCL/utils.pm']","VCL-758

Improved functionality for timing variables. Begining steps to allow VCL admins to set different timing values for selected events related to reservations.

- Moved the following from DataStructure to utils to allow for calls from non-objects

get_variable, set_variable, is_variable_set, yaml_deserialize, yaml_serialize",VCL-758
dd43c9363e51d4556345ccdcda8411bc6cab4440,,,1,['NOTICE'],Updated NOTICE to 2014.,
90078737f95953d2e10155773b2cb417a8ea425c,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-756
Moved code to run a custom vcl_post_load script to the end of Linux.pm::post_load.",VCL-756
68e866017e3353f9b7cc630596b18fca27f56af2,,,1,['managementnode/lib/VCL/Module/OS.pm'],"VCL-754

was checking for wrong user id value in hash",VCL-754
b09ce7e5172e039a184bd9f1aaf7f1965a0dd90a,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-753
Added unique key across changelog userid, reservationid, and remoteIP.",VCL-753
06fd778698c2359658e410afe2485cc80767c01b,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-753
Added changelog.reservationid and changelog.userid columns to vcl.sql and update-vcl.sql.

VCL-560
Fixed typo in update-vcl.sql regarding the vmprofile table.

Other
Added reservation.imageid and reservation.imagerevisionid constraints to reservation table.",VCL-753
24aaaa08244d61e59a734247cb9be4d1784a4879,,,5,"['managementnode/bin/vcld', 'managementnode/lib/VCL/Module/Semaphore.pm', 'managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/utils.pm']","VCL-734
Updated new.pm::computer_not_being_used to not use recursion. This could cause recursive loops. Added a multiple attempt loop instead.

Moved command to rename the forked process from State.pm::initialize to vcld::make_new_child. This was done to have the rename occur as early as possible. Other reservations run pgrep and use the process name to determine if another process is running for a reservation. This allows a running process to be detected sooner after a process begins.

Added Semaphore.pm::get_process_semaphore_ids. This is used in new.pm::computer_not_being_used to detect if a running reload process may be transferring an image. It's possible for old, stale semaphore lockfiles to exist in /tmp. This subroutine verifies that the lockfile matches the PID of the other running process.

Added check to State.pm::initialize if it fails to update the state to pending. There are a few cases where this is normal such as if the request was deleted in the brief time before it could be updated to pending.

Updated utils.pm::reservation_being_processed to return either an array or integer.",VCL-734
571f3f25b2cc3eaa1cbbd3943f983c35bd2e80c4,,,1,['managementnode/lib/VCL/Module/State.pm'],"VCL-734
Fixed logic problem in State.pm::initialize.",VCL-734
4d624cdc8730c256b54bddf91398a4e944655cf2,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-734
Fixed bug in utils.pm::update_request_state. It was not allowing a request to change from deleted/inuse to complete/deleted.",VCL-734
112d2b9c04aeded5a48a08dc4f271b435e64ae4d,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-751

removed the return 0 and critical notice

This should negatively affect loading local accounts but will now allow for enterprise accounts that might be using network filespace, such as AFS with kerberos.",VCL-751
0f4fbd01a3dcd4aa7460fb9d45f698ff648b3fa0,,,5,"['managementnode/bin/vcld', 'managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/Provisioning.pm', 'managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/inuse.pm']","VCL-734
Updated vcld to not check for cluster requests and to not update the request state to pending. The data returned from get_management_node_requests only includes reservations assigned to the running management node. Cluster reservations assigned to other MN's isn't included. Moved logic to State.pm.

Updated State.pm::initialize:
-Call reservation_failed if any of the supporting objects can't be created
-Added additional checks before a request is set to pending to detect if it was deleted or if any cluster child reservations have already failed.

Added State.pm::does_loadstate_exist_any_reservation. It is used to detect if any other cluster reservations have failed.

Moved steps which were in State.pm::DESTROY to State.pm::state_exit and added a call to state_exit in DESTROY. This ensures the steps always occur. Added a flag to state_exit so it is only run once. Added failed cluster reservation check. Added check before request state is updated to determine if it was updated by another process.

Added temporary condition to inuse.pm to skip all connection checks for cluster requests unless the previous state was reserved.

Added get_parent_reservation_id to DataStructure.pm",VCL-734
d2a66d13537946dc40c36e33215de37e1aa42a33,,,2,"['managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm']","VCL-570

fixed to correctly set hostname for both Ubuntu and general Linux that support sysconfig files

created update_hostname_file routine that can be specific to distros
removed -v from hostname command, options are not consistent across distros",VCL-570
9e4396e2010f47bb1f3fb734e52732c814f28f0c,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm'],"VCL-685
Added VMware.pm 'vcld -setup' option to 'Purge deleted and unused images from repository datastore'.",VCL-685
10639911ab9bb5c02ccefc2b57434424d327ed6a,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm'],Made minor output improvement in VMware.pm::get_datastore_imagerevision_names.,
794ff79add6e0ae3587d5cdea4a873953106977b,,,2,"['managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm']","VCL-685
Fixed problem in VMware.pm::get_datastore_imagerevision_names. It wasn't searching recursively.

Updated Module.pm create_vmhost_os_object to override which OS module gets created if the VM host profile image is pointing to a UnixLab image. The UnixLab module won't work under most circumstances. Changed to use regular Linux.pm.",VCL-685
7aef90cef70e02be17576c202fa242eb6155fe1c,,,1,['managementnode/bin/install_perl_libs.pl'],"VCL-750
Added perl-Time-HiRes Linux package to install_perl_libs.pl.  It is used by sleep_uninterrupted in utils.pm.",VCL-750
774b0db3b0d28dd46aade4250c9a4fb7b01ae99e,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-748

commented out the call to etc services
it was only informational to this point and causing an issue",VCL-748
2f3c9d2c5f0767d0b8a31e27d1eaa27563ff1dd0,,,2,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm']","VCL-745
Added check to Windows.pm::user_logged_in to use the 'Administrator' username for imaging requests.


VCL-746
Updated Windows.pm::get_service_configuration to copy the reg export text file from the remote computer to the management node and then retrieve its contents locally.
Added OS.pm::copy_file_from subroutine. This is called from get_service_configuration.


Other
Removed duplicate call to update_public_ip_address in Windows.pm::post_load.",VCL-745
6690e2f79c1fd17e18e850493b3162a194fc3830,,,1,['managementnode/lib/VCL/Module/Provisioning/openstack.pm'],"VCL-590
Initial work for OpenStack",VCL-590
33e4e16ba8cf4c282ac93d749a1904774ca435aa,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT.pm'],"VCL-594
Updated xCAT.pm::node_status to return 'RELOAD' if node.profile is not defined in the xCAT database.",VCL-594
4b1c342674ba9142dfde6ab79bd6856e37e9ddc5,,,1,['managementnode/lib/VCL/new.pm'],Fixed indentation in new.pm.,
6dce4dbe35f20581ffb7f495effd684ee362bf62,,,1,['managementnode/lib/VCL/new.pm'],Fixed indentation in new.pm.,
3a6aa33a54fc33d6650e9f94d895666d7c0e28d7,,,1,['managementnode/lib/VCL/Module/Provisioning.pm'],"VCL-744


added the all option 'a' to the du command for searching for associated image files",VCL-744
415c0cc58327b1e06326418dd5cfccb7426150d4,,,1,['managementnode/lib/VCL/Module.pm'],Fixed minor bug in Module.pm introduced in r1557226. Reference type checking in create_datastructure_object wasn't working. Reverted to original way.,
1b4ba4204c61aa37c172e6936a167655e4a67688,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-409
Updated Windows.pm to use setup_get_menu instead of setup.",VCL-409
e175e75a002154fd61277f8bf185d35e61f4743d,,,10,"['managementnode/bin/vcld', 'managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm', 'managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/image.pm', 'managementnode/lib/VCL/utils.pm']","VCL-685
Added vcld -setup option to safely purge deleted and unused images from the virtual disk datastore under some conditions.

Added the following subroutines to VMware.pm:
setup_get_menu
setup_vm_host_operations
setup_purge_datastore_images
get_datastore_image_names

Added the following subroutines to utils.pm:
get_array_intersection
get_imagerevision_cleanup_info
get_imagerevision_loaded_info
get_imagerevision_names
get_imagerevision_names_recently_reserved
get_imagerevision_reservation_info
get_management_node_vmhost_ids

Changed OS.pm::find_files. 3rd $search_type argument was not being used anywhere. Changed it to $search_subdirectories. This is used by get_datastore_image_names to speed up the search.

Added eval block to vSphere_SDK.pm::is_restricted to allow it to detect if the SDK is not installed rather than always displaying a warning message.

Added optional vmhost_id argument to DataStructure.pm.

VCL-409
Replaced existing setup subroutines with a setup_get_menu subroutine in image.pm and Module.pm. This allows multi-level menus to be defined by constructing a hash. vcld retrieves the hash and presents the menu.

Added subroutines to utils.pm:
get_code_ref_package_name
get_code_ref_subroutine_name
get_management_node_vmhost_ids
setup_get_menu_choice
setup_print_break

Added check in State.pm::DESTROY to prevent warnings when running vcld -setup.

VCL-729
Added eval block in utils.pm::mail when Mail::Mailer is created.  If sendmail isn't installed this would generate an error which wasn't being caught in vcld.log.

VCL-678
Changed several 'OK' notify messages to 'DEBUG' in VMware.pm and vSphere_SDK.pm.",VCL-685
91d952323a23c37e5514592fd347078c1698ce39,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-473
Updated utils.pm::run_ssh_command to strip out SSH warning text if the permissions are incorrect on any of the identity keys attempted. Also added check to run_scp_command to prevent the subroutine from returning false even though it was successful if a missing key is attempted.",VCL-473
a9920daa4e52f73f5644083ac2a51eb8963e18a0,,,4,"['managementnode/lib/VCL/Module/Predictive/Level_0.pm', 'managementnode/lib/VCL/Module/Predictive/Level_1.pm', 'managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/utils.pm']","VCL-739

use nextimageid if set
clear nextimageid after pulling info
removed updating of nextimageid for reload",VCL-739
07baeab675e9985119e7602ac2114ed2d1445b8e,,,1,['managementnode/lib/VCL/Module/OS/Linux/UnixLab.pm'],"VCL-735

Added is_ssh_responding and firewall_compare_update.",VCL-735
7d3e45d81f4e1d451a0489fc2275b84b1e02c6a9,,,2,"['managementnode/lib/VCL/Module/Provisioning/vbox.pm', 'managementnode/lib/VCL/utils.pm']","VCL-683

retired _sshd_status",VCL-683
6e21f678f6dd5b98f37c55f2fc0dd7b51884431e,,,2,"['managementnode/bin/vcld', 'managementnode/lib/VCL/Module/State.pm']","VCL-734

vcld: Added update_request_state before make_new_child for non-cluster requests
State.pm: moved close bracket to isolate state change to cluster reservations",VCL-734
6d6f874df0ac60dc4e14bec70246484f35f5573e,,,1,['managementnode/lib/VCL/Module/State.pm'],"VCL-678

Changed from Crit to Warn for notify statements related to updating request states.",VCL-678
eae0fb8a6966adc98a744dc4adddd01ae14b8ca9,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-687

forcing banner=none for private sshd_config file",VCL-687
f94d6d6e000e728ec58d6bd5503461faa092cc2d,,,1,['managementnode/lib/VCL/healthcheck.pm'],"VCL-683

removing _sshd_status from healthcheck",VCL-683
ab73ef996caf5eb314473059bbe977c7b04175c9,,,1,['managementnode/lib/VCL/image.pm'],"VCL-409

added:
-restart vcld, to make sure it is running
-monitor image complete, to stop log output
-extended code to display true provisioning type, instead of xcat or vmware",VCL-409
e646c1e9c52e2b4ba3a933432d372693901a2490,,,1,['managementnode/lib/VCL/inuse.pm'],"VCL-732

if duration is >= 24hr skip user connected checks",VCL-732
67ae1df75f6ef72c88c6c1064378f3a9ff39c764,,,2,"['managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/utils.pm']",Changed from Crit to warn for notify statemens related to updating request states. Previously was generating too many false alarms.,
82f10f02f2345f7e97638cd54fb375c5301f0337,,,4,"['web/.ht-inc/conf-default.php', 'web/.ht-inc/images.php', 'web/.ht-inc/utils.php', 'web/.ht-inc/xmlrpcWrappers.php']","VCL-409
Improvements to vcld -setup

utils.php - modified xmlrpccall - added line to register XMLRPCfinishBaseImageCapture
xmlrpcWrappers.php - added XMLRPCfinishBaseImageCapture
images.php - modified addImage - split permission, grouping, and mapping out into new function named addImagePermissions so that it can be called by an XMLRPC function",VCL-409
daceacb66fc0c32e2a6dba9bef8c42407d5a98a0,,,3,"['managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/image.pm', 'managementnode/lib/VCL/utils.pm']","VCL-409

Added checks for:
node available
ssh access to node
existing reservations for node, prompt for action, resume or start over
add new image to the user's newimages group via new xmlrpc routine",VCL-409
6be41b1f4aa5d589c1cbe7568c79a2cbd13efaf1,,,2,"['managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm']","VCL-678

changed output flag for netstat output. While nice to see what connected on the open ports, it can produce a lot of unneccessary output.",VCL-678
a979e672932bde3a82066615a66bd975eb278aa0,,,1,['managementnode/lib/VCL/Module/Provisioning/one.pm'],"VCL-722:  added support for ONE templates - allows to use ONE templates to build custom VMs. Template name should match image name. Templates are optional, one.pm will create VM based on disk image using default values.",VCL-722
a3dd3e8cb73f900af45ba4a5fb8dced9b52a2877,,,1,['managementnode/lib/VCL/inuse.pm'],"Skip the is_user_connected checks for server reservations. No need to check during the inuse states, with many server reservations this can add unneccessary cload/checks on a management node.",
356cf2ca0ec8cff2930df564bd4a51e1534ec0b2,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-698

skip useradd if user's home directory is on network mounted storage. Prevousily this steps are to delete and then try to re-add the user's account even if it was network mounted.
this might need to be re-addressed in the future if new accounts need to be created on network related storage. The basic assumption is that the network based home dir would already exist.",VCL-698
798a992e3cf8564a7fb84793ade8b7ff42498873,,,1,['managementnode/lib/VCL/Module/State.pm'],"VCL-16

Added check to determine if request has been deleted by the user before trying to update the state. 
This reduces the number of unnecessary critical emails.",VCL-16
8727753a979f29226333de5d2d59526e49a8dfe7,,,1,['managementnode/lib/VCL/inuse.pm'],Fixed typo in inuse.pm.  _notify_user_nologin --> _notify_user_no_login,
d1d952b74b391ef322f9f8011b05b6fd5440804b,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT.pm'],"VCL-727
Updated xCAT.pm::load to use variable name that matches format of other xCAT varibles in the variable table:
xcat|throttle|<management_node_hostname>

Left old format for backwards compatibilty:
<management_node_hostname>|xcat|throttle",VCL-727
0c43124807402926bc51a75378b723fedff7b59d,,,2,"['managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/utils.pm']","VCL-678
Commented out some chatty lines in get_package_hierarchy. Added code so that only the original call to get_package_hierarchy displays the result in vcld.log rather than each recursive iteration.

Added get_calling_subroutine to utils.pm.

VCL-708
Renamed global Jabber variables in utils.pm to upper-case to match all other global variables.

Reworked and cleaned up the INIT section of utils.pm. The global variables were defined twice. Some variables were no longer being used.

VCL-729
Updated utils.pm::mail to check if $RETURNPATH is defined. It is only passed to Mail::Mailer if defined.

Other
Updated create_os_object, create_mn_os_object, create_provisioning_object to display $EVAL_ERROR if the object couldn't be created.",VCL-678
5235bac3fc209270a59345efc6903536478e7218,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-702
Removed entries from utils.pm @EXPORT referring to subroutines which do not exist:
changelinuxpassword
controlVM
get_user_affiliation
getimagesize
hostname
setimageid",VCL-702
958db99e94d62850e6f29784041006ddaf4c6231,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT.pm'],"VCL-727
Fixed variable name typo - $rpower_attempt_limit --> $rpower_error_limit",VCL-727
dc86e7090035a7fdf1330e093fd3744ffd9481d9,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-702
Removed old subroutines from utils.pm which aren't called from anywhere:
_checknstartservice
lockfile
reservations_ready
time_exceeded
is_reservation_deleted",VCL-702
dfceffb27311474a3071645d2473370f98b82e26,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-702
Removed old subroutines from utils.pm which aren't called from anywhere:
_machine_os
check_uptime
checkonprocess
collectsshkeys
construct_image_name
disablesshd
get_array_summary_string
get_highest_imagerevision_info
get_user_affiliation
isconnected
isfilelocked
restoresshkeys
timefloor15interval
unlockfile
vmwareclone",VCL-702
837a8c2ff269a5a9263cc8bb6fc4f632aef2f687,,,1,['managementnode/lib/VCL/DataStructure.pm'],"VCL-727
Added optional $show_warnings argument to DataStructure.pm::get_variable.",VCL-727
aa1a4b2f3e518d35909967284eb0dbd5d61d085c,,,2,"['managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'mysql/vcl.sql']","VCL-16
Added code to xCAT.pm::load which updates reservation.lastcheck when progress is detected as a node is being loaded. It will update the value at most every 60 seconds. This is used by the parent process in a cluster request in new.pm::wait_for_child_reservations to detect when child reservations are still loading. Updating reservation.lastcheck will prevent the parent from timing out the request if the child takes significantly longer than the parent process took to load the node.

VCL-727
Added additional looping to xCAT.pm::_rpower which makes additional attempts if a timeout error is encountered. Added ability to control number of rpower attempts via entries in the variable table: xcat|rpower_error_limit, xcat|timeout_error_limit",VCL-16
404d2d72e2b4df9c1b44160c1290aec47be81500,,,2,"['managementnode/bin/vcld', 'managementnode/lib/VCL/utils.pm']","VCL-725
Reworked utils.pm::run_command to call the command via backticks instead of opening a pipe. This seems to always return the correct exit status.

VCL-726
Added call to vcld:: make_new_child which sets the process group of vcld state processes to that of the forked state process. Without doing this, the process group of the forked process is that of the parent vcld daemon process.

Added kill call to REAPER which kills all processes in the process group. Since the process group was set for the forked vcld state process, all processes it forks will be in its process group. This causes forked processes to be killed when a vcld state process is killed.",VCL-725
99163cc4b771b12f8f8d5e6f0ef091d86f6e2bb6,,,3,"['managementnode/lib/VCL/Module/OS/Linux/init/Upstart.pm', 'managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/utils.pm']","VCL-16
Updated new.pm::wait_for_child_reservations. The parent reservation was not waiting long enough for child reservations to load under some conditions. Added checks in waiting loop to detect any change in the child reservation.lastcheck values or child reservation computerloadlog entires.

Updated utils.pm::get_current_reservation_lastcheck to accept either a single or multiple reservation ID arguments. This is called from new.pm::wait_for_child_reservations in order to detect changes from child reservations.

VCL-681
Updated utils.pm::run_ssh_command to detect 'Connection timed out during banner exchange' errors. These occasionally occur.

Other
Added undefined variable check to Upstart.pm::get_service_names.",VCL-16
f99207e5b86d13ca15b4da473da9649ffe02ba51,,,1,['managementnode/lib/VCL/Module/Provisioning/one.pm'],VCL-722:  fix for sub power_off(),VCL-722
e7518332fa7199de75d7390d3d260a76cefd94c3,,,1,['managementnode/lib/VCL/Module/Provisioning/one.pm'],VCL-722:  change the way one.pm sends shutdown to a VM,VCL-722
ab5cf6b006442df23e0b553f57d670e7c13bf3bf,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-722: changes to Linux.pm and Windows.pm to send shutdown via ONE controller - reverted changes to original state, will use one->power_off()",VCL-722
1b515d5bb68d705252f66cfbe19ab4137cdb7d79,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-722: changes to Linux.pm and Windows.pm to send shutdown via ONE controller - reverted to original state, will use one->power_off to power off",VCL-722
71e87130b4411399c24c06e19bebcb553e6dcd99,,,2,"['managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/utils.pm']","VCL-16
Added code to State.pm::reservation_failed to check if the state is inuse. State is set back to inuse rather than failed.

Extended update_request_state to check the result of database_execute which returns the number of rows updated. If 0, the current request state is retrieved from the database. If it matches the arguments passed to update_request_state then no warning is displayed.",VCL-16
c71a977419a1e55f83d209538badcc5a5f01b527,,,1,['managementnode/lib/VCL/inuse.pm'],"VCL-16
Fixed typo in inuse.pm.",VCL-16
71c3a0160adc46a596b71f1b31f3231c71f6cf3e,,,2,"['managementnode/bin/vcld', 'mysql/vcl.sql']","VCL-16
Added code to delete any existing computerloadlog 'exited' entries when a reservation process is forked in vcld. Added computerloadstate 'exited' entry to vcl.sql.

Other
Fixed call to sleep_uninterrupted in vcld.",VCL-16
5e9b443ad94026533eec1e280ceeb5af2b67cc49,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],Fixed typo - sync_date subroutine in Linux.pm was renamed to synchronize_time.,
b3ba9335626498102970afd378d6b24bac4508ad,,,7,"['managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/image.pm', 'managementnode/lib/VCL/inuse.pm', 'managementnode/lib/VCL/utils.pm']","VCL-16
Added wait_for_child_reservations_to_exit subroutine to State.pm. This is called by cluster parent reservations when they exit the inuse processing.

Added State.pm::state_exit. This is currently called from inuse.pm whenever it exits. It makes sure an 'exited' computerloadlog entry is added when reservation processes exit. It also calls wait_for_child_reservations_to_exit if the parent of a cluster request.

Updated inuse.pm to call state_exit instead of exit.

VCL-699
Moved creation of mn_os object from State.pm::initialize to Module.pm::new. This allows non-state objects access to the MN OS functions.  Changed mn_os from being stored in $self for each object to $ENV{mn_os}.

VCL-682
Reordered xCAT.pm::node_status to immediately check currentimage.txt for 'new' reservations instead of first checking if the computer is powered on, etc. The xCAT steps were overloading the management node for large cluster reservations.

Other
Fixed typo in utils.pm - sleep_uninterrupted subroutine name was misspelled.

Removed chunk of code from image.pm which was supposed to change the request state to 'completed'. This is not a valid state name and was not doing anything. The state is properly changed later on.",VCL-16
363824684f13f1675bfad9d0af8afa1ea429610e,,,2,"['managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm']",VCL-722: changes to Linux.pm and Windows.pm to send shutdown via ONE controller,VCL-722
20afa1d6faf0e6207e234d70ff1cff859d16a3fb,,,1,['managementnode/lib/VCL/Module/Provisioning/one.pm'],VCL-722: Add one.pm module,VCL-722
4612677b6f1cc6bf88b4d3566bbc0c75c549dd6d,,,2,"['managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/image.pm']","VCL-711
Moved call to check_image_os to beginning of image.pm::process. Realized it needs to be set before currentimage.txt is written.",VCL-711
ef0b070ec230ce991baa7a7984d85af9b7627f92,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT.pm'],"VCL-711
Moved call to _check_image_os to very beginning of xCAT.pm::capture. The call to get_image_name was before it and was retrieving the wrong image name.",VCL-711
6d1324479f3d24afd49453c3e99afc18c534d4a0,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-698

moved routine call related to recursively changing permissions. Now it only modifies if it is a local disk. If nfs shares or someother network file system has blocks in to prevent file ownership changes, it will cause reservation to fail",VCL-698
d32e67254b117c4d312ea7ccfd5aa4214ca0faaf,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT.pm'],"VCL-720
Replaced all 'new DataStructure' calls in xCAT.pm with calls to create_datastructure_object.",VCL-720
15dc0374571cb850b7b4c268b119ed158e742fc8,,,1,['managementnode/lib/VCL/Module.pm'],"VCL-720
Added create_datastructure_object subroutine to Module.pm",VCL-720
fae4a62c644e369c0bb06ff95b5c2a68da249806,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-711
Added $no_cache=1 argument to get_imagerevision_info call in get_request_info. xCAT.pm::_check_image_os updates image.name and imagerevision.imagename, and then calls $self->data->refresh() which in turn calls get_request_info. This was returning the old, cached values.

Other
Removed accidental print line from update_request_state.",VCL-711
3aae343eaf0ed9684dab03c9af5bdd4c37544a04,,,2,"['managementnode/lib/VCL/Module/Provisioning/xCAT2.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT21.pm']","VCL-682
Removed xCAT2.pm and xCAT21.pm. This code has been merged into xCAT.pm.",VCL-682
370f6139cb1225cb3cc524f8c5373500df24b3de,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT.pm'],"VCL-682
Added check to xCAT.pm::_lsdef to ensure that something was returned from lsdef command. It was returning an empty hash under some conditions.

Fixed typo in node_status.",VCL-682
3f7208371bbb1171d9833f03a04a3639d40f4fea,,,1,['managementnode/lib/VCL/Module/OS/Linux/init/SysV.pm'],"VCL-582
Updated SysV.pm to not display a warning when trying to stop a service which is already stopped.

Updated add_ext_sshd_service to make a backup of the original /etc/init.d/sshd file. The sshd file is edited to change the 'status $SSHD' line to 'status -p $PID_FILE openssh-daemon'. This allows 'service sshd status' to report the correct status if sshd is stopped and ext_sshd is running.",VCL-582
04eb596b6165f7efd855dd9d7f13ecb67087b06d,,,2,"['managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/Module/State.pm']","VCL-711
Moved _check_image_os from State.pm to xCAT.pm. Moved call from State.pm::initialize to xCAT.pm::capture.

VCL-682
Added check to xCAT.pm::node_status to determine if currentimage.txt contains a vcld_post_load line. This was missing when the module was reworked.",VCL-711
b6ed56d65e19f9fd67cd49c084a76156fe253e34,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-698

Another fix related to a warning for user creation.",VCL-698
37444b2afc82ab18d2f684b741a47c96724c381c,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],fixed whitespaces,
f30891110329969a20ab3c4fb41bdba2d63d1c52,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-698

- corrected check for user's home dir in exclusion list
- removed return from output userdel for failure. A simple warning related to the users' mail directory was causing a failed reservation",VCL-698
3284a5b0f1c75de9ee42dc3781d9083ac84bf642,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-698

added check for /home in exclude list to prevent unwanted deletation of user's /home directoy if it is located on the local disk",VCL-698
3ffdcd9b5814bc38b0a310b663602bbaa7ac1755,acoburn,acoburn,1,['managementnode/lib/VCL/utils.pm'],"when the isconnected method is called for windows reservations
the ssh cmd uses 'shortname' when it should be using 'nodename'
(shortname may be undefined). If shortname is defined, then
nodename is set to that value anyway.

Fixed in 2.4 and 2.3.3",
141416694a3a34350ffbe7fb4c88735cee000a61,acoburn,acoburn,1,['web/.ht-inc/managementnodes.php'],"VCL-715

Cleaned up some HTML in the ""Edit Management Nodes"" interface by wrapping the radio button labels in <label> tags",VCL-715
c357986c8b430e1e97db7edf61190770dcbf636f,acoburn,acoburn,1,['managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm'],"VCL-712

Ubuntu module was checking for the iptables service when it should have been checking for ufw.",VCL-712
942a8c278e0884c1dface592a85cdb30dd678a6d,acoburn,acoburn,1,['managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm'],"VCL-712

Added an ever-so-slightly modified `firewall_compare_update` subroutine (from OS::Linux) so that vcld checks for the ufw service instead of iptables",VCL-712
d2570eba50631f78a11960990b2700b0e983a100,,,1,['managementnode/lib/VCL/Module/Provisioning/Lab.pm'],removed number of checks for node_status. If vclclientd is running then the machine is there.,
ed2292f90202522a8a10cb2ffed290a0b1a2eec7,,,4,"['managementnode/bin/vcld', 'managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/reserved.pm', 'managementnode/lib/VCL/utils.pm']","VCL-16
Updated vcld so that cluster child reservations wait until the parent has started. Moved call to update the request state from vcld to State.pm::initialize. This allows the cluster parent to wait until all child reservations on other management nodes have started before updating the state. Added code to State.pm so that parent reservation waits for all child reservations to have a computerloadlog 'begin' entry before updating the request state.

Updated State.pm::DESTROY so that only the parent reservation deletes computerloadlog 'begin' entries. This is needed in case a child completes before the parent detects that all children have started.

Added utils.pm::sleep_uninterrupted.  This is called from the main vcld loop. The normal sleep function is interrupted due to a signal whenever a forked reservation process exits.  This subroutine makes sure the requested amount of time has elapsed.

VCL-697
Fixed problem in update_request_state which prevented the state from being updated from pending/<something> to failed. Added condition so request states are changed to failed or maintenance regardless of previous state.

Other
Removed unused subroutines from State.pm: predictor, update_request_state_new, update_computer_state_new, insert_computerloadlog, update_log_ending_new",VCL-16
9d14eef5690c00843cd9b83f1ecaddc4feec83f7,,,2,"['managementnode/lib/VCL/inuse.pm', 'managementnode/lib/VCL/reserved.pm']",Cleaned up pod sections.,
e8f4a5de3c577e38b07fe4f4dc4910ae09de9a91,,,3,"['managementnode/lib/VCL/inuse.pm', 'managementnode/lib/VCL/reserved.pm', 'managementnode/lib/VCL/utils.pm']","VCL-16
Fixed a few issues with reserved.pm and inuse.pm. The parent reserved may have exited before all child reservations had exited. Added a check to make sure computerloadlog reserved entry exists for all children before parent exits. Also added check to make sure reservation wasn't deleted or any of the child reserved processes failed.

Fixed inuse.pm to properly handle the connecttimeout variable. If set to a long duration, the connect checking could have run into the end time countdown.",VCL-16
d09b9e031e3f18dbee42561bb5b99f51462a6073,,,7,"['managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/inuse.pm', 'managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/reserved.pm', 'managementnode/lib/VCL/utils.pm']","VCL-678
Removed and/or commented out several unnecessary notify messages in Module.pm to reduce vcld.log output.

VCL-707
Changed how vcld.log lines are deliminated. All fields are now separated by a pipe character. If a field is blank, a pipe character is added. This allows output to be pasted into a spreadsheet and text to columns results in the fields in the correct column for all lines.

VCL-16
Moved initial user connection check from reserved.pm to inuse.pm. This removed duplicate code.

Updated reserved.pm so that the parent reservation waits for all child reservations' reserved processes to terminate before changing the request state to inuse. This fixes a problem where the state would change before the child's reserved process ended. The child's inuse process would fail to launch because vcld detected the other process still running.

Moved user connection check loop from OS.pm::is_user_connected to inuse.pm. Updated inuse.pm to update reservation.lastcheck for all reservations in a cluster when a user connection is detected. While looping waiting for a connection, the current reservation.lastcheck is retrieved from the database. If it changed it means some other reservation in the cluster detected a connection and the loop terminates. 

Reworked and simplified much of inuse.pm::process. It was still using goto calls.",VCL-678
0317eced108976ad439a5b8ef4887e834ceb362a,,,1,['managementnode/lib/VCL/healthcheck.pm'],"VCL-635

changed computer_id to computer_identifier
changed get_computers_controlled_by_MN to get_computers_controlled_by_mn 

removed/changed some notify statements",VCL-635
edff06a19b6ce06d109dbee20ea109be3538973b,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-704
Updated get_request_info to always retrieve current user info by passing the $no_cache flag.",VCL-704
5d3c2576f6f1080342fc170654eb83a17f87af41,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-703
Added flag to call to get_reservation_password in create_user so that a warning isn't displayed if the reservation password isn't set.",VCL-703
5a2c68237231232ee8e27fd26ba50ef47907a55e,,,3,"['managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/Module/Provisioning/libvirt.pm', 'managementnode/lib/VCL/utils.pm']","VCL-702
Updated Module.pm::create_provisioning_object to check if the os, vmhost_os, and mn_os objects exist and pass them to the constructor if they do.

Updated libvirt.pm to pass the vmhost_os object to the driver object's constructor.",VCL-702
50c93525a5307f20f3da233e64294831a28b10b2,,,1,['managementnode/lib/VCL/DataStructure.pm'],"VCL-678
Commented out noisy notify message in DataStructure.pm.",VCL-678
6ca19d24ea41e343e942dab174123b7db074382d,,,6,"['managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/reserved.pm', 'managementnode/lib/VCL/utils.pm']","VCL-699
Cleaned up how $self->{os,mn_os,vmhost_os,provisioner} are stored. Removed the objects from $ENV and into $self.

VCL-703
Updated Linux.pm create_user and delete_user. Home directories are now deleted when a user is deleted if the home directory resides on the local disk. Added is_file_on_local_disk subroutine to determine this.

VCL-702
Reworked and simplified reserved.pm::process. It had some very old loops and goto statements.

VCL-16
Fixed a few issues with cluster reservations. Updated reserved.pm to update reservation.lastcheck for all reservations once a connection is detected.  Updated utils.pm update_reservation_lastcheck to accept multiple reservation IDs. When a cluster reservation detects that a user has connected, the state is changed to inuse. The other reservations lastcheck may be old. As soon as the state changes, vcld tries to fork inuse processes for the other reservations but can't because the reserved processes are still running.

Other
Changed name of utils.pm::is_IP_assigned_query to is_ip_assigned_query since all other subroutines are lowercase.

Added a few new database query subroutines to utils.pm:
get_vmhost_assigned_vm_info
get_management_node_vmhost_ids
get_management_node_computer_ids

These aren't called from anywhere else in the trunk code yet but will be useful when some VM host utilities are added later on.",VCL-699
2fb34ba7f3ff766a39fd813ac4a9d97e6effa599,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-701

removing Local edit for krb5.conf settings, didn't intend to commit that",VCL-701
0e2d403cd33a398e8970a16ba5603344c96d3c87,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-701

updated the get_network_configuration routine to fix slight differences in ifconfig output",VCL-701
acd8726098cf81a3f98e1b74abc7eae0faf53abe,,,1,['managementnode/lib/VCL/new.pm'],"VCL-700
Added check to new.pm for tovmhostinuse requests.  reload_image is no longer called if vmprofile.imageid is set to 'noimage' or the host's provisioning module is set to 'none'.",VCL-700
b1d66dc97c2bad5654d49ce20a1dda9e8bab6680,,,1,['managementnode/lib/VCL/DataStructure.pm'],"VCL-699
Added check to DataStructure.pm::get_computer_private_ip_address to make sure mn_os is defined.  Also added checks to _initialize to test if an image/imagerevision/computer identifier argument was passed using defined().",VCL-699
d8e780034af40073e6c091b72d07726f6b048716,,,1,['managementnode/lib/VCL/Module/Semaphore.pm'],Changed call to lsof to use the full path: /usr/sbin/lsof.  This directory isn't in $PATH on some OS's.,
43798f6c328977924d4e3ed36f84458fbdb8ff14,,,2,"['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm']","VCL-630
Updated VMware code which copies and moves/renames virtual disks. If the name of the vmdk had to be shortened, the target vmdk is now renamed back to the originally requested name by the move_vmdk subroutine. Changed the copy_virtual_disk and move_virtual_disk subroutines in vSphere_SDK.pm to return a string containing the resulting vmdk file path. This is used by the caller to determine if the name had to be changed.

Updated VMware.pm::does_image_exist to search for both a vmdk named after the original image name as well as the shortened name. Moved _clean_vm_name from vSphere_SDK.pm to VMware.pm so it can be called from does_image_exist. This fixes issues in environments where images with the different names exist in different datastores/repositories.",VCL-630
80083f642fac8e911feb65b58d5a940d6bad3644,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-691
Fixed regex in get_production_imagerevision_info. It had an extra backslash.",VCL-691
56c654a86ee0a61bc4494564d65c3c49b1e74c3a,,,2,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm']","VCL-698
Updated Linux.pm::delete_user to use 'df -T' to determine if a home directory is on a network drive.

Fixed problems with OS.pm::remove_lines_from_file. It wasn't handling all patterns passed to it.  Simplified the subroutine.",VCL-698
468c915eec31cf53e377af3e62a78686c01cc371,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-697

Fix for overwrite state issue.",VCL-697
c501b6e75e42b541b95f58c9efae99c34a27d861,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT.pm'],"VCL-594


in a few conditionals, the check was not catching errors on the output array. The @ was missing.",VCL-594
ab524329977013a624619bddb1a0fb5eba92d3dc,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-692

removed adding extra space to AllowUsers directive, causing some issues with peoples post_reserve script",VCL-692
e3f65c1af8497f0d8494756c8708e6ac6a31046e,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT.pm'],"VCL-682
Fixed problem in xCAT.pm::load where it would incorrectly detect that an image load was complete shortly after beginning if nodestat returns ping or sshd after it previously returned install.

Added _get_install_status subroutine which uses a socket to connect directly to the node when it is being installed in order to retrieve the installation status. If the installer image is configured with a working SSH key nodestat will return 'sshd' instead of the detailed status.",VCL-682
2408d5268d7b7b613d49003fdbac07765620e4d1,,,1,['managementnode/lib/VCL/Module/OS/Windows/Version_6.pm'],"VCL-654
Sysprep fails to add devices under Windows 2008 R2 SP1.  Changed lines Unattend.xml to remove devices when image is captured.",VCL-654
95c80e81c8a9f0fb65e2b007f64bf4240bfc20b3,,,2,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm']","VCL-692

moved updating external_sshd.config to create_user routine
removed code related to updating updating AllowUsers",VCL-692
aa616d67e2ee58b00ab592b035109603fa733348,,,1,['mysql/update-vcl.sql'],"VCL-669

added schema change for update-vcl.sql",VCL-669
fd8bf70f892fa763a8d466afe7c4a309e66b1c8a,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm'],"VCL-685
Fixed typo on vSphere_SDK.pm. Subroutine call was unregister_vm instead of vm_unregister. Rarely hit the case where this bug existed.",VCL-685
364573cddf77df0982cd4f53130a61c0e7fac7b8,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-691
Fixed bug in utils.pm::get_production_imagerevision_info which occurs if an image name is passed which is not the production revision. Updated query to strip off the version from the image name.",VCL-691
adc5d7e27fb5e8b42a861dda7bf61123f42898ad,,,1,['managementnode/lib/VCL/Module/Provisioning/vbox.pm'],"Corrected errors with repository path vs host datastore paths.
Implemented capture function for vmprofiles with shared storage.
Corrected hardcoded $repository_path/vbox and $datastore_path/vbox paths to not include /vbox
Removed hardcoded ""/VCL"" repository path and replaced with value from the vmprofile table.",
0ea4262ba855c7d6efd124616c200553728626a5,,,1,['managementnode/lib/VCL/Module/Provisioning/vbox.pm'],"Updated the vbox module to support Virtualbox 4.x's new medium management system. ""openmedium"" was removed as images are now registered automatically when attached to a VM. 
""--mtype multiattach"" and ""--mtype immutable"" are now used on the first attachment to change the medium type. This can only be done once before the image is attached to any VMs, 
and further attachments require the ""--mtype"" option be omitted or a ""read lock"" error will be encountered. As a work around I'm creating a non-booted VM named ""STORAGE_HOLDER""
with a scsi controller named ""STORAGE_HOLDER_SCSI"" that is used to make the first attachment with ""--mtype multiattach"" if the image isn't already registered.",
d73990ab62b50c161e2aaf5b8275afec4cba8e98,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT.pm'],"VCL-682
Updated xCAT loading code. It wasn't detecting the nodestat status of 'sshd' after installation was complete. Added code so that the delay between monitoring loops is short at the start and then increases once the start of installation is detected.",VCL-682
73c68b3e17b7865b79f639995b907d442308c53b,,,2,"['mysql/phpmyadmin-config.sql', 'mysql/vcl-config.sql']","VCL-689
Added initial schema files for config management.",VCL-689
863eddd7a2721cb828f7665ff9fb8e410ae7e7cf,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT.pm'],"VCL-682
Added check to make sure $self->data is defined in xCAT.pm::DESTROY to avoid 'Can't call method ""get_computer_node_name"" on an undefined value' errors.",VCL-682
72070aa50a3af77ddd5c0b28fc9e84c3c15d38fa,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT.pm'],"VCL-682
Replaced call to _rinstall with a call to nodeset(install) and then power_reset. Calling rinstall is flaky. It often results in a 'nodeset failure' error. Removed _rinstall subroutine.",VCL-682
58cbc0f2a641d2df3f2cdf15b676ed09d47ab257,,,1,['managementnode/lib/VCL/Module/Provisioning.pm'],"VCL-688
Added '2>&1' to du command used to detect if image resides on another managment node.",VCL-688
c3d4cce87e84f5c1e893c66324935e5eeaefa4c9,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-585

Added code to also update registry values for internet time servers.",VCL-585
9eba301f1096365b74edc090dc4d949e48699bfb,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm'],"VCL-685
Updated vSphere_SDK.pm::_get_resource_pool_view to check if vmprofile.resourcepath is not configured and only 1 resource pool was found on the host. If so, it skips the next step of looping through the resource pools. This makes it a bit more efficient.

Improved regex in initialize which determines whether the VM host's name is a full DNS hostname or a short name. Added check to make sure there's is a letter. This allows the VM hostname to be an IP address. Otherwise it was truncating the IP address.",VCL-685
79a10df2c86f650e380b100904d01801f8fbd540,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm'],"VCL-682
Updated arguments VMware.pm which creates a DataStrucuture object: computer_id --> computer_identifier...",VCL-682
09826340e6a50c541f6c243721510151398eedd5,,,2,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/Provisioning.pm']","VCL-682
Updated OS.pm::is_ssh_responding to accept an optional $computer_name argument. This is used by xCAT.pm::node_status.

Updated argument in line in Provisioning.pm which creates a DataStrucuture object.",VCL-682
75d54806cea22640411743397cd5db9cf2cba4ee,,,2,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module.pm']","VCL-682
Updated names of arguments accepted by DataStructure.pm. Changed 'image_id' to 'image_identifier', and likewise for computer_id and imagerevision_id. This more accurately reflects what the value of the argument can be. Updated code which passes these arguments in Module.pm.

Added optional $display_warning argument to Module.pm::os. This is used to suppress the log warning when determining whether or not the os is defined via $self->os.",VCL-682
552aab31ba291238f8a8a51cd0aad2fbfa209d44,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-682
Updated utils.pm::is_management_node_process_running to return a hash reference if called in scalar context. This allows the process names to be returned instead of just the PIDs. The process names are used by xCAT.pm::is_throttle_limit_reached to determine if a node is actually being installed/captured or if its xCAT state is stuck.  If called in list context, the behavior is the same -- an array of PIDs is returned.",VCL-682
d22f41edada6706b6aa345e7275f35fa319d9a56,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT.pm'],"VCL-682
Reworked xCAT.pm. Removed old xCAT 1.x code. Rewrote code which was executing commands on the management node to use $self->mn_os. Removed retrieve_image subroutine since it is now in Provisioning.pm.",VCL-682
2bde1081db62f0269e34b9611e8e92f8791cd6c4,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"Correction in the use of uid.
storing hostname to persist accross reboots",
32447f0a3df4c530d77a9980d2a435c4452559f0,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-669
typo, left off curlies",VCL-669
a39248089705fa0c8d3d2397575834ac0991f10d,,,1,['mysql/vcl.sql'],"VCL-669
Changed variable name sshPublicKeys to lower case for sql schema",VCL-669
40371129506e9e37a2297c030d0da4666c79d75a,,,2,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/utils.pm']","VCL-669

Changed variable name sshPublicKeys to lower case",VCL-669
ea24af5c7201c4b02a887852f3c2599dc3f3bc88,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-669
added sshPublicKeys to user table for user supplied public ssh keys",VCL-669
92ad24d3d65ea1dd2e9ab9b9df209a8b4a9914d0,,,6,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/utils.pm']","VCL-584
utils.pm, OS.pm: changes to check for existing IP address assigned in VCL database for server loads
 
VCL-669
Linux.pm,Datastructure.pm,OS.pm,Linux.pm: setup user supplied ssh identity keys
 
General
utils.pm, ubuntu.pm,linux.pm,windows.pm: commented out notify statements that print out the details of netstat and network configuration",VCL-584
69b6752ede4a0f22e0df2ea18c0e306c872b21a1,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-16
Fixed problem with cached result from get_connect_method_info. It returns a hash whose keys are integer IDs. process_connect_methods iterates over these. The previous code was adding the RETRIEVAL_TIME key to the top of the hash. Changed to add RETRIEVAL_TIME under each connect method instead of to the top of the hash.",VCL-16
0c18c2dfcd4f3523b30890d1d4a5f5bdee58c62c,,,1,['managementnode/bin/vcld'],"VCL-16
Fixed problem from last commit to vcld. Reservation ID wasn't being set for each cluster child reservation.",VCL-16
91fcbef15b9c6f3987aeb3b2a765f23a0b2eca01,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-678
Commented out unnecessary notify line in get_request_info. Fixed indentation.",VCL-678
ba4d1184970f388bc2b56e8bd31d6a5e4d2e5571,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-16
Added cache timestamp check to get_user_info.",VCL-16
397c6148773cc8dbe0cc50b59474eff9d2b3180c,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-16
Added timestamps to cached result from utils.pm::get_*_info() subroutines. Added timestamp check if cached data is returned. If cached data is too old it is retrieved again.

VCL-679
Updated get_computer_info to call get_production_imagerevision_info when assembling the nextimage info.",VCL-16
d05384d8984ce06d9c037b6cffd2eaf0c6484917,,,1,['managementnode/bin/vcld'],"VCL-16
Updated vcld to only retrieve the full request info once for cluster requests. It was retrieving the same info over and over for each reservation. Added reverse sort to reservation loop so that the parent reservation is forked last.",VCL-16
79dc1d53d01158d141ef7971004696d350e13165,,,1,['managementnode/lib/VCL/Module/OS/Windows/Version_6.pm'],"VCL-678
The get_firewall_configuration sub was generating a ton of vcld.log output by displaying both the netsh.exe output as well as the hash that is generated from this command's output. Changed call to execute() so that it doesn't display the output. Added code to construct a string representing the hash that is returned with 1 rule per line. It had been calling format_data which was displaying several lines per rule. Also added code to ignore IPv6 rules for now since the rest of the code can't support them yet.",VCL-678
864e9be34915d1bc5706d8e8e433a9242ed7ced5,acoburn,acoburn,1,['doap_vcl.rdf'],updated DOAP file with 2.3.1 release,
9ba462d881ca5a1c441aaff724f02defc49c6980,,,1,['managementnode/lib/VCL/Module/OS.pm'],"VCL-676
Fixed command in OS.pm::remove_lines_from_file. Changed single quotes to doubles and escaped them.",VCL-676
56c0f040056d6ad8693b20cfd3351367c2ffeabc,,,4,"['web/.ht-inc/groups.php', 'web/.ht-inc/privileges.php', 'web/.ht-inc/utils.php', 'web/.ht-inc/xmlrpcWrappers.php']","xmlrpcWrappers.php:
-added option to supply name of reservation to XMLRPCdeployServer
-XMLRPCremoveUserGroup and XMLRPCdeleteUserGroup did the same thing; made XMLRPCdeleteUserGroup just call XMLRPCremoveUserGroup - kept both so that scripts would not have to change because one was dropped
-did some updates to headers to provide better documentation generation
-changed some whitespace formatting
-modified XMLRPCgetRequestIds - added OS, isserver, state, and if it is a server, servername to returned data-modified XMLRPCgetUserGroupAttributes - added overlapResCount to returned data; modified error return code to not be duplicated with an different error
-modified XMLRPCremoveUserGroup - added ability to delete federated groups if user has access; added check for group being in use before deleting it and return error if it is in use
-modified XMLRPCeditUserGroup - added ability to modify federated groups if user has access; do not attempt to update name and affiliation if they are not changed (resulted in an duplicate group name error)
-modified XMLRPCgetUserGroupMembers - added ability to modify federated groups if user has access

privileges.php:
-additional parameter checking
-modified viewNodes - added serverProfileAdmin to $privs array used to determine which resource groups can be added at the node
-modified AJsubmitAddChildNode - moved updateUserOrGroupPrivs to inside if conditional (no need to call it if no changes)
-modified getNodeCascadePrivileges - located problem where blocking cascaded privileges does not continue to child nodes; added fix and commented it out until can properly prepare users for change

utils.php:
-modified getResourceGroups - optional argument of $id to limit returned data to just a specified resource group
-modified getUserGroupID - added optional argument of $noadd that causes the function to return NULL instead of adding the group if it does not already exist
-modified getTypes - removed conditional that checks for 'block' and 'cascade' with resource groups - type here is computer, image, etc.

groups.php:
-modified addGroup - moved conditional for editgroupid to inside 'user' section",
a8085db717cfac60d199ef88a9a9d8b70b51ca79,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm'],"VCL-671
Fixed logic bug in VMware.pm::reclaim_vmhost_disk_space. When space needs to be freed up, it was retrieving other VMs on the host and checking if they were assigned to other reservations. If assigned to another reservation, the VM should not be deleted. The logic was backwards.",VCL-671
8a475f159428b7863fdf32193afed665e8f8ecb6,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm'],"VCL-668
Updated code in VMware.pm which checks the output of the vmkfstools command used to copy a vmdk image. It was checking for a ""100% done"" line in the output. This line is not always displayed with ESXi 5.1.",VCL-668
ac41dba5571af20c4d47139c1fb6a760c6465e99,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-665

added 'filtered' to list of terms to check for.",VCL-665
2e4dccb85fc713757f9f2cdeb606750f96bb81a5,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm'],"VCL-636
Replaced call to _clean_vm_name.  I inadvertently left it commented out for testing in revision 1392369.",VCL-636
c51b2013349f65d94d870d450bf2a0176f68ac4a,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm'],"VCL-656
Added 7200 second timeout to _wait_for_task call in VIM_SSH.pm when snapshots are removed from the VM.",VCL-656
928ee0e6104d72e50721da1b77dc493202afbeef,,,4,"['managementnode/lib/VCL/Module/Provisioning.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/libvirt.pm']","VCL-657
Updated calls to get_vmhost_profile_repository_path to not display a warning in vcld.log if not set in the VM profile.

VCL-656
Updated VIM_SSH.pm to timeout after 7200 seconds instead of 30 when removing snapshots from a VM. This process merges delta vmdk files into the parent and may take a long time.",VCL-657
85e175623c05ee79ac380e80bda881768bfc93ee,,,1,['mysql/vcl.sql'],"VCL-615
make default adminUsers group have the same level of access as the default admin user

changed node where adminUsers group has access from 'admin' up to 'VCL' and added the cascade privilege",VCL-615
367dda717979a11c7b98fe1b8576fca46e2bb55b,,,1,['managementnode/bin/install_perl_libs.pl'],Fixed indentation.,
5aeddae5d2e3982ceb042b5757c71d89f1251ea3,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm'],"VCL-649
Updated VMware.pm's copy_vmdk and move_vmdk subroutines to only change the image name in the database if the request state is image.",VCL-649
ec385b3b1476c28f36269ec1ae51f6f7519a9166,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-603
Updated Windows.pm::reboot to attempt to perform a hard reset if the computer is not responding to SSH.",VCL-603
7c70de59b00d38a2686a32ef4931bd56a96c8f0e,,,1,['web/.ht-inc/secrets-default.php'],changed comment for $pemkey to say that won't ever have to type it,
494e241e56b8dda2abaa124bf4558502db14dbe4,,,1,['web/.ht-inc/utils.php'],"VCL-626
Name RDP file download after server reservation name

utils.php: modified sendRDPfile - if server reservation, name file based on server reservation name; if server and cluster reservation, name file based on reservation name and image name",VCL-626
df5e2d4a07214e5950137a3dcea77795bf22e0c1,,,1,['managementnode/lib/VCL/Module/OS/Windows/Version_6.pm'],"VCL-654
Updated Version_6.pm::run_sysprep to support 32-bit versions of Windows.  Added missing Unattend.xml setting to add local account.",VCL-654
242680598d6633aba5cf729a4e15752b96bde155,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-651
libvirt to vmware entry missing from provisioningOSinstalltype table 

VCL-451
Cannot add deleted computers

vcl.sql:
-added datedeleted to computer table
-changed hostname, eth0macaddress, and eth1macaddress keys to be unique keys on those fields and datedeleted (i.e. hostname key: unique(hostname, datedeleted))
-added entry to provisioningOSinstalltype for libvirt<->vmware

update-vcl.sql:
-added Add2ColUniqueIndexIfNotExist stored procedure
-added datedeleted to computer table
-removed existing calls for changing eth0macaddress and eth1macaddress keys in computer table
-added calls to Add2ColUniqueIndexIfNotExist to change hostname, eth0macaddress, and eth1macaddress keys to be unique keys on those fields and datedeleted (i.e. hostname key: unique(hostname, datedeleted))
-added entry to set datedeleted to NOW() for any deleted computers where datedeleted is the default value
-added entry to provisioningOSinstalltype for libvirt<->vmware",VCL-651
c315359a9e36c93e11503b1c29436d330a6d6b7c,,,2,"['web/.ht-inc/computers.php', 'web/.ht-inc/utils.php']","VCL-451
Cannot add deleted computers

computers.php:
-modified editOrAddComputer - if $mode is 'submitDeleteComputer', set appropriate error messages to be displayed to notify user of
changes to computer data and set skipmaintenancenote continuation variable
-modified confirmEditOrAddComputer - if $skipmaintenancenote is set, go straight to next mode instead of going to computerAddMainte
nanceNote first
-modified confirmDeleteComputer - moved check for duplicate hostname on undelete from submitDeleteComputer to here, added checks fo
r duplicate eth0 and eth1 addresses, and set continuation variables if they need to be modified
-modified submitCompStateChange - set datedeleted = NOW and remove '-UNDELETED-<compid> when deleting; removed setting notes = ''
-modified processComputerInput - added checks for mac address conflict
-modified processBulkComputerInput - restricted check for conflicting hostnames to undeleted computers only
-modified submitDeleteComputer - do not remove '-DELETED-<compid>' when undeleting computers; set datedeleted to zeros when undeleting; removed '-UNDELETED-<compid>' from hostname when deleting; set datedeleted to NOW when deleting; if undeleting, check continuation variables to see if we need to modify hostname or mac addresses
-modified checkForHostname - restricted check for conflicting hostnames to undeleted computers only
-added checkForMACaddress

utils.php:
-modified getComputers - do not need to remove '-DELETED-<compid>' any more
-modified sortComputers - only need to replace UNDELETED, instead of (UN)?DELETED",VCL-451
2235d8a47b03ac0f6f56ddb0cdc1945a9830b652,,,1,['web/.ht-inc/utils.php'],"VCL-650
VCL breaks with PHP 5.4

utils.php: modified processInputVar - added checks for input variable being an array before checking if it should be changed to 'zero'",VCL-650
7296562e0460c528f0e7a213b8e7d623863f35ad,,,1,['web/.ht-inc/groups.php'],"VCL-653
editing a federated user group sets the affiliation of the group that of the user editing the group

groups.php: modified editOrAddGroup - added affiliationid to the continuation data for courseroll and federated user groups",VCL-653
0a82daad00b3d8985d097f0081fba88d50f59fa7,,,1,['managementnode/lib/VCL/Module/OS/Linux/init/Upstart.pm'],"VCL-582
Fixed problem in Upstart.pm::stop_service where it was not stopping the existing ext_sshd service. It was assuming the service was named ext_ssh.",VCL-582
353570d5dc508280b2dc42dfd909bdde93c68022,,,1,['managementnode/lib/VCL/Module/OS/Linux/init/Upstart.pm'],"VCL-582
Fixed problem in Upstart.pm::delete_service. Previous versions of the Ubuntu code were configuring a service named ext_sshd. The new code calls it ext_ssh to match the regular ssh service name. The delete_service subroutine wasn't attempting to delete both names. As a result, images loaded with older code having a service named ext_sshd failed. Updated code to attempt to delete both service names.",VCL-582
684a1cfef8fc41f06f6c5c60950d2c390438a1f7,,,1,['web/.ht-inc/utils.php'],"VCL-650
VCL breaks with PHP 5.4  

utils.php: modified getKey - changed from looping through items to create an md5 of everything to just doing an md5 of the serialized data",VCL-650
c2370c35d75032be311ee7480e0ef9554fb84a35,,,2,"['web/.ht-inc/vm.php', 'web/js/vm.js']","VCL-643
VM Limit can be decreased to below the current number of assigned VMs  

vm.php:
-modified editVMInfo - changed vm limit widget to do updates immediately after change instead of after focus change
-modified updateVMlimit - changed to send JSON as reponse; if limit has not changed, return success right away; check for new limit being below the number of currently assigned VMs, and if so, return an error and new limit that is the current number of assigned
VMs

vm.js: 
-modified updateVMlimit - call xhrPost with handleAs set to JSON
-modified updateVMlimitCB - handle data as JSON; if status is LIMIT, set limit to specified value",VCL-643
b23795d55204196814359814b3fabf0e762425fa,,,1,['web/.ht-inc/groups.php'],"VCL-642
colons should not be allowed in resource group names

groups.php: modified processGroupInput - split name check to be separate for user and resource groups and removed : from available
characters for resource groups",VCL-642
1a34336e5e20c200520ab5149bac528371590c29,,,1,['managementnode/lib/VCL/image.pm'],Fixed arguments to get_management_node_sysadmin_email in image.pm which were intended to suppress warning messages if the value is not defined. They were set to 1 but should be set to 0.,
b6a8811cb5eb74ac377116c3b57bcc726f9433c1,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-647
Added check to get_vmhost_info to determine if vmprofile.rsakey is defined before attempting to check if the file exists.

Other
Removed old monitorloading subroutine. It is not called anywhere anymore.

Added stopwatch subroutine. This is just used for code development and testing. It can be used to display how long things take to run.

Added ' -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null' options to run_scp_command to match run_ssh_command.",VCL-647
d6018ef2c216f96493c1afad2865787d56cb3f43,,,1,['web/.ht-inc/images.php'],"VCL-631
imagerevision.datedeleted not getting set

images.php: modified AJdeleteRevisions - added updating datedeleted to query",VCL-631
6632007c8a0f006fbbee01a5d945de61bf5f31e5,,,1,['web/.ht-inc/images.php'],"VCL-628
check for duplicate image name not correctly performed when specified name is the same as the base image

images.php: modified processImageInput - pass empty value for $imageid when calling checkForImageName if adding a new image",VCL-628
0a7b634e34dbd9c64c3dacd9233831aac68313fd,,,1,['web/js/vm.js'],"VCL-627
image type fields on VM Host Profile page do not get updated 

vm.js: modified getVMprofileDataCB - added lines to update repository image type and virtual disk image type",VCL-627
cffd9b3bc73830c723a60b0c5b9518bb02e6de16,,,1,['web/js/code.js'],"VCL-619
usenls may be undefined in _() function in requests.js

code.js: modified _() - corrected test for usenls being undefined",VCL-619
fd94fda2537e97992891c5057eb46752470f7287,,,4,"['managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/init/SysV.pm', 'managementnode/lib/VCL/Module/OS/Linux/init/Upstart.pm', 'managementnode/lib/VCL/Module/OS/Linux/init/systemd.pm']","VCL-582
Reworked Linux init daemon module code to handle OS's which use multiple init daemons such as systemd and SysV.",VCL-582
0f32c53f51ab032628bcac107a5a11c45fe2ce95,,,2,"['web/.ht-inc/computers.php', 'web/.ht-inc/utils.php']","VCL-451
Cannot add deleted computers

computers.php: modified submitDeleteComputer - when deleting a computer, change hostname to be current hostname with ""-DELETED-<compid>"" appended to it; when undeleting, remove ""-DELETED-<compid>"" from the hostname, and if this would cause a conflict with an existing computer, append ""-UNDELETED-<compid>"" to it

utils.php:
-modified getComputers - if deleted computers are included and the computer has been deleted, remove the ""-DELETED-<compid>"" part from the hostname
-modified sortComputers - remove ""-(UN)DELETED-<num>"" from the hostnames before comparing them",VCL-451
24ae9ba44075e5d4102c96832df9d69572a810fd,,,6,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm', 'managementnode/lib/VCL/Module/OS/Linux/init/SysV.pm', 'managementnode/lib/VCL/Module/OS/Linux/init/Upstart.pm', 'managementnode/lib/VCL/Module/OS/Linux/init/systemd.pm']","VCL-582
Reworked Linux code which configures the sshd and ext_sshd services including the modification of rc.local. Changed flow so sshd configuration is reverted to normal before an image is captured. When the image is loaded, sshd listens on all interfaces. Once sshd responds, the vcld code configures ext_sshd and implements security measures such as locking down sshd so that it only responds to the management node.

Separated out calls to the different init daemon into separate init modules. The ones currently implmented are SysV, systemd, and Upstart. Updated Ubuntu.pm to use the Upstart.pm module.",VCL-582
b98cabeb35df7864151a45da1150a6c6bfb91137,,,1,['managementnode/lib/VCL/Module/Provisioning/libvirt.pm'],"VCL-641
Fixed regex in get_domain_info to correctly parse the virsh output if there are multiple spaces between the ID and name.",VCL-641
30d9a5c30fe0c9ee9342e9561182632695d62d30,,,10,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/Provisioning.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/vbox.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT2.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT21.pm', 'managementnode/lib/VCL/reclaim.pm', 'managementnode/lib/VCL/utils.pm']","VCL-630
syncing the code section to trunk from vcl-2.3-bugfixes
 
To improve the data collection and improve the use of the currentimage.txt contents, the following changes made:

OS.pm:
renamed get_current_image_name to get_current_image_info
get_current_image_info can return any requested variable it contains, by default is imagerevision_id
Also it updates the DataStructure with the most current data.

i.e Using, $self->data->get_computer_currentimage_vcld_post_load() will return the current post_load status contained in the currentimage.txt on the node. This is to store the data and reduce any additional  ssh logins in the future.

Other Modules listed are small changes related to the OS.pm change",VCL-630
cd40c6eaac6288c75353436caba58ea11b7bbcd1,,,1,['doap_vcl.rdf'],"Added ""Apache VCL"" to the name of each release in doap_vcl.rdf to make the formatting look better on the ASF project releases page.",
1f6199aa94472bd9bd0ca1cd8fb96eff43ac8c9a,,,1,['managementnode/lib/VCL/Module/OS.pm'],"VCL-639
OS.pm fixed readding users on reinstall",VCL-639
c2ea064620988b4c263dbd3b8570aa57f2811d3b,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-640

removed 30min start time.",VCL-640
3207467f840b87a75204cc0b90c3c0b8bd7c3edb,,,1,['managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm'],"VCL-584
fixed IP address support for Ubuntu servers",VCL-584
68c3ac48c657a6dc8bc70b8d0008b945be001209,,,2,"['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm']","VCL-638
Added get_host_network_info and add_ethernet_adapter to vSphere_SDK.pm. This code detects whether a dvSwitch or regular network switch is being used on the VM host and adds an ethernet adapter accordingly.

Added code to VMware.pm to check if the API object implements add_ethernet_adapter. If it does, the ethernet info isn't added to the .vmx file before it is registered. After being registered, add_ethernet_adapter is called.",VCL-638
53d99778b948597036c8d870cccc8851ed000620,,,4,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm', 'mysql/vcl.sql']","VCL-636
Added vmprofile.folderpath column to schema. Added code to DataStructure.pm and VMware modules to retrieve and use it if populated.

Other
Added code to VMware.pm to make sure the network names configured in the profile exist on the host.",VCL-636
aa477f64b367f461dc378b92325018df06ee296c,acoburn,acoburn,1,['doap_vcl.rdf'],added DOAP RDF project file,
3b45e0b3af5cc12ac5a1f2bb36877511bcfd55a7,,,1,['managementnode/lib/VCL/healthcheck.pm'],"VCL-635

fixed support for standalone lab machines",VCL-635
ec4097887bea874b39d682c3c292442ef5fb059c,,,1,['managementnode/lib/VCL/utils.pm'],VCL-635,VCL-635
fe4050a511d60f2678d9e3c039ca3076d8e10884,,,1,['managementnode/lib/VCL/healthcheck.pm'],"VCL-635

more minor tweaks",VCL-635
27178ca854f71e834cb02fa910d05c72de84df20,,,1,['managementnode/lib/VCL/healthcheck.pm'],"VCL-635

small correction",VCL-635
60ccec565f2d31b77136c9ee323d31319f9ec9b8,,,3,"['managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/healthcheck.pm', 'managementnode/lib/VCL/utils.pm']","VCL-635

utils.pm - created get_current_image_contents_noDS for routines outside of the modularized code
healthcheck.pm -- simpilifed to not depend on OS objects
Linux.pm moved two routine calls around in post_load routine",VCL-635
ec804b1f2ba09086e15d9b3476676cee941583f8,,,1,['managementnode/lib/VCL/new.pm'],"VCL-634
Updated new.pm to add the ""nodeready"" computerloadlog entry whenever reload_image returns true.",VCL-634
5d59d566bba45d3ccc2b253d03737ced62516b99,,,2,"['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/vbox.pm']","VCL-633
Updated all lines in VMware.pm and vbox.pm which evaluate the value of vmprofile.vmdisk to check for ""local"" and ""dedicated"" instead of only ""local"".",VCL-633
0393c46aa4877814e591e7fb1eb934dc47e4014b,acoburn,acoburn,7,"['managementnode/bin/install_perl_libs.pl', 'managementnode/lib/VCL/utils.pm', 'mysql/update-vcl.sql', 'mysql/vcl.sql', 'web/.ht-inc/utils.php', 'web/.ht-inc/vm.php', 'web/js/vm.js']","VCL-560

For installations using the vmprofile.password value in the database, this value is stored in cleartext. That means that if there are multiple management nodes, each
management node will have access to this password, which may not be desirable. The password is also passed in clear text along the network between the mysql database and the
management node(s). 

This implements the ability to set an asymmetric key so that the password can be set in the website but only be decypherable from the management node(s) with the private key.",VCL-560
c180d2ae2ea542871ebb845fd5f6aef258958458,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm'],"VCL-632
Removed useless set_file_permissions subroutine from vSphere_SDK.pm.

Other
Added missing ""return 1;"" to vm_register.",VCL-632
67e114b86545ebb68e131a96abaa33d76a04977d,,,7,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/reclaim.pm', 'managementnode/lib/VCL/utils.pm']","VCL-584
handles setting user defined IPaddress

VCL-614
simple ping test to confirm ip address is not being used

VCL-629
Linux added chown command when adding users",VCL-584
d8a6e0b16fb737cc1f10761b61dd4f2a5397d62e,,,1,['managementnode/lib/VCL/Module/Provisioning.pm'],"VCL-625
Fixed problem introduced in previous commit to Provisioning.pm::retrieve_image. It was adding an extra period before the extension when retrieving files from another management node.",VCL-625
fbeadc2b249002ea5ddfe5355c000b9b31ba1c10,,,2,"['managementnode/lib/VCL/Module/Provisioning.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm']","VCL-625
Updated Provisioning.pm::retrieve_image to check the directories of the remote image files it finds.  The list of files to retrieve is pruned if the same files are found in multiple directories.

Updated VMware.pm::get_image_repository_search_paths to add the vmx.reference file to the list of paths so that it gets retrieved during image transfer.",VCL-625
cf14e81e7a374f472f63174e11039be3e66f16d6,acoburn,acoburn,1,['web/.ht-inc/utils.php'],"VCL-624

The getUserlistID function takes a user's loginid as its first parameter. Because of the way findAffilFunc is written, it is possible to hand the function a unityid and it doesn't die, but it is still incorrect. That is, it doesn't die as long as the
system uses the testGeneralAffiliation function in the findAffilFuncs array.",VCL-624
4e489f3ff204fcc7618b330d56fcfa6623fdef52,acoburn,acoburn,2,"['web/.ht-inc/utils.php', 'web/.ht-inc/xmlrpcWrappers.php']","VCL-617

Extended XMLRPC API to support additional functions. These include functions for managing the privilege tree, resource groups and user groups",VCL-617
3f3fd9d47984492b6070af9724d7c65ed3276ce8,acoburn,acoburn,1,['web/.ht-inc/utils.php'],"VCL-608

Added support for delegated authentication over the XMLRPC API. 

The background for this is that if VCL users are authenticated with Shibboleth, there is no way for any external application
to access those user accounts over the remote API. Any such attempt would always fail, since the VCL application has no
mechanism, internally, to validate these users' passwords.

This change introduces $apiValidateFunc, an affiliation-indexed array of functions that can be defined to validate users 
in these cases. These functions can (should?) be defined in the .ht-inc/conf.php file.",VCL-608
4a554088ea49768480bd14819b8b2cf8626dbd5a,acoburn,acoburn,1,['web/.ht-inc/userpreferences.php'],"VCL-610

Fixed one more minor HTML error -- closing a DIV tag.",VCL-610
4629512679fe9f1b5f60f17afb54fe781405d60c,,,1,['managementnode/lib/VCL/new.pm'],"VCL-16

added nodeready state for computerloadlog for nodes that did not need to be reinstalled",VCL-16
3dffacce1f1dbb8dd1bc5620bd62f1c6e3a2d8ec,,,3,"['managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm']","VCL-623
Added Windows.pm::get_public_interface_name. This calls OS.pm::get_public_interface_name and adds a loop if the interface name can't be determined. This should solve the problem where the code attempts to determine the public interface name before the interface driver is installed and initialized.

Changed OS.pm::get_public_interface_name so that it never returns the private interface name if that interface is only assigned the private IP address. It may return the private interface name if that interface is assigned other addresses. This is done for future enhancements when a single interface is supported.

Commented out section in get_network_configuration which was looping in order to attempt to determine if devices were being installed. This functionality should be replaced by the new code in this commit.

Updated Module.pm::code_loop_timeout to return the value returned by the code reference instead of a simple boolean value. Also added an additional argument to be specified controlling how often log messages are displayed.",VCL-623
91738f41316440b8f9d891ed4bd8075b702ba3df,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-585 

Added time_syncronization for Linux OS's",VCL-585
1032131b8571d50e79c0949a7d828cee9edf356d,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-582

simple change to address timing issue between getting public ip address and rc.local running",VCL-582
3ac6e2eaeb259e3de636e2e70a79874438b87e74,,,2,"['managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm']","VCL-622

replaced routine call with return 0;",VCL-622
cc0b63b9a6ef71d553cc6af800c304d543cab6f7,,,1,['managementnode/lib/VCL/new.pm'],"VCL-621

added check if public ip address is different than stored Ip address call update routines",VCL-621
e329bccaf9e8996d3dae535528529280f9c6cddf,,,1,['managementnode/lib/VCL/Module/Provisioning/libvirt.pm'],"VCL-620
Added code to libvirt.pm::post_maintenance_action to delete the VM from the host when it is unassigned from the host.",VCL-620
fbe1f85fea1f2a05795d65d4d9f35d1d62c2d64e,,,1,['managementnode/lib/VCL/reserved.pm'],"VCL-442
Fixed problem with changed delay when checking if the user clicked connect.  Timeout was shortened.",VCL-442
4b6eab4b0e7b67bd5d1fd53637d70ba6940890a9,,,3,"['managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/reserved.pm']","VCL-442
Fixed problem where Windows code would take a long time to configure the firewall after the user clicks Connect. This prevented the user from Connecting on the first try. The firewall code was first retrieving the current network configuration and firewall configuration. This can take several seconds. Changed state flow so that new.pm does not update the computer state to 'reserved'. This is now handled by reserved.pm after all of the modules have been initialized including the retrieval of the firewall configuration.",VCL-442
7267bf1871d149def35b26a6d0dfdd54cb4ae359,,,1,['managementnode/tools/Windows/Scripts/update_cygwin.cmd'],"VCL-616
Fixed problem in update_cygwin.cmd caused by a bug in the current version of Cygwin if ssh-keygen.exe is run from a non-Cygwin shell. Wrapped ssh-keygen.exe commands in ""bash.exe -c"".",VCL-616
b6f5129b4c9e21462807d342f998dbe12771e41d,acoburn,acoburn,3,"['managementnode/bin/S99vcld.linux', 'managementnode/bin/vcld', 'managementnode/lib/VCL/utils.pm']","when the vcl daemon is started from the init.d scripts on CentOS/RHEL, the start and stop functions don't produce the correct
output to the screen. This has been fixed. Also, when verbose mode is turned OFF, certain output is sent to the screen when
this script is run, rather than to a logfile. Both of these issues have been fixed.",
2f67778f8a7509a7432cbf51e3a26c770fecca39,acoburn,acoburn,5,"['web/.ht-inc/computers.php', 'web/.ht-inc/groups.php', 'web/.ht-inc/images.php', 'web/.ht-inc/managementnodes.php', 'web/.ht-inc/schedules.php']","VCL-610

Certain <div> tags were not closed in the web interface. They are now.",VCL-610
0094e3c199ee7e689165f4ac05189253572d1146,acoburn,acoburn,1,['web/.ht-inc/conf-default.php'],"VCL-607

Fixed in 2.3.1 bugfix branch. Default skin hard-coded into initialization function. Now the configuration variable DEFAULTTHEME is used.",VCL-607
4334f15d454616f5f3fd6595b33de0d8e977a966,acoburn,acoburn,2,"['web/.ht-inc/conf-default.php', 'web/.ht-inc/utils.php']","VCL-607

The 'default' skin was hard-coded in initGlobals() when there was a global constant DEFAULTTHEME already defined. These two lines in initGlobals() determined the
theme for the login screen, and this change makes that determination configurable in conf.php",VCL-607
a02e22ef2c074d9f067a6853d0c352569461fd97,,,1,['managementnode/lib/VCL/DataStructure.pm'],"VCL-609
Updated DataStructure.pm::get_computer_private_ip_address to prevent it from returning null if the cat command returns a non-zero exit status. Updated to use OS.pm::get_file_contents() to reduce duplicated code.

Added code to DataStructure.pm::_automethod which allows $self->mn_os to be used within DataStructure.pm in order to run commands on the OS of the management node.",VCL-609
eaf9807ff731e041b1b2cb419ab58314630743f9,,,1,['managementnode/bin/cygwin-sshd-config.sh'],"VCL-301
Fixed bug in cygwin-sshd-config.sh which occurs with current version of Cygwin.",VCL-301
6a4ee69d1a202bfaa0cdaaaf1180a96495bbc265,,,8,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm', 'managementnode/lib/VCL/Module/OS/OSX.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/reserved.pm', 'managementnode/lib/VCL/utils.pm']","VCL-570

-added support for setting static address
-removed duplicate code on adding user, handled by Linux.pm


Changed Linux.pm to use host command for finding hostname, ipcalc is not consistent across OS's

Removed some debug statments to reduce output on connection method hash",VCL-570
f7904ae69343805bc5d12c9935f3062615460053,,,1,['README'],changed URL for install guide at top of file to 2.3 install guide,
c65f77caacaee61bb7d3ad0411014dcad88295e4,,,1,['RELEASE_NOTES'],"changed references to ""vcl-dev"" list to just ""dev""",
896303f7ae454c4e8f7985a1d1ef59a99adf2be0,,,0,[],Moving as per INFRA-5034 (VCL TLP graduation),
bbcbbc65935475f10f6384bb05a08f52dffe35cf,,,1,['web/.ht-inc/userpreferences.php'],"VCL-576
Finalizing for 2.3 release

userpreferences.php: modified confirmUserPrefs - removed ""(Vista only)"" from 32 bit color depth option",VCL-576
b9b38cd463fc9688e84d4caff486dc8d35af20a5,,,1,['web/.ht-inc/userpreferences.php'],"VCL-576
Finalizing for 2.3 release

userpreferences.php: modified processUserPrefsInput - fixed issue where preferred name could not be set to empty string - removed $user['preferredname'] as default value when calling processInputVar for preferredname",VCL-576
fc106400d29f6e82802aadaf316e1d8a35896277,,,2,"['web/locale/es_MX/LC_MESSAGES/vcl.mo', 'web/locale/po_files/es_MX/vcl.po']",committing some changes from Juan José Zamanillo,
92c97d85d18d13cc76031fd4d76d522f693b4c13,,,5,"['INSTALLATION', 'README', 'RELEASE_NOTES', 'UPGRADE', 'managementnode/lib/VCL/utils.pm']",removed incubator related stuff from INSTALLATION/README/UPGRADE/RELEASE_NOTES,
c2e6ed327b7ca4ac9fe13036f495101c548587a1,,,1,['web/.ht-inc/blockallocations.php'],"VCL-576
Finalizing for 2.3 release

blockallocations.php:
-modified createMonthlyBlockTimes - separated out the code that generates the values for the insert so that it can be called when validating the input to determine if any values would be generated
-added getMonthlyBlockTimes
-modified processBlockAllocationInput - added checks to ensure time slots would be generated for weekly and monthly repeating allocations; fixed but where Sunday only repeating weekly allocations would not be processed properly because $days was getting set to '' since the input was 0 and being treated as a string instead of a number",VCL-576
d14a1e20e18e083504b04b77fc1da2175539bffc,,,1,['managementnode/bin/install_perl_libs.pl'],"VCL-576
Added lines to install perl-IO-String and perl-Text-CSV_XS in install_perl_libs.pl. These are required for the recently updated Windows.pm::get_task_info subroutine.",VCL-576
38c16f85a48cfb5c769d096b3ba04b436bf4eaf7,,,3,"['managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/Provisioning/libvirt.pm', 'managementnode/lib/VCL/image.pm']","VCL-545
Updated libvirt.pm. Added missing calls to insertloadlog. Fixed a few bugs with image capture. The code renames the image so that images are not inappropriately named vmware*. It was setting this updated name in the database but incorrectly naming image files saved to the datastore and repository. Updated code to name the files correctly.

Other
Updated image.pm so that a warning is not displayed if the sysadmin email address is not configured.

Added code to Linux.pm::pre_capture to allow the provisioning module to specify the ""end_state"" -- meaning if a hash reference is passed with an 'end_state' key set to on, the computer is not powered off by the OS module. This is already in Windows.pm but was missing from Linux.pm.",VCL-545
521b19c40fb6b116816a7fc4716cbd7550c6939e,,,6,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm', 'managementnode/lib/VCL/Module/Provisioning/libvirt.pm', 'managementnode/lib/VCL/image.pm', 'managementnode/lib/VCL/utils.pm']","VCL-545
Fixed problems with base image capture under KVM. Updated image.pm to correctly determine the installtype.

Added code to determine the running domain when capturing an image rather than relying on the domain name matching the computer name.

Changed capture code to no longer save a copy of the XML file which defines the domain in the datastore and repository directories. This can cause problems for the code used to find images. Instead, a copy is saved in the image. This isn't currently used but will be useful in the future to customize hardware based on what was actually in the captured image.


VCL-450
Added code to VIM_SSH.pm to check if the VM is already powered off before attempting to power it off.


Other
Updated Linux.pm::create_directory to detect if ~ was passed as the argument. It skips directory creation if this is the case. Otherwise, it was creating a '~' directory under the home directory.

Added $ignore_error argument to utils.pm.",VCL-545
b8a2db087afb97567417c7c8de6d4a9c50affe13,,,1,['INSTALLATION'],"VCL-576
Finalizing for 2.3 release

modified II.2.d to only say to run genkeys.sh script since it no longer needs the passphrase given as input",VCL-576
a29a3b9f496f1e498be477d7ba799755b5665874,,,4,"['web/.ht-inc/blockallocations.php', 'web/.ht-inc/computers.php', 'web/.ht-inc/genkeys.sh', 'web/.ht-inc/requests.php']","VCL-463
add ability to deploy images as servers

requests.php: modified viewRequests - do not allow reboot/reinstall when reservation is in the reserved state

VCL-576
Finalizing  for 2.3 release

blockallocations.php: modified getCurrentBlockHTML - use full year for start/end dates

computers.php: modified bulkAddComputer - added 'i' switch to preg_match matching all xcat provisioning modules so xCAT2x will show up in the list

genkeys.sh - modified to not require passphrase to be entered - parse it from secrets.php into a temp file, input from file, then remove temp file",VCL-463
bb9ad2053bab2ead954ee2b538691f188bdb315f,,,2,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm']","VCL-390
Added warning message to Windows.pm::get_network_configuration if it finds 2 sections in the ipconfig output for the same adapter name. This occasionally happens due to a Windows bug.  Added logic to OS.pm::get_ip_address to check all the IP addresses assigned to an interface instead of simply returning the first one. It now tries to return the first valid IP address.",VCL-390
269a25cc267c5642667f463496ba7f09c32b897c,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-390
Added Windows.pm::get_public_ip_address subroutine. It overloads the one in OS.pm. It contains added logic to try to detect invalid public IP addresses (169.254.*.*, 0.0.0.0). If this is detected, ipconfig /renew is run and the network configuration is retrieved again.",VCL-390
f68d4574d6a5710acfab69aecde8b88cf0d23310,,,2,"['managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT21.pm']","VCL-594

small fix in regex for older xcat modules",VCL-594
615e7a8d8a165770be9d5718251a8d759b77afe3,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-570

entries for vmware ubuntu images",VCL-570
cd446fd8b8e6115d440adc71b0b060a4029fbb58,,,1,['managementnode/lib/VCL/DataStructure.pm'],"VCL-595

fixed regex to look at full format of string",VCL-595
3b64b85500eceea1b492d1b9e4240c4c3b3c9c87,,,1,['web/.ht-inc/images.php'],"VCL-576
Finalizing for 2.3 release

images.php: updated submitDeleteImage - changed references to ""preferredimageid"" to ""nextimageid""; thanks to Dmitri for pointing this out",VCL-576
45027dab663cce0cdfa3c4b73432bca5a3fe006c,,,3,"['managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT2.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT21.pm']","VCL-594

xCAT modules where not detecting entries in /var/log/messages, so removed stage3 and 4 checks. 
Not any real good reason to make these checks other than debugging.",VCL-594
40cfa5e7432ae12bf3d2d364113ceb2193c9ee1d,,,3,"['managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT2.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT21.pm']","VCL-576

removed tftpd checks from xcat modules.

This service seems to be changing with different versions of xcat.",VCL-576
2988dbf41de07449c8adbf2873801cdcd624d2ea,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT2.pm'],"VCL-576
Finalizing for 2.3 release

xCAT2.pm: modified load - added checks for different strings returned by different tftp server used in latest version of xCAT when watching /var/log/messages",VCL-576
25bc58b59e0b750f74875a1855c9c0a8e0e64b9a,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-576
Finalizing for 2.3 release

utils.pm:
-modified notify - initialize $sysadmin and $shared_mail_box to empty string; wrapped portion of code when $error == 2 that sends email in a conditional checking for $sysadmin not to be an empty string
-modified mail - initialize $shared_mail_box to empty string",VCL-576
191aa5360858851c8e64b59244caf1174a98f471,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm'],"VCL-576

error in sed command, changed to double quotes instead of single",VCL-576
d1e439adb85c4dc145aaf582f8eb30f0b3a824fa,,,3,"['web/.ht-inc/requests.php', 'web/.ht-inc/serverprofiles.php', 'web/.ht-inc/utils.php']","VCL-576
Finalizing for 2.3 release

VCL-463
add ability to deploy images as servers

serverprofiles.php: modified serverProfiles - allow users with serverCheckOut but without ServerProfileAdmin to only see the deploy part

requests.php: modified AJsubmitEditRequest - added underscores to what is allowed in servername

utils.php:
-modified checkAccess and getNavMenu - allow access to server profiles section if user has serverCheckOut
-modified getUserRequests - do not set useraccountready to 0 for clusters when the owner is viewing the site
-modified requestIsReady - return 1 if request is in state servermodified and computer is in state reserved
-modified getSelectLanguagePulldown - added id=""localeform"" to form",VCL-576
c67d91415af43b5f81f138ca22f781920c83dee7,,,1,['managementnode/lib/VCL/Module/Provisioning/libvirt/KVM.pm'],"VCL-576

one last fix of 2.3 mess up",VCL-576
69c650b61436217919ff3967dc2a34857c317a1a,,,4,"['managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm', 'managementnode/lib/VCL/Module/Provisioning/libvirt/KVM.pm']","VCL-576 

VCL-576

Fix of 2.3 mess up.

Thanks Cameron Mann for pointing this out.",VCL-576
ea32dacdaa861effaf61d42b450776f7cebb3082,,,3,"['managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm']","VCL-576

Fix of 2.3 mess up.

Thanks Cameron Mann for pointing this out.",VCL-576
767d31fa76411031f4b71ad279958612e157503a,,,2,"['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm']","VCL-450
Set $ENV{PERL_LWP_SSL_VERIFY_HOSTNAME} = 0 in vSphere_SDK.pm::initialize. The vSphere SDK is might be unable to connect some hosts due to SSL signing problems.

Uncommented lines to set sourceDatacenter and destDatacenter in vSphere_SDK.pm::copy_virtual_disk. With vCenter 5, the CopyVirtualDisk function was failing and generating an ""Invalid Argument"" fault instead of a ""not implemented"" fault. As a result, the subroutine was returning before it attempted the clone method. Uncommenting the lines caused a ""not implemented"" fault which is what is expected.

Updated vSphere_SDK.pm::_get_datastore_info. Under vCenter 5 with DRS enabled, the datastore URLs begin with ds://. The subroutine wasn't checking for this.  As a result, the ds: path wound up in the vmx and snapshots failed.

Added additional argument to call to get_image_info in vSphere_SDK.pm::_clean_vm_name to not display warnings if the image does not exist.",VCL-450
4fdf1730b238f08420d6029f62f99058189ff240,acoburn,acoburn,4,"['mysql/update-vcl.sql', 'mysql/vcl.sql', 'web/.ht-inc/authmethods/shibauth.php', 'web/.ht-inc/utils.php']","Fixed shibboleth-related errors encountered while testing 2.3 RC1, including:

* user.validated field was not added to the database creation and modification scripts
* in utils.php: the initGlobals() function was modifying a local rather than global version of $addUserFuncArgs
* updated updateShibUser so that the user.validated field is set to 1 whenever a user logs into the website",
6ef2c1d60cfb0ae0cb638a4ffc09ed4be7567536,,,4,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT2.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT21.pm']","VCL-576

- Updated OS.pm based on Aaron Coburn's fix to reduce hugh amounts of output data to log file.

- added display_output flag to a few other execute calls to be consistent.

- xCAT modules, converted variable passed to ping routine to shortname. In many cases this would not resolve.",VCL-576
cef91710a1ebd51411b0b2a81fb46a81e101692a,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-450
Removed references to legacy vmware.pm module from SQL files.",VCL-450
6b984eb682fdf2b6189a928471d2ba22f8496252,,,1,['managementnode/lib/VCL/Module/Provisioning/vmware.pm'],"VCL-450
Removed legacy vmware.pm file.",VCL-450
4a3ac87f40dfc9c151910c3a26df3a7f26e40184,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-576
Finalizing for 2.3 release

vcl.sql and update-vcl.sql - added acknowledgetimeout and connecttimeout to variable table",VCL-576
7e78a81c64cde398e538a483bdce911cb10fcee5,,,1,['CHANGELOG'],"VCL-576
Finalizing for 2.3 release

CHANGELOG - added release notes from JIRA",VCL-576
bc80253e2c176567d13a5e901b3dec2ca6d26f8d,,,2,"['CHANGELOG', 'README']","VCL-576
Finalizing for 2.3 release

README and CHANGELOG: added dependency on php-gettext",VCL-576
b24596d7b9c231f523109d0720cf5f9d95625719,,,1,['web/testsetup.php'],"VCL-576
Finalizing for 2.3 release

testsetup.php: added gettext to list of checked php extensions",VCL-576
660e1d3fae2816bd901151e36c11ac28ed641dee,,,2,"['CHANGELOG', 'README']","VCL-576
Finalizing for 2.3 release

README: removed duplicate entry of nmap under management node requirements

CHANGELOG: added back history from previous releases; added new section for requirement changes for 2.3; still needs Release Notes section",VCL-576
5fbfa095e159e9cfad594aaed994894ed5da9448,,,1,['README'],"VCL-576
Finalizing for 2.3 release

README: removed references to mcrypt; added php-process for RHEL/CentOS 6",VCL-576
e7d8e300753a22e5733f8ddb2bf039114d6f58b9,,,1,['INSTALLATION'],"VCL-576
Finalizing for 2.3 release

INSTALLATION: updated for 2.3 release",VCL-576
90302dbcb7ef4fa817c66f99fb00b9819483f3ba,,,1,['managementnode/etc/vcl/vcld.conf'],"VCL-576
Finalizing for 2.3 release

changed xmlrpc_username from 'vclsystem' to 'vclsystem@Local' so that vcld -setup will not complain when testing the xmlrpc functionality",VCL-576
e51e293ec738cf3081de49bb6e96b24647b79682,,,2,"['web/.ht-inc/computers.php', 'web/.ht-inc/vm.php']","VCL-576
Finalizing for 2.3 release

computers.php:
-modified editOrAddComputer - fixed bug where 'available' could get removed from state options if invalid data submitted when adding a computer
-modified bulkAddComputer - allow 'available' to be selected by default in some cases

vm.php: modified editVMInfo - changed Image field to not be required",VCL-576
3e9f27155637176df3340a37d6ed0989f95d501c,,,1,['managementnode/lib/VCL/Module/OS/Linux/ESXi.pm'],"VCL-579

Based on contribtion from Dmitri Chebotarov, Thanks Dmitri

I added some addtional routines as placeholders for future code that might need to be addressed.",VCL-579
6a6a98f202b3886506df43f67f912e9039c062c9,,,1,['UPGRADE'],"VCL-576
Finalizing for 2.3 release

added information about adding ""serverprofile/all profiles"" to privilege tree if VCL->admin does not exist",VCL-576
9929672c4969012464fd01e41749a62ebee7da18,,,1,['RELEASE_NOTES'],"VCL-576
Finalizing for 2.3 release

added ""NAT support"" and ""Remove requirement for 2 NICs"" to 2.4
moved ""Power management"" and ""Initial support for Libcloud"" to 2.5",VCL-576
51b8bca19fa7383e4eef71121c8e3675a6323bfd,,,1,['RELEASE_NOTES'],"VCL-576
Finalizing for 2.3 release

changed ""access methods"" to ""connect methods""",VCL-576
e9300da576a6e84c78aebc162a1c65623de2a617,,,1,['RELEASE_NOTES'],"VCL-576

- split libvirt and KVM into two parts",VCL-576
22966db430c240c747d27ee30954407e1907e6a6,,,1,['RELEASE_NOTES'],"VCL-576
Finalizing for 2.3 release

-changed version at top of file (oops, missed that on 2.2.1)
-updated roadmap",VCL-576
e2c9777d11c49f5e07b19c027cbf4fedda49386d,,,1,['README'],"VCL-576
updated README",VCL-576
43efb448e7d0345c34e8dba7d250e2795a15b25b,,,50,"['managementnode/bin/health_check.pl', 'managementnode/bin/monitor_vcld.pl', 'managementnode/bin/vcld', 'managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/ESXi.pm', 'managementnode/lib/VCL/Module/OS/Linux/ManagementNode.pm', 'managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm', 'managementnode/lib/VCL/Module/OS/Linux/UnixLab.pm', 'managementnode/lib/VCL/Module/OS/OSX.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5/2003.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5/XP.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/2008.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/7.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/Vista.pm', 'managementnode/lib/VCL/Module/Predictive.pm', 'managementnode/lib/VCL/Module/Predictive/Level_0.pm', 'managementnode/lib/VCL/Module/Predictive/Level_1.pm', 'managementnode/lib/VCL/Module/Provisioning.pm', 'managementnode/lib/VCL/Module/Provisioning/Lab.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vmware_cmd.pm', 'managementnode/lib/VCL/Module/Provisioning/esx.pm', 'managementnode/lib/VCL/Module/Provisioning/esxthin.pm', 'managementnode/lib/VCL/Module/Provisioning/helloworld.pm', 'managementnode/lib/VCL/Module/Provisioning/libvirt.pm', 'managementnode/lib/VCL/Module/Provisioning/libvirt/KVM.pm', 'managementnode/lib/VCL/Module/Provisioning/vbox.pm', 'managementnode/lib/VCL/Module/Provisioning/vmware.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT2.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT21.pm', 'managementnode/lib/VCL/Module/Semaphore.pm', 'managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/blockrequest.pm', 'managementnode/lib/VCL/healthcheck.pm', 'managementnode/lib/VCL/image.pm', 'managementnode/lib/VCL/inuse.pm', 'managementnode/lib/VCL/makeproduction.pm', 'managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/reclaim.pm', 'managementnode/lib/VCL/reserved.pm', 'managementnode/lib/VCL/utils.pm']","VCL-576

Updated VERSION as per release procedures.
https://cwiki.apache.org/VCL/23-vcl-release-procedures-todo.html",VCL-576
80f0cc6d028bf259da414521fab9d7324d43010a,,,1,['README'],"VCL-576
Finalizing for 2.3 release

README: changed version of Dojo Toolkit listed; added phpseclib to list of bundled 3rd party software",VCL-576
c391776488f09872b1b278b3c90e7853fe81a196,,,1,['LICENSE'],"VCL-576
Finalizing for 2.3 release

added information about the MIT License for the phpseclib stuff",VCL-576
98654a23bc0ed1e3da2db7c021c2842988acfe1f,,,1,['web/js/requests.js'],"VCL-568
refresh current reservations page 15 minutes after a reservation becomes available

requests.js: modified checkTimeouts - changed to reload after 16 minutes to account for vcld looping until vcld basis timeouts on logs instead of loop count",VCL-568
0a8a4a404dfd2f500b078bf400f8fc6628559adb,,,3,"['web/.ht-inc/requests.php', 'web/.ht-inc/vm.php', 'web/js/vm.js']","VCL-576
Finalizing for 2.3 release

requests.php: modified viewRequests - disallowed reboot and reinstall when a reservation is in the reboot or reinstall state

vm.php: removed an old TODO comment

vm.js: modified newProfileCB - set mouse cursor to default if get a failed error",VCL-576
0e082c530efb38fcfe8d112476150eb389362f49,,,1,['UPGRADE'],"VCL-576
Finalizing for 2.3 release

UPGRADE:
changed formatting so that (almost all) lines wrap at 80 characters, not including ones that need to be copy/pasted
added 2.2 to the releases that need to have CREATE TEMPORARY TABLES granted
split out how to update conf.php to separate sections for each release upgraded from",VCL-576
642b312e453e7d0f9924a0da78009b1553627b33,,,1,['mysql/update-vcl.sql'],"VCL-576
Finalizing for 2.3 release

update-vcl.sql - added alter table for vmhost to make vmprofile a smallint instead of a tinyint - this is from upgrades from 2.1",VCL-576
2cf2d792320f8d139666497f2a47ed58db67666c,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-572
Added check to Windows.pm::install_updates to return immediately if no updates were found on the management node to speed things up. It had been also retrieving list of updates installed on the computer which was pointless if nothing had to be installed.",VCL-572
aad77dfff1b08aa3b9ff5e10b96bc90bbe5ce6cb,,,1,['mysql/update-vcl.sql'],"VCL-576
Finalizing for 2.3 release

update-vcl.sql - added query to update the name of a user permission from 'Manage Block Allocations' to 'Manage Block Allocations (global)'",VCL-576
b26fe7d3d797e7d205519ffc0f8a735ba897af53,,,1,['managementnode/lib/VCL/Module/OS/OSX.pm'],"added enable_firewall_port(),get_cpu_core_count(),check_connection_on_port(),user_exists() fixed set_vcld_post_load_status() and general cleanup",
a8d8867bd5dac4b20ab24c10561174c7d9034ab4,,,3,"['web/.ht-inc/utils.php', 'web/index.php', 'web/themes/default/page.php']","VCL-576
Finalizing for 2.3 release

added $VCLversion global variable that is set in index.php as the current version of VCL. This is then used when javascript files are included in the page headers as an appended query variable in the form of somefile.js?v=$v where $v is locally set to $VCLversion. This makes browsers reload the javascript file whenever $VCLversion is changed so that people don't end up with old, cached javascript files with new code, resulting in things not working correctly. For whatever, we're regularly seeing apache and browsers think the javascript files have not been modified since the browser last loaded them when they actually have.",VCL-576
eb6a1131966204d777f35c7f6d619d96b538bb75,,,1,['web/.ht-inc/requests.php'],"VCL-576
Finalizing for 2.3 release

requests.php: modified AJsubmitEditRequest - added () to allowed characters for server names since they are often in image names and the default name for servers is the name of the image - did not change the error message to reflect this due to it requiring retranslation",VCL-576
b3f0c6f0971b236f747937eb055caba9f93954df,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-463

Needed to set $uid variable in windows create_user routine",VCL-463
011c672790ba070d978fa68ffdc524355ee66020,,,3,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/utils.pm']",VCL-463,VCL-463
913fbb09687fc07ff62a31795ae55bfc9eb54a3f,,,1,['NOTICE'],"VCL-576

changed copyright date to be 2009-2012",VCL-576
4801f21eefb5f7b967aa9fddaa00c0ad85407e42,,,1,['web/.ht-inc/utils.php'],"VCL-398
make block allocations tie up concurrent usage of image

utils.php: modified isAvailable - fixed bug where reservations for images with limited concurrent use could not be extended


VCL-485
Multilingualization of Web UI

utils.php: modified getFSlocales - added code to allow comments and white space lines in language files",VCL-398
82125c65cff88dd8b8c3e2ec730f19c1618492e4,,,2,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm']",VCL-463,VCL-463
f3c7677861ed5d83e7003ce017864951182a3f2b,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-463

added user_exists check for reinstalls.",VCL-463
7596bf72f5d18519bbdbb730b8058f1fe7b260af,,,3,"['web/.ht-inc/phpseclib/PHP/Compat/Function/bcpowmod.php', 'web/.ht-inc/phpseclib/PHP/Compat/Function/str_split.php', 'web/.ht-inc/phpseclib/index.html']",removing due to mention of LGPL,
2c927810f15e84ec22049ba501bb4e8fb974605c,,,1,['managementnode/lib/VCL/Module/OS.pm'],"VCL-503
Diff tool accidentally chopped off part of last commit.",VCL-503
755d57f81f4444a9d2effa72bf35491f8bb1c471,,,1,['managementnode/lib/VCL/Module/OS.pm'],"VCL-503
Updated OS.pm::execute to be allow it to be called as a regular function (not required to be called as an object reference).",VCL-503
843d15efb947cc5c1458fe36b61cba0e3e2dc0b0,,,1,['managementnode/lib/VCL/Module/OS.pm'],"VCL-463

remove single quotes from owner login name",VCL-463
faf405c67f1f1337ff1c9a5d8fac2f920749420e,,,1,['managementnode/lib/VCL/Module/OS.pm'],"VCL-503
Reverted is_ssh_responding to previous call to run_ssh_command.",VCL-503
6bbdf943d7545762e845b1e0dd0aa1e3001043d8,,,2,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/utils.pm']","VCL-503
Commented out calls to OS.pm::execute_new. It is failing for commands which take a long time to run.",VCL-503
a12a0e3d9b8fda86515615451bcb60d82a3f685a,,,2,"['managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6.pm']","VCL-589
Added call to set permissions in each file copy loop in copy_capture_configuration_files. Moved call to set permissions for the SYSTEM user to Version_6.pm::run_sysprep. It is calling icacle.exe which isn't available in Windows 5.x.",VCL-589
a78275ea85b872d548f770f1cb628bb07cb3918d,,,1,['managementnode/lib/VCL/Module/OS.pm'],"VCL-463

small corrections",VCL-463
1db92aa227df99e0cc6f716590fb3204b77cad5d,,,2,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm']","VCL-463

- uid was not getting set correctly for server loads
- if reservation owner is not in any of the defined admin or login groups, it was not adding them to the login list",VCL-463
8bfd0da6af7c403fe0254aa29f86420f10e37243,,,1,['managementnode/lib/VCL/Module/OS/OSX.pm'],"VCL-543
Changed indentation in OSX.pm from spaces to tabs for consistency. Indented pod sections so output lines up.",VCL-543
586756c773e278e99c24c3abd9f53e7e37676510,,,2,"['managementnode/tools/Windows_7/Utilities/Sysprep/Unattend.xml', 'managementnode/tools/Windows_Server_2008/Utilities/Sysprep/Unattend.xml']","VCL-589
Removed Sysprep Unattend.xml files from tools for Windows 7 and Windows Server 2008. Perl code now generates these.",VCL-589
63514c39803771013adfac6a47e58c4d26bcfb83,,,1,['web/.ht-inc/utils.php'],"VCL-463
add ability to deploy images as servers

utils.php: modified sendRDPfile - fixed problem where owner's password was being sent instead of current user's password",VCL-463
8bf0bbbbf5d9b0076822b3317f3419cdfaf28812,,,1,['managementnode/lib/VCL/Module/OS.pm'],"VCL-503
Fixed problem in OS.pm::execute_new where it thought the SSH attempt failed if there is no initialization output.",VCL-503
b042a851deddfb220afb46b6a911952866ec402c,,,1,['managementnode/lib/VCL/utils.pm'],Commented out notify line in get_user_info which displays the data retrieved. It was generating excessive vcld.log output.,
d957ac0bfc6686e2aad45ed934858f226e011001,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-561
Commented out warning message line in Windows.pm::reg_query. It was generating many warning messages if a registry string value spanned multiple lines.",VCL-561
dd3a050153da2195c3bc29945992762baa5538c6,,,1,['web/.ht-inc/conf-default.php'],"VCL-576
Finalizing for 2.3 release

conf-default.php: added /vcl to end of BASEURL to better match install docs",VCL-576
4f05f216ac100d9d26152a245d3e080123f6166f,,,1,['web/js/schedules.js'],"VCL-576
Finalizing for 2.3 release

schedules.js: modified addTime - initialize scheduleStore.nextid if not already set",VCL-576
d298047dff5e1a474b13f8f848537608a6734995,,,1,['managementnode/tools/Windows_Version_5/Utilities/Sysprep/i386/$oem$/cmdlines.txt'],"VCL-589
Moved Windows 5.x Sysprep directory from tools/Windows tools/Windows_Version_5.",VCL-589
3b546b85885ce750443fa7c9257dcd929ac74dee,,,1,['INSTALLATION'],"VCL-576
Updating Install notes",VCL-576
956670338cc3f01a4e309a12d80a850c75c27dca,,,1,['managementnode/lib/VCL/Module/OS.pm'],"VCL-503
Updated OS.pm::execute_new to not display errors if display_output argument is set to 0. Updated is_ssh_responding to call execute instead of run_ssh_command.",VCL-503
5f66d276aaf0731ab6f3a5d420b7a68b58c99873,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-572
Updated util.pm::sort_by_file_name to not generate a warning if an empty array argument is passed.",VCL-572
36915d54ea2ca505bdb6ed6b3cff54934fe75bda,,,8,"['managementnode/bin/vcld', 'managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6.pm', 'managementnode/lib/VCL/Module/Provisioning/libvirt.pm', 'managementnode/lib/VCL/Module/Provisioning/libvirt/KVM.pm', 'managementnode/lib/VCL/utils.pm']","VCL-589
Updated Windows.pm::copy_capture_configuration_files to grant permissions to the SYSTEM account for the VCL directory in root's Cygwin profile. This allows scripts which run during Sysprep under the SYSTEM account to succeed.

Reworked Version_6.pm::run_sysprep. The Unattend.xml contents are now generated from the Perl code rather than copying a file from tools. This makes easier to troubleshoot.


VCL-503
Made changes to OS.pm::execute_new. Commands with long timeouts were failing. Removed timeout argument when Net::SSH::Expect object is created and added command to set the timeout value in the object every time the subroutine is called.

Added $identity_paths argument to call to execute_new in utils.pm::run_ssh_command.


VCL-573
Removed the retrieval of user info for users specified in imagemeta.usergroupid from get_request_info and get_imagemeta_info. Removed entries from DataStructure.pm which return this information.


VCL-545
Changed path where virtual disk files are located in the datastore. Instead of each residing in its own directory, files are stored at the root of the datastore. This was done because virt-manager assumes they reside in the root directory and cannot traverse subdirectories.

Commented out code in KVM.pm::copy_virtual_disk which attempts to first convert the image to raw format. This was not working consistently.


Other
Updated Windows.pm::delete_file to detect if the path contains a wildcard. Added an additional command to delete files/directories beginning with a period.

Added condition to utils.pm::is_request_deleted to check if the request state is makeproduction. This is effectively the same as deleted, but the user chose to update the production revision of the image when the request was ended. Also added a check to vcld where it checks if a request is deleted.

Commented out line which returns cached user information in utils.pm::get_user_info. User preference changes were not being applied because the cached information was returned.",VCL-589
aec9f2eafa5f5e0330d067fd2d77e4558255607e,,,1,['web/.ht-inc/authentication.php'],"VCL-576
Finalizing for 2.3 release

authentication.php: modified ldapLogin - fixed tab/spacing from last commit",VCL-576
91b5b3b204c2c70522f809eaea9c7250b0951374,,,1,['web/.ht-inc/authentication.php'],"VCL-576
Finalizing for 2.3 release

authentication.php: modified ldapLogin - somehow the part that checks for lookupuserbeforeauth was commented out; uncommented and added checks for lookupuserbeforeauth and lookupuserfield existing before running block of code",VCL-576
2e1d584dbb18cedb53e9001f6475a8d13ad5acbd,,,2,"['web/.ht-inc/requests.php', 'web/js/requests.js']","VCL-444
time delay the display of the Get RDP File button to allow vcld to grant access

requests.php: modified connectRequest - set Get RDP File button to be displayed by default and counter to be hidden

requests.js: modified showRDPbutton - added code to hide Get RDP File button and unhide counter - by showing the button by default and then hiding it, users do not run in to the issue of not seeing the button at all after an upgrade while their browser is still using a cached version of the requests.js file",VCL-444
2db98764ab25d47428e235a3ca42a30a5c4c71a2,,,1,['web/.ht-inc/requests.php'],"VCL-30
additional user access methods for connecting to reserved compute node 

requests.php: modified connectRequest - changed conditional for displaying Get RDP File button to match any connect method with 'remote desktop' in the name instead of exactly matching 'Remote Desktop'",VCL-30
97226b7df756951c7e2dcd532f43ea132b06f098,,,1,['managementnode/bin/vcld'],"VCL-576

updated states which can override, the process is already running",VCL-576
1ba042882acca3023c1f4f68b0981e1a88dd6336,,,2,"['managementnode/etc/vcl/vcld.conf', 'web/.ht-inc/secrets-default.php']",set default database username to match what is in the install docs,
e0642f7d510bed372c68660ba27d18c08a2f20c0,,,1,['web/.ht-inc/computers.php'],"VCL-311
add more fields to edit computer page

computers.php:
-modified editOrAddComputer - fixed a few small issues with how the options you are allowed to select are controlled so that it works correctly when adding computers
-modified bulkAddComputer - added startstate and provval javascript values",VCL-311
4fca6be61b5ab12ec1210201bc2f2dd083972cf1,,,1,['web/.ht-inc/computers.php'],"VCL-311
add more fields to edit computer page

computers.php: modified editOrAddComputer - left out one line in the last commit that defines startstate",VCL-311
5fbcb8ec5468f3253dfbcfefbe22cbb837dc38b1,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-576

Note to self: Pay attention to where I commit from. 

Removed local custom edits for krb5.conf",VCL-576
67822419c192bafaf95b3fae0f546041b0308e15,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-576

Updated how vcl_post_load and vcl_post_reserved are called
now using execute with variable timeout and max_attempts arguments passed

removed unused routine call_post_load_custom",VCL-576
0f59818cc915ca2418c490390c32029721a4ab49,,,4,"['web/locale/po_files/es_MX/vcl.po', 'web/locale/po_files/ja_JP/vcl.po', 'web/locale/po_files/vcl.po.template', 'web/locale/po_files/zh_CN/vcl.po']","VCL-576
Finalizing for 2.3 release

placed AL2 header all the way at the top",VCL-576
caf65411c3eb0eb6abd5c83e9e981c9057d514a3,,,3,"['web/js/vcldojo/nls/TimeTextBoxEnd.js', 'web/js/vcldojo/nls/ja-jp/TimeTextBoxEnd.js', 'web/js/vcldojo/nls/zh-cn/TimeTextBoxEnd.js']","VCL-485
Multilingualization of Web UI

removed all of js/vcldojo/nls - this was changed previously to use translations from the locale specific messages.js files. so these files were no longer needed",VCL-485
ab7d6be4c2c94a250e808ce211791af4433bacc1,,,7,"['web/js/vcldojo/nls/TimeTextBoxEnd.js', 'web/js/vcldojo/nls/ja-jp/TimeTextBoxEnd.js', 'web/js/vcldojo/nls/zh-cn/TimeTextBoxEnd.js', 'web/locale/po_files/es_MX/vcl.po', 'web/locale/po_files/ja_JP/vcl.po', 'web/locale/po_files/vcl.po.template', 'web/locale/po_files/zh_CN/vcl.po']","VCL-576

inserted AL2.0 license header",VCL-576
0b4799e57af46259b7f348f9084673edb60c6159,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-588
Added code to Windows.pm::get_network_configuration to check if it appears that devices are still being installed before running ipconfig. This will help alleviate the problems that occur when ipconfig is run before all network interfaces are installed and initialized.",VCL-588
cff1a1467a1b2683259cf229bba02ec2c5d093c0,,,2,"['web/.ht-inc/computers.php', 'web/js/computers.js']","VCL-311
add more fields to edit computer page

computers.php: modified editOrAddComputer - fixed a few small issues with how the options you are allowed to select are controlled

computers.js: modified editComputerSelectType - fixed a few small issues with how the options you are allowed to select are controlled",VCL-311
cbb643c420ced73375e1f11b99563b6a020bae25,,,14,"['managementnode/bin/health_check.pl', 'managementnode/lib/VCL/Module/OS/OSX.pm', 'managementnode/lib/VCL/Module/Provisioning/esxthin.README', 'managementnode/tools/OSX/adminadd', 'managementnode/tools/OSX/admindel', 'managementnode/tools/OSX/dhcp_enable', 'managementnode/tools/OSX/fw_disable_rdp', 'managementnode/tools/OSX/fw_enable', 'managementnode/tools/OSX/fw_enable_rdp', 'managementnode/tools/OSX/logoff_users', 'managementnode/tools/OSX/oamessage', 'managementnode/tools/OSX/password_reset', 'managementnode/tools/OSX/useradd', 'managementnode/tools/OSX/userdel']","VCL-576

inserted AL2.0 license file

help routine rename in health_check.pl",VCL-576
5ff3bbdb5cd3fffdbdc9293f63b32f64cf99edeb,,,1,['web/.ht-inc/computers.php'],"VCL-311
add more fields to edit computer page

computers.php:
-modified editOrAddComputer - pass $profiles to next mode via continuation; moved 'Provisioning Engine' input to before State since it can change the values of State
-modified confirmEditOrAddComputer - removed alternate continuation if adding in vmhostinuse state since vm profile can be directly set
-removed addComputerSetVMHostProfile
-modified bulkAddComputer - added ability to set vmprofile if adding in vmhostinuse state; moved 'Provisioning Engine' input to before State since it can change the values of State
-modified confirmAddBulkComputers - moved 'Provisioning Engine' input to before State; removed alternate continuation if adding in vmhostinuse state since vm profile can be directly set
-modified submitAddBulkComputers - removed validation of vmprofile
-modified processComputerInput - added profiles to returned data; added validation of vmprofileid
-modified processBulkComputerInput - added vmprofileid and profiles to returned data; added validation of vmprofileid
-modified updateComputer - fixed bug where $location was not defined
-modified addComputer - fixed bug where $location was not defined; removed validation of vmprofileid
-modified printComputerInfo - moved 'Provisioning Engine' input to before State",VCL-311
2114257e7bef346bd51082fe2c412edb2d317106,,,1,['mysql/update-vcl.sql'],"VCL-576
Finalizing for 2.3 release

update-vcl.sql - (missed this on the last commit) changed key for computer.eth0macaddress and computer.eth1macaddress to not be unique",VCL-576
75ffb75a001ef06ad87fc2804c3dd81f549870c7,,,1,['mysql/vcl.sql'],"VCL-576
Finalizing for 2.3 release

vcl.sql and update-vcl.sql - changed key for computer.eth0macaddress and computer.eth1macaddress to not be unique",VCL-576
c478f35e38d0e47690232c688d5b86b07f335938,acoburn,acoburn,2,"['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm']","VCL-499

VMWare vCenter will modify the name of the virtual disk if the VM name is longer than
29 characters. This causes the actual location of the disk to be different than how
it is recorded in the VCL database. Now, when move/copy_virtual_disk is called,
the VM Name is shortened to an acceptable length while ensuing that it remains 
unique in the DB. The name is checked upon successful move/copy, and if it has 
changed, the database will be updated.",VCL-499
b18015ddee2f16a408f427f98e40975e7ffb9cc2,,,1,['managementnode/lib/VCL/Module/OS/OSX.pm'],"VCL-583
Removed code which referenced imagemeta.usergroupid from OSX.pm.",VCL-583
6739b247a893e5879e557f433fde07e0d408ae42,,,1,['managementnode/lib/VCL/Module/OS.pm'],"VCL-503
Updated OS.pm::execute_new. Added '-o ConnectTimeout=30' argument. Also added code to add the identity path arguments.",VCL-503
57e552e0d9e9f5b2613f277053582b5de131511a,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-576
Finalizing for 2.3 release

vcl.sql and update-vcl.sql: added 'none' provisioning module entry",VCL-576
94575b5260fad444d710303f1314be5639c86653,,,1,['mysql/update-vcl.sql'],"missing semicolon
Thanks to Vadim Kuznetsov for point this out.",
13e93b0b34c7c608b23962361246c0434bae6f7d,,,1,['web/testsetup.php'],"VCL-576
Finalizing for 2.3 release

testsetup.php: changed testing of mcrypt functions to use phpseclib's functions",VCL-576
776d550d74bf17675856154ed12db876a647375f,,,1,['web/testsetup.php'],"VCL-576
Finalizing for 2.3 release

testsetup.php:
-removed mcrypt from required php extensions
-changed check for $mcryptkey to $cryptkey
-removed checks of $mcryptiv",VCL-576
aee3b05218ee08749de69a6bbca1023779ede852,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-586
Removed add_users and delete_users subroutines from Windows.pm. They had been looping through the imagemeta.usergroupid users and adding them.

VCL-561
Fixed bug in get_installed_applications. It wasn't using the regex filter argument properly and returning all applications installed regardless of the argument.",VCL-586
4fb39c6de3d092a80d4a5ed1f798ee4b8b155362,,,5,"['web/.ht-inc/authmethods/shibauth.php', 'web/.ht-inc/conf-default.php', 'web/.ht-inc/privileges.php', 'web/.ht-inc/utils.php', 'web/shibauth/index.php']","VCL-576
Finalizing for 2.3 release

authmethods/shibauth.php: modified updateShibUser - cleaned up how names are determined

conf-default.php:
-added ALLOWADDSHIBUSERS - this provides a way to add users to parts of the VCL site without being to actually verify them via LDAP first
-removed $userlookupUsers - replaced by user group permission
-removed $affilValFunc, $addUserFunc, and $updateUserFunc examples for shibboleth - moved to utils.php

privileges.php: modified userLookup - added section to display login history

utils.php:
-modified initGlobals - changed how $affilValFunc, $addUserFunc, and $updateUserFunc get set based on ALLOWADDSHIBUSERS
-modified checkAccess and getNavMenu - removed global include for $userlookupUsers
-modified getAffiliationTheme - added () around $row = mysql_fetch_assoc... because the whole statement was always evaluating to false

shibauth/index.php:
-cleaned up a problem where a user could be passed through as authenticated even though the IdP did not provide the eppn for the user
-added example for how to have all users for a specific affiliation added to a user group",VCL-576
b75883f989c7bef4fafeefa3316eb10e3328b028,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-576
Finalizing for 2.3 release

vcl.sql:
-changed key on serverprofile.name to be unique
-removed vmhost.vmkernalnic and vmhost.vmwaredisk
-changed vmprofile.vmdisk from 'localdisk','networkdisk' to 'dedicated','shared'
-added ""all profiles"" server profile resource group
-added several missing resource attributes for resource groups
-added serverCheckOut and serverProfileAdmin for admin user

update-vcl.sql:
-added AlterVMDiskValues stored procedure
-added AddManageMapping stored procedure
-changed key on serverprofile.name to be unique
-added call to AlterVMDiskValues
-changed alter table for resourcepriv that added 'manageMapping' to call to AddManageMapping
-added all resource group attributes for 'all profiles', 'All VM Computers', and 'allVMimages' to the default VCL->admin node if it exists
-added serverCheckOut and serverProfileAdmin for admin user",VCL-576
c34b2664faf56a40fb1e8e625df9bcf7c68bdbc9,acoburn,acoburn,1,['managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm'],"VCL-499

Made code_loop_timeout calls into class method calls (rather than autoloaded
calls).",VCL-499
e27f1d9ba1f730c2ae31ed5e03e8b1c916898a39,acoburn,acoburn,1,['web/themes/default/css/vcl.css'],"VCL 576

Safari on a Mac does not assume that a table width is set as 100%, so
the default theme looks very strange. Added an explicit width to tables
with the class ""themeheadertable"".",
31db6107e7a63d1352fe6382ee6423ef41c74315,,,1,['managementnode/lib/VCL/reserved.pm'],"VCL-586
Removed code from reserved.pm which accessed imagemeta.usergroupid. It wasn't doing anything except displaying the user group members.",VCL-586
8ad30767815361011d1daeb41785b9f91228bb39,acoburn,acoburn,1,['mysql/vcl.sql'],"VCL-576

The ""no image"" image is inserted into the image table as id=1, but the resource table is pre-built with the expectation that the ""no image""
id=4. The resource table is now populated with an id=1 for ""no image"".",VCL-576
a7f396400870e6fd0e8c50ee8aba33b5ebd0f711,,,1,['managementnode/bin/install_perl_libs.pl'],"VCL-576

added perl module Scalar::Util for it to get upgraded",VCL-576
1d27717f4930b740c569246538b4b1c1e6a65e99,,,1,['mysql/update-vcl.sql'],"VCL-585
updated db schema for time_source variable",VCL-585
82c1550065085135ebe7c18e36b8b9d59b47a70e,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-585

code to pull time_source variable from database",VCL-585
2908a6f0f5304589060314f05a25f4ffefc89734,,,1,['web/.ht-inc/vm.php'],"VCL-576
Finalizing for 2.3 release

vm.php: removed a few references to vmkernalnic",VCL-576
1ce65566cb66646de6facaf66f4bba89bdee8c22,,,4,"['web/.ht-inc/serverprofiles.php', 'web/js/serverprofiles.js', 'web/themes/default/css/vcl.css', 'web/themes/default/page.php']","VCL-576
Finalizing for 2.3 release

serverprofiles.php:
-modified manageGroupingHTML - added code to keep from showing content for managing server profile group memberships if user does not have access to any server profile groups
-modified jsonProfileGroupingProfiles - if user does not have access to $groupid, still populate the 'all' part of the array, but send empty array for inprofiles and outprofiles

serverprofiles.js:
-modified getProfiles - only work with groupname if profileGroups widget has options
-modified getProfilesCB - only hide deployprofileslist if it is empty; only unhide manage grouping if there are profile groups available
-modified addRemGroupCB - added code to call getGroups if one of the added/removed groups is the selected group on the By Group tab
-modified addRemProfileCB - added code to call getProfiles if one of the added/removed profiles is the selected profile on the By Server Profile tab

themes/default/page.php: modified getHeader - fixed code to show placeholder for menu area on selectauth and login pages

themes/default/css/vcl.css: added .themelayouttable td.thememenunoauth",VCL-576
3a65b9fd7dc8ac94bb39dfde4e2be632eedf0ec9,,,1,['web/.ht-inc/authentication.php'],"VCL-418
simplify adding LDAP authentication

modified ldapLogin - get skin for setting cookie from affiliations table so this function does not need to be modified for each skin that is added",VCL-418
cc9d19a12fd3bc0afb65ee00287ad9af92bdb715,,,1,['web/.ht-inc/authmethods/ldapauth.php'],"VCL-576
Finalizing for 2.3 release

ldapauth.php: modified getLDAPUserData - modified code to handle single quotes in userid",VCL-576
04fe2c31c332719f751aad1010e177897262e553,,,1,['web/.ht-inc/images.php'],"VCL-567
image profile page does not reflect owner change after changing the owner

images.php: modified viewImages - (missed this in the last commit) changed check for $mode being submitEditImage to passing a continuation variable to specify when to display ""Image successfully updated""",VCL-567
001988737723ce2fb6c3331af42fa5d2183db8a9,,,7,"['site/trunk/content/vcl/css/vcl.css', 'site/trunk/content/vcl/index.mdtext', 'site/trunk/lib/path.pm', 'site/trunk/lib/view.pm', 'site/trunk/templates/sidenav.mdtext', 'site/trunk/templates/single_narrative.html', 'site/trunk/templates/skeleton.html']","VCL-583
Originally put CMS files in wrong location. Moved up to vcl/site.",VCL-583
b2051b415d75489cac8caefe47b9b406eb807369,,,2,"['web/.ht-inc/images.php', 'web/.ht-inc/states.php']","VCL-567
image profile page does not reflect owner change after changing the owner

images.php: modified submitEditImage - changed from calling viewImages to using a header redirect to load the page again with state viewImages

states.php: added submitEditImage to noHTMLwrappers",VCL-567
a04d72d29e6a2c88eeeb1239baa47f46f70e8b31,,,7,"['site/trunk/content/vcl/css/vcl.css', 'site/trunk/content/vcl/index.mdtext', 'site/trunk/lib/path.pm', 'site/trunk/lib/view.pm', 'site/trunk/templates/sidenav.mdtext', 'site/trunk/templates/single_narrative.html', 'site/trunk/templates/skeleton.html']","VCL-583
Initial setup of CMS files.  As recommended on http://wiki.apache.org/general/ApacheCMSFAQ, copied content from http://svn.apache.org/repos/asf/incubator/stanbol/site/tags/initial-site-content to site/trunk.  Replaced occurrences of ""stanbol"" with ""vcl"".",VCL-583
5b52045bce2476119a4bf0eb200c7315cd3490a8,,,1,['managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm'],"VCL-570

added routines to at least process a end-user request
- fixed reserve script to use changepassword routine",VCL-570
c5f818cb9dac7f096aaa02e4c8e49ba30b60d4da,,,12,"['web/.ht-inc/blockallocations.php', 'web/.ht-inc/groups.php', 'web/.ht-inc/images.php', 'web/.ht-inc/requests.php', 'web/.ht-inc/serverprofiles.php', 'web/.ht-inc/userpreferences.php', 'web/.ht-inc/utils.php', 'web/index.php', 'web/js/blockallocations.js', 'web/js/groups.js', 'web/js/requests.js', 'web/shibauth/index.php']","VCL-576
Finalizing for 2.3 release

index.php: changed version number from 2.2.1 to 2.3

utils.php:
-modified checkAccess - changed XMLRPC error to give failure to connect to auth server if ldap_bind fails; added code that allows access to Current Reservations page if the user has any reservations even if the user does not have access to make them
-modified getUsersLastImage - order by id instead of start so that the most recently placed reservation gets picked up instead of the one with the greatest start time which would pick up older future reservations
-modified printHTMLHeader - added check for $contdata being array
-modified getNavMenu - show user Current Reservations link if user has any reservations even if user does not have access to make reservations

userpreferences.php: modified userpreferences - removed ""(Vista only)"" from 32 bit color depth option

serverprofiles.php: modified processProfileInput - validate specified user groups for server profiles against any user groups instead of just those the user has access to edit

requests.php: modified AJupdateWaitTime - added javascript to save the text of the submit button so that it can be restored to what it was before changing it to ""View Available Times""

images.php: modified subimageDialogContent, AJaddSubimage, and AJremSubimage - changed userimages key in continuation to userimageids

groups.php: modified viewGroups - added code to specify the datagrid column widths based on px for IE and em for all other browsers

blockallocations.php:
-modified blockAllocationForm - added a filter to the dijit NumberSpinner because IE was jumping to fractions when using the mouse wheel
-modified getChartHTML - added width and height to enclosing div; changed maxLabelSize to 85 and added maxLabelCharCount to allow the horizontal axis labels to display better

shibauth/index.php: changed cookie duration from ""SECINDAY * 31"" to 2678400 because SECINDAY is not yet defined

blockallocations.js:
-modified updateAllocatedMachinesCB - added a hack that sets height of charts so that labels will display better
-added machinecntfilter

requests.js:
-added global resbtntxt
-modified selectLater - if resbtntxt is set to something other than an empty string, set the submit button text to it; otherwise set it to ""Create Reservation""; this was causing a problem when the button text initially said ""Create Imaging Reservation""
-modified showRDPbutton - changed wait time from 5 seconds to 2

groups.js:
-modified buildUserFilterStores and buildResourceFilterStores - changed code that was using Object.keys - IE does not (always?) suppor this
-modified resourcegroupGridFilter - changed how showtype is set to work better with IE",VCL-576
3de35ca8b6b88ad6189796fa5b624e9fdae65825,,,2,"['web/locale/es_MX/LC_MESSAGES/vcl.mo', 'web/locale/po_files/es_MX/vcl.po']",added space after 'Hola',
e816b9aac31e74dd3970f747a3bf8a8a851e0c8e,,,3,"['web/themes/copydojocss.sh', 'web/themes/default/css/vcl.css', 'web/themes/default/page.php']","made changes to work with Dojo Toolkit 1.6. There was a problem with IE and dijit.dialog where the background would become opaque instead of grayed. This was fixed by changing the DOCTYPE to just 'html'.  However, that resulted in some layout issues that needed to be fixed with some CSS changes.",
d359737fa12bb5a5521bbb943233ed51526fcc40,,,1,['managementnode/lib/VCL/reserved.pm'],"VCL-463

if server_request_id set connect value correctly - in case end-user never connects.",VCL-463
e413d9599f4d70b3da394d7015fa930d62df6f24,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-580

Fedora 16 (systemd) support

- fixed issue with rc.local.service file
- fixed issue with shutdown -h now ssh return code",VCL-580
b11fd3c0c539b86cc0a03c6cb4a73d295fb29ccd,,,1,['managementnode/lib/VCL/reclaim.pm'],"VCL-463

small changes to server requests
- set firewall to initial IP if no login detected
- automatically reload if requestor deletes reservation and request in reserved state",VCL-463
c24f94dae97031575e4dc3601e7736313fd6a9cf,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],VCL-580,VCL-580
86cbca03539b3ac1dd3c6d3e11027604c3307095,,,8,"['managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/Provisioning/libvirt.pm', 'managementnode/lib/VCL/Module/Provisioning/libvirt/KVM.pm', 'managementnode/lib/VCL/reserved.pm', 'managementnode/lib/VCL/utils.pm']","VCL-503
Updated OS.pm::execute_new. It wasn't handling the arguments correctly if called as an object method and passed a hash reference.

Added 'ignore_error' argument. This prevents the subroutine from looping and generating warning messages if the command being executed is known to break the SSH connection.


VCL-413
Updated Module.pm::create_mn_os_object to populate the 'noimage' image info in the DataStructure object created for the management node. This prevents errors in case anything attempt to access image info.


VCL-580
Changed order of Linux.pm::pre_capture to configure rc-local after configuring the external SSH service. The rc-local code was failing when capturing a base image because the ext_sshd file didn't exist.


VCL-545
Updated libvirt.pm::initialize. It wasn't returning false if it failed.

Fixed problem with copy_vmdk. Under OS's other than Fedora 16, the qemu-img utility can't copy a vmdk split into multiple files. The workaround is to first convert them to raw files, then copy them.


VCL-30
Removed check to see if OS module implements is_user_connected in reserved.pm. This is now in OS.pm so all OS's implement it.

Removed check_connection subroutine from utils.pm. It is no longer called -- replaced by code in OS modules.


Other
Updated OS.pm::create_text_file to only enclose the file path in quotes if it contains a space. If the path contains ~ and is enclosed in quotes, the home directory isn't interpreted.

Moved copy_file subroutine from Linux.pm to OS.pm since it may be used on other OS's.",VCL-503
2d50a8d3b42f826fca7f98385032301078aa4c09,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-463
Changed update_reservation_accounts to use ""INSERT IGNORE"" instead of just ""INSERT"" for adding entries to the reservationaccounts table. A unique index has been added to the reservationid and userid columns of this table. The SQL command would generate an error if the row already exists without IGNORE.

VCL-503
Uncommented call to OS.pm::execute_new in run_ssh_command. This causes execute_new to be used for all SSH calls.",VCL-463
46e29350e2d29f777d2a19f85ae38e04255f4763,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-563
Changed Windows.pm to only attempt to enable DHCP for the public interface during image capture. Problems occur if you try to change the private interface settings if the SSH firewall exception is only enabled for the private interface.  The connection may be lost and can't be reestablished.

VCL-561
Updated get_installed_applications to use reg_query. Updated reg_query_convert_data to handle registry input in the format returned by KVM's virt-win-reg utility.

Other
Added a 15 minute timeout argument to the call to defrag.exe. The default is 60 seconds.",VCL-563
649e811c52f41c997dd02c718093b3d95dbfefca,,,4,"['managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VIX_API.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm']","VCL-450
Fixed problem that occurs on VMware Server 2.0 if linked clones are used. vmware-vdiskmanager can't copy the delta file and generates this error: "" Failed to convert disk: The called function cannot be performed on partial chains."" The workaround is to make a copy of the original vmdk that the delta file is pointing to, modify the delta vmdk descriptor file and the VM's .vmsd file to point to this copy instead of the original, and then remove all snapshots from the VM. This merges the delta vmdk into the new copy.

Removed VIX_API.pm. It has never been maintained.

Changed warnings to debug messages in vSphere_SDK.pm if initialization fails. Additional warnings will be generated by VMware.pm::initialize if this was really a problem.",VCL-450
75790b4d09e12c8ac90a0537775d1f746bc9bd9e,,,1,['managementnode/lib/VCL/Module/OS.pm'],"VCL-463

fixed an issue when dealing with windows and non-standalone user accounts.
The non-owner users in both the admin and login user groups, did not have passwords presented to them under current
reservations.",VCL-463
5bcc7751a7201d4f5f0ed84a4105e645efa5f217,,,1,['managementnode/lib/VCL/inuse.pm'],"VCL-578
Added check to inuse.pm::process to first determine if the computer is responding to SSH.  If not responding, the firewall and user connection checks are not attempted.",VCL-578
5e8f8e5b3b14977751d9a5b225d82310c5a390ff,,,2,"['web/.ht-inc/utils.php', 'web/js/requests.js']","VCL-515
suggest available time when selection not available instead of showing time table

utils.php:
-modified findAvailableTimes - added check for nodes that have no controlling management node available; reworked check for concurrent use of image violations
-added fATconcurrentOverlap

requests.js: modified selectLater - set newsubmit button text to Create Reservation",VCL-515
e56a09cc15c583852660b466f928dd4f994a57d2,,,6,"['web/.ht-inc/authmethods/itecsauth.php', 'web/.ht-inc/images.php', 'web/.ht-inc/requests.php', 'web/css/privileges.css', 'web/css/vcl.css', 'web/js/privileges.js']","VCL-576
Finalizing for 2.3 release

images.php: modified AJsubmitSetImageProduction - added resRefresh() call to returned javascript so page contents get refreshed to make reservation that was ended disappear

itecsauth.php: modified updateITECSUser - commented out adding user to demo group

requests.php: minor typo in comment

privileges.js: modified focusFirstNode - fixed to work with dojo 1.6; added code to expand all parents of focused node if they are not already expanded (can happen if tree saved cookie is erased)

privileges.css: changed .dijitTreeNodeSelected to .dijitTreeRowSelected

vcl.css: changed .privtreeselected color from black to white to make it show up better",VCL-576
a0fd841c04648ef0f3ea720f8fbd7c0477709159,,,1,['web/.ht-inc/utils.php'],"VCL-276
log Block reservation data

utils.php: modified allocComputer - moved initial declaration of fromblock from array definition to inside each foreach so the last return would return an empty array if no computers were found",VCL-276
4cd4d44ceb7f35c0141bf82d719b094c17c3ff9c,,,1,['web/.ht-inc/requests.php'],"VCL-463
add ability to deploy images as servers

requests.php: modified AJeditRequest and AJsubmitEditRequest - fixed bug where a user that has selected to only see user groups matching their own affiliation cannot edit a server reservation if the admin or access user group is from a different affiliation",VCL-463
0686e287031d8e9d9c66b09c084acc329361842b,acoburn,acoburn,1,['managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm'],"VCL-499

The move_virtual_disk subroutine would not work in the context of a vCenter host. That is,
the MoveVirtualDisk method is not implemented for these hosts. Instead, I followed the 
design used in the copy_virtual_disk subroutine, to test for a 'not implemented' string
in the $fault code. If so, execution proceeds to use the CloneVM method (via copy_virtual_disk 
and cleaning up source files afterwards).

The VIExt::http_get_file and VIExt::http_put_file methods sometimes fail on vCenter hosts, so
I wrapped those calls in a code_loop_timeout(...) subroutine. That way, repeated attempts will 
be made, up to a maximum of 50 elapsed seconds.",VCL-499
444fa01b0a5bab24db01244e222c3f247be7547a,,,2,"['web/locale/es_MX/LC_MESSAGES/vcl.mo', 'web/locale/po_files/es_MX/vcl.po']","VCL-485
Multilingualization of Web UI

fixed a few lines that contained javascript where the ending ';' was missing in the Spanish version",VCL-485
52d68051c343576ddf23bb229c04e20202667e6a,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-576

small clean up of warning messages in file_exists routine
changed to return 0 instead of a simple return",VCL-576
6b96dd086ada532fd3591fab3e67b58a96045537,,,4,"['web/js/nls/es_MX/messages.js', 'web/locale/es_MX/LC_MESSAGES/vcl.mo', 'web/locale/es_MX/language', 'web/locale/po_files/es_MX/vcl.po']","VCL-485
Multilingualization of Web UI

adding es_MX as contributed by Juan Jose Zamanillo",VCL-485
b87e574f363182a505a422a7a31ddb44cec3d0c3,,,2,"['web/.ht-inc/computers.php', 'web/js/computers.js']","VCL-489         
allow dhcp and hosts info to be downloaded about computers any time instead of just when adding

computers.php: modified computerUtilities - changed text of dropdown for dhcpd.conf to just 'dhcpd'; moved loading div to under management node IP input; moved clearing utilcontent and hiding management node IP input to javascript that runs when clicking the Generate Data button

computers.js:
-modified generateCompData - always hide utilerror and clear utilcontent; hide management node IP input when generating /etc/hosts data
-modified generateDHCPDdata - always unhide loading div and hide utilcontent; set mouse cursor to wait icon
-modified generateHostsData - set mouse cursor to wait icon
-modified generateCompDataCB - set mouse cursor to normal icon",VCL-489
e4b36d375052e74ca8b43c3ed1264293cdc14adb,,,2,"['web/.ht-inc/computers.php', 'web/js/computers.js']","VCL-311
add more fields to edit computer page

computers.php: modified editOrAddComputer and bulkAddComputer - always allow location to be set instead of only for physical machines

computers.js: modified editComputerSelectType - always allow location to be set instead of only for physical machines",VCL-311
9c6d7464ebafb45163d0319908c8afdc96303919,,,1,['web/.ht-inc/utils.php'],"VCL-463
add ability to deploy images as servers

utils.php: modified getImages - removed code related to imagemeta.usergroupid",VCL-463
7373d9c89bba234ed5b6566a6af085fb4d066fe9,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-463

Update utils to match serverrequest ALLOW_USERS variable",VCL-463
718d0d2e0a6cddd33fbb699048383305caf9bc8a,,,1,['web/js/serverprofiles.js'],"VCL-463
add ability to deploy images as servers

serverprofiles.js:
-modified clearProfileItems and getServerProfileDataManageCB - added code that handles profileadmingroup and profilelogingroup drop downs as widgets or normal form elements instead of just as form elements",VCL-463
3ed82483efb5899f9f49e42bec01d6b5439ace60,,,1,['managementnode/lib/VCL/DataStructure.pm'],"VCL-463
Fixed bug in DataStructure.pm which occurred if get_* was called with a null argument. It would cause process to crash.",VCL-463
dc9adc6e5f8f848d4d65ca7b71d03bb979b76f80,,,2,"['web/.ht-inc/computers.php', 'web/js/code.js']","VCL-576

computers.php:
-modified editOrAddComputer - added an 'i' for ignore case when matching any provisioning modules starting with 'xcat'
-modified submitEditComputer - fixed bug with updating vmprofile for vmhosts
-modified computerUtilities - changed id of continuation from 'continuation' to 'utilformcont' - this was causing a problem with IE because of the locale form that had a continuation; with IE, document.getElementById will also get elements with the specified name; so, the locale continuation object was getting returned instead of the computer utility continuation object

code.js: modified reloadComputerSubmit, compStateChangeSubmit, and compScheduleChangeSubmit to get the object with id 'utilformcont' instead of 'continuation' to match changes made in computers.php",VCL-576
206af085aec0c42294759b44f6b87866eec457dd,,,1,['managementnode/lib/VCL/DataStructure.pm'],"VCL-463
Updated DataStructure.pm server_allow_list subroutine mapping to not overwrite the user unityid value.",VCL-463
3c3e65359119609f73ea9be68f0b31be2626ba59,,,1,['managementnode/lib/VCL/healthcheck.pm'],"VCL-565
Removed direct reference to $ENV{management_node_info} in healthcheck.pm. Changed to get_management_node_info().",VCL-565
cef78eba62b1b027f386b2955537f2a388eac642,,,3,"['web/.ht-inc/utils.php', 'web/.ht-inc/vm.php', 'web/js/vm.js']","VCL-545

utils.php:
-added getImageTypes
-modified printSelectInput - do not print 'name' attribute if $name is empty
-modified getVMProfiles - added resourcepath, repositoryimagetypeid, repositoryimagetype, datastoreimagetypeid, datastoreimagetype, virtualswitch2, and virtualswitch3 to returned data
-added getENUMvalues
-modified getDojoHTML - added dijit.Tooltip to editVMInfo dojo includes

vm.php:
-modified editVMInfo - added Resource Path, Repository Image Type, Virtual Disk Image Type, VM Network 2, VM Network 3; changed Data Store Path to Virtual Disk Path, VM Disk to Virtual Disk Mode, VM Path to VM Working Directory Path, and Virtual Switch 0/1 to VM Network 0/1; added help icons for most items and diji tooltip help popups
-modified getVMHostData - set any parts of the vmprofile that are null to empty strings
-modified AJprofileData - get values for $vmdisk from enum field in database
-modified AJupdateVMprofileItem - changes to handle new fields and additions that were added to editVMInfo

vm.js:
-changed all calls to document.getElementById to dojo.byId
-modified VMHostDataCB, getVMprofileDataCB, and delProfile - similar changes as to editVMInfo in vm.php",VCL-545
014a12e6ac2e2251189c20dbf601a9e3d0085e35,,,1,['web/.ht-inc/utils.php'],"VCL-276
log Block reservation data

utils.php:
-modified isAvailable - handle additional data returned from getAvailableBlockComputerids; added 'fromblock' key to $requestInfo array, and if that is true, add 'blockdata' key to $requestInfo as well that is the additional info about the block allocation
-modified allocComputer - added 'fromblock' to the returned array
-modified addRequest - if $requestInfo['fromblock'][$key] is true, get block data from $requestInfo; when calling addSublogEntry, pass $fromblock and $blockdata
-modified getAvailableBlockComputers - return array of computer ids as an element of the array, and return block data about each computer in the array as a separate element of the array
-modified addSublogEntry - if computer was from a block allocation, add the extra block info to the sublog table",VCL-276
d423ab3ee6103d6be4a2b1dc38fafa6293466ce7,,,1,['UPGRADE'],"VCL-576

upgrade edits for 2.3 release",VCL-576
5fe35128358ef90a23e6fc982e2d10092812f496,,,3,"['web/.ht-inc/utils.php', 'web/.ht-inc/vm.php', 'web/js/vm.js']","VCL-545

changed references to vmware_mac_eth[0/1]_generated to eth[0/1]generated

utils.php: modified getVMProfiles

vm.php:
-modified editVMInfo
-modified AJupdateVMprofileItem

vm.js:
-modified getVMprofileDataCB
-modified delProfile",VCL-545
9881f002c896225c5070049ea9b7db2225e28530,,,3,"['web/.ht-inc/utils.php', 'web/.ht-inc/vm.php', 'web/js/vm.js']","removed all references to vmtype

utils.php:
-modified getComputers - removed vmtypeid from the select statement
-modified getVMProfiles - removed vt.name, vp.vmtypeid, and join on vmtype from select statement
-removed getVMtypes
-modified getSelectLanguagePulldown - (unrelated) changed time for change language continuation from 5 minutes to 1 day

vm.php:
-modified editVMInfo - removed Type from edit profile section
-modified AJprofileData - removed types from data returned
-modified AJupdateVMprofileItem - removed vmtypeid as an item that can be updated
-modified AJnewProfile - modified initial insert to not include vmtypeid

vm.js:
-modified getVMprofileDataCB - no longer set the store for the ptype widget
-modified delProfile - removed Type from confirmation table",
ef1ecd902c226283a12c579c5487f2b115684c8e,,,2,"['web/js/nls/ja_JP/messages.js', 'web/js/vcldojo/TimeTextBoxEnd.js']","VCL-485
Multilingualization of Web UI

js/nls/ja_JP/messages.js: added 'This must be a valid time that is greater than the start time'

js/vcldojo/TimeTextBoxEnd.js: changed internationalization of invalidMessage string to get translation from VCL javascript translation file instead of doing it the dojo way so that new translations will not require recompiling dojo",VCL-485
a2055b1447945065c92d6a17d3f3b900c89c495b,,,1,['web/js/nls/messages.js.template'],added error message from TimeTextBoxEnd,
8740012ab778f7d43b28e1778f1dbe9ff98c9cbc,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-576

Use FQDN value if it is set when collecting the local management node hostname
Using the hostname first can break when localhost as the FQDN",VCL-576
e85c28811edca7a06c3433b21e28a3c3bc053a34,,,28,"['web/.ht-inc/authentication.php', 'web/.ht-inc/blockallocations.php', 'web/.ht-inc/conf-default.php', 'web/.ht-inc/requests.php', 'web/.ht-inc/states.php', 'web/.ht-inc/statistics.php', 'web/.ht-inc/userpreferences.php', 'web/.ht-inc/utils.php', 'web/index.php', 'web/js/blockallocations.js', 'web/js/code.js', 'web/js/nls/ja_JP/messages.js', 'web/js/nls/messages.js.template', 'web/js/nls/zh_CN/messages.js', 'web/js/requests.js', 'web/js/vcldojo/TimeTextBoxEnd.js', 'web/js/vcldojo/nls/TimeTextBoxEnd.js', 'web/js/vcldojo/nls/ja-jp/TimeTextBoxEnd.js', 'web/js/vcldojo/nls/zh-cn/TimeTextBoxEnd.js', 'web/locale/ja_JP/LC_MESSAGES/vcl.mo', 'web/locale/ja_JP/language', 'web/locale/po_files/.htaccess', 'web/locale/po_files/ja_JP/vcl.po', 'web/locale/po_files/vcl.po.template', 'web/locale/po_files/zh_CN/vcl.po', 'web/locale/zh_CN/LC_MESSAGES/vcl.mo', 'web/locale/zh_CN/language', 'web/themes/default/page.php']","VCL-485
Multilingualization of Web UI

The basis for this code was contributed by Toru Yokoyama.

The gettext library was used for php.  Something similar was created for javascript by adding the function _() to code.js and wrapping all strings in javascript files that need to be translated in that function.  A messages.js file is created for each locale that has the needed translations.  Additional fields are added to the connectmethod table for description and connecttext in the language of the locale.  A locale specific file is created for each locale for the TimeTextBoxEnd.js vcldojo widget.

index.php:
-added declaration of $locale
-added call to setVCLLocale

authentication.php: wrapped strings to be translated with the _() function in selectAuth and printLoginPage

blockallocations.php:
-modified getCurrentBlockHTML - (VCL-513) added affiliation restriction to query
-modified getUserCurrentBlockHTML - (VCL-513) fixed problem where submitted block allocation requests were not showing up for the requestor if the person did not select a user group
-wrapped strings to be translated with the _() function in blockAllocations, blockAllocationForm, AJblockAllocationSubmit, getUserCurrentBlockHTML, AJviewBlockAllocation, and viewBlockStatus
-changed getting dates using date() to strftime()

conf-default.php: added DEFAULTLOCALE

requests.php:
-wrapped strings to be translated with the _() function in newReservation, AJupdateWaitTime, AJshowRequestSuggestedTimes, submitRequest, viewRequests, getViewRequestHTMLitem, detailStatusHTML, viewRequestInfo, AJeditRequest, AJsubmitEditRequest, AJconfirmDeleteRequest, AJconfirmDeleteRequestProduction, AJconfirmRemoveRequest, AJshowReinstallRequest, printReserveItems, connectRequest, and processRequestInput
-changed getting dates using date() to strftime()

states.php:
-reordered a few items in $actions['entry']
-removed viewdocs from $actions['entry']
-added changeLocale to noHTMLwrappers and misc section

statistics.php:
-modified selectStatistics - build a list of months by calling strftime instead of having them hard coded
-wrapped strings to be translated with the _() function in selectStatistics, viewStatistics, getStatGraphDayConUsersData, getStatGraphConBladeUserData, and getStatGraphConVMUserData
-changed getting dates using date() to strftime()

userpreferences.php: wrapped strings to be translated with the _() function in userpreferences, confirmUserPrefs, and processUserPrefsInput

utils.php:
-modified initGlobals - added changeLocale as a mode that saves the old mode and changes mode to auth
-modified checkAccess - added serverProfiles, siteMaintenance, and dashboard to and removed viewdocs from switch statement that checks for user having access to specificed portion of the site
-modified maintenanceCheck - added call to setVCLLocale if site is in maintenance
-modified clearPrivCache - unset $_SESSION['locales']
-modified isAvailable - added statement to where clause in query to get list of available computers to restrict selected computers to those with deleted set to 0
-modified getNavMenu - show Documentation link to all users
-modified getDojoHTML - set dojo locale in each portion of switch statement that generates html
-added changeLocale
-added setVCLLocale
-added getSelectLanguagePulldown
-added getFSlocales
-wrapped strings to be translated with the _() function in initGlobals, maintenanceCheck, maintenanceNotice, main, abort, getImageConnectMethodTexts, getRequestInfo, showTimeTable, prettyDatetime, minToHourMin, prettyLength, getReservationLengths, getReservationLength, getReservationExtenstion, continuationsError, and getNavMenu
-changed getting dates using date() to strftime()

blockallocations.js:
-modified blockFormSubmitWeekly - switch to using wdays# instead of wdays[weekday name] because the php code was generating the weekday name in the selected locale's language
-wrapped strings to be translated with the _() function in populateBlockStoreCB, updateBlockStatusCB, blockFormAddWeeklyTime, blockFormAddMonthlyTime, blockFormAddListSlot, blockFormConfirm, blockFormVerifyWeekly, blockFormVerifyMonthly, blockFormVerifyList, deleteBlockConfirmCB, viewBlockAllocationCB, acceptBlockConfirmCB, rejectBlockConfirmCB, viewBlockTimesCB, toggleBlockTimeCB, and updateAllocatedMachinesCB

code.js:
-added _()
-wrapped strings to be translated with the _() function in checkNewLocalPassword

requests.js:
-modified showSuggestedTimesCB - recenter suggestedTimes dialog when it appears
-wrapped strings to be translated with the _() function in showSuggestedTimes, showSuggestedTimesCB, selectEnding, checkValidImage, setMaxRequestLength, showResStatusPane, editReservationCB, resetEditResBtn, submitEditReservation, submitEditReservationCB, resGone, submitReinstallReservationCB, and showRDPbutton

vcldojo/TimeTextBoxEnd.js
-added requires for localication
-added postCreate function

This commit contains initial adds for:
locale
locale/po_files
locale/pofiles/zh_CN
locale/pofiles/zh_CN/vcl.po
locale/po_files/ja_JP/vcl.po
locale/po_files/vcl.po.template
locale/po_files/.htaccess
locale/zh_CN
locale/zh_CN/language
locale/zh_CN/LC_MESSAGES
locale/zh_CN/LC_MESSAGES/vcl.mo
locale/ja_JP
locale/ja_JP/language
locale/ja_JP/LC_MESSAGES
locale/ja_JP/LC_MESSAGES/vcl.mo
js/nls
js/nls/zh_CN
js/nls/zh_CN/messages.js
js/nls/ja_JP
js/nls/ja_JP/messages.js
js/nls/messages.js.template
js/vcldojo/nls
js/vcldojo/nls/zh-cn
js/vcldojo/nls/zh-cn/TimeTextBoxEnd.js
js/vcldojo/nls/ja-jp
js/vcldojo/nls/ja-jp/TimeTextBoxEnd.js
js/vcldojo/nls/TimeTExtBoxEnd.js",VCL-485
1eea5f1e32c85384c056a86fbf438ec490225aaa,,,1,['managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm'],"VCL-570
typo",VCL-570
0e484e50c15f31a169eaedc0131cac27affdd824,,,2,"['managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm']","VCL-570

modified utils to better deal with systemd controled systems
more work on Ubuntu module",VCL-570
3c52924b365c41e35252a9730c0946d50e87926f,acoburn,acoburn,1,['managementnode/lib/VCL/utils.pm'],added lines in the initialization subroutine to extract the default help email value from the vcld.conf configuration,
ca102b15dd1b6e0d1593d768f82693d00424abb3,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-544

Using check for systemctl command to detect for systemd based system.
May have to create a fedora16 OS module in future, but this should cover our current supported Linux OS's.",VCL-544
038e8b1770c67d0b2b31dfc1435ac3eeebacbc78,,,3,"['managementnode/lib/VCL/Module/Provisioning.pm', 'managementnode/lib/VCL/Module/Provisioning/libvirt.pm', 'managementnode/lib/VCL/Module/Provisioning/libvirt/KVM.pm']","VCL-545
Added image capture functionality to libvirt and KVM modules. Added node_status and get_image_repository_search_paths to Provisioning.pm so that all provisioning modules can utilize them and not duplicate code.",VCL-545
05f3876948a6b942c9ceccf268e9a56c2003191d,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-566
Added utils.pm::update_image_type subroutine. This may be called by provisioning modules when an image is captured allowing them to change the image type if it is converted from one format to another.",VCL-566
a4aa31b2f3f29bc11319cc6484f8dee3ab722bc0,,,3,"['mysql/phpmyadmin.sql', 'mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-566
Added imagetype definition to SQL files.  Added image.imagetypeid, vmprofile.repositoryimagetypeid, and vmprofile.datastoreimagetypeid columns.

VCL-545
Added a sample vmprofile entry for KVM to vcl.sql.

VCL-418
Set theme name to 'default' for Local and Global affiliations.

Other
Changed image and imagerevision IDs for noimage to 1.",VCL-566
c0b1a6eeb02ad816a13dd18354c354c417524571,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm'],"VCL-543

Overlooked the changes under this file for OSX support under ESX for Jim's work.",VCL-543
c83db2940b5b4a4fab9acb348e11e4a52158c666,,,1,['managementnode/bin/gen-node-key.sh'],"VCL-575

corrections in Linux case name and windows sshd servicename",VCL-575
9a13cfce74c97ee200a60843f6b270176f51260f,,,1,['managementnode/bin/gen-node-key.sh'],"VCL-575
added case statement to detect supported OS's.

Linux, ubuntu, windows and OSX

for each of these cases set the sshd_config path and the stop|start service calls",VCL-575
fc44ffccfe85b12e443264b446524aeaca0cbad8,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-529 

typo for return value in is valid ip check 
Thanks to Aaron Coburn for point this out.",VCL-529
97ee7c886b1bf410e8e8fc9c3d93948876b1a0c5,,,1,['managementnode/lib/VCL/Module/OS.pm'],small fix in echo command for is_ssh_responding routine,
9cf669f2c29f880ec214af0755ef270f3ea38d88,,,1,['web/shibauth/index.php'],"VCL-497
dedup eppn

shibauth/index.php: added code to ignore anything after a ';' in the eppn",VCL-497
bb774d2438be9de73280e081723839d831ccfb7f,,,3,"['web/.ht-inc/utils.php', 'web/js/vcldojo/HoverTooltip.js', 'web/js/vcldojo/TimeTextBoxEnd.js']","VCL-505
Dojo is slow to load, especially on pages with many ancillary class files

utils.php: 
-modified getAffiliationTheme - (VCL-418) modified conditional to make sure $row['theme'] is not empty in addition to getting a row from mysql
-modified getDojoHTML - added $filename for each set of modes that is a dojo layer file for all of the required dojo modules; added START and END parsing comments to allow a script to parse a portion of this function to generate the layer definition file for the dojo build system; condensed a few sections that had the same set of requires; removed several commented out lines; added an html script element for each of the definied layer files

TimeTextBoxEnd.js and HoverTooltip.js: removed wrapping 'if' conditional checking dojo._hasResource - these were keeping things from working correctly when building custom layer files",VCL-505
ae66d789274f1bb44ec233e7919e6ed9f412df02,,,1,['managementnode/bin/vcld'],"VCL-574

added states we want to process when inuse is running",VCL-574
bd3a482b9d1f02f95bc5565d4646f19daf89017f,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-276

extended sublog table for block reservation start and end times

Other:
added fedora16 environments",VCL-276
d1e0b5001c5419b952d86d6a70affcd547bf43a4,,,15,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/OSX.pm', 'managementnode/lib/VCL/inuse.pm', 'managementnode/lib/VCL/utils.pm', 'managementnode/tools/OSX/adminadd', 'managementnode/tools/OSX/admindel', 'managementnode/tools/OSX/dhcp_enable', 'managementnode/tools/OSX/fw_disable_rdp', 'managementnode/tools/OSX/fw_enable', 'managementnode/tools/OSX/fw_enable_rdp', 'managementnode/tools/OSX/logoff_users', 'managementnode/tools/OSX/oamessage', 'managementnode/tools/OSX/password_reset', 'managementnode/tools/OSX/useradd', 'managementnode/tools/OSX/userdel']","VCL-543

OSX support for provisioning osx on VMware ESXi hardware.
submited on behalf of Jim O'Dell 
Many Thanks Jim",VCL-543
8dc24f8c006a70e8472d1eef9dff85e0455b9192,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm'],"VCL-450
Updated VMware.pm::prepare_vmx allowing it to utilize the vmprofile.eth0generated and vmprofile.eth1generated values. If set to 1, the interfaces added to the VM are configured with auto-generated MAC addresses. Also added ability to add additional interfaces if virtualswitch2 or virtualswitch3 are configured.",VCL-450
ecb664a6b82e7236cd1535d4a1a75887333b3c13,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-428
Reworked get_request_info to dynamically retrieve column names from database. Removed duplicate calls to retrieve the same data since get_request_info now calls get_image_info, get_computer_info, etc to retrieve data.

Moved code from get_request_info which manipulated the retrieved data from get_request_info to the other get_*_info subroutines which the manipulation applies to. This makes the results consistent when the other get_*_info subroutines are called directly:
-Added {IDENTITY} key to get_image_info.
-Moved logic which sets the user info STANDALONE, uid, preferredname, and other values to get_user_info.


VCL-573
Updated get_default_imagemeta_info to return a copy of the cached data rather than the hash reference of the original cached data. This prevents different processes from affecting each other.",VCL-428
69b057e8030a2d6b209cd330b2ab1a81c6db583a,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-418
simplify adding LDAP authentication

added affiliation.theme",VCL-418
60ed947fa11a6e792ebc5bd1153d00bcadaacb16,,,3,"['web/.ht-inc/authentication.php', 'web/.ht-inc/conf-default.php', 'web/.ht-inc/utils.php']","VCL-418
simplify adding LDAP authentication

conf-default.php: added lookupuserbeforeauth and lookupuserfield to config array for ldap connectors; lookupuserbeforeauth is a boolean that, when true, configures VCL to to use the master login to lookup the full DN of the user before doing that ldap_bind that auths the user; lookupuserfield is the ldap attribute under which the supplied user name should be looked up in ldap

authentication.php:
-modified printLoginPageWithSkin - get the skin from the affiliation table by calling getAffiliationTheme
-modified ldapLogin - instead of checking for the use of specific entries in $authMechs, we check for $authMechs[$authtype]['lookupuserbeforeauth'] to determine whether or not the full DN of the user needs to be found before doing the ldap_bind auth

utils.php:
-modified initGlobals - set $skin by calling getAffiliationTheme instead of a switch statement based on the affiliation name
-modified checkAccess - added code to see if the full DN of the user needs to be looked up when responding to an API call and do so if needed
-added getAffiliationTheme
-modified main, sendHeaders, printHTMLHeader, and getNavMenu - removed inclusion of $skin from globals since it is no longer used in these functions",VCL-418
5eab505c6fdb7eee7dfdb9deb384bdf7b1705e22,,,4,"['web/.ht-inc/requests.php', 'web/.ht-inc/states.php', 'web/.ht-inc/utils.php', 'web/js/requests.js']","VCL-568
refresh current reservations page 15 minutes after a reservation becomes available

requests.php:
-modified viewRequests - added a hidden element to most reservations that is the next timeout value
-modified getViewRequestHTMLitem - added timeoutdata
-modified connectRequest - added call to addConnectTimeout if getReservationConnectTimeout returns null; added hidden element that is the next timeout value; added dijit dialog that says reservation has timed out
-added AJcheckConnectTimeout
-added getReservationNextTimeout
-added getReservationConnectTimeout
-added addConnectTimeout

utils.php:
-modified getComputers - (unrelated to this JIRA) fixed bug introduced when changing how vmprofileid gets set; there needed to be 2 joins to the vmhost table, one for vms and one for vm hosts
-modified getDojoHTML - added dijit.form.Button and dijit.Dialog to connectRequest state; added dojo css, dojo requires and a timeout call for checkConnectTimeout for connectRequest state; added timeout call for checkTimeouts to viewRequests state

states.php: added AJcheckConnectTimeout

requests.js:
-added checkTimeouts
-added checkConnectTimeout
-added checkConnectTimeoutCB",VCL-568
4d9b4af58d95a12086efc609ca54b9a92a67df67,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-572
Added call to install_updates in Windows.pm::post_load.

VCL-564
Added timeout argument to Windows.pm::run_script.",VCL-572
cb8f714f79bea7185e30848c56c8108d6d9dfae7,,,0,[],"VCL-564
Added Scripts directories for all OSs under tools.

VCL-572
Added Updates directories for all Windows OSs under tools.",VCL-564
095f83e27b7f24bb94edcee0f7b22ff2f9db0c2d,,,6,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5.pm', 'managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/utils.pm']","VCL-569
Updated OS.pm::update_public_ip_address to set the public IP address retrieved from the OS in the Datastructure object. This returns the correct value to future callers of get_computer_ip_address.

Updated new.pm::reserve_computer to call get_computer_ip_address after update_public_ip_address is called. This causes the code to use the correct, updated IP instead of an old value stored in the database.


VCL-564
Added OS.pm::get_tools_file_paths. This is used to determine which files under the tools directory on the management node apply to the reservation image. Also added OS.pm::get_file_checksum. This is used to determine whether or a file on the management node is identical to a file on the computer being loaded. If they differ, the file on the computer is replaced.

Added optional concatenate argument to OS.pm::create_text_file. By default the text file is overwritten. This argument is used by the run_script subroutines when the logfile is written to.

Updated Windows.pm::run_scripts to call OS.pm::get_tools_file_paths.

VCL-572
Added subroutines to Windows.pm: install_updates, get_installed_updates, install_exe_update, and install_msu_update.

Moved call to get_imagemeta_postoption from the beginning of Windows.pm::post_load to the actual check that determines if the computer needs to be rebooted. This allows any of the subroutines prior to that point to set the reboot flag.


VCL-565
Changed call in OS.pm::manage_server_access which was directly referencing $ENV{management_node_info} to use $self->data.


Other
Removed call to utils.pm::setstaticaddress in OS.pm::update_public_ip_address. This subroutine was removed.

Added check to make sure the interface name was retrieved in OS.pm: get_private_network_configuration, get_public_network_configuration

Moved copy_file_to and find_files from Linux.pm to OS.pm since they can be used by other OS's.

Updated Linux.pm::logoff_user to check for an ""invalid user name"" error in the output.",VCL-569
13fb3e6b15cf67bd67e23220c8b5d5cd504cc4de,,,1,['managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm'],"VCL-570

Initial changes in ubuntu OS module",VCL-570
2e9c9bb5cf99378adc0075f29d75079fedbded97,,,6,"['managementnode/bin/vcld', 'managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/inuse.pm', 'managementnode/lib/VCL/utils.pm']","VCL-463

updated to handle changes in server reservations:
- starts with state servermodified
- add/remove users based on changes in the VCL user group through manage groups",VCL-463
552538d8aa6ccbee1b76547cb45ec0f8588852fa,,,2,"['web/.ht-inc/requests.php', 'web/js/requests.js']","VCL-527
Allow users to reinstall newer revisions

requests.php: modified AJshowReinstall - had a bug with a ')' in the wrong place which was causing a prompt for which revision to use even if there was only 1 revision

requests.js: modified hideReinstallResDlg - removed dijit.byId('reinstalldlg').hide which was causing hideReinstallResDlg to get called in a loop",VCL-527
82733851ab5a300717b3cda0ef9aa976299e59d3,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","Updated vcl.sql and update-vcl.sql:

VCL-450
Removed vmtypeid from vmprofile.

VCL-499
Added vmprofile.resourcepath column.

VCL-545
Added entries to module and provisioning tables for libvirt provisioning module.",
6be48389aebccf6e2651599dcd5b57e408298470,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-527
Allow users to reinstall newer revisions

added changelog.other for logging any change to a reservation that does not have an explicit field for the change",VCL-527
f5f89fb728ae82dde6b0b2c0f917ceb8d2710901,,,5,"['web/.ht-inc/requests.php', 'web/.ht-inc/states.php', 'web/.ht-inc/utils.php', 'web/js/code.js', 'web/js/requests.js']"," VCL-527
Allow users to reinstall newer revisions

requests.php:
-modified viewRequests - added state to detailed status for server requests; changed shared reboot/reinstall dialog to be just for reboots; added reinstall dialog
-modified getViewRequestHTMLitem - added state to detailed status for server requests
-modified AJsubmitEditRequest - added call to addChangeLogEntryOther when changing admin or login group
-modified AJrebootRequest - added code to check for request being expired; added call to addChangeLogEntryOther
-added AJshowReinstallRequest
-modified AJreinstallRequest - added code to check for request being expired; added code to handle revisionid being passed as something to change

states.php: added AJshowReinstallRequest

utils.php: added addChangeLogEntryOther

code.js: added recenterDijitDialog

requests.js:
-modified showSuggestedTimesCB - changed inline recentering of dijit dialogs to call recenterDijitDialog;
added 'edit' argument to resGone
-modified editReservationCB - added 'edit' argument to resGone
-modified resGone - added argument that allows different text to be displayed so function can be called for other reasons than a normal edit;  changed inline recentering of dijit dialogs to call recenterDijitDialog
-changed functions shared between reboot and reinstall to be only for reboot and added new ones for reinstalls",
a3ee3dc633f49ef80c53b0124408959a7367fbde,,,1,['web/.ht-inc/requests.php'],"VCL-520
Improving display control, on an detailed information of an image

modified newReservation and AJupdateWaitTime - changed preg_match to print image description if it matches anything more than whitespace
modified connectRequest - changed preg_match to print image usage notes if it matches anything more than whitespace",VCL-520
3cbb0670c86ac2bb7f1c97fdc55ddf0f2760e8e0,,,3,"['web/.ht-inc/groups.php', 'web/.ht-inc/utils.php', 'web/js/groups.js']","VCL-498
simplify group time inputs

groups.php:
-modified viewGroups - added a formatter to time fields of user group table
-modified jsonUserGroupStore - added initialmaxtimedisp, totalmaxtimedisp, and maxextendtimedisp to each user group data element
-modified editOrAddGroup - changed inputs for durations from text fields to drop downs where the available options match what can be selected as durations on the new reservation page
-modified confirmEditOrAddGroup - print a nice duration instead of just the duration in minutes

utils.php: added getReservationLengthCeiling

groups.js: added fmtDuration",VCL-498
673108a7075ae1c52691282aa0a3d7c45e256660,,,2,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/utils.pm']","VCL-545
Added hash_to_xml_string and xml_string_to_hash subroutines to utils.pm. These are intended to provide consistent data structures for anything using XML. The libvirt code uses these subroutines.


VCL-564
Added utils.pm::sort_by_file_name. It is used to process scripts in the order of their filenames regardless of the directory they reside in.


VCL-565
Changed several locations in utils.pm which directly accessed $ENV{management_node_info} to call get_management_node_info.

Updated get_management_node_info to be able to store info for multiple management nodes in $ENV{management_node_info}. This is used by image retrieval code.


VCL-566
Updated utils.pm::get_image_info and get_vmhost_info to retrieve the imagetype information. Updated DataStructure.pm to include the imagetype data.


Other
Removed setstaticaddress subroutine from utils.pm. It has been replaced by code in the OS modules.",VCL-545
16457ecc88902108c4548d0dbbaf901e3fc19821,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-563
Added call to enable_dhcp in pre_capture.

Updated enable_dhcp. It was not working correctly if DHCP was enabled before it was called but the interface didn't have an IP address.


VCL-562
Added disable_user subroutine. Added get_user_names subroutine.

Added optional $user_password_only argument to set_password. This allows a password to be set without attempting to update passwords of any scheduled tasks or services which are configured to run as the user.


VCL-564
Updated run_script. It wasn't correctly retrieving the exit status of the script that was executed.

Added run_scripts subroutine. It searches directories under tools which match the OS and architecture of the image being loaded and then executes any scripts it finds.


VCL-561
Added check_image and update_imagerevision_info subroutines. These will eventually retrieve various inventory information from the image being loaded and store the information in the database. These aren't currently called.


Other
Update set_static_public_address to run the commands to set the address and configure DNS in a single command.",VCL-563
86dc0d024950ce3194dc8e54f69cdd3a092b4d16,,,1,['web/.ht-inc/xmlrpc_example.php'],"VCL-443
update XMLRPC example to use API v2

looks like it was correct for APIv2 but just had X-APIVERSION specified incorrectly as 1",VCL-443
5196cb5ab4f5eea8e91d2e0d293853129965d2ad,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-463
add ability to deploy images as servers

vcl.sql and update-vcl.sql:
-added loginlog.code
-added serverrequest.name
-added statgraphcache.provisioningid",VCL-463
5bbea19616ffe5b6dbda2bbd64625154cfdcdec9,,,5,"['web/.ht-inc/requests.php', 'web/.ht-inc/serverprofiles.php', 'web/.ht-inc/utils.php', 'web/js/requests.js', 'web/js/serverprofiles.js']","VCL-385
Hide noimage from showing in the list of images in Edit Image Profiles

VCL-463
add ability to deploy images as servers

added names to server reservations; removed several items from current reservations for server reservations and added a details popup to show the additional info

requests.php:
-modified newReservation - missed this one on VCL-385 last time - if image name is ""No Image"" do not include it in the list of environments for check out
-modified viewRequests and added getViewRequestHTMLitem - broke out each element from the current reservations page to be generated by a call to getViewRequestHTMLitem to reduce duplicated code and make it easier to include different portions in different sections of the page
-modified AJeditRequest - added servername
-modified AJsubmitEditRequest - added processing of servername; added some extra code for determining when admin and login groups should be updated

serverprofiles.php:
-modified deployHTML - added Name section
-modified AJdeployServer - added profilename; changed usergroups to include all user groups instead of just the ones the user can manage
-modifed processProfileInput - added underscore as an allowed character in the profile name

utils.php:
-modified getRequestInfo - added servername to returned array
-modified getUserRequests - added servername to returned array

requests.js:
-modified hideEditResDlg - destroy servername widget if exists
-modified submitEditReservation - added servername to submitted data

serverprofiles.js:
-modified getServerProfileDataDeployCB - added deployname; get admin and login groups by either dijit select or normal select, depending on what exists
-modified submitDeploy - added deployname to submitted data",VCL-385
979139d475c286da8eba84fae3ec44dd6b597388,,,1,['web/.ht-inc/images.php'],"VCL-521
An OS image named in japanese 2byte characters doesn't run

updated processImageInput - added checks for single and double quotes in image name, also added checks for 2byte characters in image name - generate error if name contains them

this was from a patch submitted by Toru Yokoyama",VCL-521
085222dfc2fbbb08d96f1c4ccf1ac42c2e6ef6ea,,,1,['web/shibauth/index.php'],modified to handle array returned by updateShibUser instead of just the user's id,
741b614ae39a99cf0617475c335f99eb2179050e,,,1,['web/js/dashboard.js'],"VCL-399
add a dashboard where admins can see current state of VCL system

modified updateDashboardCB to handle added section to see currently loading reservations
added updateNewReservations",VCL-399
16312900b265dee365be3cf4a36e5965e304d776,,,1,['web/js/requests.js'],modified updateWaitTime - added check to return if waittime element does not exist,
53511713503a14eeebda083a29320d6ae27a84b5,,,1,['web/js/serverprofiles.js'],commented out fixedIP and fixedMAC code; changed admingroup and logingroup code to use normal selects instead of dijit selects,
68068dbef4dcf8dd668473f83e6d974ea9c78ce2,,,1,['web/.ht-inc/computers.php'],removed some commented out blocks of code there were left over from a copy/paste,
fc28e645d0d9c21898ff29f1d48e2da8e93d1b1a,,,1,['web/.ht-inc/requests.php'],"VCL-534
$cluster not reset in for loop in viewRequests

modified viewRequests - set $cluster to 0 at end of each run through the for loop",VCL-534
f55cb195467c6bb8efba757ae188e6876ebc73b6,,,1,['web/.ht-inc/privileges.php'],modified userLookup - added code to appropriately handle single quotes in $userid,
da816ffe6c5e4fe2d008caa1d72eb23da53bd0de,,,1,['web/.ht-inc/help.php'],modified submitHelpForm - improved how user reservation history is generated,
74415bb34666547adc8207e8df54aceaf0dc7b23,,,1,['web/.ht-inc/dashboard.php'],"VCL-399
add a dashboard where admins can see current state of VCL system

added section to see currently loading reservations",VCL-399
c7b249786b528a7b351205cf10c2a172fc9378e0,,,1,['web/.ht-inc/authentication.php'],"modified selectAuth - removed label from ""Remeber my selection"" to make it harder to accidentally select it
modified ldapLogin - if we receive ""Invalid credentials"" from the ldap server, pass that along to addLoginLog
modified addLoginLog - added $code as an optional argument; insert it as code into database",
2ce27ad74fef66daf5c34dce0c7d7beb7feef568,,,2,"['web/.ht-inc/serverprofiles.php', 'web/.ht-inc/xmlrpcWrappers.php']","VCL-463
add ability to deploy images as servers

serverprofiles.php:
-modified deployHTML - only allow server profiles with serverCheckOut permission to be deployed; allow any user group to be selected for admin and login groups instead of just the ones the user can edit; commented out fixedIP and fixedMAC
-modified manageProfilesHTML - only include profiles with serverProfileAdmin to be managed; commented out fixedIP and fixedMAC; allow any user group to be selected for admin and login groups instead of just the ones the user can edit
-modified AJdeployServer - set reservation.remoteIP at reservation time instead of waiting until the Connect button is clicked

xmlrpcWrappers.php: modified XMLRPCdeployServer - set reservation.remoteIP at reservation time instead of waiting until the Connect button is clicked",VCL-463
d799b68e9cfdb1153ec01ff7180a24e4d6e95477,,,1,['web/.ht-inc/secrets-default.php'],"VCL-479
remove dependency on mcrypt

removed $mcryptkey and $mcryptiv and added $cryptkey",VCL-479
efb757554d210b11a37f8ff86fe64bc931a6c919,,,1,['web/.ht-inc/statistics.php'],"added ability to select to view statistics by provisioning engine (requires ""View Stats by Affiliation"" user group permissions
-modified selectStatistics - allow selection of provisioning engine
-modified viewStatistics - process selection of provisioning engine and get appropriate data
-modified AJgetStatData to pass additional information about extra mode and provisioning engine to functions that generate graph data
-modified getStatGraphDayData, getStatGraphHourData, getStatGraphDatConUsersData, getStatGraphConBladeUserData, and getStatGraphConVMUserData to accept $mode and $provid as additional arguments and to generate the appropriate data accordingly
-modified addToStatGraphCache - added $provid as additional argument",
dad046beaa76da27b199004d700c375062b771c6,,,5,"['web/.ht-inc/groups.php', 'web/.ht-inc/states.php', 'web/.ht-inc/utils.php', 'web/css/vcl.css', 'web/js/groups.js']","VCL-559
convert pages with large tables to use dojo datagrids

groups.php:
-modified viewGroups - rewrote to use dojo datagrids
-added jsonUserGroupStore
-added jsonResourceGroupStore
-modified editOrAddGroup - added access permissions for $groupid to beginning since we now use a single continuation for editing groups instead of one per group; added code to handle initial add of groups instead of only if there was an error in the data submitted
-modified confirmDeleteGroup - added access permissions for $groupid to beginning since we now use a single continuation for deleting groups instead of one per group

utils.php:
-updated documentation header for getUserGroups
-modified sortKeepIndex (unrelated to this JIRA issue) - if $a or $b appears to be a hostname, call compareDashedNumbers to do the comparison
-modified sendJSON - added optional argument $identifier that will add in an identifier to the json data to be used with dojo datastores
-modified getDojoHTML - added more includes for viewGroups and additional initial javascript for viewGroups

states.php:
-added addGroup
-added jsonUserGroupStore
-added jsonResourceGroupStore

groups.js:
-modified getGroupInfo - get the continuation from a hidden element in the page instead of having it passed as an argument
-added fmtUserGroupDeleteBtn
-added confirmDeleteUserGroup
-added fmtUserGroupEditBtn
-added editUserGroup
-added usergroupGridFilter
-added buildUserFilterStores
-added fmtResourceGroupDeleteBtn
-added confirmDeleteResourceGroup
-added fmtResourceGroupEditBtn
-added editResourceGroup
-added fmtGroupInfo
-added resourcegroupGridFilter
-added buildResourceFilterStores
-added doInitialScroll

vcl.css: added section for ""#usergroupcontainer table th, #usergroupcontainer table td, #resourcegroupcontainer table th, #resourcegroupcontainer table td"" so that manage groups datagrids will have the same size font in the headers and data cells",VCL-559
801fd79167e57b299982d90db017ddb17ae66f38,,,1,['managementnode/lib/VCL/DataStructure.pm'],"VCL-450
Removed vmhost_type* and vmhost_profile_virtual_disk_path hash entries from DataStructure.pm.

VCL-499
Added vmhost_profile_resource_path entry to DataStructure.pm.",VCL-450
e06d5bf479b977f747e98738c6d0ebe189c9d60f,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm'],"VCL-499
Updated vSphere_SDK.pm to incorporate most of the changes done by vCenter.pm.
-Added begin_entity arguments to find_entity_views calls
-Added _get_resource_pool_view subroutine.
-Updated copy_virtual_disk to attempt to copy the disk by creating a clone VM if the CopyVirtualDisk function is not available on the VM host.
-Updated vm_unregister to be able to accept a VM mo_ref argument in addition to a vmx file path. This allows copy_virtual_disk to be able to call it to unregister the temporary/clone VMs with out having to figure out the vmx path.",VCL-499
0d5b15024eb74176fd64e172300948c0e693abba,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm'],"VCL-450
Updated VMware.pm:

-Changed initialize so that vSphere_SDK.pm is preferred over SSH. This allows vCenter to work even if SSH works to the host.
-Removed vmhost_os subroutine. It is now in OS.pm. Changed all references to $self->{vmhost_os} to !$self->vmhost_os. This uses the vmhost_os subroutine in OS.pm.
-Added usb.present parameter to prepare_vmx. This causes a USB hub to be created on the VM allowing redirected USB devices to work.
-Removed logic to check vmprofile.virtualdiskpath. This additional VM host profile setting will be removed. Things are complicated enough.",VCL-450
0d82f869029240e441a08e20105f7b1ee3da9e4f,,,1,['web/js/requests.js'],"VCL-444
time delay the display of the Get RDP File button to allow vcld to grant access

forgot to attribute previous commit as code contributed by Gerhard Harti from ODU",VCL-444
a29e5c61602a52e092406633666bc36ff6ec4cc4,,,3,"['web/.ht-inc/requests.php', 'web/.ht-inc/utils.php', 'web/js/requests.js']","VCL-444
time delay the display of the Get RDP File button to allow vcld to grant access

requests.js - added showRDPbutton

requests.php: modified connectRequest - added div before Get RDP File button for showing a counter; enclosed Get RDP File button in a div that starts out hidden; showRDPbutton gets called on page load to show the Get RDP File button after 5 seconds and to show a count down to that

utils.php: modified getDojoHTML - added sections for connectRequest",VCL-444
83fa98daf6734f0257a91620206ed8e78367ac17,,,2,"['web/.ht-inc/blockallocations.php', 'web/.ht-inc/conf-default.php']","VCL-513
allow block allocation control per affiliation

blockallocations.php:
-modified blockAllocations - add note to end of description of block allocations saying they should be requested at least one business day in advance
-modified AJblockAllocationSubmit - moved notification code to after insert for blockRequest in case there is an abort; get list of email addresses to send notification emails to from getBlockNotifyUsers
-added getBlockNotifyUsers - builds a list of email addresses based on people in user groups that have access to manage block allocations

conf-default.php - removed $blockNotifyUsers",VCL-513
a66b0cdf6b86e4e542151e7d11656158e3eb46e9,,,2,"['managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/utils.pm']","VCL-544

- support for systemd 
- support for configuring vcl dependent scripts in post_load for kickstart based installs",VCL-544
71e822f89218e981c417de87ef94cfdb8d8fdebf,,,1,['web/.ht-inc/computers.php'],"VCL-551
deleting an active VM doesn't remove it from the VM host

modified submitDeleteComputer and submitCompStateChange to set vmhostid to NULL when setting deleted to 1 as a result of deleting computers",VCL-551
2856f0f9186fa6f83115a8152b7b26fb7a2f9eca,,,1,['web/.ht-inc/groups.php'],modified viewGroups - changed code to print group membership for course roll and custom groups without the ability to edit the membership,
c0a8779f738d1361a1044d65b5836e49fc386ad9,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']",added 'Manage Federated User Groups (global)' and 'Manage Federated User Groups (affiliation only)' entries to the usergroupprivtype table,
5faeecccf727cc1efce4386168db76abd02aabae,,,1,['web/.ht-inc/groups.php'],"VCL-502
allow aspects of automatic user groups to be managed through UI

modified viewGroups, editOrAddGroup, processGroupInput, updateGroup, confirmEditOrAddGroup, and confirmDeleteGroup - introduced two new user group permissions: 'Manage Federated User Groups (global)' and 'Manage Federated User Groups (affiliation only)'; use them to control who can see and manage Course Roll and Federated user groups; use 'custom' and 'courseroll' user group attributes to control which information about user groups can be edited",VCL-502
5dba2ab194fb2813680fc92f63b132bf367beeea,,,1,['web/.ht-inc/schedules.php'],"VCL-556
edit schedule groups code not doing permissions correctly

updated submitScheduleGroups - made calls to getUserResources match what is in viewSchedules",VCL-556
e9981c3cdd8b7ddc5bf95e846ea5e4855998e867,,,1,['web/.ht-inc/conf-default.php'],changed return value for $addUserFunc and $updateUserFunc functions for local types from 0 to NULL to match what is returned by LDAP functions,
2dee4b1371186f9214b46eeacd23d4a734b3372f,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-543
OSX under ESXi 4.1

VCL-30
additional user access methods for connecting to reserved compute node

vcl.sql:
-added UNIQUE key to connectmethod table on ""name, description""
-added entry for ""iRAPP RDP"" to connectmethod
-added default entries to connectmethodmap for iRAPP RDP
-added os_osx module entry to module table
-added vmwareosx entry to OS table
-added osx entry to OStype table

update-vcl.sql:
-added AddConnectMethodMapIfNotExists stored procedure
-added UNIQUE key to connectmethod table on ""name, description""
-moved inserts for connectmethod to after OS table inserts
-changed inserts for connectmethodmap to calls to AddConnectMethodMapIfNotExists and moved to after new spot for connectmethod inserts",VCL-543
e816492d3c0c3aa7fa52b4b5ce0aadfc76158385,,,1,['web/.ht-inc/utils.php'],"VCL-455
put alt text with a image generated by textimage.php

modified getImageText - added alt to img tag to cause the text to be displayed if there is a problem with the GD library; patch submitted by Shoji Kajita",VCL-455
755868f770ec76f3f572003ca951fd288d81b269,,,1,['web/.ht-inc/utils.php'],"VCL-44
getPossibleRecentFailures in isAvailable can end up removing only available machine

modified isAvailable - if calling getPossibleRecentFailures results in decreasing the number of computers to look at, save the original set, then if allocComputer doesn't allocate anything, try calling it again with the original set of computers",VCL-44
0126f9ae164bc65523cfe16aba30683ebd16281f,,,2,"['web/.ht-inc/utils.php', 'web/.ht-inc/xmlrpcWrappers.php']","VCL-383
make future reservations that would be part of a block allocation included in the block allocation

utils.php: modified isAvailable - added additional parameter that can be passed - $skipconcurrentcheck; if this is set to 1, it does not check the overlapping count for reservations of that image; when working with block allocations, it is often useful to call isAvailable for the block allocated time plus a leading reload amount, but then to only make the reservation for the leading reload time; this can cause an overlap for the check but not for the actual reservation

xmlrpcWrappers.php: modified XMLRPCprocessBlockTime - added code to look for any future reservations made by users in the user group associated with the block allocation for the same image; if so, try to include them in the block allocation to keep from tying up additional machines",VCL-383
1e0b532b123aae404080a8cc5e6161477fdd31c1,,,1,['managementnode/bin/gen-node-key.sh'],"VCL-407 

removed xCAT references and tools, latest versions of xCAT do not use the makesshgkh utility",VCL-407
9ff3f0becaf17b1addab3b57f92cf880bb540308,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT2.pm'],"VCL-557

On DESTROY, only during new,reload, and image states, set the node to boot",VCL-557
431dbbd8cabe4dc99cb03141a8077c88b2169b4e,,,2,"['web/.ht-inc/blockallocations.php', 'web/.ht-inc/utils.php']","VCL-234
give error when block reservations requests more resources than concurrent use of image

blockallocations.php: modified processBlockAllocationInput - flag an error if the number of seats is greater than the maxconcurrent number of reservations for the image



VCL-398
make block allocations tie up concurrent usage of image

utils.php: modified isAvailable - changed section that checks for max concurrent usage to count reservations and machines allocated to block allocations",VCL-234
b98519adfb386bda77268a0eaa88db9fd34f5ab2,,,1,['managementnode/bin/vcld_cron_check'],"VCL-558

fixing vcld_cron_check to use service vcld 
submitted on behalf of Tony Miller 
Thanks Tony for finding and providing a fix.",VCL-558
d6b4539b5e95179712f6ecfcf82c1dddebe4c71c,,,3,"['web/.ht-inc/images.php', 'web/.ht-inc/requests.php', 'web/.ht-inc/vm.php']","VCL-385
Hide noimage from showing in the list of images in Edit Image Profiles

images.php:
-modified viewImages - do not print noimage image in list of images to edit
-modified viewImageGrouping - do not print noimage image in list of images to add to a group
-modified subimageDialogContent - do not print noimage image in list of images that can be added as a subimage

requests.php: modified newReservation - do not print noimage image in list of images that can be reserved

vm.php: modified AJprofileData - do not add noimage image to data structure of images that can be selected for a profile",VCL-385
3c8d059cdb7ab60a39b4b32590fd0a08f8f829d7,,,1,['web/.ht-inc/utils.php'],"VCL-321
user lookup tool doesn't show user group affiliation

modified getUsersGroups - added group affiliation to names of owned groups when $includeaffil is 1",VCL-321
9332cb1764f90348497947e10a8e94372685a0fc,,,1,['web/.ht-inc/privileges.php'],"VCL-321
user lookup tool doesn't show user group affiliation

modified userLookup - added ability to look up users by ""last, first"" as well as userid; added affiliation to user groups; added user's userid and affiliation to output",VCL-321
c1fdb5a1bb8e623ba906c8964d886d4f7ea55195,,,1,['managementnode/bin/install_perl_libs.pl'],changed the url path for eprl repository rpms,
6294693ca3d58fa9bce2d505b3f597c60154c63f,,,1,['web/.ht-inc/conf-default.php'],"VCL-438
allow new users to be added to VCL when shibboleth authentication is used without LDAP

added commented out section of 4 lines for setting up $affilValFunc, $addUserFunc, and $updateUserFunc for shibboleth affiliations where it is desired to be able to add users without validating them against LDAP",VCL-438
e69be89a313a6c20ed643258115bb7a4918e1eac,,,8,"['web/.ht-inc/authmethods/ldapauth.php', 'web/.ht-inc/authmethods/shibauth.php', 'web/.ht-inc/computers.php', 'web/.ht-inc/states.php', 'web/.ht-inc/utils.php', 'web/.ht-inc/xmlrpcWrappers.php', 'web/css/vcl.css', 'web/js/computers.js']","VCL-313
need a way to set computers as vmhosts without a bare metal provisioning engine

VCL-438
allow new users to be added to VCL when shibboleth authentication is used without LDAP

VCL-547
removing site maintenance entry from .ht-inc/maintenance directory doesn't fully remove site from maintenance

computers.php:
-added VMHOSTINUSERERR
-modified editOrAddComputer, confirmEditOrAddComputer, submitEditComputer, bulkAddComputer, processComputerInput, updateComputer, and printComputerInfo - added further code to limit which values can be selected from a drop-down to only the ones that make sense; added ability to set a computer to the vmhostinuse state if it is not vcl provisioned
-added AJcanceltovmhostinuse
-added submitComputerVMHostLater
-modified jsonCompGroupingComps and jsonCompGroupingGroups to use sendJSON instead of inline json_encode with commenting

computers.js:
-added cancelScheduledtovmhostinuse
-modified editComputerSelectType - only allow available state if provisioning is not 'none'; keep track of the original state, and restore it if it is available again
-added editComputerSelectState

states.php:
-added AJcanceltovmhostinuse
-added submitComputerVMHostLater

utils.php:
-modified initGlobals - set $affilValFunc, $addUserFunc, and $updateUserFunc for any shibonly affiliations
-modified maintenanceCheck - if no maintenance files in maintenance directory, set end time of any entries in the database that are active to NOW
-modified validateUserid - removed section that returns 0 for any shibonly affiliations
-added getCompFinalReservationTime
-modified getComputers - vmprofileid was not getting set correctly
-modified getVMProfiles - added key 'name' that is the same as profilename so that printSelectInput can handle it
-modified getDojoHTML - added Button and Dialog to editComputer/addComputer section

shibauth.php - added addShibUserStub

vcl.css:
-added highlightnoticewarn
-added highlightnoticenotify",VCL-313
6ef12651289b8baf4249a24ec61fcc6f8232e671,,,1,['managementnode/bin/install_perl_libs.pl'],"VCL-545
Updated install_perl_libs.pl. Fixed problem where Perl modules failed to install if ""notest"" function is not available from the CPAN module. This function is only available on newer versions.

Added -l and -p arguments to allow only Linux packages or Perl modules to be installed -- useful for testing the script.

Added LWP::Protocol::https to list of Perl modules to install.",VCL-545
4f78c98159564c18cb6217f229bf323ad8bdcec0,,,3,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm']","VCL-554
Added pre_capture subroutine to OS.pm. This is called as the first step from the Windows.pm and Linux.pm pre_capture subroutines. It checks to make sure the computer is responding. If not responding, it checks if the computer is powered off and attempts to power it on. OS::pre_capture also creates the currentimage.txt file so this step no longer needs to be done in every provisioning module's capture subroutine.

Also changed the timing of the wait_for_response call in Linux::post_load. It had been waiting 60 seconds for the computer to boot. Some computers take less time. Changed to 30 seconds.",VCL-554
ba6db530177c5708e3b45c64ee217a5418b68258,,,3,"['managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm']","VCL-450
Added logic to the VMware code to configure the VM CPU(s) according to VM host and guest OS limitations. It now checks the VMware license vCPU limit and won't assign more CPUs to a VM than the host is licensed for. Added get_license_info subroutines to vSphere_SDK.pm and VIM_SSH.pm. It also checks the number of cores the host has and won't assign more than this number. Some guest OS's have CPU socket limitations but can support multicore processors. The code now detects this and won't assign more sockets than the guest allows, but will add multiple cores to each CPU.

Added check to the end of VMware::load to make sure the guest OS has recognized the correct number of CPUs. Some OS's require a reboot in order to detect additional CPUs if the image was captured on a VM with fewer CPUs than the VM being loaded has. If the guest OS reports fewer CPUs than should be detected, the VM is rebooted.

Added snapshot.redoNotWithParent vmx parameter because the location of snapshot delta files changed with ESXi 5.0. They are stored by default with the parent vmdk rather than the VM's working directory where the vmx file resides. This parameter causes the delta file to be located in the vmx directory.

Added feature that allows VMs to use a dedicated datastore if a datastore exists on the VM host named after the VM.",VCL-450
29654d33ab14600be6fa5a172b61c9f4e62ef88b,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-463
add ability to deploy images as servers

added these states: checkpoint, serverinuse, rebootsoft, reinstall, reboothard, servermodified",VCL-463
70e2682ba2ac7b2c56c0b150046209be1799b253,,,1,['managementnode/lib/VCL/Module/OS/Windows/Version_6.pm'],Increased the timeouts in Version_6.pm::run_sysprep. I have seen the current values reached while Sysprep was still running causing an image capture to fail unnecessarily.,
6d22c1e286ce84541a43c006d62b63566bc018dd,,,3,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm']","VCL-339
Added OS.pm::create_currentimage_txt. This will be called by the libvirt capture subroutine and will eventually replace the code in utils.pm.

VCL-503
Updated OS.pm::execute_new. Added $identity_key argument.

VCL-553
Updated OS.pm::wait_for_reboot to accept the same arguments as the other wait_* subroutines: $total_wait_seconds, $attempt_delay_seconds, $attempt_limit. Updated reboot subroutines in Linux.pm and Windows.pm. Also added a $pre_configure argument to Windows.pm to allow the caller to control whether or not the pre-reboot safety tasks are done or if the computer is simply rebooted.

VCL-402
Updated typo in Windows.pm::pre_capture. It wasn't calling disable_login_screensaver for VMs.

Other
Added check to Windows.pm::create_directory to check for '~' being passed as the argument. If this was the case, a /root/~ subdirectory was being created.",VCL-339
5add7718eac95cf2f7a31dfe38e7db0abe90adea,,,1,['web/.ht-inc/utils.php'],"VCL-548

server reservations not owned by a user count toward that user's overlapping reservation count

modified checkOverlap - added constraint that user must be owner of reservation for it to count toward max overlap",VCL-548
b69693f1da44e6cd7c78597677562354f560c8a7,,,1,['managementnode/lib/VCL/Module/State.pm'],"VCL-545
Fixed bug in State.pm:initialize. The code added to create an OS object to control the VM host was generating errors for non-VM reservations because it was calling set_vmhost_os for on VM reservations.",VCL-545
c291200e7392e918fdb75185becae8383ba1bdfe,,,2,"['managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6.pm']","VCL-550
Added post_reserve subroutine to Windows.pm. It runs $SYSTEMROOT/vcl_post_reserve.cmd if this file exists. Added general run_script subroutine which writes the script output to C:\cygwin\home\root\VCL\Logs. Also added format_text_file subroutine which runs unix2dos. All of the unix2dos commands can eventually be migrated to use this subroutine.

VCL-450
Added Windows.pm::get_cpu_core_count. This will be used by provisioning modules to check if the loaded computer (mainly VMs) have the correct number of CPUs after being loaded. Some versions of Windows don't detect CPUs in addition to the number that existed on the computer which was used to capture the image until rebooted. This will allow the provisioning module to detect this and reboot the computer after loading it if necessary.

Other
Added missing 'Windows Server 2003 R2' key to setup_product_keys so that this option appears when capturing a base image via 'vcld --setup'.

Removed command to run 'slmgr.vbs -ato' from Version_6.pm::run_slmgr_skms. It was being run twice.",VCL-550
eab23ffca77696568c60b0f05cd236a90944db95,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-94
Added support for the 'end_state' argument to Linux::pre_capture. It allows provisioning modules to specify whether or not the computer is shutdown by pre_capture. This was added to the Windows code but never to Linux.

Other
Added check to Linux::create_directory to handle '~' being passed. It had been creating a '/root/~' directory.",VCL-94
3de408edcbddea1940d42ec8ef2f4c9ca38c9290,,,1,['web/.ht-inc/utils.php'],"VCL-549
AJAX error when creating a new schedule

modified getDojoHTML - added conditional in case statement for 'editSchedule' and 'submitAddSchedule' to not call populateTimeStore when mode is 'submitAddSchedule'",VCL-549
2a5ed8e9c40a8cb1802cc8f6ed9e4bdd4d3cfea4,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm'],"VCL-450
Commented out MemTrimRate=0, sched.mem.pshare.enable=FALSE, and mainMem.useNamedFile=FALSE values in the code that generates the vmx file. These parameters may have adverse performance affects under ESXi 4.x/5.x.

Fixed logic bug in prepare_vmdk. If a dedicated copy of the vmdk needs to be created, it was only checking if the file exists in the repository and not in the datastore. Updated to check both locations.

Updated get_vm_ethernet_adapter_type to attempt to retrieve the type from the reference vmx file if it exists instead of only using the default adapter type for the OS being loaded.

Added long timeout arguments to the vmkfstools and vmware-vdiskmanager commands which may take a long time.",VCL-450
3aff6fcb7756774ab7da18489c1897165f8dafcb,,,1,['managementnode/lib/VCL/reserved.pm'],"VCL-381

changed flow of firewall update for when checkuser=0

We want to make sure the flow is correct to account for incoming connection to the access port
when a user hits connect button.",VCL-381
d0928a59c47217b84ff5f1a66d983e91ee8bf420,,,2,"['managementnode/lib/VCL/Module/Provisioning/libvirt.pm', 'managementnode/lib/VCL/Module/Provisioning/libvirt/KVM.pm']","VCL-545
Fixed typo in KVM.pm. get_disk_file_extension subroutine was named get_disk_format due to copy/paste error. Updated calls in libvirt.pm accordingly.",VCL-545
c0eb4a3d7c9c6b9fbc1c2cf60029e5a70acb5f33,,,1,['managementnode/bin/install_perl_libs.pl'],"VCL-545
Added perl-XML-Simple to install_perl_libs.pl. It is used by the libvirt code.",VCL-545
3816fd8b7abfee6ba0957adc26aba621d6910a35,,,2,"['managementnode/lib/VCL/Module/Provisioning/libvirt.pm', 'managementnode/lib/VCL/Module/Provisioning/libvirt/KVM.pm']","VCL-545
Added libvirt.pm module to support general libvirt functionality. Added KVM.pm libvirt hypervisor driver module to allow KVM to be provisioned via libvirt.",VCL-545
43c3c44dc5e2c18e979b0f91cb9f9ccd4cc6c3c2,,,2,"['managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/utils.pm']","VCL-545
Updated Linux.pm::get_file_size to be able to accept an array of files.

Updated Linux.pm::find_files to allow an argument to be passed specifying the type of search to perform. This allows a regex file pattern to be passed.

Added get_copy_speed_info_string to utils.pm. This displays various file copy performance statistics. It was copied out of VMware.pm and added to utils.pm since it can be used elsewhere. 

Added get_random_mac_address to utils.pm.

Updated utils.pm::format_data to detect an XML string. If XML, a hash is constructed using XML::Simple::XMLin and then displayed.


Other
Updated section of post_load in Linux.pm which attempts to run the vcl_post_load script to check if the script exists on the computer being loaded before trying to execute it.  This is done to prevent unnecessary warning messages from appearing in the vcld.log file.",VCL-545
d9ca350add2b67b61c87645b4fafbc3a5983ac8b,,,1,['managementnode/lib/VCL/new.pm'],Fixed typo in new.pm. If it failed to update the public IP address it was displaying 'failed to update private IP address' in the log file.,
5e67155eb30458c7e7ec11e220a97d566866bcb9,,,4,"['managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/Provisioning.pm', 'managementnode/lib/VCL/Module/State.pm']","VCL-545
Added code to create a VM host OS object to State.pm::initialize if computer.vmhostid is set. This allows provisioning modules to access the VM host OS via $self->vmhost_os.

VCL-546
Updated OS.pm::_get_public_interface_name_helper. Reordered logic so that the private interface isn't returned if another interface is found which isn't assigned a public address.

Other
Updated OS.pm::create_text_file to attempt to create the parent directory first. It was failing if the directory didn't exist beforehand.

Commented out some unnecessary debugging statements in State.pm::DESTROY.",VCL-545
a0799f2386d8e2491c3f6a033fc0b08f21c0edd7,,,2,"['managementnode/lib/VCL/healthcheck.pm', 'managementnode/lib/VCL/utils.pm']",VCL-468,VCL-468
c81fd577c1b1820cfddace916d3b229adab54d8c,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm'],"VCL-468

add check in sub routines to  determine if is a reservation or being called through healthcheck
This forces not to use cached value assigned in ENV",VCL-468
7e02085fd3321f9805f29ca23610b64fb4762406,,,1,['managementnode/lib/VCL/healthcheck.pm'],"VCL-468

correction hash sent to secondary routines",VCL-468
922c1a60da5cd10308ee37f9dbb356aa03125bd1,,,1,['web/.ht-inc/images.php'],"VCL-141
allow users to delete images that are set as currentimage

-modified confirmDeleteImage - notify user if image is currently reserved and display end time of last reservation
-modified submitDeleteImage - set currentimageid, imagerevisionid, and preferredimageid in computer table to noimage when deleting an image they are set to
-modified checkForImageUsage - only check for image being reserved, no longer checking for just being loaded",VCL-141
487e86df750cbecff70133e73050a49f0f158cca,,,1,['web/.ht-inc/managementnodes.php'],"VCL-249
denote which management node fields are required

modified editOrAddMgmtnode - added * next to fields that are required
modified processMgmtnodeInput - allowed installpath to be empty",VCL-249
fb293ec3186c640b1f8000b661e136f83f00e39f,,,4,"['web/.ht-inc/computers.php', 'web/.ht-inc/states.php', 'web/.ht-inc/utils.php', 'web/js/computers.js']","VCL-530 	
Database field for computer.RAM is limited to 65535

VCL-490 	
restrict fields when adding computers

VCL-489 	
allow dhcp and hosts info to be downloaded about computers any time instead of just when adding

VCL-419 	
VCL-311 allow private IP address to be set and modified for computers

VCL-354 	
View Computers Table - State Coloring

VCL-311 	
add more fields to edit computer page

VCL-236 	
make Groups first tab on Manage Computers page 

computers.php:
-added MACADDERR2 global define
-modified selectComputers - moved select by group tab to first tab; changed ""No. Processors"" to ""No. Cores""; added checkbox for showing location on Edit Computer Information page
-modified viewComputers - removed form for adding computers and added 2 buttons - one to go to the page to add a single computer, one to go to the page to add multiple computers; changed ""No. Processors"" to ""No. Cores""; added Location column
-modified editOrAddComputer - added ability to add/edit private IP address, private and public addresses, and location; set computer type to default to blade, network to default to 1000, and no. cores to default to 1; added constraints so that only states and provisioning engines that make sense for a certain type are displayed; converted select boxes to dijit ones; made no. cores a dijit number spinner
-modified confirmEditOrAddComputer - removed redirect to bulkAddComputer since we go directly there now; added private IP address, mac addresses, and location
-modified submitEditComputer - added mysql escaping to notes field
-modified confirmDeleteComputer - added private IP address, mac addresses, and location
-modified bulkAddComputer - added constraints so that only states and provisioning engines that make sense for a certain type are displayed; converted select boxes to dijit ones; made no. cores a dijit number spinner
-modified confirmAddBulkComputers - moved where type is displayed; changed No. Processors to No. Cores, added location
-modified submitAddBulkComputers - added location; get id for noimage from database instead of hard coded '4', get id for noimage revisionid from database and insert into table; no longer provide option to generate dhcpd data
-removed generateDhcpForm
-removed generateDHCP
-modified computerUtilities - incorporated code from Clifton Wood to colorize more states; added utility to generate /etc/hosts, dhcpd.conf, and dhcpd.leases data
-modified processComputerInput - added private IP address, mac addresses, and location; increased allowed max RAM size to over 8TB; added form validation for type and state
-modified processComputerInput2 - added showlocation
-modified processBulkComputerInput - added location; set default for cores to 1, default for network to 1000, and default for type to blade; added code to validate that no hostnames will be duplicated
-modified updateComputer - set private IP address, mac addresses, and location
-modified addComputer - set private IP address, mac addresses, and location; get id for noimage from database instead of hard coded 4, get revisionid for noimage and set it
-modified printComputerInfo - added private IP address, mac addresses, and location
-modified getComputerSelection - include showlocation
-modified jsonCompGroupingComps, jsonCompGroupingGroups, AJaddCompToGroup, AJremCompFromGroup, AJaddGroupToComp, and AJremGroupFromComp - switched from json-comment-filtered to just json
-added AJgenerateUtilData

computers.js:
-added RPCwrapper
-modified addRemItem, addRemComp2, and getGroupsButton - use RPCwrapper instead of xhrPost inlined
-added editComputerSelectType
-added generateCompData
-added generateDHCPDdata
-added generateHostsData
-added generateCompDataCB

states.php - added AJgenerateUtilData

utils.php:
-modified getComputers - added privateIPaddress, eth0macaddress, eth1macaddress, and location to returned data
-modified printSelectInput - changed setting ""selected"" from just being ""selected"" to ""selected=selected"" so it would work with dijit.form.Select
-modified getDojoHTML - added dojo code for these states: editComputer, addComputer, confirmEditComputer, confirmAddComputer, bulkAddComputer, confirmAddBulkComputers, computerUtilities",VCL-530
7c8ed45b5b752053dbc7d714d069028fc2e94c57,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-468

removed alternate path for my CONF_FILE",VCL-468
030b57cc0e0ed7ceef44f3df8910e627ea180d3a,,,2,"['managementnode/bin/S99vcld.linux', 'managementnode/etc/vcl/vcld.conf']","VCL-468

uploaded wrong startup script and conf file in previous commit",VCL-468
debd4099b626e310f497a052b3d4fa7a87911f4f,,,9,"['managementnode/bin/S99vcld.linux', 'managementnode/etc/vcl/vcld.conf', 'managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/Provisioning/Lab.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT2.pm', 'managementnode/lib/VCL/healthcheck.pm', 'managementnode/lib/VCL/utils.pm']","VCL-468

Modified healthcheck to make use of datastructure.
Minor updates to provisionin modules",VCL-468
5f5fb8cbf6b3ce669720f55e6c83b76ea063a445,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-311
add more fields to edit computer page

changed computer.location from varchar(10) to varchar(255)",VCL-311
963edd626cb05a2c2c650c0ec498863ebc829f11,,,1,['managementnode/lib/VCL/DataStructure.pm'],simple fix,
48ebca3b05f3587300ad3dfb7b8eb13055c5c322,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-541
Updated a few subroutines in Windows.pm which normally return a hash or array to not return 0 if an error occurs. This will prevent the calling subroutine from generating ""Can't use string (""0"") as a HASH ref"" errors.",VCL-541
cf93e0f9ac6a5fb52c9d0b7b1a9067cecf068be0,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-381

moved firewall_compare_update to OS::Linux and OS::Windows modules",VCL-381
f7cc169a984478302f99ee6d2791fce8df544cbb,,,5,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/inuse.pm', 'managementnode/lib/VCL/reserved.pm']","VCL-30

Updated firewall code to chck for the user being logged in.
Comfirm the correct IP address.
Update the database if needed.",VCL-30
40e24d35f62676e56c5e3d2989efcf0097d46d08,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']"," VCL-540
manageMapping not added to update-vcl.sql and vcl.sql files

added manageMapping",
025e7b4a576dec034579cce4c5fb0b560325d55d,,,1,['web/.ht-inc/groups.php'],"VCL-225
no user groups to select from when adding a new user group

modified addGroup - fixed typo - 'editgroupid' was 'edigroupid'",VCL-225
c123b6ce76c6a5dae742b824078cc02a235f2801,,,1,['managementnode/lib/VCL/Module/State.pm'],"VCL-536 

Short-term fix for the 2.3 release.",VCL-536
f12290f1860c53dfed6c1cb2ff401a86a190c4ef,,,2,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/utils.pm']","VCL-30
Added additional key to request info hash containing info about all users for a reservation. Added key to hash in DataStructure.pm allowing $self->get_reservation_users. This will eventually be called when granting access to a reservation.",VCL-30
0a309ae7b09ddd1d6c08291a9d97ef5d7dd63f44,,,1,['web/.ht-inc/groups.php'],subversion commit 1177021 reintroduced the bug that was fixed in VCL-456 - this fixes it again,
f8ad02e013333d656b7d2add4686e4fd629b7d71,,,5,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/inuse.pm', 'managementnode/lib/VCL/reserved.pm']","VCL-30

rework of the process connect methods routine
-- added support to Linux.pm for collect firewall configuration
-- added support for better manipulation of iptables if it exists",VCL-30
4daa9c870b193ec394b975bb601081316d9c5480,,,1,['mysql/vcl.sql'],added ON DELETE CASCADE to existing constraint for provisioningOSinstalltype for both OSinstalltypeid and provisioningid,
a1b37915f766a3fa15543de2c3c555387196dcc4,,,1,['mysql/update-vcl.sql'],"VCL-463
add ability to deploy images as servers

modified AddConstraintIfNotExists stored procedure to have 2 more arguments:
-constraintType - one of update, delete, both, or none - what type of constraint(s) to add
-constraintAction - what should be done for the constraint(s), this is directly used in the ALTER statement and must be one of the values that can be used for mysql constraints (currently RESTRICT, CASCADE, SET NULL, and NO ACTION)

updated all calls to AddConstraintIfNotExists to include these two new arguments

added constraint to vmhost table for computerid",VCL-463
549ae2b6b1347e5bafdc0a3bdecbcd53efc7f094,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']",changed computer.RAM and image.minram from smallint to mediumint,
a48ebc105c379b0b9087fb6ca22e24d56a913b64,,,2,"['web/.ht-inc/requests.php', 'web/.ht-inc/utils.php']","VCL-463: add ability to deploy images as servers

requests.php - modified connectRequest - get user password from $requestData['passwds'] now

utils.php:
-modified getRequestInfo - added passwds array to returned data
-modified getUserRequests - restructured a bit; only one query executed now; fixed a problem with how the user password was determined and with how we determine if user accounts are ready for all reservations",VCL-463
cb962a71986b3a6f01aac7fdedd9fab0ea20cf3f,,,1,['managementnode/lib/VCL/Module/OS.pm'],"VCL-463

check to skip reservation owner when processing the login groups",VCL-463
428f153037b5fe55880daf97795854f9069d00f0,,,2,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm']","VCL-463

fixes issues with server loads not correctly adding secondary  accounts on Linux",VCL-463
a41abf691e56ebe727fcac06348df16aef7a99f0,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-463
add ability to deploy images as servers

-added serverprofileid to serverrequest table
-added keys for admingroupid, logingroupid, serverprofileid for serverrequest table
-added constraints for admingroupid and logingroupid for serverrequest table",VCL-463
86c8c819499126ac657dea1cd3dee04de1c41bc7,,,1,['web/.ht-inc/images.php'],"VCL-376
mark imagerevisions deleted when user deletes image

modified submitDeleteImage - set imagerevision entries to deleted; if undeleting, set the production revision as undeleted and any other revision having the same delete time as the production revision",VCL-376
b2ae8b6279507a3926f02d131f07bddff9e4370f,,,1,['web/.ht-inc/computers.php'],"VCL-533
error when trying to download dhcp data when private IP address was not entered

modified submitAddBulkComputers - added check that $dopr is also true to print the generate dhcp form
modified processBulkComputerInput - found this in testing the above - no checks were done for duplicate mac addresses - added checks for that",VCL-533
7ab40926eefd18b285d70a76bb775ea958ea733b,,,1,['web/.ht-inc/images.php'],"VCL-519
New-line control bug in an Edit Image page

applied patch from JIRA issue contributed by Toru Yokoyama

modified editOrAddImage - replace <br> tag with \n for description and usage notes for displaying the the text areas",VCL-519
123011103a35cf48aa1276ffe0a2a900b1b86c04,,,1,['web/.ht-inc/vm.php'],"VCL-507
Deleted VMs appear in the list of unassigned VMs

modified vmhostdata - added 'c.deleted = 0' to where clause of query",VCL-507
5cad886dadd3c48e6de1e8f6aa80b7590a63dbd5,,,1,['web/testsetup.php'],"VCL-494
Typo in testsetup.php

applied diff from JIRA issue submitted by Mark Gardner

'extensions' was misspelled",VCL-494
47d2b1c1827ce6b7bf213793eba632442d4188e9,,,1,['web/.ht-inc/computers.php'],"VCL-492
edit computer info for VM in maintenance state

modified processComputerInput - check for virtualmachine stateid not being maintenance only if mode is confirmAddComputer",VCL-492
466dd26a3eee9cc824da885e9ca55c27df3ea4c2,,,1,['web/.ht-inc/computers.php'],"VCL-491
adding multiple computers - confusing error messages when incorrect count entered

VCL-509
error when adding computer with no groups selected

-modified submitAddBulkComputers - had same problem as VCL-509, fixed in the same way

-modified processBulkComputerInput - improved error messages and when they get displayed",VCL-491
96cb9a1723d1974d15b2246bbf913144d7a911c4,,,1,['web/.ht-inc/authentication.php'],"VCL-487
Problem in screen transition after successful login authentication

applied patch submitted in JIRA issue by Toro Yokoyama

modified getAuthCookieData - added base64_encode to $cryptdata
modified readAuthCookie - added base64_decode to $cookie",VCL-487
ac0d1adf59bb911375def18ad51db3e25be93c54,,,1,['web/.ht-inc/computers.php'],"VCL-509
error when adding computer with no groups selected

modified addComputer - check to see if $data['computergorup'] is empty before doing insert into resourcegroupmembers",VCL-509
686eb2223be523a76efbe83c2d6060d12987f641,,,2,"['web/.ht-inc/authentication.php', 'web/.ht-inc/authmethods/ldapauth.php']","VCL-486
Measures against cross site scripting on the Login form

applied code from diff in JIRA issue

authentication.php:
-modified printLoginPage - unset $_GET['userid'] if it is set so that a userid cannot be submitted via a normal href link; added call to stripslashes for $userid if magic quotes is enabled to allow single quotes in user names and added htmlspecialchars for $userid to prevent XSS attacks
-modified submitLogin - unset $_GET['userid'] if it is set so that a userid cannot be submitted via a normal href link; added call to stripslashes for $userid if magic quotes is enabled to allow single quotes in user names
-modified ldapLogin, validateLocalAccount - added $esc_userid that is $userid escaped with mysql_real_escape_string to prevent SQL injection attacks
-modified validateLocalAccount - added mysql_real_escape_string to $user to prevent SQL injection attacks
-modified -addLoginLog - added mysql_real_escape_string to $user and $mech to prevent SQL injection attacks

ldapauth.php:
-modified addLDAPUser - added mysql_real_escape_string to $loweruserid to prevent SQL injection attacks
-modified updateLDAPUser - added $esc_userid that is $userid escaped with mysql_real_escape_string to prevent SQL injection attacks",VCL-486
af717db987d40f1a09be3e01055033761c6f2bb4,,,1,['web/.ht-inc/utils.php'],"VCL-482
scheduler does not order VMs properly when no VMs are preloaded with the selected image

utils.php - modified isAvailable - copied ORDER BY clause from main query to VMhostCheck query",VCL-482
a681ea485c1d08956b0491dfc1531acca9742dd4,,,2,"['web/.ht-inc/blockallocations.php', 'web/js/blockallocations.js']","VCL-513
allow block allocation control per affiliation
VCL-427
for block allocations, setting the managing user group to none means no one can edit it if a normal user created it

blockallocations.php:
removed any references to the managing user group from these functions:
-blockAllocationForm
-AJblockAllocationSubmit
-getCurrentBlockHTML
-getPendingBlockHTML
-AJdeleteBlockAllocationConfirm
-AJacceptBlockAllocationSubmit
-processBlockAllocationInput
-getBlockAllocationData

blockallocations.js:
removed any references to the managing user group from these functions:
-blockFormVerifyWeekly
-blockFormSubmitWeekly
-blockFormVerifyMonthly
-blockFormSubmitMonthly
-blockFormVerifyList
-blockFormSubmitList
-clearHideConfirmForm
-clearHideConfirmDelete
-clearHideConfirmAccept
-deleteBlockConfirmCB
-acceptBlockSubmit
-rejectBlockSubmit",VCL-513
ceb22520befb20d82da7028423290fdb050dc860,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","No JIRA

added autocapture field to imagerevision table",
f0c960c6154cfba52657e0af9e643663d2c961b4,,,1,['mysql/update-vcl.sql'],"VCL-30
additional user access methods for connecting to reserved compute node

inserts for connectmethodmap were using imageid instead of imagerevisionid
constraint for connectmethodmap was for imageid instead of imagerevisionid

VCL-463
insert for serverprofile into resourcetype table needed quotes around 'serverprofile'",VCL-30
8450e32228a3856e2b76a79e873d2426cdb20c02,,,1,['web/js/vcldojo/HoverTooltip.js'],"no JIRA

added this widget as part of the major rewrite of viewRequests in requests.php (svn revision 1097842 - this should have been checked in at that point)",
4aa9411fa36812c77444c801b59c828d33d52f9e,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-523
Removed /y option from reg.exe EXPORT command since it is not supported on all versions of Windows. Added safety check to set_password to make sure the sshd service is updated if the password is being set for root.",VCL-523
44f3896ec3d52156e106ba1d08d86a72756d2c77,,,1,['managementnode/bin/install_perl_libs.pl'],"VCL-410
Updated install_perl_libs.pl to resolve some issues if run on RHEL 6.",VCL-410
0b3a21e92d583df3f419ba8d0b20492235c52b2b,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-30
Fixed SQL query problem in get_connect_method_info. Changed autoprovisioned IS NOT NULL to IS NULL.",VCL-30
5a7dd9f5e44b367f8170102a65177e5ea55d0d44,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-528
VCL-30


Added initial support to handle exclude_list on Linux OS

Added call to process_connect_methods on clean-up for imaging and reclaim.",VCL-528
c096ddff4e66537243531f2d48f2233423afc95f,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-523
Changed path where temporary reg file is stored from %TMP% to C:/cygwin/tmp in Windows.pm::get_service_configuration. The %TMP% variable isn't always available. Also updated reg_export to be able to handle spaces in the reg file path argument.",VCL-523
156ebf118437f25f93da5ade9a392f230e4c6e3d,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-513
allow block allocation control per affiliation

updated insert for usergroupprivtype in both files - changed id 2 to be global block allocation access, added id 13 that is affiliation block allocation access",VCL-513
92fc8b0f2a0382ad326c37d81f88d47a467a06b6,,,9,"['web/.ht-inc/authmethods/itecsauth.php', 'web/.ht-inc/authmethods/ldapauth.php', 'web/.ht-inc/computers.php', 'web/.ht-inc/groups.php', 'web/.ht-inc/images.php', 'web/.ht-inc/managementnodes.php', 'web/.ht-inc/privileges.php', 'web/.ht-inc/schedules.php', 'web/.ht-inc/utils.php']","VCL-474
recent versions of mysql don't accept double quotes to signify strings in where clauses

I think findManagementNode in utils.php was the only place where there was a query using double quotes instead of single ones. Updated that and changed many array key references in queries from double quotes to single quotes to make it easier to find places that were using double quotes in queries. Updated a few other array key references to use double quotes instead of single ones in functions that also had queries that were updates since I was already there.",VCL-474
d278a15b44525380fac4853812012f99633b2285,,,3,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm']","VCL-523
Improved Windows code which retrieves services configured to run as a particular user. It was very slow. The service information is now exported from the registry into a text file and parsed. This is faster than running 'reg.exe query' since the services section is very large.  Moved get_file_contents from Linux.pm to OS.pm since it can also be used by the Windows code.",VCL-523
fdc63b83b4f6f3c9c2eaf27cb9c4ee1fe5200403,,,4,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/utils.pm']","VCL-30
Updated SQL query utils.pm::get_connect_methods subroutine in utils.pm and renamed it to get_connect_method_info to match other subroutines. Updated OS.pm::process_connect_methods to handle the results returned by get_connect_method_info.

Updated Linux.pm::enable_firewall_port to accept the same arguments and scope format as Windows.pm::enable_firewall_port.

VCL-503
Added OS.pm::execute_new. This isn't currently called by anything and will eventually replace OS.pm::execute. It uses Net::SSH::Expect to keep an SSH connection open and then commands are issued to this connection. This speeds things up. There are commented out ""return...execute_new"" lines at the beginning of OS.pm::execute and in utils.pm::run_ssh_command. Uncommenting these lines will cause the new subroutine to be used.

Other
Added OS type information to the hash returned by get_image_info.  Added OS.pm::get_management_node_identity_key_paths subroutine so that the comma-separated value is parsed consistently.",VCL-30
2c42cda02330da6eca69d246d7f001be32b89d82,,,1,['web/.ht-inc/utils.php'],"VCL-473
query in findManagementNode in utils.php doesn't have conditional to join tables

utils.php: modified findManagementNode - added 'rs.requestid = rq.id' to where part of query",VCL-473
7c8b5691476641b6aa0c7fb276369bcc6e6905b9,,,2,"['web/.ht-inc/groups.php', 'web/.ht-inc/privileges.php']","VCL-467
Members of a group from one affiliation have access to groups with the same name from other affiliations

applied changes submitted by Aaron Coburn

groups.php: modified viewGroups - check for user being editor of user group using editgroupid instead of editgroup (name)

privileges.php:
-modified jsonGetUserGroupMembers - use editgroupid instead of editgroup to determine if user has access to view user group membership
-modified checkUserHasPriv - changed user groups foreach to check on groupid in addition to name",VCL-467
8048f43856cf3456108738b795f01d2ba1bba129,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-524
Fixed bug in Windows.pm::get_network_configuration to prevent it from returning undefined if it failed to run ipconfig. It is configured to make multiple attempts. It wasn't detecting bad ipconfig output and was returning undefined under some circumstances.",VCL-524
da6b220c994046ae3b46ef403ca780bc981f35cb,,,1,['web/.ht-inc/xmlrpcWrappers.php'],"VCL-463
add ability to deploy images as servers

xmlrpcWrappers.php - modified XMLRPCdeployServer - added $monitored as a variable that can be passed in (though it is not supported yet); set $admingroupid/$logingroupid to '' if $admingroup/$logingroup are ''; add entry to serverrequest table",VCL-463
1d0153dcd09839f18e067ed9869745a428a8a18d,,,1,['managementnode/lib/VCL/Module/OS.pm'],"VCL-30
Changed critical message to warning in process_connect_methods if a connect method service failed to start to reduce critical notifications while connect method code is being completed.",VCL-30
7830c27a4e54a6cf78c9c825980dfad33c50aea9,,,2,"['managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6.pm']","VCL-523
Updated Windows code that sets user passwords to update scheduled task passwords for tasks configured to run as the user whose password is being changed.

VCL-30
Added enable_firewall_port, get_firewall_configuration, parse_firewall_scope subroutines to Windows.pm and Version_6.pm. These allow a firewall port to be opened by calling enable_firewall_port with protocol and port arguments.

VCL-503
Updated logoff_users subroutine to specify a timeout value when running qwinsta.exe.",VCL-523
5878116d1f5c3f6ba2e10a37985e1a5af7be42ee,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-30
Added columns to:
-connectmethod table: protocol, servicename, startupscript
-vmprofile table: virtualdiskpath",VCL-30
8640550fa6e4ae7d90066030038cf7a98b70b4f3,,,1,['managementnode/lib/VCL/DataStructure.pm'],simple bug in defining groupname for blockrequests,
3654184e776fb30aca3f27cf77257792575f4113,,,1,['mysql/vcl.sql'],"VCL-522
Error in vcl.sql line 1694

changed insert for usergroupmembers to have comma at end of (1,4) instead of semicolon",VCL-522
fdf1974576c07a4421efdd25d7b1a9359389b7d1,,,2,"['web/.ht-inc/vm.php', 'web/js/vm.js']","VCL-400
virtual hosts page shows all unassigned vms instead of checking which ones the user can access

vm.php:
modified editVMInfo - added section (noaccessdiv) to display assigned VMs user does not have access to remove
modified vmhostdata - added $noaccess - contains assigned VMs that user does not have access to remove from host; don't put unassigned VMs user has no access to in $freevms or $allvms

vm.js - modified VMHostDataCB - unhide and populate noaccessdiv if there are assigned VMs that user does not have access to remove; hide it if user has access to all VMs",VCL-400
83b0493dd80a4986be9d25d49fb66ae0827d28a0,,,1,['managementnode/bin/install_perl_libs.pl'],"VCL-410
Updated install_perl_libs.pl to determine the correct EPEL RPM path. This was not working for RHEL/CentOS 6.x. It now runs wget to retrieve the list of files and extracts the correct epel-release*.rpm file name from the output.",VCL-410
f10b2fbc9bf177fa59397f81281a18e0950d45e5,,,1,['managementnode/bin/install_perl_libs.pl'],"VCL-503
Added line to install Net::SSH::Expect in install_perl_libs.pl. This module will allow all of the SSH calls to be wrapped in an expect statement. This module provides a timeout option. Using it will also decrease load times because a single SSH connection needs to be established and can be reused throughout the reservation process.

Added line to install Net::Netmask in install_perl_libs.pl. This module calculates subnets and IP address ranges. It will be used by new firewall code to collapse duplicate firewall entries.",VCL-503
a09db45d05abcf42e78aa32bc14b1aa454aab35b,,,1,['web/.ht-inc/images.php'],"VCL-433
new revisions can be captured of kickstart images

images.php - modified startImage - set $disableUpdate = 1 if image's installtype is none or kickstart",VCL-433
770873c47cf071478342f4844d07b633c66f8cc4,,,2,"['web/css/vcl.css', 'web/js/privileges.js']","VCL-348
Setting privileges in web gui -- Slightly broken

The 2 items mentioned in the JIRA issue must have been fixed in a previous release.  However, if no node had been previously selected, the default one was not being highlighted.  I corrected that and changed the color of the font for selected nodes to be black instead of white to make it easier to read.",VCL-348
83f2a06eeabb557137dc2cc9d81d357335458dd8,,,2,"['web/.ht-inc/computers.php', 'web/.ht-inc/utils.php']","VCL-345
check for whitespace in add computers IP address field

utils.php - modified processInputVar - added additional argument - $stripwhitespace - when set to 1 will call trim() on the variable to remove starting/trailing whitespace

computers.php:
-modified processComputerInput - set $stripwhitespace to 1 when calling processInputVar for ipaddress, owner, ram, procspeed, and hostname
-modified processBulkComputerInput - set $stripwhitespace to 1 when calling processInputVar for ipaddress, startipaddress, endipaddres, starthostval, endhostval, startpripaddress, endpripaddress, startmac, owner, ram, procspeed, and hostname",VCL-345
ea59568df9a358b63b4c9d6cb6abcb4b6bc526a4,,,1,['mysql/vcl.sql'],"VCL-344 
local admin account make sure has full access

-added overlapResCount to usergroup inserts
-made admin user member of adminUsers, manageNewImages, and Specify End Time",VCL-344
d609049efc8e8eb8d6bc90b484247adc1386a486,,,1,['web/.ht-inc/requests.php'],"VCL-463
add ability to deploy images as servers

viewRequests.php - modified connectRequest - changed expire time for Get RDP File continuation to be ""request end"" - now + 30 min instead of ""request end"" - ""request start"" + 30 min because expire time was past epoch for old enough indefinite end reservations",VCL-463
700dc91f86c7cb9f3df15264ce1259ff1f855706,,,2,"['web/.ht-inc/requests.php', 'web/.ht-inc/utils.php']","VCL-342
problem selecting image revision id when making a cluster reservation with identical subimages

requests.php - modified submitRequest:
-print name of input radio button for image revision selection as revisionid[$subimage][$cnt] instead of just revisionid[$subimage]
-set $data['revisionid'] to be $_POST['revisionid'] and added appropriate validation check
-changed any checks of $data['revisionid'][$imagei] to account for it being an array

utils.php: modified addRequest - when getting $imagerevisionid from $revisionid, call array_shift on $revisionid[$imageid] instead of just referencing it directly",VCL-342
7d78ea2a50dc8a493218e679560d2bb682128d84,,,1,['mysql/vcl.sql'],"VCL-511
Errors in vcl.sql connectmethodmap

connectmethodmap:
-changed key from imageid to imagerevisionid
-changed constraint from imageid reference image.id to imagerevisionid reference imagerevision.id

VCL-230
duplicate entries created in userpriv table

userpriv:
-removed usergroupid from unique userid key
-changed key for usergroupid to be unique and to be on usergroupid, privnodeid, userprivtypeid",VCL-511
dbc7c3b706d54415f1ff916d9f628d4678d247b2,,,1,['web/.ht-inc/groups.php'],"VCL-225
no user groups to select from when adding a new user group

-modified viewGroups - don't display Editable by select box if no groups to select from, set $groupwasnone to 1 in continuation data; print that user doesn't have access to any resource groups if none to display instead of showing empty table
-modified editOrAddGroup - print 'None' as editing user group if state is add and none to select from; keep track of editusergroup == 0 and $groupwasnone
-modified addGroup - set $data['editgroupid'] = 'NULL' if it was 0 or empty",VCL-225
88faa0e36bc283a073867c0f320c640312f528ac,,,2,"['web/.ht-inc/vm.php', 'web/js/vm.js']","VCL-114

vm.php - modified editVMInfo - print VM profiles tab even if no vm hosts available to edit; wrapped profiles select box and configure button on profiles tab with span that can be hidden when there are no profiles

vm.js:
-modified newProfileCB - unhide selectprofilediv
-modified delProfileCB - hide selectprofilediv if no profiles left
-modified updateProfile - unhide selectprofilediv",VCL-114
8dba09abb4b2eaca517be3d68847cad3c34963dd,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-517

typo fix",VCL-517
9a69e990da074571abb1c7f59e7a00ac24a3da95,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-517
VCL-453

517: removes udev 70-net rule

453: iptables, for each connection port defined add entry to iptables.",VCL-517
bc13f9c7049de07446ee7d5c092febfbf25f6cc1,,,20,"['web/.ht-inc/authmethods/itecsauth.php', 'web/.ht-inc/blockallocations.php', 'web/.ht-inc/errors.php', 'web/.ht-inc/images.php', 'web/.ht-inc/privileges.php', 'web/.ht-inc/requests.php', 'web/.ht-inc/serverprofiles.php', 'web/.ht-inc/states.php', 'web/.ht-inc/statistics.php', 'web/.ht-inc/userpreferences.php', 'web/.ht-inc/utils.php', 'web/.ht-inc/vm.php', 'web/.ht-inc/xmlrpcWrappers.php', 'web/css/vcl.css', 'web/js/blockallocations.js', 'web/js/code.js', 'web/js/images.js', 'web/js/requests.js', 'web/js/serverprofiles.js', 'web/js/statistics.js']","No JIRA
itecsauth.php - modified addITECSUser - default showallgroups to true when adding the user to the database

VCL-513
blockallocations.php:
-modified blockAllocations, getPendingBlockHTML and AJgetBlockAllocatedMachineData - added usergroup permission to control block allocation management for user's own affiliation
-modified getCurrentBlockHTML - changed select to get block allocations where the user is a member of the admin user group instead of having edit access to the group

VCL-515
errors.php - changed 127 from ""Failed to execute query 3 in isAvailable"" to ""Failed to execute query 1 in getAvailableSchedules""

VCL-30
VCL-510
images.php:
-modified editOrAddImage - added class to advanced options table to control right alignment and removed inline right alignment styles; added code to print out current set of connect methods
-modified AJaddImageConnectMethod - clear getImageConnectMethods key from $_SESSION['usersessiondata']
-modified AJremImageConnectMethod - clear getImageConnectMethods key from $_SESSION['usersessiondata']
-modified addImage - get architecture of base revisionid and use it to set the architecture of new image

VCL-514
privileges.php - modified getNodePrivileges and getNodeCascadePrivileges - added static variables to get bulk sets of privilege data to minimize sql calls

VCL-515
VCL-463
requests.php:
-modified newReservation - added dialog to display suggested reservation times when selection not available
-modified AJupdateWaitTime - added code to display suggested reservation times when selection not available
-added AJshowRequestSuggestedTimes
-modified viewRequests - don't show est time remaining for states rebootsoft, reboothard, reinstall; simplified what keeps ""End Reservation & Create Image"" from showing up to having imageAdmin access, not a cluster reservation, and reservation has been in inuse state; commented out ""Create Image"" section until backend supports it; added check to keep from showing Reboot and Reinstall for reservations in new state; modified details floating pane to be closable due to bug in IE; added dialog to show suggested times when modification to reservation is not available
-modified detailStatusHTML - show that no info is available for reboots/reinstalls
-modified AJeditRequest - call resetEditResBtn when various input elements are changed; added 45 minutes as a selectable duration; after 48 hours, show duration in days instead of hours
-modified AJsubmitEditRequest - set $enddt when indefinite end selected; show suggested times when submitted modification is not available; show error message when IP/MAC overlap issue or maintenance window issue
-modified printReserveItems - gave some form elements ids; call getReservationLengths instead of defining inline

VCL-463
serverprofiles.php:
-modified deployHTML - added hidden input to track server profile id; add to groups from accessible server profiles to list of admin groups and login groups; added dialog to show suggested times when selection not available
-modified manageProfilesHTML - add to groups from accessible server profiles to list of admin groups and login groups
-modified AJdeployServer - save profileid if only a few items changed from applied profile; allow groups from accessible server profiles as admin group and login group; show suggested reservation times if submitted time not available; display error about overlapping IP/MAC if there is one; display error about overlapping with site maintenance if applicable
-modified processProfileInput - allow groups from accessible server profiles as admin group and login group
-added getServerProfileGroups

VCL-515
states.php - added AJshowRequestSuggestedTimes

No JIRA
statistics.php - removed $data['here'] debugging code

No JIRA
userpreferences.php - modified userpreferences - allow all users to select to see all user groups or only ones matching their affiliation

VCL-463
VCL-514
VCL-515
utils.php:
-changed global $nodechildren to $cache
-modified initGlobals - added include for serverprofiles.php for xmlrpccall; added include for requests to serverProfiles pages
-modified doQuery - made $errcode default to 101 so only query has to be passed at each call
-modified getImages - overhauled to use some statics and single queries to minimize number of sql calls made
-modified getImageConnectMethods - overhauled to use some statics and single queries to minimize number of sql calls made
-modified getProductionRevisionid - added static array to get all production revisions at first call to minimize sql calls
-modified getUserResources - added data array to pass to other functions to minimize sql calls
-modified getUserResourcesUp - added $privdataset argument to pass on to addNodeUserResoucePrivs
-modified getUserResourcesDown - added $privdataset argument to pass on to getNodeUserResoucePrivs
-modified addNodeUserResourcePrivs - added $privdataset argument to passed in data instead of sql statements
-modified getChildNodes - added static array to minimize sql calls; changed how using global cache variable
-modified getUserEditGroups - added ORDER BY name
-modified getUserUnityID - define $cache['unityids'] if not already defined
-modified checkUserHasPerm - return 0 if $user is not array or if $user['groupperms'] does not exist
-modified isAvailable - return -2 if specified time period is in maintenance window, -3 if ip/mac conflict; separated schedule collection into getAvailableSchedules; separated platform collection out in to getImagePlatform; define states to ignore in variable instead of directly in $query
-added getAvailableSchedules
-added getImagePlatform
-modified getUserRequests - added OSinstalltype to returned data; added check to set $ingroups to empty string if empty array; removed log table from query; changed check to deterine if user account added
-added findAvailableTimes
-added fATremoveOverlaps helper to findAvailableTimes
-added sortAvailableTimesByStart
-modified updateGroups - moved checkUpdateServerRequestGroups call to inside if conditional
-added getReservationLengths
-added getReservationLength
-added getReservationExtenstion
-modified getNodeInfo - reworked how $cache is used to minimize sql calls
-modified xmlrpccall - added XMLRPCdeployServer
-modified printHTMLHeader - added check to set $refresh if current reservation state is inuse but user account is not ready
-modified getDojoHTML - added Dialog and Button to newRequest dojo requires; added requests.js to included javascript files for serverProfiles

No JIRA
vm.php - modified editVMInfo - fixed followig -> following typo

VCL-463
xmlrpcWrappers.php:
modified XMLRPCsetRequestEnding - moved check for user being in Specify End Time to after check for existance of reservation
-added XMLRPCdeployServer

VCL-515
vcl.css - added collapsetable, tablerow0, tablerow1, advoptions tr th, and advoptions tr td classes

VCL-513
blockallocations.js - modified updateAllocatedMachinesCB - set totalbare and totalvirtual to '' if values are 0 to handle affiliation only view

VCL-515
code.js:
-commented out body of errorHandler variable function
-added get12from24
-added hideDijitButton
-added showDijitButton

No JIRA
images.js - modified updateRevisionProduction to not pass imagegrpid (not defined)

VCL-463
VCL-515
requests.js:
-added suggestTimeData global
-modified RPCwrapper - set timeouts to 30 sec from 15
-added showSuggestedTimes
-added showSuggestedTimesCB
-added setSuggestSlot
-added useSuggestedSlot
-modified selectLater - set waittime innerHTML to empty string
-modified selectEnding - set editResDlgBtn label to 'Modify Reservation'; call resetEditResBtn
-modified checkValidImage - if newsubmit value is 'View Available Times', call showSuggestedTimes and return false
-modified hideEditResDlg - call resetEditResBtn
-added resetEditResBtn
-added useSuggestedEditSlot
-modified submitEditReservation - if editResDlgBtn label is 'View Available Times', show suggested times instead of submitting
-modified submitEditReservationCB - if returned status is 'conflict', set editResDlgBtn label to 'View Available Times'

VCL-463
VCL-515
serverprofiles.js:
-modified getServerProfileDataDeployCB - set appliedprofileid
-modified setStartNow, setStartLater, setEndIndef, setEndAt - hide deployerr, set deploybtn label to 'Deploy Server'
-modified submitDeploy - if deploybtn label is 'View Available Times', show suggested times; added profileid to submitted data; set deploybtn label to 'Working...'; disable deploybtn
-modified submitDeployCB - if returned status is error, show error div, disable deploy btn, possibily change deploybtn label to 'View Available Times'
-added useSuggestedDeploySlot

No JIRA
statistics.js - modified generateColGraphsCB - if data.items.nodata set, show info that too much computation time requried to show graph",
f0951a899989ed973943077d8647c98c639cc408,,,2,"['managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm']","VCL-512
Fixed bug in Linux.pm's get_available_space and get_total_space subroutines. It now attempts to determine the block size by checking for either the 'Block size:' or 'Size:' value in the 'stat -f' output.  Some versions only display 'Size:'.

Added error checking to VMware.pm in locations where it calls get_available_space. It wasn't checking to make sure a value was returned. As a result, divide by 0 errors occurred if available space couldn't be determined.",VCL-512
d5b0bebc64d07a49689884249dfe021acd686316,,,1,['managementnode/lib/VCL/inuse.pm'],"VCL-432
Updated inuse.pm::_start_imaging_request to catch the condition where xmlrpc_call fails and returns null. Changed behavior to set the originating request state to maintenance/inuse instead of maintenance/image if the call to _start_imaging_request fails. Made indentation consistent.",VCL-432
ca2ded25a9c523d40bd754966c60ec072cad8031,,,2,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm']","VCL-503
Changed timeout value in OS.pm::is_ssh_responding from 15 to 30 seconds. Changed value in Windows.pm::user_logged_in to 60 seconds.

Other
Updated Windows.pm::post_load to only call logoff_users if wait_for_logoff returns false.
Removed unnecessary call to is_ssh_responding from get_system32_path.
Added check for a warning that is displayed if PAE is enabled in disable_hibernation.",VCL-503
2e4decb756d2084f8ecc66adbe69c5d5ab4ed116,,,8,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/UnixLab.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/inuse.pm', 'managementnode/lib/VCL/reserved.pm', 'managementnode/lib/VCL/utils.pm']","VCL-30

initial work for the ability to add different connection methods",VCL-30
9ec73c2230050f66fd063338a8ac8e0124db9fe0,,,5,"['managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm', 'managementnode/lib/VCL/utils.pm']","VCL-506
Added subroutines to utils.pm: update_computer_procnumber, update_computer_procspeed, and update_computer_ram. Added get_cpu_core_count, get_cpu_speed, and get_total_memory to Linux.pm, vSphere_SDK.pm, and VIM_SSH.pm. Added code to VMware.pm to call these and update the database periodically for VM hosts.",VCL-506
aa1d1105da346ed733ceed3106db86beb0fc6eec,,,5,"['managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Semaphore.pm', 'managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/utils.pm']","VCL-500
Added loop to new.pm::process for tomaintenance requests if the computer is being used. This is likely for tomaintenance requests scheduled in the future due to the automatic reload occurring after the last reservation is complete.

Reworked computer_not_being_used subroutine to check for tomaintenance requests and several other conditions. Added code to make sure a competing reservation doesn't have any Semaphore objects open before killing the competing process for safety.

Updated utils.pm::get_request_by_computerid to return a hash reference formatted similar to the other get_* subroutines.  Updated calls in new.pm and VMware.pm.",VCL-500
12215d20936bff22dcf5cf73eeb700375f29ff33,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-503
Changed run_ssh_command to only send a critical notification on the last SSH attempt if the SSH timeout is reached.",VCL-503
08b3e54d5f1461e0d1d05ab6c255a05172aad944,,,1,['managementnode/lib/VCL/inuse.pm'],Cleaned up indentation in inuse.pm. Made no functional changes.,
1cb665498ba552005bf25fbb5c1346803f3194d4,,,1,['managementnode/lib/VCL/Module/State.pm'],"VCL-504
Updated State.pm::initialize to call update_reservation_lastcheck. This will prevent multiple critical notifications from being sent if an inuse reservation process fails to initialize completely. Rather from attempting to process the reservation over and over again without a delay, vcld will only attempt to process it every 5 minutes.",VCL-504
528354b1e06ec4e3b52f3e31139c3e88b792399e,,,3,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/utils.pm']","VCL-503
Added code to util.pm::run_ssh_command to allow a timeout value to be specified in order to prevent hung SSH processes from hanging for a very long time or indefinitely. The default value for now is 0 meaning that the code never times out the command.

Added utils.pm kill_child_processes subroutine. If the run_ssh_command timeout value is reached, the SSH process is still running so the kill_child_processes subroutine is called to kill all child processes belonging to the reservation process.

Added timeout_seconds argument set to 15 seconds to the run_ssh_command call in OS.pm::is_ssh_responding. Also added 20 second timeout argument to the call to execute qwinsta.exe in Windows.pm::user_logged_in. These calls cause an SSH process to hang most often.

VCL-465
Updated OS.pm::get_public_interface_name to ignore interfaces named 'lo' and 'sit[0-9]'. Changed logic to not ignore interfaces without a bound IP address. This fixes problems where static addresses are being assigned under Linux. The correct public interface does not come up with an autogenerated IP address as it does under Windows and the code was ignoring this interface because of this.

Other
Updated OS.pm::create_text_file to correct the line endings depending on the OS type.",VCL-503
9a135cdc95630705e93308153c9e7c4572ff33f5,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-501
Updated Linux.pm::set_static_public_address to add the GATEWAY line to the ifcfg file.",VCL-501
5eccafce8ec8266a1f190478fc92246a797c4b54,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-428
Fixed problem in utils.pm::get_management_node_info. It was returning the cached into for the management node it was running on if an argument was passed indicating the info for some other management node was requested.",VCL-428
6f3c687a80bfe83619d6b3d4f09d75b2ffc79b31,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm'],"VCL-450
Updated VMware.pm to not make a copy of the vmdk on the host if the VM disk type is local and the image repository is mounted on the VM host. This is done to save space on the host's local disk.",VCL-450
dc5098718fb9bf0f828a0213dd94335d6af80d8c,,,2,"['managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/utils.pm']","VCL-500
Updated new.pm to make sure the computer is not being used before processing a tomaintenance request. Updated utils.pm::check_time to return 'start' for tomaintenance request only when the start time has been reached.",VCL-500
4ea0291cae69723b4f9d22c0280fc9f62ca852fc,,,1,['managementnode/bin/S99vcld.linux'],Reverted changes made in last commit to S99vcld.linux.,
e5607790408eb6a5344a8a23bb4136528618fc2d,,,1,['managementnode/lib/VCL/Module/OS.pm'],"VCL-384
Removed call in OS.pm::create_text_file to change the line endings.",VCL-384
52676147921567400c96c04e4a229ea606fc69bc,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-384
Updated Linux.pm::enable_dhcp to remove any Windows-style carriage returns from the ifcfg-eth* files when they are recreated. Added code to delete the dhclient lease files to correct a problem where the computer would attempt to ping its old address when it came up, and then disable the interface.",VCL-384
040706a0f3c82818e30ec91c85de460f27f64045,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm'],"VCL-450
Removed section accidentally included in last commit meant for testing.",VCL-450
a43d4e72c891757189f35e9c0fb7490da5c965c1,,,2,"['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm']","VCL-450
Fixed problem where vSphere_SDK.pm had trouble detecting the disk adapter type. This value is not displayed for some reason for vmdk's which have a snapshot. Updated code to attempt to locate the reference vmx file in the shared vmdk path as well as the repository path.",VCL-450
e248b69000a88aa7fa838e93aaf152baf4d2fa5b,,,1,['managementnode/lib/VCL/DataStructure.pm'],"VCL-496
Updated DataStructure.pm to implement a set_computer_private_ip_address subroutine.",VCL-496
11a1d201f01ff164216d534cd52904a273cad7cd,,,1,['managementnode/lib/VCL/Module/OS.pm'],"VCL-463

correction when adding users to the admin list
the code was adding all users as admins on linux os",VCL-463
a9e4f2697e8d1c730249461bb8d58440d496fb39,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-463

updated to handle adding a group of users for server loads",VCL-463
36ad1bb9f8a4e29e6549940dec080ac3cd7fe701,,,1,['managementnode/lib/VCL/Module/OS.pm'],"VCL-463 

ssh access list for server loads",VCL-463
7baea93b0a5f413cc04338818924cd2d045d9ae9,,,1,['managementnode/lib/VCL/DataStructure.pm'],"VCL-463

access list for ssh config",VCL-463
06a6cb3e2749249c8304ed2d9f53141d00f49005,,,2,"['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm']","VCL-470
Added code contributed by Aaron Coburn included in the Jira issue to add a vSphere_SDK.pm::get_total_space subroutine.

VCL-471
Updated VMware.pm::_get_parent_directory_normal_path() to allow non-datastore paths to be specified. This solves a problem where a path residing on the management node is passed, but the subroutine fails.

VCL-450
Fixed a problem where vSphere_SDK.pm::copy_virtual_disk failed because the vmdk adapter type is not listed in the typical info if a snapshot has been created.

Updated vSphere.pm to cache most of the SDK object types it uses including host, vm, datastore. This prevents the code from having to fetch a new object every time, greatly increasing speed. This also reduced a lot of duplicated code.

Fixed problem in VMware.pm::node_status. It was not accounting for VMs loaded before the snapshot functionality was added which were using nonpersistent mode.",VCL-470
9f9b7ba63ec6df53a204b69cd5d2ba29c7b657b5,,,6,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vmware_cmd.pm', 'managementnode/lib/VCL/utils.pm']","VCL-350
Added snapshot support to the VMware code. Added VMware.pm::snapshot() subroutine and create_snapshot subroutines in the helper modules.

Changed default virtual disk mode to persistent instead of independent-persistent or independent-nonpersistent. A snapshot is created after the VM is registered but before it is powered on. This causes changes to be written to a delta file in the directory where the vmx resides. This eliminates the need to create a full copy of the vmdk for imaging and long-term reservations. Imaging and long-term reservations now use this mode. A full copy of the vmdk is only created for server requests. Added DataStructure.pm::is_server_request subroutine to tell if a request is a server request or not.

Changed all things named nonpersistent to shared, and persistent to dedicated to avoid confusion.

Other
Added some missing block request values to DataStructure.pm.",VCL-350
3ee06ed23ddc6fe483b92cca08279fd842f95749,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm'],"VCL-450
Fixed problem in VMware.pm::capture subroutine. If a separate location is used to store the persistent vmdk (virtualdiskpath), the vmdk was simply renamed in that datastore during capture rather than being moved to the datastorepath datastore.

Fixed problem with get_image_size_bytes that occurred during capture if virtualdiskpath is being used. It was looking for the vmdk in the virtualdiskpath location after the vmdk was moved to the datastorepath location.

Renamed the rename_vmdk subroutine to move_vmdk.",VCL-450
950ea2b28a5621d46dc1accaf1727a50eaa56fbc,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-384
Added enable_dhcp subroutine to Linux.pm. This is called from pre_capture. It resolves the problem caused by MAC addresses remaining in the ifcfg-eth* files when an image is captured.

Other
Cleaned up pre_capture. Created shutdown subroutine. Also created restart_network_interface subroutine.",VCL-384
905d3a0294671eca36af44dc9efbb50ba9674553,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-463

moved serverrequest_ conditional check up in the if,elsif checks.
request_ check was catching it and the variables were not being set correctly",VCL-463
a6dd68efb453d9b6a880bd8ebc16f762c51a0694,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-484
Updated switch_state to not set inuse and image requests to the failed state.

Other
Added management node short name to the subject for critical notifications.  Added ConnectionAttempts=1 and ConnectTimeout=3 to SSH options.",VCL-484
4b84241bab181713bdcc0212a5c1817b19765bda,,,1,['managementnode/lib/VCL/Module/State.pm'],"VCL-428
Changed sorting of database select call counts from alphabetical to numeric in State.pm::DESTROY.",VCL-428
9f43541cc84fcd33ea2a9e18148269ef5819d693,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-463
Updated Windows.pm::create_user. Set $adminoverride argument to 0 if the argument was not supplied to prevent ""Use of uninitialized value"" warnings.",VCL-463
5d8f42ed19e3dd6e8020c56c8ad7828f76961ed5,,,1,['managementnode/bin/vcld'],"VCL-428
Added code to vcld to clear the %ENV keys for each reservation: database_select_count, database_execute_count, and database_select_calls. Without clearing them, forked state processes inherit the value from vcld.",VCL-428
631bd0bae60085abfbcc2cd2caa157c4a02b1019,,,2,"['managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/utils.pm']","VCL-428
Added optional $no_cache argument to get_image_info, get_imagerevision_info, get_imagemeta_info, get_user_info, get_computer_info.  Updated get_request_info() to use this argument when calling the subroutines to ensure current data is retrieved for the reservation.

VCL-483
Updated xmlrpc_call to pass the ssl_opts/verify_hostname=0 argument to the LWP::UserAgent constructor. Also changed code to call object methods rather than accessing hash elements directly.

Other
Added check to make sure $ENV{management_node_info} is initialized before attempting to access it in notify().

Updated counters in database_select subroutine to report calling subroutine. Updated output in State.pm::DESTROY.

Updated run_ssh_command. It was not correctly detecting common SSH errors. Split up the if/else statement that checks the exit status and output.",VCL-428
81743d0392152fbf60615378296494a694413c92,,,1,['managementnode/bin/monitor_vcld.pl'],"VCL-481

changed startup variable to /etc/init.d/vcld",VCL-481
d014b495f36f80be68a959029f32c13df980ea25,,,1,['managementnode/bin/monitor_vcld.pl'],"VCL-481

calling get_management_node_info routine to correctly get all information about the management node.
cleaned up",VCL-481
e26550e4cfd520ce3f48aaabb816a75bed9f521a,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-428

added in the serverrequest data for request_info",VCL-428
628341fea2282090b5f3f6a739a797a5b9856180,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-428
Updated get_vmhost_info to set default values for vmprofile username, password, virtualdiskpath, and vmpath.",VCL-428
fd1c46d4ca76f8d55cee3ba0e950a63eb7c75123,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-428
Fixed syntax error typo in utils.pm.",VCL-428
b778a9b70a9dec8ff1133f4b56970f4692cffad6,,,10,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/blockrequest.pm', 'managementnode/lib/VCL/image.pm', 'managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/utils.pm']","VCL-428
Updated get_*_info subroutines in utils.pm so they all return a hash reference. Added code so that the retrieved data is cached so that the same data does not need to be retrieved multiple times from the database.

Updated get_request_info to call the individual get_user_info, get_computer_info, etc subroutines rather than constructing a massive, single query.

Updated DataStruction.pm to handle the differences in the format of the data hash.

Added utils.pm::get_user_group_member_info subroutine. This will eventually replace getusergroupmembers.

Updated all calls in other files to get_*_info subroutines which had expected a hash to be returned. They now expect a hash reference.

VCL-450
Added ability to configure a specific location where persistent vmdk files are saved via the vmprofile.virtualdiskpath column.

Other
Removed hostname subroutine from utils.pm. Replaced calls with the Sys::Hostname function.

Added counter to database_select subroutine to count the number of times it is called and from where. This info is displayed in the log file when a process terminates.

Added '-o UserKnownHostsFile = /dev/null' argument to run_ssh_command. Also added check for 'connection reset' errors so that this condition is attempted again.

Updated utils.pm::xmlrpc_call to generate more debugging info if an error occurs.",VCL-428
5e6c5cd69b041ff041198cfb0359b316e5188f17,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-463

change user_admin to useradmin - so it matches the windows routine",VCL-463
aac9b1c491dbcbedff6f5276d5cb4fc3a6c92a24,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-463

extended create_user routine for server loads",VCL-463
acdc9048f7c962b35769796fdb30bf9aebf468cd,,,1,['managementnode/etc/vcl/vcld.conf'],mistakenly commited a test conf file. replacing with original vcl2.2.1 version,
b4d5d31c5c06e82a5f431bd375aeb8ce08d8d779,,,4,"['managementnode/bin/S99vcld.linux', 'managementnode/etc/vcl/vcld.conf', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm']","VCL-463

continued work
can add users to the linux os",VCL-463
f8bceedbc62e9c3fd87da8c928e5b524005c34e6,,,2,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/utils.pm']","VCL-463

correcting typos",VCL-463
17212f9e8424c57925c6fed87eae148974da587d,,,5,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/healthcheck.pm', 'managementnode/lib/VCL/reserved.pm', 'managementnode/lib/VCL/utils.pm']","VCL-463

Ongoing work on server request. This portion is code related to 
adding a group of users.",VCL-463
cfaf1e11db5b8e84fa221aa80d1f6ca7a9a37b32,,,2,"['web/js/requests.js', 'web/js/serverprofiles.js']","VCL-463

requests.js: modified submitEditReservationCB - added additional elseif for status == unavailable

serverprofiles.js:
modified populateProfileStoreCB, saveServerProfileCB - added access element to new item
modified populateProfileStoreCB, selectProfileChanged, newServerProfile, saveServerProfileCB - updated queries for profileid and profiles select objects to also filter on access:admin",VCL-463
d648f5ca79f60ed715138c435ff20b996bc43fd6,,,1,['web/.ht-inc/serverprofiles.php'],"VCL-463

modified deployHTML:
-added mode to AJserverProfileData continuation
-add image available through server profiles to image drop down

modified manageProfilesHTML - added mode to AJserverProfileData continuation

modified AJserverProfileData - use a mode to determine what user privileges to use when checking user access to profile

modified AJserverProfileStoreData - get profiles for both serverCheckOut and serverProfileAdmin privilege and include access type in returned array

modified AJdeployServer:
-include images from server profiles when checking user accesss to image
-include ip and mac addresses when calling isAvailable

modified AJsaveServerProfile - added access type = admin to returned data

modified AJdelServerProfile - added query to delete corresponding entry in resource table

added getServerProfileImages

modified AJaddGroupToProfile, AJremGroupFromProfile, AJaddProfileToGroup, AJremProfileFromGroup - clear $_SESSION['usersessiondata']",VCL-463
3c7d91db7e6ba84456173f644d9ab48c06ba98ff,,,1,['web/.ht-inc/requests.php'],"VCL-463

modified viewRequests - for failed and timedout reservations, always print additional table cell instead of just for non-imaging reservations
modified AJeditRequest - added requestid to returned data when editing future reservations
modified AJsubmitEditRequest:
-send ip and mac to isAvailable
-send error message with unavailable status",VCL-463
c1f9d946bf9855fdd610d18511811db9abd21b48,,,1,['web/.ht-inc/privileges.php'],"VCL-463

modified jsonGetResourceGroupMembers - if $type == serverprofile, set $field to 'name'",VCL-463
591f12788de9f75b7e9475a9dce0f76dabeae438,,,1,['web/.ht-inc/utils.php'],"VCL-479

added require_once for AES.php

modified encryptData - switched from using mcrypt to using phpseclib's aes
modified decryptData - switched from using mcrypt to using phpseclib's aes
modified isAvailable - added $ip and $mac as arguments; check to see if these are assigned to another server request that overlaps with the specified time period
modified getRequestInfo - included fixedIP and fixedMAC in returned data array",VCL-479
49184280785e753507ecddff2a0686a7c95dabf7,,,23,"['web/.ht-inc/phpseclib/Crypt/AES.php', 'web/.ht-inc/phpseclib/Crypt/DES.php', 'web/.ht-inc/phpseclib/Crypt/Hash.php', 'web/.ht-inc/phpseclib/Crypt/RC4.php', 'web/.ht-inc/phpseclib/Crypt/RSA.php', 'web/.ht-inc/phpseclib/Crypt/Random.php', 'web/.ht-inc/phpseclib/Crypt/Rijndael.php', 'web/.ht-inc/phpseclib/Crypt/TripleDES.php', 'web/.ht-inc/phpseclib/Math/BigInteger.php', 'web/.ht-inc/phpseclib/Net/SFTP.php', 'web/.ht-inc/phpseclib/Net/SSH1.php', 'web/.ht-inc/phpseclib/Net/SSH2.php', 'web/.ht-inc/phpseclib/PHP/Compat/Function/array_fill.php', 'web/.ht-inc/phpseclib/PHP/Compat/Function/bcpowmod.php', 'web/.ht-inc/phpseclib/PHP/Compat/Function/str_split.php', 'web/.ht-inc/phpseclib/crypt.html', 'web/.ht-inc/phpseclib/docbook.css', 'web/.ht-inc/phpseclib/index.html', 'web/.ht-inc/phpseclib/intro.html', 'web/.ht-inc/phpseclib/math.html', 'web/.ht-inc/phpseclib/misc_crypt.html', 'web/.ht-inc/phpseclib/net.html', 'web/.ht-inc/phpseclib/sym_crypt.html']","VCL-479

inital check in of phpseclib - this is an encryption extension that uses mcrypt if available or native php if it is not",VCL-479
74f15a689affb081fabc2f68be3988629d2a3e4e,,,1,['managementnode/lib/VCL/Module/Provisioning/vbox.pm'],"Updated the paths for the vbox images, instead of /install now /install/vbox
Changed the Ethernet Hardware type for the VM to use Intel instead of AMD for windows 64bit compatibility",
6166fd5be79a3f74fe4de17276abb289a5b3b9a2,,,3,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm']","VCL-465
Moved various get_* subroutines from Windows.pm and Linux.pm to OS.pm and updated the code so it can be used by all OS's.  Updated get_network_configuration in Windows.pm and Linux.pm so that returned hash reference format is identical.",VCL-465
83091a39446a9a8cd8981ef0fa23910397a263d0,,,1,['web/.ht-inc/utils.php'],"VCL-30

modified getRequestInfo - added OStype to array of data returned",VCL-30
617489086583297301de95cd6b6e46dc1d206346,,,1,['web/.ht-inc/requests.php'],"VCL-30

modified connectRequest - if imaging reservation for windows, set userid to Administrator",VCL-30
835cffe03de2d6a5068d6e0928d19d99e9806ea7,,,1,['managementnode/lib/VCL/Module/OS/Windows/Version_6.pm'],"VCL-478
Updated code to not recopy Unattend.xml from the management node fixing a problem where the passwords were incorrect in the Unattend.xml file used for Sysprep.",VCL-478
95b2a19a40f979f52eb8602a46ac0fa13f0eff9d,,,6,"['web/.ht-inc/authentication.php', 'web/.ht-inc/requests.php', 'web/.ht-inc/serverprofiles.php', 'web/.ht-inc/states.php', 'web/.ht-inc/utils.php', 'web/js/requests.js']","VCL-463
VCL-367

authentication.php: modified checkExpiredDemoUser - added call to checkUpdateServerRequestGroups

requests.php:
-modified viewRequests - only show connect if request is ready and user account is created; added button and confirmation dialog to remove failed and timed out reservations
-modified AJeditRequest - added ability to modify admin or login group for server requests
-modified AJsubmitEditRequest - added checking of and updating of submitted admin and login groups
-added AJconfirmRemoveRequest
-added AJsubmitRemoveRequest
-modified connectRequest - if request is timedout or completed, show message to user and do not display connect information

serverprofiles.php:
-filled in all missing function header documentation
-changed occurances of & in html to &amp;
-modified deployHTML - added ""(optional)"" to fixedIP and fixedMAC inputs
-fixed several places that were missing a closing quote
-made monitored input hidden since it is not supported yet
-removed type=text values from date and time inputs that are defined as divs

states.php:
-added AJconfirmRemoveRequest
-added AJsubmitRemoveRequest

utils.php:
-modified addUserGroupMember - added call to checkUpdateServerRequestGroups
-modified deleteUserGroupMember - added call to checkUpdateServerRequestGroups
-modified getRequestInfo - added admingroupid and logingroupid to returned array
-modified getUserRequests - added useraccountready to returned array for each request - set based on there being an entry in reservationaccounts
-modified requestIsReady - added check for servermodified state
-modified updateGroups - added call to checkUpdateServerRequestGroups
-added checkUpdateServerRequestGroups
-modified sendRDPfile - if request is timedout or completed, redirect user to Current Reservations page; removed exit from end of function
-modified getDojoHTML - added dijit.form.FilteringSelect to viewRequests

requests.js:
-added removeReservation
-added removeReservationCB
-added submitRemoveReservation
-modified hideEditResDlg - destroy admingrpsel and logingrpsel if they exist
-modified submitEditReservation - submit admingroupid and logingroupid if input for them exists",VCL-463
cfc5b9c7fb00a0bc7d0fe3c6510f6a1f53ec29bd,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-30
VCL-463
VCL-477

vcl.sql and update-vcl.sql:
-added connecttext to connectmethod table
-changed imageid to imagerevisionid in connectmethodmap
-added connectIP and connectport to reservation table
-added reservationaccounts table
-added statgraphcache table
-added connecttext data to connectmethod table inserts
-updated inserts for connectmethodmap table to use imagerevisionid instead of imageid
-added serverprofile entry to resourcetype table
-added serverCheckOut and serverProfileAdmin to userprivtype table
-added entries for serverCheckOut and serverProfileAdmin and adminUsers group to userpriv table
-added reservationaccounts constraints",VCL-30
79a5079356b63bdaa295bfea80981ea8f3237219,,,1,['web/js/serverprofiles.js'],"VCL-463

modified selectProfileChanged - added extra check for existance of dijit.byId('profileid').getOptions(0)
modified saveServerProfile - set save button text to 'Working...' and disable
modified saveServerProfileCB - set save button text to 'Save Profile' and enable; if profileslist was hidden, show it
modified getServerProfileData - set fetchProfilesBtn text to 'Working...' and disable if id = 'profileid'; set mouse cursor to wait
modified getServerProfileDataDeployCB - set mouse cursor to default
modified getServerProfileDataManageCB - set mouse cursor to default; set fetchProfilesBtn text to 'Configure Profile' and enable
modified delServerProfile - if no more profiles, set profileslist to hidden
modified delServerProfileCB - also remove profile from deployprofileid
modified getGroups - if profileid is empty, set mouse cursor to default and return
modified getProfiles - if inprofiles does not exist, return; if profilesGroups does not exist, return
modified getProfilesCB - if no profiles, set profileslist, deployprofileslist, and groupprofilesspan to hidden and unhide noprofilegroupsspan; if there are profiles, do the opposite
removed updateWaitTime",VCL-463
87397aa44a73baff60b9f563658ad87a9d8dd713,,,1,['web/js/requests.js'],modified setOpenEnd - moved setting openend checked to true to start of function in case openenddate or openendtime is invalid (which will always be true when setting the first of those two),
7e157469ceb18a9b2f9d39acfaef4c3dbe4bef1c,,,1,['web/js/images.js'],"VCL-30

added updateCurrentConMethods
added selectConMethodRevision
modified addConnectMethod3 - set cmerror innerHTML to '' at start; add revid to data
modified addConnectMethodCB - removed code that updates curmethodsel - this is now handled by updateCurrentConMethods
modified remConnectMethod - add revid to data
modified updateConnectionMethodList - populate connectmethodids hidden element if it exists (used when adding a new image)",VCL-30
627bf8a6bfc99555fcb9c52a0d7e07724dfb42b8,,,1,['web/js/code.js'],added ignoreCaseSort and use it with the sort in sortSelect,
af0286cec9384a24b908fef5317ebd991329a3ab,,,1,['web/css/dashboard.css'],added '#dashboard td' and '#dashboard table td' to have left and right padding,
524b5bb412412d5d299b624c66c3a469feca7d44,,,1,['web/.ht-inc/utils.php'],"VCL-30
VCL-294

modified checkAccess - add entry to login log someone attempted to log in using xmlrpc and failed
modified getImageConnectMethods - added 2nd, optional arg of $revisionid - if not specified, get production revision
added getImageConnectMethodTexts
modified getBlockAllocationIDs - modified query to not include any times with skip = 1
modified getRequestInfo - added connectIP and connectport to each reservations entry
modified getConnectMethods - added arg of $imageid that was left out before; also added methods to session cache
modified getDojoHTML - removed several commented out requires; modified serverProfiles header data to not set dojo debug and to load requires onload instead of before loading; modified dashboard header data to not set dojo debug",VCL-30
5645dbdb87dace9eed4c7f0e47ee34f129bced42,,,2,"['web/.ht-inc/statistics.php', 'web/css/vcl.css']","VCL-477

statistics.php:
-modified viewStatistics - (unrelated) modified heading to reflect who stats were selected for; changed graph section to always print a div for each graph, then the AJ functions fill in if it would take too long to generate the graph
-modified getStatGraphDatData, getStatGraphDayConUsersData, getStatGraphConBladeUserData, and getStatGraphConVMUserData to get data from statgraphcache if there or add to it if not
-added addToStatGraphCache

vcl.css - added statgraph class",VCL-477
da1c41e52e301577bdb95addb7d7331a43d069b9,,,1,['web/.ht-inc/requests.php'],"VCL-30
VCL-463

modified viewRequests - added check at beginning of function to see if user has no reservations and if so, print a short message and return; definied $failed at start of function; added check for 'forimaging' to add 'End Reservation & Create Image' to 'More Options...'; added computer hostname to debugging info; removed check toward end of function to see if user has no reservations; changed function to return instead of exit
modified printReserveItems - track selected ending and make appropriate radio button stay checked if there was an error; added 'noscript' element to say javascript must be enabled to specify end time; if valid end time submitted, initially populate specified fields
modified connectRequest - display connect text from connectmethod table instead of hard coded inline",VCL-30
bd4d491a6a4cc516e9c1580202c3373f42bb7f14,,,1,['web/.ht-inc/images.php'],"VCL-30

overall - changed to connection methods being assigned by imagerevisionid instead of imageid

modified selectImageOption - (unrelated to VCL-30) added labels to radio buttons so that text can be clicked to select radio button
modified editOrAddImage - removed several initial definitions of variables that were no longer used; changed to update connectionmethods immediately only when editing and to pass the selected methods along to next function when adding
modified connectmethodDialogContent - update to allow imagerevision to be selected if image has more than one revision
modified jsonImageConnectMethods - changed to provide code that updates connectionmethods immediately only when editing and to pass the selected methods along to next function when adding
modified AJaddImageConnectMethod - changed to update connectionmethods immediately only when editing and to pass the selected methods along to next function when adding; changed to assign methods by imagerevisionid instead of imageid
modified AJremImageConnectMethod - changed to update connectionmethods immediately only when editing and to pass the selected methods along to next function when adding; changed to assign methods by imagerevisionid instead of imageid
modified confirmEditOrAddImage - if adding, print selected connection methods
modified updateExistingImage - add any connection methods to new revisionid that were enabled in previous revision
modified processImageInput - process connectmethodids
modified addImage - add entries to connectmethodmap",VCL-30
6c91e4a2f4c8285ddd01b0c7d0720ede5d951265,,,1,['web/.ht-inc/groups.php'],"VCL-456

modified editOrAddGroup - moved setting 'groupwasnone' for continuation data from definition of $cdata to adding it only if type is user",VCL-456
5276a93bbba5bf6cc72372a5fc249d4855695e19,,,1,['web/.ht-inc/blockallocations.php'],"VCL-476

modified getCurrentBlockHTML to only get block times that have skip = 0",VCL-476
e9552f18387ae0e443434355220edce3d038d4a2,,,1,['web/.ht-inc/authmethods/shibauth.php'],"VCL-475

modified addShibUser to return id of newly added user instead of adding the id to the passed in $user array and returning the whole array; modified updateShibUser to then add that id to the $user array and return the whole array",VCL-475
6060daf0f4feddf503ae04902b347d3de4251aa7,,,1,['managementnode/lib/VCL/new.pm'],"VCL-463

Server loads:

Added functionailty to reinstall node:
- uses much of the flow with a new reservation
- does not reset the original assigned password if one exists
- goes directly into reserved - then inuse state
- send different email message related to reload",VCL-463
06a53510b1de9faacd6810e0515ce365a28b292f,,,1,['managementnode/bin/vcld'],"VCL-463 
moved new.pm to handle reinstall state",VCL-463
5c72bdd3220fa7c6e7aeeb723031aeab56f25397,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-463

shorten reboot routine. removed waiting for reboot portion. 
using general routine now provided by OS.pm",VCL-463
3f68927f7a18cd4ba04ccddbfce02413902a7ea3,,,4,"['managementnode/bin/vcld', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/inuse.pm']","VCL-463

Server loads
ability to process a reboot
inuse module is calling os->reboot routine
each OS module will be responsible for handling it

If os module cannot reboot the machine then inuse module will return to inuse state 
without any action.",VCL-463
52fb004276616f1082bf962bd0f759722a3fe911,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT.pm'],"VCL-472
Updated xCAT.pm to fix a problem which occurs if the storage used by the boot image is mounted somewhere other than the management node. Reservations would fail if this was the case because 'authenticated mount request' never appears in the messages file on the managment node.",VCL-472
02f97fca9888d4a3e0e1abddc5aa29eb0da0747f,,,1,['managementnode/bin/health_check.pl'],"VCL-468

renamed help to _help",VCL-468
9b5b9d4ee3555e0b3af60559602ca150664e0357,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-469
Updated Windows.pm get_public_ip_address to handle a rare condition where a valid public IP address as well as an auto-generated IP address are both bound to the same interface name.  Under this condition, the auto-generated address may have been returned causing problems. Code was updated to return the valid address if one is assigned.",VCL-469
d93312975ca0b6d861240c465d2ad33c58683e52,,,2,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/utils.pm']","VCL-463

adding serverrequest data to data structure
 - if data does not exist, zero out the values. This is to prevent get_data_ calls to not complain about uninitilized data.",VCL-463
b858d49b5927a3af7c1aa2eabfd44ee9af878ed8,,,11,"['web/.ht-inc/images.php', 'web/.ht-inc/privileges.php', 'web/.ht-inc/requests.php', 'web/.ht-inc/serverprofiles.php', 'web/.ht-inc/states.php', 'web/.ht-inc/utils.php', 'web/.ht-inc/xmlrpcWrappers.php', 'web/css/vcl.css', 'web/js/images.js', 'web/js/requests.js', 'web/js/serverprofiles.js']","VCL-463
VCL-30
VCL-432
VCL-458

xmlrpcWrappers.php:
-modified XMLRPCprocessBlockTime - added check for existance of 'subimages' in array before using it; default to 1 for $compsPerAlloc if it does not exist
-added XMLRPCautoCapture

privileges.php:
-modified getResourcePrivRowHTML - added code to not print manageMapping checkbox for serverprofile type
-modified AJsubmitAddResourcePriv - added checks for server profiles

vcl.css: added .rederrormsg and .noicon

states.php:
-added serverProfiles
-added connectmethodDialogContent
-added jsonImageConnectMethods
-added AJaddImageConnectMethod
-added AJremImageConnectMethod
-added AJsaveServerProfile
-added AJserverProfileData
-added AJdelServerProfile
-added jsonProfileGroupingGroups
-added jsonProfileGroupingProfiles
-added AJaddGroupToProfile
-added AJremGroupFromProfile
-added AJaddProfileToGroup
-added AJremProfileFromGroup
-added AJserverProfileStoreData
-added AJdeployServer
-added AJconfirmDeleteRequest
-added AJsubmitDeleteRequest
-added AJsetImageProduction
-added AJsubmitSetImageProduction
-added AJeditRequest
-added AJsubmitEditRequest
-added AJrebootRequest
-added AJreinstallRequest
-removed editRequest
-removed confirmEditRequest
-removed submitEditRequest
-removed confirmDeleteRequest
-removed submitDeleteRequest
-added startCheckpoint
-added submitCheckpoint

requests.php:
-added STARTMINUTEERR
-modified newReservation - added labels to now and later radiobuttons so that text can be clicked to select
-modified submitRequest - allow any users with ""View Debug Information"" permission to select any revision of an image
-modified viewRequests - major overhaul to allow most functions to stay on this page and popup dialogs to handle events
	-changed all buttons to dijit buttons
	-reservations get 3 buttons: Connect, Delete, 'More Options' - 'More Options' is a drop down menu with some subset of 'Edit', 'End Reservation & Create Image', 'Create Image', 'Reboot', and 'Reinstall'
	-added handling of server requests
	-collapsed debug information into a single column that displays the request id - hovering over the id pops up a box with additional info
	-provide a refresh continuation for all cases except having no reservations at all
	-print an end reservation dijit dialog
	-print an edit reservation dijit dialog
	-print a reboot/reinstall dijit dialog
-modified viewRequestInfo - use dijit dialog to confirm deleting of reservation; then send back to time table if came from there
-converted editRequest to AJeditRequest
-removed confirmEditRequest - confirmation done via javascript now
-converted submitEditRequest to AJsubmitEditRequest
-removed printEditNewUpdate - separated out into its own selectable option under 'More Options'
-converted confirmDeleteRequest to AJconfirmDeleteRequest 
-converted confirmDeleteRequestProduction to AJconfirmDeleteRequestProduction 
-converted submitDeleteRequest to AJsubmitDeleteRequest 
-added AJrebootRequest
-added AJreinstallRequest
-modified printReserveItems:
	-print startday/hour/minute errors
	-added labels to duration and until radio buttons so text can be clicked
	-added onChange events to automatically select radio buttons if items under that radio button are modified
	-changed specify end time entry to selectable date and time widgets
-modified processRequestInput:
	-added checks to minute, meridian
	-added check that end time must be after start time

images.php:
-removed bits of long time commented out code
-added startCheckpoint - handles online image capture
-modified editOrAddImage - added editing of connect methods to advanced options; also added dijit dialog to confirm connect methods that much be manually added
-added connectmethodDialogContent
-added jsonImageConnectMethods
-added AJaddImageConnectMethod
-added AJremImageConnectMethod
-modified imageClickThroughAgreement - added processing of comments
-modified submitAddImage - updated so it can be called from another function without printing anything so that it can be used from the autocapture API function
-modified updateExistingImage - updated so it can be called from another function without printing anything so that it can be used from the autocapture API function
-added submitCheckpoint
-added AJsetImageProduction
-added AJsubmitSetImageProduction
-modified addImage - added autocapture field to imagerevision insert query

utils.php:
-modified initGlobals - added serverProfiles to include switch statement
-modified getImages - added installtype and connectmethods to returned data
-added getImageConnectMethods
-modified addOwnedResources - added serverprofiles
-modified getResourcesFromGroups - added serverprofiles
-modified getUsersGroupPerms - check to see if $inlist is empty, and if so return an empty array
-modified isAvailable:
	-added $vmhostcheckdone flag so that the temporary table doesn't get dropped/created for each iteration of the loop for cluster reservations
	-set $virtual = 0 when editing a reservation so that it will be defined later (VCL-458)
	-added check to return earlier if modifying a reservation and no computers are available
	-added a DROP TEMPORARY TABLE IF EXISTS before creating it to ensure we don't try to create it a 2nd time
-modified schCheckMaintenance - don't check maintenance entries that are in the past
-modified getRequestInfo:
	-added $returnNULL parameter - set to 1 if just want function to return NULL if the request no longer exists
	-added serverrequest to returned data - 1 if server request, 0 if not
-modified deleteRequest - also delete from serverrequest if reservation is a server request
-modified getUserRequests - added these fields to returned data: userid, server, serverowner, vmhostid, serverrequestid, fixedIP, fixedMAC, serveradmingroupid, serveradmingroup, serverlogingroupid, serverlogingroup, and monitored
-modified showTimeTable - pass additional info in viewRequestInfo continuation so that it can send user back to viewing time table
-modified requestIsReady - include current state = checkpoint, last state = inuse
-modified prettyDatetime - added flag to include year
-added getConnectMethods
-modified xmlrpccall - added XMLRPCautoCapture
-modified sendHeaders - changed shib logout iframe to be https
-modified getNavMenu - added section for server profiles
-modified getDojoHTML:
	-added/updated dojo includes for newRequest, viewRequests, confirmEditOrAddImage, viewRequestInfo, startCheckpoint, and serverProfiles
	-added/updated header javascript for viewRequests, viewRequestInfo, and serverProfiles

requests.js:
-modified RPCwrapper - changed handleAs from json-comment-filtered to json
-added selectLater
-added selectDuration
-added selectLength
-added selectEnding
-added setOpenEnd
-modified resRefresh - no longer reload page if detailreqid does not exist; only submit reqid with data if it exists
-added endReservation
-added endReservationCB
-added submitDeleteReservation
-added editReservation
-added editReservationCB
-added hideEditResDlg
-added editResOpenEnd
-added submitEditReservation
-added submitEditReservationCB
-added checkResGone
-added resGone
-added hideRebReinstResDlg
-added rebootRequest
-added reinstallRequest
-added submitRebReinstReservation

images.js:
-added RPCwrapper
-updated all functions using dojo.xhrPost to call RPCwrapper instead
-added addConnectMethod
-added addConnectMethod2
-added addConnectMethod3
-added addConnectMethodCB
-added remConnectMethod
-added remConnectMethodCB
-added updateConnectMethod

initial add of serverprofiles.php
initial add of serverprofiles.js",VCL-463
cfa30a0e60598c6d68b26c98fc98cef978a713a9,,,1,['managementnode/lib/VCL/Module.pm'],"VCL-409
Added options to 'vcld -setup' to set a local account password and to test RPC-XML access.

VCL-450
Updated Module.pm::create_os_object to allow a Perl package name to be specified as an argument. This allows calling subs to generate OS objects of a specific type. This is used by VMware.pm::get_active_vmx_file_path.",VCL-409
6facb3ec37407ce71f8b1fadbe661fbd802ca9f9,,,5,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6.pm', 'managementnode/lib/VCL/Module/Provisioning.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm']","VCL-466
Added check_cygwin subroutine to Windows.pm. Added call to this subroutine from pre_capture. This subroutine checks/sets the CYGWIN environment variable configured for the sshd service. It should be set to 'ntsec nodosfilewarning'. The 'nodosfilewarning' parameter is necessary to overcome a problem with Cygwin 1.7 where a warning is displayed the first time a DOS-style file path is used to run a command. If the value isn't correct, it sets it and restarts the sshd service. Added get_environment_variable_value and restart_service subroutines to accomplish this.

Updated Version_6.pm::set_ignore_default_routes to handle computers with a single interface.

VCL-465
Updated Windows.pm::get_network_configuration to return the configuration if the computer has a single interface.

VCL-450
Updated Linux.pm::remove_existing_vms. Added a check after the matching VMs were deleted to make sure the computer assigned to the reservation isn't responding to SSH. If it is, then there is a VM running which the code couldn't find. This will cause problems and may cause the user to connect to a VM with an image other than the one requested.  If a running VM is detected, an attempt is made to determine the vmx path of the running VM by calling get_active_vmx_file_path. This VM isn't shutdown or deleted but the path is included in the error message.

Updated VMware.pm::get_active_vmx_file_path to check the type of OS loaded on the computer before calling the OS subroutines. Added OS.pm::get_os_type to accomplish this. The OS doesn't necessarily match the OS of the reservation image so the normal $self->os calls will fail if the OS doesn't match. A new OS object is created and used if they don't match.


Other
Copied execute subroutine from Linux.pm to OS.pm since it can be used by Windows too.

Updated Windows.pm::search_and_replace_in_files to improve error checking.

Updated Provisioning.pm::wait_for_power_off to make the code more readable and to prevent the possibility of a 'uninitialized concatenation' error from occurring if power_status returns undefined.",VCL-466
1b50657cf5caa41c716a535764a872bdb4a1c878,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-464
Updated Linux.pm::generate_ext_sshd_config to set PasswordAuthentication to yes to ensure it is available when connecting via the public IP address.",VCL-464
6f013581a65b74d46877a3c3da227a00637b524b,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-463
VCL-30

added definitions for these tables:
-connectmethod
-connectmethodmap
-serverprofile
-serverrequest

added data for these tables:
-connectmethod
-connectmethodmap

added constraints for these tables:
-connectmethodmap
-serverprofile
-serverrequest",VCL-463
4c7405e2029d059816091479ecafb0d6d20be886,,,3,"['web/.ht-inc/errors.php', 'web/.ht-inc/statistics.php', 'web/.ht-inc/vm.php']","minor changes to errors.php and statistics.php

vm.php: modified AJnewProfile - get imageid for 'noimage' before doing insert instead of hard coding image id 4",
3f607c45d98e9ca86ab70b2fe27d0d70262cb265,,,1,['web/.ht-inc/blockallocations.php'],"minor changes

modified AJtoggleBlockTime - now we actually delete entries from the request table if the start time has not been reached instead of updating the state to be deleted.  It's been a while since I did this, but I think the reason was that the deleted stated ended up causing the machines to get picked up by the reload algorthim.

modified AJupdateBlockStatus - updated to check for computer being in 'reload' state in addition to 'reloading' state",
41a7c64093879ff93d3727f926c886fb1b84b790,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm'],"VCL-450
Removed code from capture subroutine which copies the reference vmx file after copy_vmdk is called because copy_vmdk handles this task.

Moved $reservation_password declaration in prepare_vmx to a commented-out section later on.  This section is the only place it's used and the declaration was causing warnings to appear in the log file if the password wasn't initialized.",VCL-450
5cbca60f7f96d16eb6b5807b34624a3ae6f2cd8d,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm'],"VCL-450
Added default minimum memory sizes for each OS/architecture which requires more than 512 MB of RAM in the %VM_OS_CONFIGURATION hash.  Updated get_vm_ram to use this value.

Added code to capture subroutine to save the vmx file used on the VM being captured along with the vmdk files. This vmx file can later be used as a reference. Added get_reference_vmx_file_name, get_reference_vmx_file_path, and get_reference_vmx_info subroutines.

Updated copy_vmdk to also copy the reference vmx file when copying a vmdk.

Updated get_vmdk_parameter_value to allow it to retrieve a parameter from the vmdk file if it resides on the VM host. It previously only checked the files on the management node.

Updated get_vm_disk_adapter_type and get_vm_virtual_hardware_version to try to first retrieve the type from the reference vmx file. This should allow VMs using the LSI SAS adapter type to work correctly.",VCL-450
d56da0f5d4250a33a6c31e2241b1ddd862175f09,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-461
Added enable_client_compatible_rdp_color_depth subroutine to Windows.pm and added call to this new subroutine to pre_capture().

VCL-462
Added call to dism.exe in clean_hard_drive subroutine to remove Windows 7 and 2008 service pack files when an image is captured.  This reduces the size of the image by 1GB or more.

Other
Added log file path argument to 'netsh.exe reset' call in shutdown subroutine.  This command fails if this isn't specified.

Commented out call to disable_windows_defender in pre_capture. I added this a while ago but can't recall the reason why.",VCL-461
453815aec7ab978549da22fb6043a8f01b7a5005,,,1,['managementnode/lib/VCL/Module/OS/Windows/Version_6.pm'],"VCL-460
Updated the Windows 6.x activation subroutines to send critical notifications if KMS or MAK activation fails. Also added code to run_sysprep to replace the ProductKey line in the Unattend.xml file with the KMS activation key for the OS.",VCL-460
838389b63b56eabbab0f887e17777ffaa3acceea,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-452
Updated Linux.pm::get_file_size. It now returns the size used on disk by a file which should allow the size of vmdk files to be reported correctly.",VCL-452
6d8bbf176de65aa1592762c3c2442b47843676fd,,,3,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/inuse.pm', 'managementnode/lib/VCL/utils.pm']","VCL-432

Added support to automatically capture an imaging reservation when time has expired.
This only applies to reservations that have the imaging flag set on the request.

It calls the xmlrpc api to start the imaging request.

VCL-446

inuse.pm, 
for reservations greater than 24hr. At certain time intervals notify user their reservation will end",VCL-432
10c58360bc68435c185fd2ac5a109c6afba28697,,,1,['CHANGELOG'],"VCL-434

added VCL-440",VCL-434
e2cc8ee38964d80ffdfca700aeaac200e8770b85,,,1,['web/.ht-inc/dashboard.php'],"VCL-440
dashboard last 12 hours of reservations graph not positioned correctly in IE in compatibility mode

modified addLineChart to text-align chart to the left",VCL-440
17a7dda5232572954c75e000823300576d379bd5,,,1,['NOTICE'],"VCL-434

changed copyright date to be 2009-2011

removed entry about Dojo Toolkit being included",VCL-434
337d06130e94da8c66cdaddd6bcac4d5734ac1d0,,,1,['CHANGELOG'],"VCL-434

added VCL-436",VCL-434
437490bf3cdac053f93c1c605caa54d9246a262e,,,1,['CHANGELOG'],"VCL-434

added VCL-437 and VCL-439",VCL-434
5d19d407294da3cae90667ac97db990113b88261,,,1,['web/js/statistics.js'],"VCL-439
trailing commas in statistics.js keeps graphs from showing in IE on stats page

modified generateColGraphsCB and generateHourGraphsCB to not have trailing commas in the list of array elements passed to graph.addAxis",VCL-439
3670560ad0101ef37747eba140133b344664175a,,,1,['UPGRADE'],"VCL-434

added information on granting CREATE TEMPORARY TABLES to db user for web code",VCL-434
08ddd3e41ddd82d9823fe0b7689cf90ec3c3b4b2,,,1,['INSTALLATION'],"VCL-434

modified instructions on creating database user to include CREATE TEMPORARY TABLES in the grant command",VCL-434
1fe207c3ed9278ded4c3e862faf777fd21701832,,,2,"['mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-434

added hostcomputerid to sublog table",VCL-434
cfbc1a53743075d94f5030c9465d8432f7572c57,,,1,['INSTALLATION'],"VCL-434

added one line to 'Tweak if your LDAP server has users in multiple containers' section",VCL-434
546a8ed8bd8ea034597938c628efe1e962b1f142,,,1,['web/.ht-inc/utils.php'],"VCL-434

modified getUsersGroupPerms - if array of groups passed in was empty, an invalid query was generated; added check for empty array of groups
modified checkUserHasPerm - if $perms was empty, in_array would fail; added check for it being an array",VCL-434
a7e0cc51fed3f03a945663b5386f07e0f9ae2688,,,1,['INSTALLATION'],"VCL-434

reformatted to have line breaks at an 80 column max",VCL-434
a3d6d91c3fe6067467c826a4070b8b8cba693289,,,1,['INSTALLATION'],"VCL-434
Updated INSTALLATION file to match web documentation.",VCL-434
caf667e84b957a8f9517398f49d63f24bfe9522d,,,1,['managementnode/lib/VCL/Module/State.pm'],"VCL-434
Fixed minor bug in State.pm::DESTROY.  A ""Use of uninitialized value in subtraction"" error would be displayed when exiting vcld -setup because the $self->{start_time} variable isn't initialized when running setup mode.",VCL-434
7e7b7435ced501e07c59ecd8130e98a5aa0f7df3,,,1,['managementnode/lib/VCL/Module/Predictive/Level_1.pm'],"VCL-436

Extended a query to restrict which images can be loaded on the node based on the mappings of OSinstalltype and installtype",VCL-436
12968d422f753d17ee69e31503edbb813d0935fe,,,1,['managementnode/bin/install_perl_libs.pl'],"VCL-434
Updated install_perl_libs.pl.  It now attempts to install EPEL so that additional Perl packages can be installed via yum.  Improved error checking.",VCL-434
dba9cd447b88ec61f924c8127293659b08995e57,,,1,['mysql/update-vcl.sql'],"VCL-434

added usergrouppriv and usergroupprivtype tables",VCL-434
985238bb37cb44936d99eb036ce1d9cadd3f24d9,,,1,['mysql/vcl.sql'],"VCL-434

added usergrouppriv and usergroupprivtype tables",VCL-434
8209bb2b5c3fc97b9fa21ec89b0739fb9008c3fe,,,1,['web/index.php'],"VCL-434

added version string under ASF header",VCL-434
178023018f39ed248f38444cdacd8a5f6cfc178d,,,1,['web/testsetup.php'],"VCL-434

removed check for jpgraph",VCL-434
1e9f6e864d948a3cb5e3c48f20b5f403eb05431f,,,1,['INSTALLATION'],"VCL-434
Updated management node section of INSTALLATION file to match Confluence.",VCL-434
e5ff62a03da1123b743ab2a213e7243022da757e,,,1,['CHANGELOG'],"VCL-434

updated for 2.2.1 release",VCL-434
d03e4db02fcfc08841e57e35d3a59f1ea7f3ed8e,,,1,['UPGRADE'],"VCL-434

updated web code instructions and noted any sections that are 2.1 to 2.2.1 only",VCL-434
320ccb3b50b0a6d3c116bbf960a9c1b8cca6084b,,,1,['INSTALLATION'],updated content based on online docs,
f4b7be318993851ee9afde0c98de566777639376,,,1,['RELEASE_NOTES'],updated roadmap,
f02a249004381c3002cea9d9e62fb4439103adcb,,,1,['web/.ht-inc/conf-default.php'],"VCL-434

Removed array after $authMechs ($affilValFunc, $affilValFuncArgs, $addUserFunc, $addUserFuncArgs, $updateUserFunc, $updateUserFuncArgs) and replaced with some code that automatically generates the arrays.  Entries still need to be manually created for shibboleth only authentication affiliations in the $addUserFunc array. Instructions about that are included.",VCL-434
f31ed56c47deac5166c11700c5afb4ad34bc87d1,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/vmware_cmd.pm'],"VCL-435
Updated vmware_cmd.pm::_get_datastore_info to not only rely on the /etc/vmware/config file for constructing the datastore info hash.  Added code to also add into to the hash if the vmpath or datastore values configured in the VM profile differ.",VCL-435
dd74f3dc048da7f972a818fc46f4808993d998e6,,,1,['managementnode/bin/install_perl_libs.pl'],"VCL-434
Updated the POD description in install_perl_libs.pl.",VCL-434
32753f5f013483f32f03de95b61ae658d10be4aa,,,1,['managementnode/bin/install_perl_libs.pl'],"VCL-434
Updated install_perl_libs.pl to use CPAN.pm to automatically install the required modules and their dependencies rather than specifying several URLs.  This should allow the script to work indefinitely.  Added code to this script to also install the required Linux packages using yum and updated the license disclaimer.",VCL-434
befd3e6fbbc21c64c541871f8164cec9c07155b3,,,42,"['managementnode/bin/health_check.pl', 'managementnode/bin/monitor_vcld.pl', 'managementnode/bin/vcld', 'managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/ESXi.pm', 'managementnode/lib/VCL/Module/OS/Linux/ManagementNode.pm', 'managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm', 'managementnode/lib/VCL/Module/OS/Linux/UnixLab.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5/2003.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5/XP.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/2008.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/7.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/Vista.pm', 'managementnode/lib/VCL/Module/Predictive.pm', 'managementnode/lib/VCL/Module/Predictive/Level_0.pm', 'managementnode/lib/VCL/Module/Predictive/Level_1.pm', 'managementnode/lib/VCL/Module/Provisioning.pm', 'managementnode/lib/VCL/Module/Provisioning/Lab.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VIX_API.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vmware_cmd.pm', 'managementnode/lib/VCL/Module/Provisioning/vmware.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/Module/Semaphore.pm', 'managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/blockrequest.pm', 'managementnode/lib/VCL/healthcheck.pm', 'managementnode/lib/VCL/image.pm', 'managementnode/lib/VCL/inuse.pm', 'managementnode/lib/VCL/makeproduction.pm', 'managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/reclaim.pm', 'managementnode/lib/VCL/reserved.pm', 'managementnode/lib/VCL/utils.pm']","VCL-434
Changed $VERSION line in all backend files to 2.2.1.",VCL-434
8c31e50ac853a88fcadaea07156ae58ea9eeef7d,,,7,"['managementnode/lib/VCL/blockrequest.pm', 'managementnode/lib/VCL/image.pm', 'managementnode/lib/VCL/inuse.pm', 'managementnode/lib/VCL/makeproduction.pm', 'managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/reclaim.pm', 'managementnode/lib/VCL/reserved.pm']","VCL-424
Removed unused variables from the subroutines in the state modules.  There were several variables initialized via $self->get_... but never used as the result of copy/paste.

Updated inuse.pm to not retrieve data directly from the hash.

Removed code from new.pm which wrote currentimage.txt for Linux Kickstart installs.  This has been moved to Linux.pm.",VCL-424
61cee4972032a03a93c65f4e5e49b22885eacef5,,,3,"['managementnode/lib/VCL/Module/Utils/Logging.pm', 'managementnode/lib/VCL/Module/Utils/SCP.pm', 'managementnode/lib/VCL/Module/Utils/SSH.pm']","VCL-434
Removed unused Utils directory and files underneath.  These were added long ago and contained some test code but never used.",VCL-434
13959ebb4998d634dd5c54b203a8e88f215f8f30,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm'],"VCL-435
Fixed a bug in VMware.pm::reclaim_vmhost_disk_space.  It would generate ""Use of uninitialized value in concatenation"" warnings under some circumstances because.",VCL-435
4ff8a6c77043a9110b62316aeb6dc6be8e571c11,,,4,"['INSTALLATION', 'NOTICE', 'UPGRADE', 'managementnode/lib/VCL/Module/Provisioning/esxthin.pm']","VCL-434
Updated version in INSTALLATION and UPGRADE files from 2.2 to 2.2.1.
Updated UPGRADE file to specify using the upgrade-vcl.sql file.
Changed copyright year in NOTICE file to 2011.
Removed author and copyright sections from esxthin.pm to match the other Perl modules.",VCL-434
214c0ccb6175471585e615c7696a0380997c4693,,,1,['mysql/update-2.2.sql'],"VCL-434
Deleted update-2.2.sql since all of its changes are now present in update-vcl.sql.",VCL-434
b5492c4a329e6b739f7288b6327d941ea1a8170a,,,3,"['mysql/update-2.2.1.sql', 'mysql/update-vcl.sql', 'mysql/vcl.sql']","VCL-434
Renamed update-2.2.1.sql to update-vcl.sql and added all of the changes from the update-2.2.sql file.  This allows all updates to be applied by merging update-vcl.sql whether or not update-2.2.sql had been previously applied.

Added key and constraints for the provisioningOSinstalltype table.

VCL-435
Added module and OS table entries to vcl.sql and update-vcl.sql for the ESXi.pm module.",VCL-434
d865bb0586f73ef326606b8ec282fa652fbbc4f2,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT2.pm'],"VCL-435
Updated regex in xCAT2.pm which collects MAC address to be case-insensitive.",VCL-435
dd78c9852d9d931cd39e7ecee6d58c280c714fe6,,,2,"['managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/Module/State.pm']","VCL-413
Moved code which creates the management node OS object from State.pm to Module.pm.  This allows $self->mn_os to be available from any module, not just State modules.",VCL-413
87a162cdb12d72339563dae8fe60355f7a41cdff,,,1,['managementnode/lib/VCL/Module/OS/Linux/ESXi.pm'],"VCL-435
Set svn properties on ESXi.pm.",VCL-435
2ea82f0df969f66fb758165e1e251e9cc127cd27,,,3,"['managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/ESXi.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT2.pm']","VCL-435
Created ESXi.pm OS module.  It currently only implements a post_load subroutine in order to allow ESXi loads to work.  Some functions in the Linux.pm post_load subroutine fail under ESXi.

Updated xCAT2.pm to handle ESXi 4.1 scripted installs:
Loosened regex which attempts to locate the ""Serving xcat"" line in the /var/log/messages file.  It was looking for initrd.img.  The ""Serving xcat"" line appears for ESXi installs but the file is not named initrd.img.

Updated node_status to return 'RELOAD' if the nodetype table doesn't match currentimage.txt.

Updated regex's in _get_image_template_path to remove periods and the 'i' in ESXi.  The OS source patch for ESXi is 'esxi4.1' but the template files reside in an 'esx' directory.

Added code to create currentimage.txt in Linux.pm::post_load if the OS install type is Kickstart.  This code exists in new.pm but should really only exist in Linux.pm since it's specific to Kickstart installs.

Other
Updated Linux.pm to call wait_for_power_off instead of simply waiting 60 seconds.  This matches the Windows code.",VCL-435
bd0738d897671cb500218e33c70b2bc97d3d30f3,,,3,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/utils.pm']","VCL-394
DataStructure.pm.
Removed references to vmprofile.nasshare.  This column was previously removed from the schema.

VMware.pm:
Changed default guestOS value from winvista to windows7 for 32-bit Windows 7.  This was a typo.

Enabled disk space checking in the load() subroutine.  This had previously been added but was commented out during development.

Added line in capture() to disable Sysprep for all image captures.

Updated code which removes existing VMs before a VM is loaded.  Updated remove_existing_vms subroutine.  It was performing redundant checks.  Added _get_vmx_file_path_computer_name subroutine.  This is used to determine the computer name from a directory name.  This code was duplicated in a few places so it was moved into its own subroutine for consistency.

Added commented-out code to prepare_vmx which enables VMware's built-in VNC connectivity.  This will be tested and possibly uncommented in the future.

Fixed bug in capture() if the repository is not mounted on the VM host and SCP has to be used to copy a captured image to the repository.  The copied files were not named correctly.

Updated get_vmx_info to retrieve the VCL computer ID from the vmx file and add it to the returned hash.


Other
Fixed a few log output typos in utils.pm.

Updated DataStructure.pm::get_computer_private_ip_address to attempt to return the privateIPaddress value from the database if it could not be retrieved from /etc/hosts.

Added StrictHostKeyChecking=no option to run_ssh_command.  This should prevent problems if it is not configured in the management node's ssh_config file.

Updated get_computer_ids() to use a regex instead of 2 'LIKE' expressions.  This should improve the handling of computer names that begin the same such as vm-1 and vm-10.

Updated DataStructure.pm::",VCL-394
acb6b71c32ee47e37a40200101efee0947c0f194,,,1,['mysql/update-2.2.1.sql'],"VCL-434

typo in update sql script - removed single ticks from ids insert statement",VCL-434
dde13c8030fc50cbe2197b2c44e0eb3823910e6b,,,1,['mysql/update-2.2.1.sql'],"VCL-434

clean up of sql file for 2.2.1 release
populated provisioningOSinstalltype table
added 'id' columns to the insert statements",VCL-434
6d426a9b0ee10d179b30400d4cc17f08f07c0f9d,,,1,['managementnode/lib/VCL/Module/Provisioning/vbox.pm'],Moved vbox.pm into the provisioning modules directory,
33db9800bc05bf473c36d468a6cb0343aed54be2,,,1,['managementnode/lib/VCL/vbox.pm'],Updated comments to refelct current progress,
1e9df9c465d6f3511f8aa5cde0a15af14e141146,,,1,['mysql/vcl.sql'],"VCL-434

Updating core vcl.sql file to match schema updates.",VCL-434
edfc2a84ce5d130447f9dbe8a1e26ec88a08f826,,,1,['mysql/update-2.2.1.sql'],"VCL-434

Initial commit of sql file to be used to update an existing vcl database.",VCL-434
2025b93f7c2a88f9445757e5b40e36dc3539375c,,,1,['web/css/dashboard.css'],added ASF license header,
a061d3e08643463148ff227b18c2b74d81f9d525,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-432

storing duration in request hash

if duration is equal to or greater than 24hrs automatically disable user checks.
This does not update the database.",VCL-432
db65c38672d2867180d2cb76a34a8841327c3321,,,1,['mysql/vcl.sql'],"VCL-471

Added support for David's vbox prov module",VCL-471
d14ced4bc1a89bbd63df6f3b97d8efb2f184947b,,,1,['managementnode/lib/VCL/vbox.pm'],"VCL-417

Adding David Hutchins virtual box module

Including small change on line 356 to include full path to hdds for vm.",VCL-417
16fe07a85f8887fad30f6da7e614b38cdea3b1b1,,,2,"['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm']","VCL-394
Updated subroutines which copy and rename vmdk files to detect if the operation failed because the destination is out of space.  If this occurs a critical notification is sent.  This makes the cause of the problem more obvious.

Updated VMware.pm::capture() to revert the changes it made to the vmdk file name/path if the image fails to be copied to the image repository.  Also added calls to power the VM back on if a capture fails.  This is done to return the state of the VM being captured back to the original before the capture was attempted, making it easier to attempt the capture again.

Added check when vmkfstools is called to detect if the utility prompted for the username.",VCL-394
8aa9be2f7334ac16044d801e0a5599ddce0bd5eb,,,3,"['managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6.pm']","VCL-393
Added disable_sleep subroutines to Version_5.pm and Version_6.pm. Added call to disable_sleep in post_load and pre_capture in Windows.pm.",VCL-393
342e8925be4c4544ffd2c25636486c1dd936f292,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm'],"VCL-394
Updated vSphere_SDK.pm to catch the fatal error that occurs if the vSphere SDK isn't installed on the management node.  In initialize(), the die handler is locally overridden and a useful message is displayed if the vSphere SDK isn't installed.",VCL-394
693845f87d266e63ae374a2b24d230b8679684f2,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-429
Updated Windows.pm::get_network_configuration to improve the logic used to determine which network interface is public.  It had assumed the first interface it finds with a public IP address is the public interface.  Added additional logic to for interfaces with also have a default gateway to take precedence.",VCL-429
a1b00456660f12c3c4fe14ec68ad782491a1311d,,,3,"['managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm']","VCL-394
Updated VMware code to detect if a datastore mounted on a VM host is not accessible.  A warning is displayed when the VMware provisioning object is initialized if any datastores are inaccessible. These datastores are not considered when attempting to determine various other paths.",VCL-394
2da0f6025ee755a4a739c340b9849f01ac0deefd,,,4,"['managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/ManagementNode.pm', 'managementnode/lib/VCL/Module/Provisioning.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm']","VCL-394
Moved code in VMware.pm::capture() which sets permissions on the image files after they have been copied to the image repository to a separate subroutine named set_image_repository_permissions.  Added additional methods to attempt to locate the image repository files in this subroutine.

Updated VMware.pm::initialize to make 3 attempts to check if the VM host is responding to SSH.  The first attempt may occasionally fail.

Other
Fixed bug in Linux.pm::set_file_permissions.  It was displaying an uninitialized string warning if the argument passed was a single file.

Updated ManagementNode.pm::execute to correctly handle the optional $display_output argument.

Updated Provisioning.pm::retrieve_image.  It was passing a full /tmp/... file path to Semaphore.pm::get_semaphore.  This isn't necessary and the temp file created had an unexpected name.  Changed to pass only the image name.",VCL-394
abb81b9cff1dd3278234b097d13c34bc602030d0,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm'],"VCL-424
Updated VMware.pm:

Added ""memsize"" values to the %VM_OS_CONFIGURATION hash representing the minimum amount of RAM in MB a particular OS requires.  VMs will be assigned this amount of memory if the value assigned to the VCL image is less than the required MB for the OS.

Added feature to automatically configure the SSH key to persist on ESXi.  This is done by configure_vmhost_persistent_ssh_key.

Removed call to set_vcld_post_load_status in load.  This is now handled by the OS module.

Updated logic in capture() to determine whether or not the image is captured to the repository based on whether or not vmprofile.repositorypath is configured.  Added check to fail the capture process if vmprofile.vmdisk is local and the repository path isn't configured.

Updated variable names in capture() to be less confusing.

Updated capture code and all other places that use the repository path to allow the path to either be mounted on the VM host or management node.  Mounting the repository directly on the VM host is preferred because VMware's utilities can be used to copy and convert a vmdk at the same time.  Having a repository path mounted on the VM host is also much faster than using SCP to transfer an image.

Updated capture code to always save images in the repository using the 2gbsparse format.  Thin disks do not remain thin when copied using other utilities.  Also, using SCP to copy a thin disk results in a fat disk.

Updated code to use the management node OS object ($self->mn_os) wherever the management node OS was directly interacted with.

Added feature to set the computer's current image and imagerevision to the ""noimage"" image whenever a VM is deleted.  This improves the chances that the scheduler assigns a VM that is actually loaded with the requested image.

Updated the VM display name to not contain ""(nonpersistent)"" if the VM is not persistent (default).  It still displays ""(persistent)"" if the VM is persistent.  This makes it easier to distinguish them in the vSphere Client.

Added code to check the space available on the VM host before attempting to load a VM.  This is not complete yet and isn't currently being called.  Subroutines added:
-is_vmx_vmdk_volume_shared
-get_vmx_volume_total_space
-get_vmdk_volume_total_space
-check_vmhost_disk_space
-reclaim_vmhost_disk_space

Added feature to allow the vmprofile paths to either be:
-a full absolute path: /vmfs/volumes/nfs-datastore
-a datastore name: nfs-datastore
-a datastore name in datastore format:  [nfs-datastore]
This allows the same profile to be used by multiple hosts as long as each host uses the same datastore names, even if pointing to different locations.

Changed naming of vmx directory to be the same regardless of whether or not the VM is persistent.

Added optional $vmx_file_path argument to power_on, power_off, power_reset, and power_status.",VCL-424
f457b71a4393c73ef47e9b41c25d5e653ebc9483,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm'],"VCL-424
Updated vSphere.pm:

Moved check to determine if the virtualDiskManager object is available in is_restricted to earlier in the subroutine to save a little time.

Added check in initialize to parse the output of the connection attempt to determine if the attempt failed due to an incorrect username or password.  A warning is displayed if this is the case, a normal debug message otherwise.  Some connection attempts are normal if the vSphere SDK isn't available and SSH is used instead.",VCL-424
659dfa50e3c83d0962aa5a0449fc2aafc9f57f11,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm'],"VCL-424
Updated VIM_SSH.pm:

Added multiple attempts to _run_vim_cmd because calls to vim-cmd will occasionally fail due to heavy load on the VM host.  Subsequent attempts usually succeed.

Added check in get_registered_vms and _get_vm_id to determine if return value from _get_vm_list is defined.  If undefined an error occurred.

Changed get_task_ids to return an array rather than a single value.  Also changed get_task_info to return a hash keyed by task ID rather than an array.  This makes it easier for calling subs to use the task info.

Updated get_virtual_disk_type to call 'vim-cmd search' if the host is ESX, and 'vim-cmd disksearch' if Server 2.0.  Unforturnaly VMware's vim-cmd produces different results based on the version of the host.  The value of the 'thin' parameter isn't returned under ESX if disksearch is used.

Other
Added counter for performance tuning purposes to keep track of the number of times vim-cmd was called throughout the process.",VCL-424
b254e6e51277d32676a66dce95e89c8a4a974bcc,,,7,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6.pm', 'managementnode/lib/VCL/Module/Semaphore.pm', 'managementnode/lib/VCL/Module/State.pm']","VCL-428
Updated DataStructure.pm to return the computer's current or next image name using the computer's imagerevision data rather than the image data because it is more accurate.

VCL-420
Updated Windows.pm::set_static_public_address to use the recently added DataStructure.pm::get_management_node_public_dns_servers() subroutine.

Other
Moved create_text_file subroutine from Windows.pm to OS.pm since it can be used by other OS's.

Added check to Semaphore.pm when it attempts to display the PIDs preventing it from obtaining an exclusive lock.

Updated Version_6.pm::wait_for_response to wait a maximum of 600 seconds rather than 300 if Sysprep isn't used.  300 was too short for some images/circumstances.

Added a call to record the time when a process starts in State.pm::initialize and another in DESTROY.  The total time the process takes to run is displayed for debugging/performance tuning purposes.

Made minor update to notify output in Linux.pm::get_file_size.",VCL-428
6f34a8f56cdf58511811cf7ca901fb7c1f0f9b64,,,1,['managementnode/lib/VCL/blockrequest.pm'],"VCL-428
Updated DataStructure.pm to return the computer's current or next image name using the computer's imagerevision data rather than the image data because it is more accurate.",VCL-428
3e14e772204de45312b3778d60517e3cf1e2e13a,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-127
Added VM host name to subject for critical email messages and to the vcld process name.

VCL-428
Updated get_request_info to populate the current image info using the computer.imagerevisionid value rather than the computer.currentimageid value.  It's possible that these 2 values may refer to a different image.  The imagerevisionid value is more accurate.

Other
Added TB info to the string returned by utils.pm::get_file_size_info_string() if the value is >= 1TB.

Updated utils.pm::escape_file_path() to use quotemeta rather than only escaping spaces.  This allows it to escape other special characters in file paths which cause problems with other subroutines.",VCL-127
f09ad242e50b79cc088119037f8adfc73fc0a102,,,2,"['web/.ht-inc/groups.php', 'web/.ht-inc/privileges.php']","VCL-113
inconsistances with ""None"" user group

groups.php: modified viewGroups - removed references to usergroup with id of 82 and/or name of None (as related to the usergroup table) - all occurances were related to removing it from being displayed except one select box where it was set as the default even though it could have been removed from the array supplied as data for the select box

privileges.php: modified viewNodes - removed one place where usergroup with id of 82 was being removed if it existed",VCL-113
ae3c32bd65e635bf050f2920a330f9ef099da3d7,,,1,['web/.ht-inc/groups.php'],"VCL-116
manage groups interface doesn't correctly handle user groups with editusergroupid set to NULL

added EDITGROUPERR

modified viewGroups: print 'None' as the editable by group if $usergroups[$id]['editgroup'] is empty

modified editOrAddGroup: add None to the list of user groups that can be selected as the editable by group if it is NULL and print a notice message; track if it was NULL for next step

modified processGroupInput: check that editgroupid was not submitted as 0 if it was not already NULL

modified updateGroup: updated query to set editgroupid to NULL if None was selected

modified confirmEditOrAddGroup: print None if editable by group was set to None

modified submitEditGroup: clear usersessiondata (unrelated, but some saves to usergroup data weren't being displayed on next page load)",VCL-116
1a5f618b36f6e9b61e09215a0895aea622f480cc,,,1,['web/.ht-inc/vm.php'],"VCL-152
problem removing vm from vmhost when vm in reloading state without a reservation

modified AJvmFromHost: reworked code so that it doesn't use computer states, but does things based on whether or not there is a reservation for the computer",VCL-152
6538542cf3cd0ac1ac5bd54af2c7467682d87b9e,,,1,['web/.ht-inc/requests.php'],"VCL-361
Error is displayed on pages showing image list if last used image is deleted

modified newReservation: reversed if/else to set $maxlen to nonzero if $imageid exists in $images",VCL-361
0723c066244fe8ae8a44ca09b4b49246d87cb938,,,1,['web/.ht-inc/utils.php'],"VCL-426
modify scheduler to not give user same computer if user had very recent, short reservation and other computers are available

added getPossibleRecentFailures that checks for recent, short reservations by the user for the requested image
modified isAvailable: added call to getPossibleRecentFailures; if it returns computers, we remove them from available machines unless that would result in no machines",VCL-426
54496c958d0f6d5e17f401f53ab851ee815f4ad2,,,1,['mysql/vcl.sql'],"VCL-405
create provisioningOSinstalltype table to map provisioning methods to OSinstalltypes

table added along with data",VCL-405
059e5af81180a4622aa9136218e1afb446eba17f,,,1,['web/.ht-inc/utils.php'],"VCL-403
make the scheduler aware of image and machine types so that virtual and bare images and computers can be mixed

VCL-425
modify scheduler to be aware of RAM allocated to VMs on each VM host

modified isAvailable:
-added a query to determine if image is bare metal or virtual based off of the image's associated OS.installtype
-modified query that gets list of computers to look at to use OS, OSinstalltype, and provisioningOSinstalltype to determine which images can be deployed to which computers so that bare and VM computers don't have to be separated by mapping any more
-if image is virtual and no VMs currently have it running, do additional query to remove any VMs whose hosts would become RAM overbooked by deploying the requested image to it because it would increase the allocated RAM beyond the physical RAM",VCL-403
a8e60e6483a490378a64f4308fc99e72cd687ee6,,,21,"['web/.ht-inc/authmethods/itecsauth.php', 'web/.ht-inc/authmethods/ldapauth.php', 'web/.ht-inc/blockallocations.php', 'web/.ht-inc/computers.php', 'web/.ht-inc/dashboard.php', 'web/.ht-inc/errors.php', 'web/.ht-inc/groups.php', 'web/.ht-inc/images.php', 'web/.ht-inc/managementnodes.php', 'web/.ht-inc/privileges.php', 'web/.ht-inc/requests.php', 'web/.ht-inc/states.php', 'web/.ht-inc/statistics.php', 'web/.ht-inc/userpreferences.php', 'web/.ht-inc/utils.php', 'web/.ht-inc/vcldocs.php', 'web/.ht-inc/vm.php', 'web/css/privileges.css', 'web/index.php', 'web/js/dashboard.js', 'web/js/privileges.js']","VCL-312
remove View Mode and any uses of user.adminlevelid

I added a new tab to the privileges section where additional user group permissions can be assigned. Now we have user privileges, resource attributes, and user permissions. The user permissions are assigned in the new section found at the new tab. The permissions are things that don't make sense to have granted related to a node in the privilege tree.

VCL-399
add a dashboard where admins can see current state of VCL system

I updated the dashboard to be able to view only by affiliation.


statistics.php: replaced all references to $viewmode with checkUserHasPerm

vcldocs.php: removed all references to $viewmode and left only dependance on $doceditors

authmethods/itecsauth.php:
-removed all references to adminlevel/adminlevelid
-added call to getUsersGroupPerms in updateITECSUser

authmethods/ldapauth.php:
-removed all references to adminlevel/adminlevelid
-added call to getUsersGroupPerms in updateLDAPUser

userpreferences.php:
-removed all references to VIEWASUSERERR
-removed all references to viewmode and submitviewmode
-removed all code wrapped in $adminleveldeveloper blocks

states.php:
-added AJpermSelectUserGroup
-added AJcopyUserGroupPrivs
-added AJsaveUserGroupPrivs

images.php:
-removed all references to $viewmode and adminlevel
-removed code that allowed the ""User group allowed to log in"" to be set for an image - no longer supported on the backend

managementnodes.php: removed one (all) reference to $viewmode

privileges.php:
-replaced all uses of $viewmode with calls to checkUserHasPerm
-modified viewNodes - added section that allows additional user group permissions to be managed
-modified userLookup - removed display of adminlevel, added display of user group permissions
-added AJpermSelectUserGroup
-added AJsaveUserGroupPrivs

requests.php: replaced all references to $viewmode with checkUserHasPerm

errors.php: modified errorHandler - replaced adminlevel check with check for ONLINEDEBUG and checkUserHasPerm

groups.php: replaced all references to $viewmode with checkUserHasPerm

computers.php:
-replaced all references to $viewmode with checkUserHasPerm
-fixed typo in confirmAddBulkComputers that kept private addresses from being displayed
-modified processBulkComputerInput to allow all users to set the private IP address range

vm.php:
-replaced all references to $viewmode with checkUserHasPerm
-modified editVMInfo to clear displayed data when selected VM host or VM profile is changed to help make it clear what is being modified because a user could select a different item but not click the submit button and it would appear as though the wrong item is being modified

blockallocations.php: replaced reference to $viewmode with checkUserHasPerm

dashboard.php:
-added ability to view information based on affiliation
-added box for viewing top 5 images from past 24 hours

utils.php:
-removed definition of ADMIN_*
-replaced all references to $viewmode with checkUserHasPerm
-removed getViewMode
-added session caching to getUserGroups
-added getUserGroupPrivs
-added getUserGroupPrivTypes
-modified getUserInfo - removed adminlevel/adminlevelid, added call to getUserGroupPerms
-added getUsersGroupPerms
-added checkUserHasPerm
-modified getContinuationsData to return noHTMLwrappers as part of the array if continuation is expired and tomode is in $noHTMLwrappers
-modified continuationsError to not print the HTML header/footer if noHTMLwrappers is in $contdata and is true
-modified sendHeaders - removed block that handled $mode == submitviewmode
-modified printHTMLHeader to not print HTML header if $contdata contains noHTMLwrappers set to 1

index.php:
-removed $viewmode
-changed reference to $viewmode to call to checkUserHasPerm

css/privileges.css: aded groupprivhelpcell, hlperm, statusfailed, statussuccess, groupprivshidden

js/dashboard.js:
-added ability to view information based on affiliation
-added updateTopPastImages

js/privileges.js:
-added selectUserGroup
-added selectUserGroupCB
-added showUserGroupPrivHelp
-added clearUserGroupPrivHelp
-added copyUserGroupPrivs
-added copyUserGroupPrivsCB
-added saveUserGroupPrivs
-added saveUserGroupPrivsCB
-added clearUserPrivStatus
-added hideUserGroupPrivs",VCL-312
b7d96bde492f1d41f8eee55d760bbb84f9f4a7f2,,,1,['managementnode/lib/VCL/DataStructure.pm'],"VCL-420
Removed /g modifier in regex argument passed to the split function. It was causing a warning to be displayed: 'Use of /g modifier is meaningless in split at DataStructure.pm line 2246'.",VCL-420
24f99db65971612e323ac9428a899f383c9f679d,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/vmware_cmd.pm'],"VCL-394
Added _get_datastore_info subroutine to vmware_cmd.pm which retrieves the datastore information from /etc/vmware/config.  This subroutine is required in order to use several subroutines in VMware.pm.",VCL-394
e08e4857e214a21bd9dcf330511bc3a9d6b217af,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm'],"VCL-394
Changes variable names from $computer_name to $vmhost_hostname where the name describes the VM host to avoid confusion.",VCL-394
34bab77b5e28edfe92fe3c48125604ab57002081,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-422
Updated Windows.pm::clean_hard_drive to detect if cleanmgr.exe exists.  This utility is not installed by default on some newer versions of Windows.  It gets installed with the Desktop Optimization feature.  If not installed, a warning would be displayed during capture.  This update should prevent the warning from appearing.

Also updated to code to launch cleanmgr.exe and immediately return. This should prevent a situation where an image capture process would hang indefinitely if cleanmgr.exe encounters a problem such as a corrupt Recycle Bin.  When this happens, the utility displays a warning on the screen.

Added Windows.pm::is_process_running.  This is called by clean_hard_drive to detect when cleanmgr.exe is finished.  It waits 2 minutes and displays a warning if cleanmgr.exe is still running, then proceeds with the capture.",VCL-422
79f706afc94caa22a936332fc6747df33ad85074,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-420
Removed unused $GATEWAY variable from utils.pm.",VCL-420
1934064923a0e0233c08ea8c70480200b429fd4a,,,3,"['managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6.pm']","VCL-421
Updated Windows commands which call ""cygstart.exe cmd.exe"" to include the full path $SYSTEMROOT/system32/cmd.exe.  Cygwin 1.7 seems to have a bug where it doesn't locate cmd.exe in the system32 directory and assumes cmd.exe resides in /usr/bin.",VCL-421
255895bc9f2580c5d664adac58fe6dd559009c7a,,,3,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm']","VCL-420
Removed Linux.pm::get_public_default_gateway subroutine. It was only returning the legacy $GATEWAY variable which isn't set anymore.

Added DataStructure.pm::get_management_node_public_dns_servers. This parses the value of managementnode.publicDNSserver and returns an array of addresses.

Reworked Linux.pm::set_static_public_address. It now calls get_management_node_public_dns_servers and includes additional error checking.

Updated OS.pm::get_public_interface_name to check for interfaces without a bound IP address. It was failing to return the public interface name if it was down.

Other
Added $max_attempts argument to OS.pm::is_ssh_responding.",VCL-420
8ddf0c63e270b59d0d6bec237bfeabf12ac384ea,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm'],"VCL-394
Changed if/else block that is used to detect which vim-cmd executable is installed on the VM host.  Full ESX includes both vim-cmd and vmware-vim-cmd.  The code was failing if it found both.",VCL-394
b677500232d053019a7b95be8def3ab9827d0276,,,1,['web/.ht-inc/vm.php'],"VCL-395
cannot add new vmprofiles

applied patch submitted by David Hutchins

-modified AJnewProfile - changed query to include vmtypeid and imageid",VCL-395
8a323cd2fef23b28330760f9f857d4e476488e34,,,1,['web/.ht-inc/computers.php'],"VCL-232
add way to delete multiple computers

applied patch submitted by David Hutchins
patch is attached to JIRA issue

-modified computerUtilities - added code to select DELETE as one of the options along with state change
-modified compStateChange - added section to handle when DELETE is selected
-modified submitCompStateChange - added section to handle when DELETE is selected",VCL-232
6d1cdbd9b93ced9d5bed5a14e71160ffcfe068e6,,,5,"['managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/utils.pm']","VCL-413
Added subroutines to Module.pm: create_mn_os_object, mn_os, set_mn_os.  Added code to State.pm::initialize to create a management node OS object.  This allows for an OS object to be created representing the management node's OS, allowing the Linux code to be used to perform operations on the management node.  This should reduce duplicated code.  Other modules created can access the management node OS object via $self->mn_os.

Other
Added utils.pm::get_file_size_info_string which accepts a byte integer argument and returns a formatted string displaying the file size in bytes, MB, and GB.

Fixed bug in utils.pm::string_to_ascii if the string argument is 0.  It had been returning an empty string instead of 0.

Fixed bug in Windows.pm::reg_query.  It was adding extra spaces to key names.",VCL-413
31185f09bc6e8d61c12d3bcd79d95b270f58ca08,,,3,"['managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT2.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT21.pm']","VCL-221
Added code to node_status() in xCAT2.pm and xCAT21.pm subroutines to check if post_load tasks have run.  If not, 'POST_LOAD' is returned instead of 'READY'.",VCL-221
5d857199d4df9ce77b1f61f4b45ebcf793f32853,,,2,"['managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm']","VCL-416
Added Windows.pm::fix_default_profile subroutine.  It loads the default user profile's ntuser.dat file into the registry, corrects known problems, and unloads the hive.  This is still being tested and isn't currently being called.  Also added reg_export, reg_load, and reg_unload subroutines which are called by fix_default_profile.

VCL-221
Added call to set_vcld_post_load_status at the end of the post_load subroutines in Windows.pm and Linux.pm to ensure that the status gets set in currentimage.txt, preventing post_load from being called more than once.

Other
Updated Windows.pm::format_path_unix to convert Windows-style variables (%x%)to Unix ($x).

Updated Linux.pm::get_available_space.  It was calculating the ""Free"" space instead of ""Available"".  Added get_total_space subroutine.  Updated get_file_size to calculate the size of a directory if a directory path argument is passed.",VCL-416
f74844f957d012441bef87486aa0fd45146320e5,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT.pm'],"VCL-221
Added check to xCAT.pm::node_status() subroutine to check if post_load tasks have run.  If not, 'POST_LOAD' is returned instead of 'READY'.",VCL-221
7a0b6c9d3abac52853b39b2bfd01e068f23c8781,,,2,"['web/.ht-inc/utils.php', 'web/.ht-inc/xmlrpcWrappers.php']","VCL-414
modify XMLRPCaddUserGroup to accept a paramter specifying value for custom field

utils.php - modified validateAPIgroupInput - if custom is passed in data array, do not validate owner and managingGroup

xmlrpcWrappers.php - modified XMLRPCaddUserGroup - pass custom as part of array to validateAPIgroupInput",VCL-414
1d4e963efdb7ad93ba07879f6c12d7dc9540dff6,,,2,"['web/.ht-inc/groups.php', 'web/.ht-inc/xmlrpcWrappers.php']","VCL-414
modify XMLRPCaddUserGroup to accept a paramter specifying value for custom field

groups.php - modified addGroup to accept 'custom' as part of the $data array passed to it; if $custom = 0, set ownerid and editusergroupid to NULL

xmlrpcWrappers.php - modified XMLRPCaddUserGroup - added optional argument 'custom' that defaults to 1; pass to addGroup in $data array",VCL-414
0c76a5676ddf2d2775a89dfaf8fc348b3a6f8ebb,,,1,['managementnode/bin/vcld'],"VCL-127
Updated vcld to add a reference to the DataStructure object for a reservation to %ENV.  This allows it to be accessed from subroutines which aren't called as a VCL::Module object method.  Also cleaned up some old, unused code.",VCL-127
f6f516f5c91369b2f1dafbe7a3e8c1d9e15d8b77,,,2,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/utils.pm']","VCL-127
Updated DataStructure.pm::get_reservation_info_string to make the output easier to read and added additional checks to make sure a value is defined or set.

Updated utils.pm::notify to include details about a failed reservation in the message subject.

VCL-154
Updated utils.pm::run_scp_command to detect ""no space left"" and ""name not known"" error messages and to handle all other error messages by detecting lines beginning with 'scp:' or 'ssh:'.",VCL-127
39c80cf20f91ef230e134c345761fbd4302387a1,,,2,"['web/.ht-inc/statistics.php', 'web/js/statistics.js']","statistics.php:
-modified viewStatistics - added code to print graph of max concurrent vm reservations by day
-modified AJgetStatData - added code to handle max concurrent vm reservations by day
-modified getStatGraphConBladeUserData - modified code to include vm host computers that had at least one vm in use on them
-added getStatGraphConVMUserData

js/statistics.js:
-modified generateGraphs - added code to handle concurrent vm usage graph
-modified generateColGraphsCB - added checks for data.items.maxy being less than 50 and 200",
6b91b1b086769bcf5660b53bbb7f430a222dc9b1,,,1,['web/.ht-inc/utils.php'],modified addSublogEntry - added code to save a vm's hostcomputerid in the sublog table; this allows us to track which host computers were in use at a given time,
3f7ccb3a3e21d46d5084a3d3ffff35020c6224e2,,,1,['web/js/blockallocations.js'],modified blockFormVerifyMonthly - fixed bug where checking for pagemode != 'edit' when should have been checking for pagemode == 'edit',
3392d83259cd7937937b5d07a82bca075b7b75e3,,,1,['managementnode/lib/VCL/Module/Predictive/Level_1.pm'],typo,
79609cfba42e599fc32a334692438f637310e12a,,,1,['managementnode/lib/VCL/Module/Predictive/Level_1.pm'],extended usage variables,
22344d2f0153058e233fb24f5c81d0bfa44b4da7,,,1,['managementnode/lib/VCL/Module/Predictive/Level_1.pm'],variable changes,
bca445c9134dcba7be2f8634874eeed478d5f8ed,,,2,"['managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm']","VCL-394
Added code to detect and repair vmdk files when they are copied.  After a vmdk has been copied via SCP, it may fail to be copied using vmkfstools or vmware-vdiskmanager.  An error is displayed: ""Failed to convert diskCreating disk ... The specified virtual disk needs repair"".  This is now checked for.  If detected, vmware-vdiskmanager -R is run and then the copy is attempted again.",VCL-394
ab601e13b0ea0433f7c5da060d34394fbca9df0d,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm'],"VCL-394
Changed file permissions from 0644 to 0755 for the image directory and files stored in the repository.  Image retrieval fails if the remote directory doesn't have execute permissions.  The command to check if the files/directory exists returns 'permission denied'.",VCL-394
5da0f651091daabb7982c899c13d97704b096fb9,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-373
Added Windows.pm::enable_rdp_audio subroutine and added call to pre_capture.  Audio redirection is disabled by default for RDP sessions under Windows Server 2008.  This should allow audio to work as expected.",VCL-373
87ff41b27ec5711d9ca970b92973f0782ac53235,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-120
Added additional registry key that gets set to Windows.pm::disable_ie_configuration_page.  The IE first run pop-up was appearing under Windows 7.  This additional registry key seems to prevent it from being displayed.",VCL-120
ed37af7c4f4841644c2647cf5fe61cf991030cc8,,,1,['managementnode/lib/VCL/Module/OS.pm'],"VCL-394
Fixed typo in OS.pm.  Wrong variable name was being set in wait_for_response.",VCL-394
95c64aca26d370e3128e0de5551ed6b863e81d9a,,,1,['managementnode/lib/VCL/Module/OS/Linux/ManagementNode.pm'],"VCL-413
Added ManagementNode.pm.  It is not yet functional.  It will eventually allow the management node's Linux OS to be controlled using the code in Linux.pm.",VCL-413
671425bdaa32dc54b0aaeaee5f93612ede777ebd,,,3,"['managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm']","VCL-394
There were several duplicated subroutines in vSphere_SDK.pm and VIM_SSH.pm which parsed file paths.  These were moved to VMware.pm.  The only subroutine needed in the helper modules is _get_datastore_info().  vSphere_SDK.pm and VIM_SSH.pm were updated so this subroutine was named the same and returned a hash reference structured the same.

Changed the way images are saved in the repository if the VM profile disk type is 'localdisk'.  It now converts the image to 2gbsparse when saving to the repository.  Saving the vmdk's using the thin format does not work well because thin becomes thick when copied via SCP and under many other situations.  The vmdk's are converted to thin if necessary when copied from the repository to the VM host.

Added code to allow the image repository path to be mounted on the VM host.  This allows VMware's utilities to be used to copy to/from the repository.  If mounted on the VM host, the vmdk's can be converted while they are copied.

Updated VMware.pm::node_status to work if it isn't called as an object method.  It can now be called normally and passed a computer ID.  If called in this manner, a DataStructure object is created for the computer argument and a VMware provisioning object is created.  The code then calls subroutines in the same manner as if called as an object method.",VCL-394
ea8c3e5a1a6cfcece0182494e8b34507ec504c00,,,6,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/Provisioning.pm', 'managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/utils.pm']","VCL-394
Updated core modules to allow a DataStructure and provisioning object to be created without a corresponding reservation.  This allows provisioning modules to implement a node_status which can be called as a regular non-object function, while the node_status subroutine uses the DataStructure and other object-oriented functions in the same manner as normal reservations.

Updated DataStructure.pm to allow objects to be created by passing an imagerevision ID.  Updated this module to populate the image and imagerevision data if it was passed an image, imagerevision, or computer ID argument.

Moved subroutines from set_os and os subroutines from Provisioning.pm to Module.pm.  Moved set_provisioner and provisioner subroutines to Module.pm.  This allows them to be available to all types of modules.

Added Module.pm::create_provisioning_object and create_os_object.  These are called by State.pm::initialize rather than having the code directly in State.pm::initialize.  This allows other objects to create an OS or provisioning object if necessary.

Other
Updated DataStructure.pm::get_reservation_info_string to display additional data.

Removed utils.pm::getdynamicaddress.  It has been replaced by code in the OS modules.

Updated utils.pm::get_computer_info to add the VM host data under the 'computer' key in the hash it returns.  This allows the data it returns to match get_request_info.",VCL-394
fcba029c03ee388fce6edc0ebd7b2ad77f82fecc,,,1,['web/.ht-inc/requests.php'],"VCL-412
clicking on tomaintenance reload reservation in timetable gives an error

modified viewRequestInfo - set $reservation to $request['reservations'][0] if request stateid or laststateid = 18",VCL-412
fe5acc92866f54ab6ea1f97d97551415e7c7e9e9,,,5,"['web/.ht-inc/images.php', 'web/.ht-inc/managementnodes.php', 'web/.ht-inc/privileges.php', 'web/.ht-inc/utils.php', 'web/js/images.js']","VCL-401
add manageMapping resource attribute to control resource mapping

utils.php: added getResourcePrivs

managementnodes.php:
-modified these functions to look at manageMapping attribute instead of manageGroup for mapping privileges:
  -selectMgmtnodeOption, viewMgmtnodeMapping, submitMgmtnodeMapping

images.php:
-modified these functions to look at manageMapping attribute instead of manageGroup for mapping privileges:
  -selectImageOption, viewImageMapping, imageMappingGrid, submitImageMapping, jsonImageMapCompGroups, jsonImageMapImgGroups, AJaddCompGrpToImgGrp, AJremCompGrpFromImgGrp, AJaddImgGrpToCompGrp, and AJremImgGrpFromCompGrp
-converted all references to json-comment-filtered to just json and to use sendJSON function

privileges.php:
-modified viewNodes:
  -instead of hardcoding resource types, call getResourcePrivs to get them
  -call getResourcePrivRowHTML instead of printResourcePrivRow and then print the returned HTML and JS
  -for add resource dialog, loop through resource privs to print checkboxes instead of printing them all directly
-modified selectNode:
  -instead of hardcoding resource types, call getResourcePrivs to get them
  -due to combining printResourcePrivRow and getResourcePrivRowHTML, needed to add a few str_replace's to prepare html for sending in ajax response
-combined printResourcePrivRow and getResourcePrivRowHTML
-modified getResourcePrivRowHTML:
  -added newlines
  -added manageMapping to checkboxes that don't get printed if don't have proper rights
  -added check to not print available checkbox for schedule and management node groups
  -added check to not print manageMapping for schedule groups
  -removed preg_replace for single quote; moved replacing them to selectNode
-modified AJsubmitAddResoucePriv to get resource types from getResourcePrivs instead of hard coding them
 
js/images.js: converted all references to json-comment-filtered to just json",VCL-401
0490a45251d0ffd43fe3948591ea8287a6619596,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-411
Added call to Windows.pm::reserve to delete the VCL*cmd logon and logoff scripts if they exist.  This allows images already loaded to be fixed if affected with this problem.",VCL-411
f69b972de844afb6280d75f335e380ac3652ce6c,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-411
Added calls to Windows.pm::post_load and clean_hard_drive to delete the VCL*cmd logon and logoff scripts if they exist.  Added call to remove_group_policy_script to delete the file that was specified.",VCL-411
ebeae5e2d61f421c0947225fa0ea4e6e8657740f,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-394
Added Linux.pm::set_file_permissions subroutine.  This will be called from VMware.pm after an image is copied to the image repository to set the correct permissions.  VMware's methods set the permissions to 0700 when a virtual disk is copied.  This prevents image retrieval from working.

Also added -f to the rm command in delete_file.",VCL-394
5a0179ef81c960e34ae4b386eb64d34ec1193fe3,,,1,['web/js/dashboard.js'],"VCL-399 - add a dashboard where admins can see current state of VCL system

modified timestampToTime - removed some unused code",VCL-399
301747715ed05f24174162c1e324e566e0f62b2c,,,4,"['web/.ht-inc/blockallocations.php', 'web/.ht-inc/states.php', 'web/.ht-inc/utils.php', 'web/js/blockallocations.js']","VCL-406
add some charts to see how machines are allocated to block allocations

utils.php: modified getDojoHTML - added case statements for viewBlockAllocatedMachines

blockallocations.php:
-modified blockAllocations - added link to page of allocated machines charts
-added viewBlockAllocatedMachines
-added getChartHTML
-added AJgetBlockAllocatedMachineData

states.php:
-added viewBlockAllocatedMachines
-added AJgetBlockAllocatedMachineData

js/blockallocations.js:
-added updateAllocatedMachines
-added updateAllocatedMachinesCB
-added timestampToTimeBare
-added timestampToTimeVirtual",VCL-406
f085d9de1df7ee3edadfa8cf663d28efdd537500,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-404
Added ""--color=never"" argument to ls command that is called in Linux.pm::create_directory() to prevent color code escape sequences from being returned in the output.",VCL-404
8d7da7f00fb7460ddf830afee49271f2273e9af6,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-223
Updated Windows.pm::search_and_replace_in_files() to escape special characters in the search pattern argument.  It was not working correctly if the pattern contained special characters.  A line containing ""-bash: <error message>"" would be displayed.  This wasn't being caught when the output was parsed.  Updated regex to catch this.

Updated Windows.pm::sanitize_file() to not return immediately if it fails to search/replace any of the paths.  It now attempts to sanitize all of the paths and keeps track of any errors encountered.

VCL-402
Added Windows.pm::disable_login_screensaver() and a call in Windows.pm::pre_capture() to call this subroutine if the computer is a VM.",VCL-223
84873a44db406b2629e6260794ed0e6f5c7316a9,,,1,['web/.ht-inc/dashboard.php'],"VCL-399 - add a dashboard where admins can see current state of VCL system

filled in header documentation for each function
removed a few unused queries",VCL-399
4e7ad41e985f69e23f2ffc4fb0c936791e67b8f2,,,8,"['web/.ht-inc/dashboard.php', 'web/.ht-inc/states.php', 'web/.ht-inc/statistics.php', 'web/.ht-inc/utils.php', 'web/css/dashboard.css', 'web/js/code.js', 'web/js/dashboard.js', 'web/js/statistics.js']","VCL-310 - remove jpgraph dependency
replaced all jpgraph code with dojox's charting api


VCL-399 - add a dashboard where admins can see current state of VCL system
added a new section to the site that is a page displaying various information about the site that gets updated with AJAX every n seconds; currently there are the following sections of information:
Current Status - some general info
Top 5 Images in Use
Top 5 Long Term Images in Use
Top Recent Computer Failures
Top Recent Image Failures
Block Allocation Status
Past 12 Hours of Active Reservations

statistics.php
-removed require_once code for jpgraph
-modified viewStatistics - when computing length of reservation, if $length ends up being < 0, set it to 0
-changed img references to jpgraphs to divs for dojox charts
-added AJgetStatData
-removed sendStatGraphDay
-modified getStatGraphDayData - removed labels from $data, added xlabels to $data, added maxy to $data
-removed statXaxisDayCallback
-removed sendStatGraphHour
-modified getStatGraphHourData - changed $data['points'] to be an array of data, added maxy to $data
-renamed statXaxisHourCallback to statHourFromatX
-removed sendStatGraphDayConUsers
-modified getStatGraphDayConUsersData - removed labels from $data, added xlabels to $data, added maxy to $data
-removed statXaxisDayConUsersCallback
-removed sendStatGraphConBladeUser
-modified getStatGraphConBladeUserData - removed labels from $data, added xlabels to $data, added maxy to $data
-removed statXaxisConBladeUserCallback

utils.php
-modified initGlobals - added dashboard to section that does require_once based on the mode
-modified getNavMenu - removed some old stuff left in there related to ecu $skin; added menu item for dashboard
-modified getDojoHTML - added sections for viewstats and dashboard modes

states.php
-added dashboard to entry actions
-added AJupdateDashboard and AJgetStatData to $noHTMLwrappers
-removed statgraphday, statgraphhour, statgraphdayconcuruser, and statgraphdayconcurblade
-added AJgetStatData
-added dashboard section with modes dashboard and AJupdateDashboard

js/code.js - modified errorHandler function reference - list of args were wrong; changed from 'type, error, data' to 'error, ioArgs'; changed args.dojoType to error.name (not sure if this is correct), changed alert to display better message

dashboard.php - initial add to source control
css/dashboard.css - initial add to source control
js/dashboard.js - initial add to source control
js/statistics.js - initial add to source control",VCL-310
0e55ef5886c465617db511fb7da70e0e32d88d23,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],Added back variable name that was accidentally chopped off in last commit of Linux.pm when indentation was fixed.,
007e0b69a50e6f6458b129519e1e8c4f2dcdd683,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-397
Updated Linux.pm::update_public_hostname to first attempt to determine the registered hostname by running ipcalc on the management node.  If this fails, ipcalc is run on the remote Linux computer.  Also updated this subroutine to call Linux.pm::get_public_ip_address rather than the old utils.pm::getdynamicaddress subroutine.

Other
Updated Linux.pm::create_directory to detect if the directory already exists and display a message accordingly.

Fixed indentation.",VCL-397
d8757318ec2b7623687332b2be16340270e3afee,,,2,"['managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5.pm']","VCL-390
Updated Windows.pm::get_network_configuration to call utils.pm::is_public_ip_address().  This code was duplicated in the Windows.pm subroutine and was missing some additional logic included in utils.pm.  Previously, the Windows subroutine considered 169.254 addresses public and would return the first one it found if the public information was requested.  This caused the wrong information to be returned if another interface with a valid public address exists.

VCL-391
Updated places where tsshutdn.exe or shutdown.exe is called to only call tsshutdn.exe if Windows Server 2003 is used.  I've seen this hang on Windows XP.

Other
Added Windows.pm::clear_event_log.  This is called before a computer is shutdown if Sysprep is not used.  This causes only the events that happen during and after an image is loaded to appear in the Event Viewer, making it easier to determine the events related to that image being loaded and also removing older security events which the reservation user shouldn't see.",VCL-390
749a04400fbbde314ebe7fd498f156951b752ee4,,,8,"['managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vmware_cmd.pm', 'managementnode/lib/VCL/Module/Semaphore.pm', 'managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/utils.pm']","VCL-394
Updated Module.pm::get_semaphore to accept a semaphore ID string rather than just a specific file path.  Added code to Semaphore.pm to display the name of the process holding a lock on a file if unable to obtain a lock.

Updated VMware.pm:
-Added code to normalize the datastore and VM paths when initialized in case they arrive escaped.  Subroutines which use these paths expect them to not be escaped.
-Commented out code which deletes the vmdk directory on the VM host during image capture if it has been copied to the image repository for safety.
-Added check in prepare_vmx to determine if the network name should be specified using 'networkName' or 'vnet'.
-Added 'svga.autodetect = TRUE' to vmx files.  This should allow the screen to be displayed properly in the vSphere console.
-Added code to obtain a semaphore lock in prepare_vmdk to prevent multiple concurrent copies of the same files.
-Added code to check if the image repository path is mounted on the VM host. If so, files are copied using VMware's disk copy methods.  If not available (meaning repository path resides on the management node), SCP is used.
-Added vmware_cmd.pm which can control a VMware Server 1.x host using vmware-cmd.

Other
Made minor change to output in Module.pm::new and State.pm::Destroy.  Commented out unnecessary log messages in utils.pm::nmap_port.",VCL-394
8fe9e1ae92baf643b002d981d09db5fc3ca3e273,,,3,"['managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6.pm']","VCL-196
Removed the explicit System32 path in all the places cmd.exe is called.  Calling cmd.exe with the full path causes problems if the Windows OS is 64-bit.  In this case, System32 is C:\Windows\Sysnative, pointing to the 64-bit copy of the System32 directory.  When cmd.exe is called in this manner, you're running the native 64-bit cmd.exe shell, which does not have access to the Sysnative link.  As a result, if you pass a Sysnative path to a subroutine which calls cmd.exe, this path doesn't exist with the cmd.exe shell and problems occur.

Updated Windows.pm::create_directory().  Removed unused option which allowed an array of directories to be passed.  This was done to simplify the subroutine.

VCL-390
Added code to Windows.pm::get_public_ip_address to detect if an auto-generated 169.254 IP address is retrieved.  It this is the case and DHCP is being used, the subroutine attempts to renew the public IP address to obtain a valid one.

VCL-391
Added check to see if tsshutdn.exe exists on the computer where shutdown.exe is called.  shutdown.exe often fails on Windows 2003 when called remotely and tsshutdn.exe works.  tsshutdn.exe is called if it exists.  Otherwise, shutdown.exe is called.

Other
Improved output in Windows.pm::delete_file if an error occurs.

Changed return code of Windows.pm::delete_files_by_pattern from undefined to 1 if the base directory does not exist (meaning there's nothing to delete).  This was causing warnings to be displayed during capture when attempting to delete some files.

Added Windows.pm::create_text_file.  It isn't being called by anything yet.",VCL-196
80937ccda1f6a5899848a6d761df905cce759b09,,,1,['managementnode/lib/VCL/Module/Provisioning/vmware.pm'],"VCL-165
Added check to make sure SSH command that lists the datastore contents was successful in vmware.pm::load().  Without this check, the process dies immediately if the SSH command fails with a 'Can't use an undefined value as an ARRAY reference at...' message when the command's output is parsed later on.",VCL-165
04533cb2ad63543cf8747def4fe78c0a8bea5bcc,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT.pm'],"VCL-387

not accounting for caps in regex",VCL-387
fbe6fed1f40b0ae5f8edede18cc9655147d95b83,,,1,['CHANGELOG'],Added VCL-386 to list of bugs fixed in 2.2 in CHANGELOG.,
a1b72318d3003d79bff9cb25c86a434507dc3d34,,,4,"['managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm']","VCL-145
Updated Windows.pm and Version_5.pm so that Windows 5.x image capture processes don't fail if Sysprep is enabled and no stroage driver .inf files are found.

VCL-298
Updated VMware.pm to remove the VM from the VM host when the VM is unassigned via the website.

Other
Added calls to kill the logon screen saver process in the Windows code before a reboot or shutdown is attempted. This occasionally causes a reboot or shutdown to hang.",VCL-145
05828ad78f11e32eaafe0a8c46560e6419180f82,,,1,['managementnode/lib/VCL/Module/Provisioning/vmware.pm'],"VCL-386
another typo..",VCL-386
268acfb7662bc36f1066ef52eb786b3ea0bfe461,,,1,['managementnode/lib/VCL/Module/Provisioning/vmware.pm'],"VCL-386

typo",VCL-386
9397794abd5796cf021312f5de2b193769d62e73,,,1,['managementnode/lib/VCL/Module/Provisioning/vmware.pm'],"VCL-386

added switch_vmhost_id routine call",VCL-386
2f16c8208f5c8464447703d4936a7b553457ae46,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm'],"VCL-298
Updated VMware.pm to call set_vcld_post_load_status() after executing the OS module's post_load subroutine to prevent the post_load tasks from being executed multiple times.",VCL-298
e5fe0d287281c3318a097dd796acb7c81ced6a95,,,1,['web/.ht-inc/vm.php'],"VCL-303
Updated AJvmFromHost and AJvmFromHostDelayed in vm.php where tomaintenance reservation to look up the imageid and imagerevisionid for the noimage image.",VCL-303
52ee5a9a6597f02260c065cc497aaad1b04e34a9,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-196
Fixed bug in reg_query which affects Windows 6.x.  The reg.exe QUERY output is slightly different for Windows 5.x and 6.x.  The output fields in 5.x are separated with tabs whereas 6.x uses multiple spaces.  Fixed the regular expression to locate spaces rather than tabs.",VCL-196
210561dd434bae1e98c1eab08ff9fdd004427411,,,1,['README'],added Bundled 3rd Party Software section with version of Dojo Toolkit included,
c5d02c78bee2aefffd5625bbdc58fdeb07c50494,,,2,"['INSTALLATION', 'README']",Updated management node installation info.,
fd83b2b96a2cb1857953dff4b19962e0a24c556d,,,1,['CHANGELOG'],updated list of 2.2 changes,
f8cfe0a5b1401367545333db3c31d3c6129951d9,,,1,['web/.ht-inc/computers.php'],modified editOrAddComputer - set size=15 for ipaddress,
e6a905482121434675b4b7faec321167dc278df1,,,4,"['managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6.pm', 'managementnode/lib/VCL/utils.pm']","VCL-196
Updated commands in the Windows modules that call cmd.exe to not use Sysnative within the cmd.exe argument because it is not available once within the 64-bit cmd.exe shell.

Other
Updated utils.pm::format_data to add a : to the beginning of each line returned by Dumper. This causes the output to be indented in the log file.  Otherwise, leading spaces are stripped off.",VCL-196
e9b9f8e37808719e9e91148733304d2c17400408,,,1,['mysql/vcl.sql'],added mapping for allManagementNodes->All VM Computers and allManagementNodes->newvmimages,
40e5721464b60bfe923ea38b071a1105d4cd982e,,,2,"['mysql/update-2.2.sql', 'mysql/vcl.sql']","VCL-357
Updated vcl.sql and update-2.2.sql.  Added entry to module table for the base module.  Fixed a bug in the AddIndexIfNotExists procedure in update-2.2.sql which caused multiple indexes to be added.",VCL-357
8d28b2e0b09a926b79c7ae2d01e2868593d166d0,,,1,['UPGRADE'],initial add,
a28d01bcbaa3b7100fc0d60badcf34ec52623b9f,,,1,['managementnode/lib/VCL/Module/Provisioning/vmware.pm'],changed legacy value identity to managenode_keys,
9823a17e73b003774d5bc893afe6618bf49982ba,,,2,"['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm']","VCL-298
Removed code which overrode the vmdk controller type if it is set to IDE in the vmdk file and ESX is being used.  It now leaves the value set to IDE and the vmx file is configured with this value.  Added code to override the hardware version if it's set to 4 in the vmdk file, ESX is being used, and the controller type is IDE.",VCL-298
6bdd58a7f93021af43cb4fd6d5ac2d91242e067c,,,1,['managementnode/lib/VCL/Module/Provisioning/vmware.pm'],typo,
1ac8c7d94d4ebeef2c0c08b99068340c4b40b1e6,,,9,"['managementnode/tools/Windows/Scripts/add_post_load_run_key.cmd', 'managementnode/tools/Windows/Scripts/configure_networking.vbs', 'managementnode/tools/Windows/Scripts/debug_info.cmd', 'managementnode/tools/Windows/Scripts/delete_post_load_run_key.cmd', 'managementnode/tools/Windows/Scripts/post_load.cmd', 'managementnode/tools/Windows/Scripts/run_newsid.cmd', 'managementnode/tools/Windows/Scripts/set_computer_name.vbs', 'managementnode/tools/Windows/Scripts/sysprep_cmdlines.cmd', 'managementnode/tools/Windows/Scripts/system_startup.cmd']",set executable bit on Windows cmd vbs files,
d29a4a25347b3fecfbc623dd692aeff3ff8dbc37,,,0,[],"VCL-380
Removed empty directories for Windows utilities which are no longer needed.",VCL-380
499d7a592a9f5e04f09507bdf973d5e5f32246ee,,,1,['INSTALLATION'],updated info on running vcl -setup,
92e2d0e18588a4fdf59330087c76c73e884cdaf3,,,1,['README'],added Digest-SHA1 to requirement perl module list,
b466491522d92436a4e44a3300412826e3f7f730,,,1,['RELEASE_NOTES'],added updated roadmap,
a317d442315a450ff6d1cafc583ad12ecbeb4c07,,,1,['mysql/vcl.sql'],added mapping for allvmimages -> all VM computers,
1be6eab7386f5e7c35d43ca6a23f96d0509c2dd1,,,1,['README'],added link to online install guide; added php-ldap as a possible system requirement; removed dojo toolkit from system requirements,
1f905b7cd39a686b850e4de5c482aa79d5701713,,,1,['CHANGELOG'],added vcl-382 jira issue,
a81b0bcbb0df28806bf044782dae51a478408204,,,1,['managementnode/lib/VCL/Module/Provisioning/vmware.pm'],"VCL-382
added support for free server 1.x using network datastores",VCL-382
56f18fd07f06151d3ee7c90f09a036e429f8c0f8,,,1,['INSTALLATION'],"updated version number, database instructions, web code instructions, and adding extra local accounts",
f0ca8d69bccf758944539727bd74a45768db0b10,,,1,['web/.ht-inc/computers.php'],"changed maxlength from 14 to 15 for ipaddress fields in viewComputers, editOrAddComputer, and bulkAddComputer",
e57b922d38224ae75be7270709be443ea4f76016,,,1,['RELEASE_NOTES'],"changed version number

removed 2.1 from roadmap

swapped cluster reservations and vmware free server 2.x between 2.2 and 2.3

added note for people wanting to develop something for VCL explaining to discuss things on the vcl-dev list before starting work on it",
78a92689735eb0da9e7cd8ed47349a04ca4aebd6,,,2,"['mysql/update-2.2.sql', 'mysql/vcl.sql']",added comments field to blockRequest table,
cb8fadb73b48df33193e5a027b05bf2b0251b982,,,1,['web/.ht-inc/utils.php'],"modified checkAccess - removed ADMIN_DEVELOPER check for blockAllocations mode
modified getNavMenu - removed ADMIN_DEVELOPER check for blockAllocations link",
96493d505be3b5495b063ad6708fa6c914524272,,,1,['web/.ht-inc/userpreferences.php'],modified processUserPrefsInput - added check for existance of newpassword in $_POST before doing any password stuff,
b7a46860ab61d81dc289ff8a4f2081cf67c00f7e,,,1,['web/.ht-inc/statistics.php'],added checks for existance of jpgraph directory before doing require_once for files there,
ae8f8a1e5e11117a2f5bbfaab9f7ed3acfd82750,,,1,['mysql/vcl.sql'],set forcheckout to 0 for noimage,
5245b47c4fe79567e8d40831fcf20c81470aab39,,,1,['web/.ht-inc/requests.php'],modified newReservation - fixed bug where $imageid being empty would throw an error when setting $maxlen,
1d164304af558d321e73499c4cf6819f066af1aa,,,1,['NOTICE'],added note about including the Dojo Toolkit,
2a3c65f98705f45097b3cc766cc5a09ff8a5fb64,,,1,['LICENSE'],added Academic Free License for Dojo Toolkit,
95c84d129d6fa4e4530344631c66986dabb8eb85,,,1,['README'],changes for 2.2 release,
0e2759db7d219d955020c48f9d8afffc6f6a8d7a,,,1,['CHANGELOG'],removed dep changes,
90662885b9f648b0554fe6b19ae798bdaaaeee05,,,1,['CHANGELOG'],web frontend had no changes in dependencies from 2.1; removed items from list,
eecd9b55fdba6fbc1e900cbbbf2cb0b8e710c2e9,,,1,['CHANGELOG'],Added 2.2 jira release notes with dependiences,
b5aa3e86e485eaef1ffcca02a4e3216b21d6bb17,,,1,['managementnode/lib/VCL/blockrequest.pm'],Changed wording for block allocatoin notice.,
ca8c68972dac38788442df0df0a1024fd76b22c8,,,1,['web/.ht-inc/conf-default.php'],changed affiliationid value for EXAMPLE1 LDAP from 2 to 3 because of the Global affiliation,
9afed6b26ff247cc998769b7fd3d0fc3197997f0,,,1,['managementnode/bin/install_perl_libs.pl'],"VCL-380
Added Digest::SHA1 to list of URLs in install_perl_libs.pl.",VCL-380
204ac9bb3f76f4693b8e0538fbdac2997f81445d,,,1,['managementnode/bin/install_perl_libs.pl'],"VCL-380
Moved MakeMaker URL before StackTrace because it requires it.",VCL-380
17371662f68ed7d2151988075a8d478f3f673351,,,1,['managementnode/bin/install_perl_libs.pl'],"VCL-380
Updated install_perl_libs.pl script.  Some of the URLs were out of date.  Added version comparison checking so that modules are installed if the existing version is older.  Removed URLs for modules required for Jabber since that feature is not used.",VCL-380
413ee48b27624ea5da37439f5d6f1fb29409021b,,,2,"['mysql/update-2.2.sql', 'mysql/vcl.sql']","VCL-357
Updated vcl.sql:
Removed entry for old VMware module from the provisioning table.  Removed entry for ESX provisioning module in provisioning and module tables. Renamed new VMware module to remove vSphere from the name.  Updated update-2.2.sql to match renamed entries.",VCL-357
88bdbb93237b636dc35279c621a19f52f1b1882e,,,1,['web/.ht-inc/computers.php'],modified addComputerSetVMHostProfile to say 'Add Computers' if adding multiple,
0adbfa1c485c487c4216893a70388497b147b92d,,,3,"['web/.ht-inc/utils.php', 'web/.ht-inc/vm.php', 'web/js/vm.js']","renamed vmprofile.nasshare to vmprofile.repositorypath

utils.php: modified getVMProfiles

vm.php:
-modified editVMInfo
-modified AJupdateVMprofileItem

vm.js:
-modified VMHostDataCB
-modified getVMprofileDataCB
-modified delProfile",
4e5e91b569fa8e270f6a3c6c57d3607c952e2670,,,2,"['managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/utils.pm']","VCL-164
Added setup() and setup_add_local_account() to Module.pm to allow local accounts to be added via 'vcld -setup'.  Updated utils.pm::get_user_info() to accept an optional affiliation identifier argument because.  The user.unityid column is not unique, but user.unityid+user.affiliationid must be unique.  This argument allows the affiliation to be specified so that a single user is found even if the same unityid is used for different affiliations.

Other
Changed utils.pm::format_data to use Data::Dumper.  The old subroutine was very difficult to debug/maintain and Data::Dumper performs the same function.

Removed progressive delay in between failed SSH attempts in utils.pm::run_ssh_command.  The progressive delay never added any benefit, but delayed a process before it failed.",VCL-164
53f2ecfd73089b02eb4bee7e3b909a5445b6e5f5,,,1,['mysql/vcl.sql'],"added ""All VM Computers"" to resourcegroup table",
76b1650ccd872eb384b68f5ba97c1d90af8a0a6f,,,1,['web/.ht-inc/managementnodes.php'],fixed another typo in addMgmtnode - publiDNSserver -> publicDNSserver,
32f5ae76453c0cb772be8bb796d094fadb676a98,,,1,['web/.ht-inc/managementnodes.php'],"-modified editOrAddMgmtnode - added extra info to installpathhelp tooltip
-modified addMgmtnode - fixed bug where ) was missing at end of list of fields in insert query",-
e8a38e199483f6194b6ada01c6b9b58fdd46d0e2,,,1,['web/testsetup.php'],"-removed check for dojoAjax directory
-changed instructions on installing dojo toolkit from version 1.1.0 to 1.5.0
-changed instructions on installing jpgraph from version 2.x to 3.x",-
2f2f7c608d09848e32780c9d83e3d6f06f1be327,,,1,['web/.ht-inc/requests.php'],modified printResearveItems to print the correct timezone based on what is set in conf.php instead of admins having to set it manually,
144e8a4ebc972ad28289de3b9b1490c1a0ec27f8,,,1,['managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm'],"VCL-298
Fixed an 'undefined variable' bug introduced the the previous commit in VMware.pm that was the result of a copy/paste.

Renamed get_image_size() to get_image_size_bytes().  Created new sub called get_image_size().  This was done because image.pm calls get_image_size() and expects the result to be in MB",VCL-298
bc885bd0ecb780ebd68c312f84baa6a2d1f94bd7,,,3,"['web/.ht-inc/computers.php', 'web/.ht-inc/errors.php', 'web/.ht-inc/states.php']","VCL-313
need a way to set computers as vmhosts without a bare metal provisioning engine

this is just some initial work on this so that people can get started with VCL using preloaded vm hosts without having to touch the database directly;
it allows computers to be added in the vmhostinuse state, but the state cannot be set to vmhostinuse afterward without xCAT

computers.php:
-modified viewComputers, editOrAddComputer, and bulkAddComputer - added vmhostinuse as an option for the state
-modified confirmEditOrAddComputer and confirmAddBulkComputers- if stateid = 20 (vmhostinuse) set nextmode to addComputerSetVMHostProfile
-added addComputerSetVMHostProfile
-modified submitAddBulkComputers and addComputer - if stateid = 20, insert entry into vmhost; changed from using SELECT LAST_INSERT_ID to calling dbLastInsertID; changed queries to insert into resourcegroupmembers to be a single query
-modified computerUtilities - changed text for setting state to vmhostinuse to 'convert to vmhostinuse' to help distinguish from adding computers in the vmhostinuse state
-modified compStateChange - for vmprofile, use inline prints to create select object instead of calling printSelectInput since it doesn't have name or prettyname

errors.php:
-removed 196, 197, 236, and 237

states.php: added addComputerSetVMHostProfile",VCL-313
6051ec3c03a75d8c9fd9e52771c6c24f95c4939d,,,3,"['managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm']","VCL-298
VMware.pm:
Added code to node_status to check if the OS module's post_load tasks have run if the computer is responding and return 'POST_LOAD' if the computer is up but the tasks have not been run.

Changed how vmx directory is named if the VM is persistent to match the nonpersistent name. This allows a nonpersistent reservation a preloaded VM if that VM was configured for persistent mode.

Added post_maintenance_action subroutine.  This allows VM's to be removed from a host via the website.

vSphere_SDK.pm:
Renamed several subs which are private to the module to begin with an underscore to separate them from other subs.

Added check in copy_virtual_disk if the adapter type argument isn't specified, the source vmdk is configured to use IDE, and the VM host is using ESX. This is overridden to use lsiLogic.

Added code to delete_file to check if the path specified is the root of a datastore.  A critical warning is generated if this occurs and nothing is deleted.

VIM_SSH.pm:
Added code to detect the name of the vim-cmd executable installed on the VM host.  VMware Server 2.x uses vmware-vim-cmd whereas ESXi uses vim-cmd.

Fixed bug in vm_unregister().  It was passing the vmx path rather than the VM ID to vim-cmd.",VCL-298
3cdd76de41e2d98e850e939924cdb7d9b63ff715,,,3,"['managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6.pm']","VCL-196
Added full System32 path to all .exe calls in the Windows modules.  There were problems with some utilities such as qwinsta.exe being run on 64-bit versions of Windows.  The full path wasn't specified and the utility only resided in the %Sysnative% directory.  This resulted in the .exe not being found.

Made structure of subroutines that call get_system32_path() consistent.

VCL-164
Added call to wait_for_power_off in Windows.pm::shutdown() rather than immediately powering off the computer after it becomes unresponsive.

Other
Renamed Windows.pm::filesystem_entry_exists() to file_exists to match other OS modules.

Updated Windows.pm::delete_File::Basename() to run faster.  All of the commands to set the owner, permissions, and delete the file are now concatenated and sent as a single SSH command rather than several different SSH commands.

Reworked Windows.pm::reg_query() to return a single value if the value argument is specified or a hash if it isn't specified.",VCL-196
529b08c3f1494dd1ec878eb24666fb34cd401187,,,1,['web/.ht-inc/conf-default.php'],"moved HELPFAQURL out of required section
added descriptions to HELPURL, HELPEMAIL, ERROREMAIL, $clickThroughText",
13cf471f881e1c97017e48f2a7a5d67e9a8c5628,,,1,['web/.ht-inc/conf-default.php'],"changed MIN_BLOCK_MACHINES to 1
changed FILTERINGSELECTTHRESHOLD to 1000
changed affiliationid for Local Account to 1",
cb5e6e8acdce1daf7c4f1f554ade5917102a1add,,,1,['mysql/phpmyadmin.sql'],"changed OS from name to prettyname
added blockTimes
changed module from perlpackage to prettyname
changed resourcepriv from resourcegroupid to type",
1654853b2e423e995a8179cabcae325204469ed2,,,2,"['web/.ht-inc/.htaccess', 'web/.ht-inc/maintenance/.htaccess']","initial add 

On the web servers at NCSU where VCL was initially developed, .ht-inc directories were blocked from being delivered. I realized this wouldn't be the ca
se on alot of servers where VCL would be installed. So, these files should keep anything in here from being delivered.",
98559e311a0493a0a919ed5f95b4f19b540af533,,,7,"['web/css/privileges.css', 'web/js/blockallocations.js', 'web/js/privileges.js', 'web/js/requests.js', 'web/js/schedules.js', 'web/js/sitemaintenance.js', 'web/js/vcldojo/TimeTextBoxEnd.js']",added ASF license header,
07eaadb4c109bc705e164e4c3f2bc1fb6dc64723,,,2,"['web/.ht-inc/requests.php', 'web/js/requests.js']","VCL-377
multiple clicks on Create Reservation button gives multiple reservations

requests.php: modified newReservation - changed continuation for submitRequest to not be multicall

js/requests.js:
-added global resSubmitted initialized to 0
-modified checkValidImage - if resSubmitted is 1, then return false; otherwise, set resSubmitted to 1 before returning true",VCL-377
3ea737414c71ae4920535d213a8d866f52861996,,,1,['web/.ht-inc/utils.php'],"VCL-378
reservation can be extended into a block allocation for user not in block group

-modified isAvailable - changed $skipRemoveUsedBlock to $altRemoveBlockCheck, then toward end of foreach, if $altRemoveBlockCheck is true, call editRequestBlockCheck and return 0 if it returns true
-added editRequestBlockCheck - checks to see if $compid is part of an upcoming block that user is not part of or for a different image

-modified maintenanceCheck - if no files in maintenance directory, $files is not an array and is then invalid for foreach; added check for it being an array to surpress the warning",VCL-378
7a9e73f42aab21a837596a3fe05685312d30b86d,,,3,"['managementnode/lib/VCL/Module/OS/Windows/Version_5.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6.pm', 'managementnode/lib/VCL/Module/Provisioning.pm']","VCL-164
Added commands to Version_6.pm::run_sysprep to set the interfaces to use DHCP immediately before Sysprep.exe is run since the call to enable DHCP in Windows.pm::pre_capture was removed.  Also added commands to delete the default routes so that the persistent routes are not saved in the image.  This now matches the way sysprep.exe is called for version 5.x.

Added Provisioning.pm::wait_for_power_off() subroutine. Updated run_sysprep subroutines to call wait_for_power_off after sysprep.exe is executed.",VCL-164
a8556f0026ae42b55ea1ae7352c0a22ca9fbe1c3,,,4,"['managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/Vista.pm']","VCL-223
Added sanitize_files subroutines to Windows.pm, Version_5.pm, and Version_6.pm, which remove the Windows root password from various files depending on the version of Windows.  Added call to Windows.pm::post_load.

VCL-190
Added %TIME_ZONE_INFO to Windows.pm containing the names, abbreviations, and Windows code numbers for all configurable time zones.  Added get_time_zone_name and get_time_zone_code subroutines to Windows.pm.  These determine the name and Windows numerical code the correspond to the time zone configured for the management node.

Updated Version_5.pm::get_sysprep_inf_contents to call get_time_zone_code and use this value when generating the sysprep.inf file rather than using the hard-coded value for EST.

Updated Version_6.pm::run_sysprep to call get_time_zone_name and replace the value in the Unattend.xml file.

Other
Removed prepare_newsid subroutine from Windows.pm and changed Vista.pm to call prepare_post_load rather than prepare_newsid.

Reduced the timeout values in Version_6.pm::wait_for_response if Sysprep is not used.  Loads were waiting for 3 minutes unnecessarily on Version 6 images which don't use Sysprep.",VCL-223
7d946130b3f1285c2fd1d8cd56556b410e07f604,,,3,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/utils.pm']","VCL-221
Updated code which checks if the OS post-load tasks have run before reserving a computer.  The code in new.pm would attempt to call post_load regardless of the provisioning module being used.  The OS module's post_load subroutine should only be called by the provisioning modules so they have the flexibility to call it or not.  Added 'POST_LOAD' return value option for provisioning modules' node_status subroutines.  Code in new.pm checks for this return string and calls post_load if necessary.

Added check in OS.pm::get_vcld_post_load_status to make sure the OS module implements a post_load subroutine.  If not, it returns true indicating post_load doesn't need to be called.

Updated OS.pm::set_vcld_post_load_status to check the OS type, and set the correct line endings in currentimage.txt based on if the OS is Windows or not.

Other
Reworked utils.pm::nmap_port to call run_command.

Fixed bug in utils.pm::run_ssh_command where it was checking if the command was a VMware command.  It was checking the output rather than the command string.

Fixed typo in utils.pm::get_management_node_info.",VCL-221
af7e723ba57707d063e2ca6f06e09827daa4412b,,,3,"['web/.ht-inc/blockallocations.php', 'web/.ht-inc/utils.php', 'web/js/blockallocations.js']","VCL-254
block request improvements

when edit a block allocation, removed requirement that start date be today or later

utils.php: modified getDojoHTML - set javascript variable pagemode to 'edit' if editing, 'new' otherwise

blockallocations.php:
-modified blockAllocationForm - initially set owner of block allocation to self
-modified AJblockAllocationSubmit - if editing and start date is < today, call createWeeklyBlockTimes/createMonthlyBlockTimes with a start date of today
-modified getCurrentBlockHTML, getUserCurrentBlockHTML, and getPendingBlockHTML - set ORDER BY on several queries for blockWebDate/blockWebTime data
-modified processBlockAllocationInput - fixed problem where expire time of list might not be last date; if editing, allow start date to be in the past

js/blockallocations.js: modified blockFormVerifyWeekly and blockFormVerifyMonthly to allow the start date to < today if editing and to require last date to be > today if editing",VCL-254
efaa351d5d67cc77b585962f59b6f820cde138dd,,,1,['web/js/blockallocations.js'],"VCL-254
block request improvements

modified checkOwnerCB - warning state was not getting cleared correctly when input became valid",VCL-254
d3354b9339c9c711f53823fc4a8284da0fa3b168,,,1,['web/.ht-inc/authentication.php'],"modified ldapLogin - added call to addLoginLog in commented out ""EXAMPLE1 LDAP"" section",
8c046bf30fcaa56a97f35df565c99f01a3f93e66,,,3,"['web/.ht-inc/authmethods/itecsauth.php', 'web/.ht-inc/states.php', 'web/.ht-inc/utils.php']","VCL-274
check for SQL injection/XSS

VCL-254
block request improvements

states.php: added AJvalidateUserid (missed on last checkin)

utils.php:
-modified validateUserid - escaped $loginid before using in query - in some cases it is possible for user supplied input to reach this function
-added AJvalidateUserid (missed on last checkin)
-modified getAffiliationID - escaped $affil before using in query - in some cases it is possible for user supplied input to reach this function

authmethods/itecsauth.php: modified validateITECSUser - escaped $loginid before using in query - in some cases it is possible for user supplied input to reach this function",VCL-274
d0564af7a9178ab8bf51a699b06bd11674d05110,,,2,"['web/.ht-inc/blockallocations.php', 'web/js/blockallocations.js']","VCL-254
block request improvements

added ability to set/modify the owner of a block allocation",VCL-254
840d7b876d061794983330bddd542a9bd2477036,,,1,['managementnode/lib/VCL/Module/Provisioning/vmware.pm'],removed check for ls -1 of datastore contents - if datastore is empty it returns 0 and undefined value causing reservations to fail,
80b7369b285854354a230ad311f64df2eb78c5c0,,,1,['managementnode/lib/VCL/image.pm'],"VCL-164
Added prompt to ask the image architecture in the 'vcld -setup' base image capture feature.",VCL-164
5f9761374df6b82fd58d17d0ea5587ece7b0577a,,,1,['mysql/update-2.2.sql'],"VCL-161
remove xmlrpcKey table from vcl.sql

left ending ';' off of DROP TABLE for xmlrpcKey",VCL-161
b1663cca841bc247465363df78b9fc7a675811c2,,,2,"['mysql/update-2.2.sql', 'mysql/vcl.sql']","VCL-208
Ability to easily put the VCL site into a maintenance state

added CREATE TABLE's for sitemaintenance table",VCL-208
cd3d320c4cc3a18cd3f72f2c7dc75c786f1f231f,,,3,"['web/.ht-inc/requests.php', 'web/.ht-inc/utils.php', 'web/.ht-inc/xmlrpcWrappers.php']","VCL-317
scheduler doesn't take imagerevision into account

utils.php:
-updated isAvailable to accept $imagerevisionid as a parameter and removed $os since it hasn't been used for a long time; changed to only add a computer to $currentids if the imagerevisionid matches
-removed RPCisAvailable which was no longer used
-updated calls to isAvailable in moveReservationsOffComputer
-updated getUserRequests to include imagerevisionid in the main array and for each subimage
-updated isComputerLoading to compare the computer's imagerevisionid instead of currentimageid
-updated getComputers to include imagerevisionid
-updated xmlRPChandler - added back $apiversion because it is being used in the insert query (VCL-161)

xmlrpcWrappers.php:
-updated calls to isAvailable in XMLRPCaddRequest, XMLRPCaddRequestWithEnding, XMLRPCextendRequest, XMLRPCsetRequestEnding, and XMLRPCprocessBlockTime
-modified XMLRPCaddRequestWithEnding - check for $start being >= $end failed if $start was 'now'; also, error message was wrong

requests.php:
-updated calls to isAvailable in AJupdateWaitTime, submitRequest, and submitEditRequest
-modified confirmEditRequest - added imagerevisionid to continuation data, removed os from continuation data",VCL-317
3b21ff4c67d7a917b6a3bf18ceef3675f0cdc3a4,,,2,"['mysql/update-2.2.sql', 'mysql/vcl.sql']","VCL-161
remove xmlrpcKey table from vcl.sql

vcl.sql: removed xmlrpcKey table

update-2.2.sql: added a ""drop table"" for xmlrpcKey",VCL-161
313d2ba99995cf6445f14a160c7715aa634c0f6f,,,3,"['web/.ht-inc/errors.php', 'web/.ht-inc/utils.php', 'web/.ht-inc/xmlrpcWrappers.php']","VCL-161
remove xmlrpcKey table from vcl.sql

utils.php:
-modified checkAccess - changed code for API v1 to give error that it is an unsupport API version - note that there was an attack vector here that got removed where X-Pass was not being escaped
-modified xmlRPChandler - removed elseif for API v1

xmlrpcWrappers.php: removed header comments on using API v1

errors.php: added 8 => 'Unsupported API version, cannot continue' to XMLRPCERRORS",VCL-161
1b9c64123cb4bf7120b031f84f4161dd42df1237,,,5,"['web/.ht-inc/schedules.php', 'web/.ht-inc/states.php', 'web/.ht-inc/utils.php', 'web/css/vcl.css', 'web/js/schedules.js']","VCL-274
check for SQL injection/XSS

found some places where $_POST was being used in schedules.php with the possiblity of poor validation; I didn't fully trace it out because I was already wanting to change the way schedule times were modified to use ajax instead of a series of page loads

utils.php: modified getDojoHTML - added stuff for editSchedule and submitAddSchedule

states.php: removed submitScheduleTime; added AJgetScheduleTimesData and AJsaveScheduleTimes

schedules.php:
-modified editOrAddSchedule - changed form to have a dojox DataGrid to manage the schedule times
-added AJgetScheduleTimesData - sends JSON data of schedule times to initially populate the datagrid
-modified processScheduleInput - removed code that dealt with schedule times
-removed printStartEndTimeForm
-removed printStartEndTimeForm2
-added AJsaveScheduleTimes - updates schedule times in database
-removed submitScheduleTime

css/vcl.css: added #savestatus",VCL-274
3ebeca50f0dc561a4ce5238dc00157ff450519b6,,,1,['web/js/blockallocations.js'],removed leftover todo note,
e68a62943e8685e93ef8d77ae3113ff9a197009e,,,10,"['web/.ht-inc/conf-default.php', 'web/.ht-inc/requests.php', 'web/.ht-inc/sitemaintenance.php', 'web/.ht-inc/states.php', 'web/.ht-inc/utils.php', 'web/.ht-inc/xmlrpcWrappers.php', 'web/css/vcl.css', 'web/index.php', 'web/js/sitemaintenance.js', 'web/testsetup.php']","VCL-208
Ability to easily put the VCL site into a maintenance state

xmlrpcWrappers.php: modified XMLRPCextendRequest and XMLRPCsetRequestEnding - added check for isAvailable returning -2; if so, return errorcode 46: requested time is during a maintenance window

utils.php:
-modified initGlobals - added case statement for including sitemaintenance.php
-added maintenanceCheck - prints notice about site being down for maintenance if during maintenance window
-added maintenanceNotice - prints notice about upcoming maintenance window
-modified isAvailable - calls schCheckMaintenance to see if request conflicts with scheduled maintenance window; return -2 if it does
-added schCheckMaintenance - checks for time window conflicting with a maintenance window
-added numdatetimeToDatetime
-modified getTimeSlots - create entries for maintenance windows
-modified showTimeTable - print blocks for maintenance windows
-added checkInMaintenanceForTimeTable
-added getMaintItems
-added getMaintItemsForTimeTable
-modified printHTMLHeader - added call to maintenanceNotice
-modified getNavMenu - added entry for Site Maintenance to show up for ADMIN_DEVELOPER users
-modified getExtraCSS - return empty array if no matched modes (removes a php warning message)
-modified getDojoHTML - added includes and header stuff for siteMaintenance mode

states.php: added siteMaintenance, AJcreateSiteMaintenance, AJgetSiteMaintenanceData, AJgetDelSiteMaintenanceData, AJeditSiteMaintenance, and AJDeleteSiteMaintenance

conf-default.php: added DEFAULTTHEME - this is the theme that will be used when the site is placed in maintenance if $_COOKIE['VCLSKIN'] is not set

requests.php: modified AJupdateWaitTime and submitEditRequest - added check for isAvailable returning -2 and if so, display message about not being able to schedule due to scheduled downtime

sitemaintenance.php: initial add

maintenance: added directory for placing maintenance files

testsetup.php: added section to test write access to maintenance directory

index.php: added call to maintenanceCheck before calling dbConnect

css/vcl.css: added #maintenancenotice - this is the div that shows up notifying users of an upcoming maintenance window

js/sitemaintenance.js - initial add",VCL-208
f3a61d63d5ba3872fe3bfda76409da34e8685594,,,1,['managementnode/lib/VCL/utils.pm'],"typo, left in a my $... inside a block. when it went out of scope so does the variable",
b28a448c86a980c718678766ab3534d66dff8a08,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-224

checking for additional dns servers, 
break apart and use netsh cmd with different args for alternate dns server",VCL-224
d1758b7130fbc69aeeecb685f0578c1e359eca25,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-255

simple improvement of detecting a fault and dumping related info",VCL-255
c8a3a5e7bd2923a3fff96298607ba35bb4243065,,,1,['managementnode/bin/vcld'],"Made minor change to vcld::REAPER. It displays the reservation ID of the dead process it finds. This isn't set if the dead process is a block reservation process. Uninitialized concatenation warnings were displayed as a result. Changed the reservation ID variable to ""<undefined>"" if the reservation ID is not defined.",
ac93a296178db4176abac355dad02fd72d8519ce,,,1,['managementnode/lib/VCL/new.pm'],"VCL-224

checks on production version in case version changes since block alloc was processed",VCL-224
65c34a48726954c11fa98a08c5377d1d32fd4a49,,,1,['managementnode/lib/VCL/blockrequest.pm'],"VCL-224
cleaned up message to end-user
fixed get_user_info
added get_image_info for image name to end user",VCL-224
92c48a134a72a29d2769f0da359f7724b0abfc58,,,1,['managementnode/lib/VCL/utils.pm'],duplicate line in get_user_info select statement,
8c943dd23dffa141ece79db928e21458734b008b,,,4,"['managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/blockrequest.pm', 'managementnode/lib/VCL/image.pm', 'managementnode/lib/VCL/utils.pm']","VCL-331
Updated Windows.pm::set_password to better handle the updating of scheduled task passwords. It now specifies the username when issuing the schtasks.exe command in case the username stored in the task contains an old computer name.  The code was changed to not return false if it fails to set a scheduled task password because of Windows 7 bug which causes ""ERROR: The parameter is incorrect"" to be returned if schtasks.exe is used to change the password of a task created using the GUI.  There was also a problem caused by utils.pm::run_ssh_command().  The output it returned included carriage returns at the end of the lines of Windows command output.  It was updated to remove these.

VCL-164
There were 2 get_user_info subroutines in utils.pm.  These were consolidated and the calls to get_user_info() in image.pm. and blockrequest.pm were updated accordingly.",VCL-331
a37837f67439944cf3953737179445c90789353e,,,1,['web/.ht-inc/blockallocations.php'],"VCL-254
block request improvements

modified getCurrentBlockHTML - fixed problem where if a user group's affiliation was NULL, that block allocation would be left out of the query results",VCL-254
e064eb886aa282651b096bf539a9e91ba89d1537,,,2,"['mysql/update-2.2.sql', 'mysql/vcl.sql']","VCL-357
Updated vcl.sql:
-Added unique keys: affiliation.name, provisioning.name
-Changed key to unique key: module.name
-Removed default image and imagerevision entries except for 'noimage'. Also removed associated resource and -resourcegroupmembers entries.

Updated update-2.2.sql:
-Added ASF header
-Added procedures: AddColumnIfNotExists, DropColumnIfExist, AddIndexIfNotExists, AddUniqueIndex, AddConstraintIfNotExists
-Made changes so that the update-2.2.sql can be run without failing if some of the changes already exist",VCL-357
e9ab65f74fa1cd271064c22138cfa071d0959cb1,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-224
Escaped @ character in @example.com.",VCL-224
c2a2111ee86484423dc8d4e59e97ea09de9b3211,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-164
Added command to release DHCP before shutting down. I have seen a case where a DHCP address was obtained, then the address was statically set to another address.  The original DHCP address lease was cached in the image.  When the captured image was loaded and requested a DHCP address, it requested its specific address it had obtained via DHCP resulting in a DHCP NAK response.  It never obtained a private IP address and the load failed.",VCL-164
2345806a462e43f96ad4a12e07e350123ae05481,,,2,"['managementnode/etc/vcl/vcld.conf', 'managementnode/lib/VCL/utils.pm']","VCL-224

Removed DEFAULTHELPADDRESS from vcld.conf
set this value to vcl_help@example.org in utils, it would only be used if the affiliation help address is not found.",VCL-224
bb3802f543a4abccedb9f79fdea2f753b141e332,,,2,"['web/.ht-inc/requests.php', 'web/.ht-inc/utils.php']","VCL-347
cluster connect page rdp file

utils.php: modified sendRDPfile - now expect resid to be passed in through the continuation; use this key to get the correct ip and pwd

requests.php: modified connectRequest - added resid to each continuation for sendRDPfile",VCL-347
81f91395e8b22bf315bdc8b2e8bc8eb137c87275,,,1,['mysql/vcl.sql'],"VCL-164
Added module table entry for the VCL::image module. This entry is used by the vcld setup interface to locate modules which implement a setup subroutine.  Increased OS.prettyname from 35 to 64 and modified the values for consistency.  These values are displayed as a list of choices when capturing a base image.",VCL-164
3e1b2afa38accb22ac28b9417585db63d5916ce5,,,1,['managementnode/lib/VCL/Module/OS/Windows/Version_5.pm'],"VCL-164
Added commands to set the interfaces to use DHCP immediately before Sysprep.exe is run since the call to enable DHCP in Windows.pm::pre_capture was removed. This allows a machine with a statically configured private IP address to be captured (useful for base images).",VCL-164
116865c334d7992b125c79689664563d98db99ef,,,1,['managementnode/bin/vcld'],"VCL-164
Made minor changes to vcld::setup_management_node to improve the vcld setup menus. It now uses module.prettyname.",VCL-164
a9e48e8c39001799d884107788e3251976f37e2a,,,5,"['managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm', 'managementnode/lib/VCL/image.pm', 'managementnode/lib/VCL/utils.pm']","VCL-164
Added setup and setup_capture_base_image subroutines to image.pm which allows the base image creation steps to be automated via a command-line interface when vcld is run with the -setup argument.  Added get_computer_ids, get_os_info, and get_user_info subroutines to utils.pm which are called by image.pm::setup.

Removed call to enable DHCP in Windows.pm::pre_capture and added a switch to Windows.pm::shutdown allowing the caller to specify whether or not DHCP should be disabled immediately before shutting down the computer. This allows a base image to be captured which has been configured with a static address.

VCL-298
Updated VMware.pm. Split up prepare_vmx subroutine to create another subroutine which only removes existing VMs which were created for the VM assigned to the reservation.

Reworked VMware.pm::capture to display more meaningful error and warning messages.

Reworked most of the get_vmx...path and get_vmdk...path subroutines to display more meaningful error and warning messages.

Updated vSphere.pm::copy_virtual_disk to retrieve the adapter type from the source vmdk rather than using lsiLogic as the default value if the argument was not specified.",VCL-164
9199a6d15d47551a060b58473000d67f57951967,,,5,"['web/.ht-inc/managementnodes.php', 'web/.ht-inc/utils.php', 'web/.ht-inc/vm.php', 'web/js/managementnodes.js', 'web/js/vm.js']","VCL-224
Move settings from vcld.conf to database except for database connection settings

utils.php:
-modified getManagementNodes - added publicIPconfiguration, publicSubnetMask, publicDefaultGateway, puclicDNSserver, sysadminEmailAddress, and sharedMailBox to the query
-modified getVMProfiles - changed 'name' to 'profilename'; added vmware_mac_eth0_generated and vmware_mac_eth1_generated
-modified getDojoHTML - added dijit.Tooltip to editMgmtNode case; added dijit.form.Select to editVMInfo case

managementnodes.php:
-added publicnetmask, publicgateway, publicdnsserver, sysadminemail, and sharedmailbox to set of fields that can be modified for a management node; this required adding 5 global defines and modifying editOrAddMgmtnode, confirmEditOrAddMgmtnode, updateMgmtnode, addMgmtnode, and processMgmtnodeInput
-converted help popups to be a ? icon with an associated dijit.Tooltip
-fixed bug in submitMgmtnodeGroups where getUserResources should have been called with mgmtNodeAdmin instead of groupAdmin

vm.php:
-modified editVMInfo to reference name of vm profile from 'name' to 'profilename' to fix bug where profiles could not be renamed
-added vmware_mac_eth[01]_generated (touched editVMInfo and AJupdateVMprofileItem)
-converted use of json-comment-filtered to normal json with a leading {} (touched vmhostdata, AJvmToHost, AJvmFromHost, AJvmFromHostDelayed, AJcancelVMmove, AJprofileData, AJnewProfile, AJdelProfile)
-added better input validation to AJupdateVMprofileItem

js/managementnodes.js:
-removed 3 global vars: xhrobj, blockHide, timeout
-removed showHelp
-removed clearHelpbox
-removed clearHelpbox2
-removed blockClear
-added togglePublic

js/vm.js:
-converted use of json-comment-filtered to normal json with a leading {} (touched getVMHostData, submitChangeProfile, vmToHost, vmFromHost, vmFromHostDelayed, cancelVMmove, getVMprofileData, newProfile, and delProfile)
-changed references to name of profile as 'name' to 'profilename' (touched VMHostDataCB, getVMprofileDataCB, newProfileCB, and delProfile)
-added vmware_mac_eth[01]_generated to getVMprofileDataCB and delProfile
-modified getVMprofileDataCB to check for vmtypeid, imageid, vmdiskid being 0 before setting the value of the filteringselect",VCL-224
4e4868eed817c3e0ea31fb77337cddeabbe27f5c,,,1,['web/.ht-inc/images.php'],"VCL-325
removing a subimage from a cluster can result in all subimages getting removed

fixed bug in AJaddSubimage and AJremSubimage where checking access was using array_key_exists when it should have been in_array",VCL-325
04419b13f32029244ee8e7b55ab63b0edf399132,,,1,['managementnode/lib/VCL/blockrequest.pm'],"VCL-254

emailing owner of block allocation when requested < allocated",VCL-254
807e2e7251d559d5798e397eb3b974b9a413d9da,,,1,['web/.ht-inc/computers.php'],"VCL-254
block request improvements

modified submitCompStateChange - for tomaintenance, tovmhostinuse, and hpc, check to see if computer is part of an upcoming block allocation and act accordingly",VCL-254
0de8408356f5eda1a7703beb2982d0b9c72fd0c3,,,2,"['web/.ht-inc/conf.php', 'web/.ht-inc/secrets.php']","VCL-31

renamed conf.php to conf-default.php
renamed secrets.php to secrets-default.php",VCL-31
20fea80060ac1bd0af426470770fd551c695cfc9,,,9,"['web/.ht-inc/blockallocations.php', 'web/.ht-inc/conf-default.php', 'web/.ht-inc/requests.php', 'web/.ht-inc/states.php', 'web/.ht-inc/utils.php', 'web/.ht-inc/xmlrpcWrappers.php', 'web/js/blockallocations.js', 'web/js/code.js', 'web/js/requests.js']","VCL-272
block request form

VCL-254
block request improvements

xmlrpcWrappers.php: modified XMLRPCProcessBlockTime - added requestid to query that inserts records in the blockComputers table

utils.php: modified getDojoHTML - added some dojo requires to blockAllocation mode

states.php: added AJviewBlockAllocation, AJviewBlockAllocationTimes, and AJtoggleBlockTime

conf-default.php: added USERFILTERINGSELECT and FILTERINGSELECTTHRESHOLD

requests.php:
-added IMAGEIDERR
-modified newReservation - added printSubmitErr for IMAGEIDERR
                         - added code to use FilteringSelect if appropriate conditions met from conf.php
                         - added checkValidImage to submit button in case using a FilteringSelect and an invalid string is entered in the text box
-modified processRequestInput - added checks for $return['imageid'] being valid

blockallocations.php:
-added getUserCurrentBlockHTML and a call to it from blockAllocations so that normal users can see information about any block allocations they own
-modified places where filteringselects are used to use them or normal selects based on constraints in conf.php
-modified group selects/filteringselects to skip ""None@"" option
-changed TimeTextBox and TimeTextBoxEnd widgets to be divs instead of inputs so we can set the width
-changed width of datagrids and their cells to display correctly in more browsers
-modified code that deals with deletion/recreation of blockTimes entries to keep ""skip"" entries when an idential entry is recreated without skip set, and to delete skip entries if no identical entry is recreated
-added deleteBlockSkipDuplicates
-modified getCurrentBlockHTML - added button for viewing individual blockTimes entries so some can be skipped
-added AJviewBlockAllocation
-modified AJacceptBlockAllocationSubmit - previously, neglected to set managementnodeid; fixed that
-added AJviewBlockAllocationTimes
-added AJtoggleBlockTime

js/code.js:
-added getSelectText
-added getSelectValue

js/requests.js:
-modified selectEnvironment - changed getting value for imageid to call getSelectValue
-modified updateWaitTime - changed getting value for imageid to call getSelectValue
-added checkValidImage

js/blockallocations.js:
-changed calls to getYear to getFullYear and removed extra code required when using getYear
-modified blockFormAddWeeklyTime and blockFormAddMonthlyTime to set the date to 1/1/2000 for date objects that are just being used for the time value
-modified blockFormConfirm to make sure filteringselect objects exist before checking to see if they have valid data
-modified blockFormVerifyWeekly, blockFormSubmitWeekly, blockFormVerifyMonthly, blockFormSubmitMonthly, blockFormVerifyList, blockFormSubmitList, clearHideConfirmAccept, acceptBlockSubmit, and rejectBlockSubmit to handle selects being normal selects or filteringselects
-added clearHideView
-added viewBlockAllocation
-added viewBlockTimes
-added viewBlockTimesCB
-added toggleBlockTime
-added toggleBlockTimeCB
-added blockTimeRowStyle
-added blockTimesGridDate
-added blockTimesGridStart
-added blockTimesGridEnd",VCL-272
8de3482d052868ed57ce6d3deb0b97c91f4ef33e,,,1,['managementnode/lib/VCL/blockrequest.pm'],VCL-254,VCL-254
84b1242a1469c558bd68194e550b075b812dfe98,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-254

extended query to handle expire times that don't match the blockTimes.end time",VCL-254
e97168e90add03e478b3b1a0b14562f8555484d4,,,1,['managementnode/lib/VCL/Module/Provisioning/esx.pm'],Fixed missing $ typo in esx.pm.,
8b1b02580d82e57c95940c0979e100e269722e9f,,,1,['mysql/vcl.sql'],"VCL-254
Updated vcl.sql:
-Added blockComputers.reloadrequestid, blockRequest.status, blockTimes.skip

VCL-298
Updated vcl.sql:
-Changed vmhost.vmprofileid to smallint(5) so that it matches vmprofile.id. Added a contstraint.
-Changed vmprofile.nasshare to vmprofile.repositorypath
-Added entry to module and provisioning tables for the new VMware module, called it vSphere
-Updated default vmprofile rows to include VMware Server 2.x and additional examples for ESX

Other:
-Added entry to OS for vmwarewin2003
-Set computer table's default currentimageid, nextimageid, and imagerevisionid to 4 (No Image)",VCL-254
4373b0bf615b9f545f3b76902647d9b6d4f25873,,,1,['managementnode/lib/VCL/DataStructure.pm'],"VCL-371
Updated DataStructure.pm::get_computer_private_ip_address() to correctly locate lines in /etc/hosts when there is no character after the host name.  Also updated subroutine to return the IP address if multiple matching lines are found containing the same address.",VCL-371
5d435fc76ba325207ebf039c39937b5ab5806f4a,,,3,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/blockrequest.pm', 'managementnode/lib/VCL/utils.pm']","VCL-254

removed 4hr and 2hr window checks, now if a block allocation is within 6hrs it gets processed.
added get_group_name and get_user_info, to get information on sending a confirmation message to the owner",VCL-254
1169ecfb039be98e3074900784f8c87be804b786,,,4,"['managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm', 'managementnode/lib/VCL/utils.pm']","VCL-164
Added a few subroutines to Windows.pm which allow the product keys and KMS servers to be configured via the command line when vcld is run with the -setup argument. Added helper subroutines to utils.pm which display menus and gather input from the user.

VCL-298
Added calls to normalize_file_path when the datastore or VM paths are retrieved from the DataStructure object. This removes the escaping before spaces.",VCL-164
8ae9292111dd948b74fdc9502f4d30e6835a895e,,,1,['managementnode/bin/vcld'],"VCL-370
Modified vcld so the RESERVATIONID key gets set before the DataStructure object is created. This should fix the problem affecting cluster reservations where the reservation ID cannot be retrieved.

VCL-164
Updated setup_management_node subroutine in vcld to call setup() on any module that itself implements a setup() subroutine rather than any module that can implement setup() via inheritance. This prevents a parent class's setup() from being called over and over again when setup_management_node finds the child modules.",VCL-370
8ed78ac6bb7e8c1e26aaae676aacecfd8e3caecf,,,3,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm']","VCL-368

Patch submitted per Vadim Kuznetsov <vnkuznet@ncsu.edu>",VCL-368
73f438416fdfa8b46a927ddcde21b3aa5b7136e4,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-254

moved parens around to capture any time slot that has expired. previous statement would have skipped all entries with skip=1",VCL-254
6216cbb06c6a9ee729f81c467ef6e2f613210987,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-254

get_managementnode_block_requests
- added check for skip flag
- push some of the time checks onto the mysql server, only pull timeslots that have either expired or will occur within 6hrs",VCL-254
16933f6102e73853f7474dc79ef863ef3cd98d24,,,2,"['web/.ht-inc/conf-default.php', 'web/.ht-inc/utils.php']","VCL-314
change Documentation link to have links to ASF docs

conf-default.php: added DOCUMENTATIONURL

utils.php: modified getNavMenu - for the Documentation link, just use DOCUMENTATIONURL to point to ASF VCLDOCS wiki by default instead of having internal documentation; using DOCUMENTATIONURL allows sites to easily point to their own documentation instead",VCL-314
b025f8200852572e598c7ed484aa06eebb027ac6,,,2,"['web/.ht-inc/conf-default.php', 'web/.ht-inc/secrets-default.php']","VCL-31
rename conf.php and secrets.php to include -default in the name

renamed conf.php to conf-default.php and secrets.php to secrets-default.php",VCL-31
70f431829e3cfac90b0fc56122e70152c83812ea,,,1,['managementnode/lib/VCL/utils.pm'],the extra 2>&1 was generating a Ambigous output error message on linux lab machine clients.,
2ccf0a44c8a04ea6508bc163e502a87fcd0f6548,,,1,['mysql/update-2.2.sql'],"VCL-357
Initial pass at creating a update sql file for 2.2 version",VCL-357
2112d5d3cfa7c15bd5565ddfe8a2efab99470ec7,,,1,['managementnode/bin/vcld'],"VCL-224
Added call to get_management_node_info so it is the first thing that occurs when vcld starts.  Also updated some notify messages which tried to display the $! variable which was not set and corrected a typo in die_handler.",VCL-224
ddba27f7facd00da5f8487efd8eb0da59853db42,,,7,"['managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/Provisioning.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Semaphore.pm', 'managementnode/lib/VCL/utils.pm']","VCL-289
Created Provisioning.pm::retrieve_image subroutine based on the code from the existing xCAT and VMware modules.  Added Semaphore.pm which contains code to create an exclusively locked file and Module.pm::get_semaphore for easy access/creation.  The retrieve_image subroutine creates a Semaphore object before retrieving an image from another management node.  This ensures that only 1 retrieval for a given image happens at a time.  Added get_image_repository_path and get_image_repository_search_paths subroutines to VMware.pm allowing it to use the new retrieve_image subroutine.  Also removed get_lockfile and release_lockfile from VMware.pm. They were put there during development.

VCL-100
Updated Linux.pm::get_file_size to return the bytes actually used rather than the apparent size of a file.  This allows an accurate size to be returned when checking the size of thin vmdk files whose different size values may differ widely.

VCL-298
Updated VMware.pm:
Modified is_vm_persistent to return true if the reservation end time is more than 24 hours in the future.
Updated in get_image_size so that it works correctly if an image name is passed as an argument. This is done by image.pm.
Fixed bug in get_vm_disk_adapter_type.  It was returning IDE if using ESX in some situations which doesn't work.

Other
Made minor change to OS.pm::is_ssh_responding so that it doesn't rely on the exit status of the SSH command.
In utils.pm::run_ssh_command, added '2>&1' so it is applied to both the remote command being run and the local SSH command.  This should allow STDOUT and STDERR output to be captured and synchronized.",VCL-289
cbd51b99d4786d0eb4f187842bb25467071f11f3,,,2,"['managementnode/lib/VCL/blockrequest.pm', 'managementnode/lib/VCL/utils.pm']","VCL-254

utils.pm: only collecting blockallocations that are in accepted state

blockrequest.pm: when expired - set the status to completed",VCL-254
e5befc8b4d1f2d14b8807f6172447739b9970a78,,,3,"['web/.ht-inc/images.php', 'web/.ht-inc/requests.php', 'web/.ht-inc/utils.php']","VCL-254
block allocation improvements

utils.php: added isImageBlockTimeActive

images.php: modified getRevisionHTML to print warning message above list of revisions about changing the production revison if > 1 revision and there is an active block allocation

requests.php: modified confirmDeleteRequestProduction to print warning mesage about changing the production version if there is an active block allocation",VCL-254
fdd00ee98a7e8d70c6ced34c4ea9ab341a806c10,,,2,"['web/.ht-inc/conf.php', 'web/.ht-inc/utils.php']","VCL-320
random selection of computer for reservations

conf.php: added SCHEDULER_ALLOCATE_RANDOM_COMPUTER - set to 1 to randomly allocate a computer from those available; set to 0 to assign computer with best specs

utils.php: modified allocComputer - if SCHEDULER_ALLOCATE_RANDOM_COMPUTER is set to 1, call shuffle for $blockids, $currentids, $computerids",VCL-320
373339676bf0cace7ecc8b01233bca222b810c35,,,4,"['managementnode/etc/vcl/vcld.conf', 'managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/utils.pm', 'mysql/vcl.sql']","VCL-224

Moved NOT_STANDALONE to db",VCL-224
fd96cbae2a47801f825f0443cfb9b444065b110f,,,2,"['web/.ht-inc/vm.php', 'web/js/vm.js']","VCL-338
vmprofiles that are in use can be deleted

vm.php: modified AJdelProfile - added query to check for profile being in use

js/vm.js: modified delProfileCB - added check for data.items.failed to be set to inuse; if so display appropriate error message",VCL-338
f05336d60b1a01190dc6a849fb82ef96483ae3b9,,,16,"['web/.ht-inc/authmethods/itecsauth.php', 'web/.ht-inc/authmethods/ldapauth.php', 'web/.ht-inc/authmethods/shibauth.php', 'web/.ht-inc/computers.php', 'web/.ht-inc/groups.php', 'web/.ht-inc/help.php', 'web/.ht-inc/images.php', 'web/.ht-inc/managementnodes.php', 'web/.ht-inc/privileges.php', 'web/.ht-inc/requests.php', 'web/.ht-inc/schedules.php', 'web/.ht-inc/userpreferences.php', 'web/.ht-inc/utils.php', 'web/.ht-inc/vcldocs.php', 'web/.ht-inc/vm.php', 'web/.ht-inc/xmlrpcWrappers.php']","VCL-305
update code to work with php 5.3

All functions listed as deprecated on this page:
http://php.net/manual/en/migration53.deprecated.php
were updated to their replacement functions.",VCL-305
676086b1d1e67150581afa604b5760339569f6cb,,,6,"['managementnode/etc/vcl/vcld.conf', 'managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/healthcheck.pm', 'managementnode/lib/VCL/image.pm', 'managementnode/lib/VCL/utils.pm', 'mysql/vcl.sql']","VCL-224

moved sysadmin and sharedMailBox email addresses to the management node table",VCL-224
c11193c3680b7e18b6283515b079c474efac9947,,,3,"['web/.ht-inc/requests.php', 'web/.ht-inc/utils.php', 'web/js/requests.js']","VCL-365

utils.php:
-modified getDojoHTML - added FilteringSelect to newRequest, submitRequest, createSelectImage, submitCreateImage; changed updateWaitTime call in dojo's onload to be a setTimeout with a 1 sec wait
-fixed typo bug in getUserInfo and updated header to include $numeric

requests.php - changed calls to printSelectInput to be inline declarations of dojo filteringselects

js/requests.js - updated selectEnvironment to use dijit.byId for imagesel instead of dojo.byId",VCL-365
df2dd27cd374465010e915f5cedbc8fccc686bef,,,4,"['web/.ht-inc/privileges.php', 'web/.ht-inc/requests.php', 'web/.ht-inc/userpreferences.php', 'web/.ht-inc/utils.php']","VCL-334

utils.php:
-modified getUserInfo - added extra argument named $numeric to tell if $userid was passed as an id value or unityid value; changed is_numeric calls to just $numeric
-added 2 calls to addLoginLog when using XMLRPC API (not related to this issue)

modified calls to getUserInfo in the following files where $userid was passed as the user.id value:
userpreferences.php
privileges.php
requests.php",VCL-334
82edbde35d25be5467490872afe4ca583e5e3c0b,,,1,['web/.ht-inc/computers.php'],"VCL-335

set maxlength to 6 and limit to 512000MB",VCL-335
9d6dfefa36adfe502ab4034767ade3a538859f60,,,4,"['managementnode/etc/vcl/vcld.conf', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm', 'managementnode/lib/VCL/utils.pm']","VCL-224

removed ETHDEVICE from vcld.conf
utils.pm: set failover routine setstaticaddress to use eth1
OS modules use the network_configuration data to determine the public
interface name

VCL-352
Ubuntu.pm - added pre-capture calls to set rc.local,sshd config and ext_sshd startup script",VCL-224
7fcdeeecc930d403f5dae2eca142a0e2697ab3c1,,,1,['managementnode/lib/VCL/new.pm'],"VCL-364

removed call to set vmhostid to null",VCL-364
2e9eeea99e858a292bb804fd0ceba53216051505,,,3,"['managementnode/etc/vcl/vcld.conf', 'managementnode/lib/VCL/blockrequest.pm', 'managementnode/lib/VCL/utils.pm']","VCL-224

DEFAULTURL is not being used.
lib/VCL/utils.pm
etc/vcl/vcld.conf

VCL-254
lib/VCL/blockrequest.pm
additional information in error msg, reduced the amount of email notifications when an error is detected.",VCL-224
c9f3124eb8cf034c0b71db85fb4380b71081b05a,,,4,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/utils.pm']","VCL-363
Removed the code from Linux.pm::changepasswd so that it does not recreate /etc/shadow. Removed utils.pm::changelinuxpassword because it is no longer being called.

VCL-49
Removed the commented-out section from utils.pm::reservation_being_processed that called pgrep to check if a process was already running for the reservation. Replaced this with a call to utils.pm::is_management_node_process_running. Updated is_management_node_process_running. It was not parsing the pgrep arguments correctly.

VCL-298
Added code to VMware.pm to check the image.project value and add additional network interfaces if the project is not 'vcl'. It gets a list of all the networks available on the VM host and adds an adapter for any that match up with the image project name. Added Linux.pm::activate_interfaces which finds and activates network interfaces which don't have a corresponding ifcfg-eth* file. The file is created and the interface is brought up allowing interfaces to be added dynamically during load. This is called by Linux.pm::post_load.

Fixed a bug in VMware.pm::get_active_vmx_file_path. It wasn't working correcly when run during an image capture when a new image was created with a different ID.

VCL-100
Added get_network_configuration, get_private_mac_address, get_public_mac_address, and get_public_ip_address to Linux.pm. Added get_private_interface_name and get_public_interface_name to OS.pm. These subroutines make the Linux code more inline with the Windows code and will allow the utils.pm::getdynamicaddress to be removed.

Fixed a bug in Linux.pm::execute. It was using the computer host name rather than the node name. This caused SSH commands to fail because it was attempting to connect to a full DNS host name configured in the computer table which didn't resolve.",VCL-363
382aaf8e3a43a8f134308f367669c15703aea0b2,,,1,['managementnode/lib/VCL/Module/Provisioning/vmware.pm'],"VCL-362
Updated vmware.pm so that vmware-cmd commands work under ESX 3.5. A few if/else checks were changed to assumed that a command is successful if no output is returned from vmware-cmd.",VCL-362
b3d54593f6215875417a23667d62db142be319c4,,,1,['managementnode/lib/VCL/Module/Provisioning/vmware.pm'],reordered get_image_size call,
c501aec3c1ef499e24521678bf05fc4530ca9f6e,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT2.pm'],"VCL-239

Added additional check to use nodeset nodename stat command to determine if installing or not",VCL-239
4a0a49fe0cf277bbe80b06b8feb29237857a5ab3,,,7,"['managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm', 'managementnode/lib/VCL/Module/Provisioning/esx.pm', 'managementnode/lib/VCL/Module/Provisioning/esxthin.pm', 'managementnode/lib/VCL/Module/Provisioning/vmware.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT2.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT21.pm']","VCL-359
Removed sections from provisioning modules where the dynamic IP address is retrieved or the static IP address is set.  This is not handled by OS.pm::update_public_ip_address().  This is called by new.pm for every reservation.",VCL-359
bea26610affc8bb450686cc36cdcb813cd30790b,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT2.pm'],"VCL-239

fixed issue with detecting when node is done with postscripts",VCL-239
ed8c515898eea37f33422c47f04d448eb6450d58,,,2,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/new.pm']","VCL-221
Added set_vcld_post_load_status() and get_vcld_post_load_status() subroutines to OS.pm. They set and retrieve a vcld_post_load= line in currentimage.txt. This line is used to determine whether or not the OS post-load tasks have run for a loaded image.

Added call to set_vcld_post_load_status() at the end of new.pm::reload_image(). This essentially tags the loaded computer so that the OS post-load tasks aren't run again.

Added call to get_vcld_post_load_status() to the beginning of new.pm::reserve_computer(). If the post-load tasks have not been run, the OS module's post_load() subroutine is called before a computer is reserved.",VCL-221
f5c45a268376d1ad627a3360cc16ee090db1ddc9,,,1,['managementnode/tools/Windows/Scripts/post_load.cmd'],"VCL-358
Removed call to configure_networking.vbs from post_load.cmd. The tasks it performs are now handled by the Perl code.",VCL-358
9500ac6c094f4619d18a8db90669329a2e6561d3,,,4,"['managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/utils.pm']","VCL-298
Added retry loop to VIM_SSH.pm::_run_vim_cmd(). This fixed a problem that may occur if several vcld processes are controlling VMs on the same host. vim-cmd may fail with a ""failed to connect"" message if several processes are controlling the host. The command usually succeeds on subsequent attempts.

Updated VIM_SSH.pm::_get_datastore_names() to only retrieve the names once and store them in the object since the datastore names mounted on a host are pretty static. The stored names are returned on subsequent calls to _get_datastore_names(). This improves performance because calling vim-cmd each time adds a few seconds.

Added quotes to datastore name and file path argument passed to _run_vim_command allowing it to handle datastore names and other arguments containing spaces.

Added call to OS.pm::is_ssh_responding() to the beginning of VMware.pm::capture(). This causes the capture process to fail early on if the VM isn't responding to SSH with a message that's easy to understand. Otherwise, the process would still fail but the root cause of the problem could be confusing to figure out because the message would indicate a problem with some other OS function that relied on SSH working.

Moved code in VMware.pm::capture() that figures out the vmx path of the VM to a separate subroutine named VMware.pm::get_active_vmx_file_path(). Updated this code to check if the vmx file in the expected path exists first.  If not, it then checks all the vmx files on the host trying to find a match.

Updated VMware.pm::load() to improve performance. In order to determine if a particular VM was already running, it was checking the VCL computer ID which is added to the contents of each VM on the host. This was very slow if a host is running several VMs. This was updated to check for the VCL VM computer name in the vmx directory path.

Updated VMware.pm::does_image_exist() to first check if the image resides in the expected non-persistent location.

Updated utils.pm::get_vmhost_info() to retrieve vmprofile.repositorypath rather than vmprofile.nasshare.

Updated utils.pm::run_ssh_command() to check for the strings 'vmware-cmd', 'vim-cmd', and 'vmkfstools' if the exit status is 255. This exit status normally indicates the SSH command failed entirely but VMware uses it in some of its commands.

Updated utils.pm::get_computer_info() to use LEFT JOIN to retrieve data from tables other than computer. This allows the query to succeed if any of the data the computer table is pointing to is not defined.

Other
Updated Linux.pm::find_files() to handle case where the base directory indicated by the $base_directory_path argument doesn't exist.

Updated utils.pm::get_management_node_info() so set the $ENV{management_node_info} variable if the info was retrieved for the management node the code is running on.

Commented out a few unnecessary notify() messages in various places.",VCL-298
1c3ad9ece7c58b64c1ed679bfb455401d29f075e,,,2,"['managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/new.pm']","VCL-158
Updated new.pm to call OS.pm::update_public_ip_address() rather than getdynamicaddress.  Rearranged if/else structure in process() to remove duplicate calls to update_currentimage.  Removed call to update_public_ip_address() in Windows.pm::post_load() because it is now called by new.pm.

Other
Changed initial time to wait from 120 seconds to 15 seconds in Windows.pm after a computer is powered on before checking for SSH to respond. VM images configured to not use Sysprep may respond much quicker than 120 seconds.",VCL-158
5a77b9c9f777acae304323a8a472b3eb930dee98,,,1,['managementnode/lib/VCL/Module/Provisioning/vmware.pm'],"VCL-356

added fix to make sure target directory existed in datastore for a new image",VCL-356
871d0d4fabc178550abb62ef62774f99c8703e07,,,4,"['managementnode/lib/VCL/Module/Provisioning/VMware/VIM_SSH.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VIX_API.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm']","VCL-298
Added VIM_SSH.pm which can manage a host using calls to vim-cmd via SSH.

VMware.pm:
-Removed ""use"" calls to the API/SDK modules at the beginning of the file. These modules are now imported dynamically when needed.
-Added default scsi-virtualDev values to %VM_OS_CONFIGURATION hash. These are used if the disk adapter type cannot be determined by querying the virtual disk.
-Added support for the new VIM_SSH.pm module. Added check to see if SSH is available if the vSphere SDK cannot be used.
-Commented out support for the VIX_API.pm module since VIM_SSH.pm can do everything it can do.
-Added exception check in get_vmhost_datastructure because the DataStructure constructor may return a true value even if it fails.
-Added support to use the API/SDK's copy_virtual_disk
-Added mount_repository_datastore subroutine.  This is not called yet.  It will eventually allow the host to mount an NFS datastore pointing to the image repository.

vSphere_SDK.pm:
-Changed default disk type to thin in copy_virtual_disk. Sparse disks don't seem to work with ESXi 4.
-Changed get_vmware_product_name to return the full product name so that its output matches running vmware -v from the console.
-Added get_network_names subroutine.  This isn't called yet but will allow the VM's network adapters to be dynamically created in the future rather than having to define virtual switches in the database.

Made minor fixes to VIX_API.pm.",VCL-298
23c63b972e10e24c244c325da8560da3ee6c5695,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-298
Made several changes to Linux.pm to allow the various Linux OS commands to work under ESXi via SSH. There are several commands which aren't available under ESXi such as du. The commands which are supported usually allow only basic arguments and switches.",VCL-298
83f005794fded582ebc9b5c35c4071cc9f0bf51e,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-41
Removed lines from Windows.pm::clean_hard_drive which causes the driver cache files to be deleted during image capture.  This should only be done is Sysprep is used and drivers are reinstalled on load.  The run_sysprep subroutine does this.

Other
Made minor update to improve the chown return value checking in Windows.pm::set_file_owner.  It wasn't working correctly if chown didn't return any output.",VCL-41
ed7c0bc267446907b475c2391d7148902719b712,,,1,['web/.ht-inc/blockallocations.php'],"VCL-272

encountered problem when images and user groups grew too large - they wouldn't fit in the continuations data causing strange problems; reworked code to not save them in the continuation but to regenerate the lists in the form submittion code",VCL-272
8af2a65d34b2fac86ffa5f64f39f55dcb81f84ef,,,1,['managementnode/lib/VCL/utils.pm'],removed needless debug statements,
4ba9196b9ea1976b0f98a2e1c506aac8710dd654,,,1,['managementnode/lib/VCL/DataStructure.pm'],"VCL-298
Added accessor for the vmprofile.repositorypath value. Added calls to throw an exception in _initialize if the computer or image data cannot be retrieved. Simply returning null does not cause the DataStructure object construction to fail.",VCL-298
3a33480656695bf4ef6e83914a9dba8aee46e4ae,,,1,['managementnode/lib/VCL/utils.pm'],Accidently removed ETHDEVICE and fixeda typo,
d9145a334f6644d8bac6c95b720ac810362d1b09,,,12,"['web/.ht-inc/blockallocations.php', 'web/.ht-inc/conf.php', 'web/.ht-inc/errors.php', 'web/.ht-inc/requests.php', 'web/.ht-inc/states.php', 'web/.ht-inc/utils.php', 'web/.ht-inc/xmlrpcWrappers.php', 'web/images/helpicon.png', 'web/js/blockallocations.js', 'web/js/requests.js', 'web/js/vcldojo/TimeTextBoxEnd.js', 'web/themes/default/css/vcl.css']","VCL-272

Block Reservations were renamed to Block Allocation - all modified files had references to block reservations changed to block allocations.

Split out all block allocation stuff from requests.php and requests.js to blockallocations.php and blockallocations.js

This ended up being a complete rewrite of all of the block allocation forms to be much more web 2.0 based.

xmlrpcWrappers.php:
-modified XMLRPCblockAllocation - changed name of 4th parameter to $numMachines; added status field to insert query
-modified XMLRPCprocessBlockTime - just name changes

utils.php:
-modified initGlobals - added include for appropriate states for blockallocations.php
-modified dbConnect - moved connecting to $accthost to before connecting to $vclhost so that mysql calls that default to last connected link resource will use vcl resource instead of accounts resource
-moved removeNoCheckout to here from requests.php
-modified getBlockRequestIDS - changed name to getBlockAllocationIDs; added status = 'accepted' to WHERE clause
-added hour24to12
-modified getAvailableBlockComputerids - added status = 'accepted' to WHERE clause
-modified getBlockTimeData - filled in more of the return info for the header stub; added status = 'accepted' to WHERE clause
-renamed isBlockRequestTime to isBlockAllocationTime
-modified getDojoHTML - added stuff for blockAllocations, requestBlockAllocation, newBlockAllocation, and editBlockAllocation; added default entry so that dojo.js and dojo.requires are added automatically if nothing specific is needed for a mode

states.php:
-changed blockRequest to blockAllocations
-added requestBlockAllocation to entry actions
-added AJblockAllocationSubmit, AJpopulateBlockStore, AJdeleteBlockAllocationConfirm, AJdeleteBlockAllocationSubmit, AJacceptBlockAllocationConfirm, AJacceptBlockAllocationSubmit, AJrejectBlockAllocationConfirm, and AJrejectBlockAllocationSubmit to noHTMLwrappers array
-changed blockReservations page name to blockAllocations
-redid almost all modes for blockAllocations

requests.php:
-removed defines for IMAGEIDERR, BLOCKCNTERR, USERGROUPIDERR, AVAILABLEERR, WEEKNUMERR, DAYERR, BLOCKNAMEERR, and ADMINGROUPIDERR
-commented out defines for ENDDAYERR and ENDHOURERR
-moved all block allocation functions to blockallocations.php
-moved removeNoCheckout to utils.php

errors.php:
-added ""114"" => ""Failed to get start date in getPendingBlockHTML""

conf.php:
-added $blockNotifyUsers

themes/default/css/vcl.css:
-commented out margin for '.default #content table'

js/requests.js:
-moved updateBlockStatus and updateBlockStatusCB to blockallocations.js

initial import of the following items:
-blockallocations.php
-images/helpicon.png
-js/vcldojo
-js/vcldojo/TimeTextBoxEnd.js
-js/blockallocations.js",VCL-272
6d593e1414e64eea48591d40133daa44f4b1d548,,,1,['mysql/vcl.sql'],"VCL-224

added ipconfiguration data to management node table",VCL-224
7f8b007ac8047392c9a0fd73c734b76e67b3b33d,,,11,"['managementnode/etc/vcl/vcld.conf', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm', 'managementnode/lib/VCL/Module/Provisioning/esx.pm', 'managementnode/lib/VCL/Module/Provisioning/esxthin.pm', 'managementnode/lib/VCL/Module/Provisioning/vmware.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT2.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT21.pm', 'managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/utils.pm']","VCL-224

Moved ipconfiguration to database",VCL-224
a1e2c2bd918a6cc26075e0fbfe8f48ca46736002,,,1,['managementnode/etc/vcl/vcld.conf'],"VCL-224

Removed VMWARE_MAC_ETHX_GENERATED",VCL-224
9d5565bebe1d637b75589471a662fe7af532885b,,,4,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/Provisioning/esx.pm', 'managementnode/lib/VCL/Module/Provisioning/esxthin.pm', 'managementnode/lib/VCL/utils.pm']","VCL-224

moved VMWARE_MAC_ETHX_GENERATED to database
Only affected prov modules are legacy vmware esx modules",VCL-224
5ca1047f1b6baf868eb067e9163c6c9c0be569e8,,,1,['mysql/vcl.sql'],"VCL-224

should have been boolean default set to '0' instead of yes|no",VCL-224
f504660f9978cff58448df42be93df4e13bcfd99,,,1,['mysql/vcl.sql'],"VCL-224

moving VMWARE_MAC_ethx_generated to database",VCL-224
23cbf4dea22986093d2ed03442fdb0726f8321ac,,,1,['managementnode/etc/vcl/vcld.conf'],"VCL-224

removed LockerRdUser not used",VCL-224
3d9ab35e33f658e1ff3361244e39e2f4f5aaf3a9,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-224

VMWARETYPE no used",VCL-224
93db067f364c5982e473e297c66e4fa2d494b4b7,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-224

Deleted unused variables LINUX_IMAGE and VMWARE_DISK",VCL-224
1ee42235dfe153b153508e3368a1269df27b7ac2,,,1,['managementnode/etc/vcl/vcld.conf'],"VCL-224

XCAT=yes is not being used
XCAT_ROOT is set in utils
VMWARE_REPOSITORY is not being used",VCL-224
056d26d7f722f371a9a1ea01b21af170cf72b770,,,4,"['managementnode/etc/vcl/vcld.conf', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/vmware.pm', 'managementnode/lib/VCL/utils.pm']","VCL-224

Removed linuximageid 
Removed getimagesize from utils: all prov modules are using local routines
Removed global VMWAREREPOSITORY, each vmware module has local routine for figuring this out",VCL-224
d2cee4f92cd595c2ca50c607fbc6f4ef0fa9b909,,,2,"['managementnode/etc/vcl/vcld.conf', 'managementnode/lib/VCL/utils.pm']","VCL-163,VCL-224

Removed THROTTLE from conf and utils.pm",VCL-163
0d7538984acdf18922b8b7806cd7ce5ce6f9753f,,,1,['managementnode/bin/vcld'],"VCL-149
Moved preplog_file into daemonize routine
if another process is running return non-zero exit code",VCL-149
1e5e5eeaf21eb9ed279f71fb050208a740b00117,,,1,['managementnode/bin/vcld'],"VCL-149

typo",VCL-149
ff870139b8f11a2280aec2c19983abd37232cd38,,,1,['managementnode/bin/vcld'],"VCL-149

added semaphore lock on /var/lock/subsys/vcld file in the daemonize routine
if a running vcld process is active and attempts to start a second process will not succeed",VCL-149
3d9da44e77172c9962e5f5767a95993203ffbc52,,,2,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/utils.pm']","VCL-178

performing a check in get_request_info, if request_checkuser is disable then set imagemeta checkuser to disabled. Done to reduce the extra code added to new,reserved and inuse modules, etc.",VCL-178
01f6e2dc817ef3b9e5b4110862ba607278c74bb0,,,1,['mysql/vcl.sql'],"VCL-178

default value should be 1",VCL-178
aca8d7af3247822fbf390c09168ad7a596ebcc6e,,,1,['mysql/vcl.sql'],"VCL-178

extended request table",VCL-178
37e3b01e233bdec3e85de424710efaa753ebfa36,,,5,"['managementnode/lib/VCL/image.pm', 'managementnode/lib/VCL/inuse.pm', 'managementnode/lib/VCL/makeproduction.pm', 'managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/reserved.pm']","VCL-139

Removed preferred name from all notifications. Not really needed.",VCL-139
8ef3f712e00ab95f7b917a3b273695cf5694b16f,,,1,['managementnode/lib/VCL/reserved.pm'],"VCL-211

added check on forimaging - set to connected once user hits connect button. Skips initial check on confirming if user is connected",VCL-211
83ea93a3e504563472e2a621655a951e6c71875f,,,1,['managementnode/lib/VCL/Module/Provisioning/vmware.pm'],"VCL-353

opened up the regex a bit",VCL-353
50144efff49da60a2b7f652787b2af64729fdc33,,,1,['mysql/vcl.sql'],"VCL-2 

removed preferredimageid",VCL-2
0eeceb315cc9a3ea4f6e246cdb3fd3e9cdf7e4b4,,,4,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/Predictive/Level_0.pm', 'managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/utils.pm']","VCL-2 

moved preferred image to next image",VCL-2
a243c5393877bf34381ec05a087f4571ced5a02f,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-197

_is_user_added is not used anymore",VCL-197
4123351b2420a82848366a13057a2367f8efe04b,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-210

$ipaddress was not defined or had assigned value which caused pattern match check on 127.0.0.1 to not get picked up
So loopback and private address was getting returned",VCL-210
d256b8e13fd8ce0a82d12ffde5d93f00db616b25,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-352

defined $sshd_data twice, removed one",VCL-352
801c615fd6e5b5775013038ec287df59ff5c2a12,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-346

cleaned up regex",VCL-346
3b9ec4273eb829d64031318c8e30a37cd3413b91,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-352

Added routines:
generate_rc_local: generates vcl specific rc.local file
generate_ext_sshd_config: generates external sshd config
generate_ext_sshd_init: generates startup script for external sshd service",VCL-352
fd8e60df13b3c3e7c66757ecdd18d435f1535b01,,,1,['mysql/vcl.sql'],"VCL-351

extended schema to allow for at least two more virtual adatpers",VCL-351
7bb635210c91103a6deb45305835fad5aa1997c3,,,3,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/Provisioning/vmware.pm', 'managementnode/lib/VCL/utils.pm']","VCL-351

extended to account for at least 2 more virtual adapters",VCL-351
218bb0c72ed4c67145937e1e7ee8a4ab3aa5eba9,,,1,['mysql/vcl.sql'],"VCL-349

correct vmwarewinxp-base7-v1 in image insert query to be vmwarewinxp-base7-v0",VCL-349
8a96640e7ce106e3f3f6941e2b730ce9d029fdae,,,1,['mysql/vcl.sql'],"VCL-239

added entry for xcat2.pm provisioing module to database schema",VCL-239
0554f8979a3b9c40f7a1f160fc0cfc9e1f2b3282,,,3,"['managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT2.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT21.pm']","VCL-163 

added get_variable call
renamed global name of $THROTTLE to a local $xcat_throttle",VCL-163
d45a308ff4fb5b2f91d242186a8ad94864f62833,,,3,"['managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT2.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT21.pm']","VCL-163

pulling throttle variable from database",VCL-163
8519bbd19fd5b6dc9558d6b9f7664d3642b79a1a,,,3,"['managementnode/lib/VCL/Module/Provisioning/VMware/VIX_API.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/VMware.pm', 'managementnode/lib/VCL/Module/Provisioning/VMware/vSphere_SDK.pm']","VCL-298
Added new VMware modules to support Server 2.x and ESXi 4.x:
VMware.pm - provisioning module
VIX_API.pm - utility module which implements subroutines to use the VMware VIX API
vSphere_SDK.pm - utility module which implements subroutines to use the VMware vSphere SDK

Created Provisioning/VMware directory. The new modules reside here so they don't conflict with the existing VMware modules.",VCL-298
f7695e42f37584f2a0fd9eb41d7b536e757c2b7b,,,1,['managementnode/lib/VCL/Module/Provisioning/esxthin.pm'],"VCL-291
Made changes to esxthin.pm to move OS response checking to the OS modules. Removed section that waits for SSH to respond.  Moved the call to the OS module's post_load() sub to earlier in the load() sub.",VCL-291
726528168360aba6ace6bc80e9ba2a3264fe44f5,,,1,['managementnode/lib/VCL/Module/OS/Windows/Version_6.pm'],"VCL-195
Removed call to the provisioning module's wait_for_off() from Version_6.pm::run_sysprep() because this subroutine is not implemented by all provisioning modules.",VCL-195
dd688391b62b45f426d0038da1ccfc30e92ecb0f,,,2,"['managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/utils.pm']","VCL-298
Added subroutines to Linux.pm: execute, file_exists, delete_file, move_file, copy_file, copy_file_to, copy_file_from, get_file_contents, get_available_space, get_file_size, find_files. These are called by the new VMware code to act on the VM host.

Renamed filesystem_entry_exists to file_exists subroutine in Linux.pm to match other OS modules.

Added escape_file_path, normalize_file_path, and parent_directory_path subroutines to utils.pm. They format file paths and are called by the new subs in Linux.pm.",VCL-298
1f19d1378607f86e26235087ec1ec5ef5647536f,,,3,"['managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/2008.pm']","Changes to Windows.pm:

VCL-336
Commented out section in post_load() which disables IPv6.  This isn't necessary.  Things should work if IPv6 is enabled as long as the computer is able to get an IPv4 address.  Also added an enable_ipv6 subroutine for future use.


VCL-298
Added calls to the new update_ssh_known_hosts() and update_public_ip_address() subroutines in post_load().  

Updated the timing in reboot() because the delays were too long for some VM host's which are able to reboot a VM very fast.  Removed 5 second delay after reboot is initiated, before checks for unresponsive ping begin.  Updated call to check for unresponsive ping to check every 3 seconds.  Updated delay after computer becomes unresponsive from 15 to 5 seconds, before it begins checking for a ping response.  Reduced delay between ping and SSH checks from 15 to 5 seconds. 

Added get_private_mac_address() and get_public_mac_address() subroutines.  These are used to match up a vmx file to a running VM when a base image is captured.

VCL-196
Updated all commands which specify System32 to use get_system32_path() so that Sysnative is used if the OS is 64-bit.

Updated is_64_bit() subroutine to not rely on a PROCESSOR_IDENTIFIER Windows environment variable to be set.  This variable is not showing up on Windows 2008 when connecting via SSH through the Cygwin shell.  Changed the subroutine to check the registry directly.

VCL-337
Fixed a bug in delete_files_by_pattern where unintended files could be deleted if the base directory contained an environment variable which isn't set on the target computer.  The environment variable is first extracted from the path and then cygpath.exe is called with the variable as an argument.  This detects whether or not the variable is defined.

VCL-195
Changed 2008.pm to not use newsid.exe if Sysprep is disable.  Newsid.exe doesn't seem to work on Windows 2008.

Other
Added retry loop in shutdown() because shutdown.exe occasionally displays a ""Windows is processing another action"" and a shutdown or reboot fails.  The loop makes a few attempts before calling the provisioning module's power_off subroutine.

Added check for 'does not exist' in the output of schtasks.exe in disable_scheduled_task() so that a warning isn't displayed if an attempt is made to disable a nonexistent task.

Moved firewall_enable_sessmgr() from Windows.pm to Version_5.pm because it doesn't apply to Windows 6.x.

Updated get_network_configuration() to not try to parse info for ignored adapter names.  Also added 6to4, isatap, and teredo to the list of ignored adapters.",
7d6d46947d68969b3c07819b8843d5ba36283e70,,,1,['managementnode/lib/VCL/Module/Provisioning.pm'],"VCL-298
Added set_vmhost_os and vmhost_os subroutines to Provisioning.pm.  These allow a provisioning module to set and access an OS object for the VM host OS if one was created.  As a result, the provisioning module can call $self->vmhost_os->... to access the VM host computer's OS the same way it would call $self->os->... to access the guest's OS.",VCL-298
18de0f1286a6b524210ca5958961c34bfc1329ef,,,1,['managementnode/lib/VCL/Module/OS.pm'],"VCL-298
Updated OS.pm::is_ssh_responding() to display if port 22 or 24 is open.

Added insertloadlog call to wait_for_response() which creates an 'osrespond' log entry.  This line is currently commented out until the schema is updated.  This will be used to indicate when the OS has responded in the reservation status information.

Added update_ssh_known_hosts() subroutine.  This checks the known_hosts file, removes old entries for the node, and adds the correct entry.  This code was duplicated in every provisioning module.  It will eventually be called during OS post_load.

Added update_public_ip_address() subroutine.  This checks if static or dynamic addresses are used, and either sets the static address or updates the dynamic address in the database.  This code was also duplicated in every provisioning module and this will eventually be called during OS post_load().",VCL-298
bb8af6d88c4e48c595fe088dd0bc06f60efcfcb3,,,1,['managementnode/lib/VCL/DataStructure.pm'],"VCL-298
Updated DataStructure.pm to allow objects to be cloned and to allow a computer or image ID argument to be specified when creating a DataStructure object.  This allows objects to be created containing data for a specific computer or image.  This is used to create an object representing a VM host, with the VM host's computer and image data saved in the object.

Added or uncommented the accessors to vmhost.id, vmhost.computerid, vmhost.imageid, and vmprofile.imageid.",VCL-298
73e14680725e0d8d407efbf4842ee57a0600a478,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-298
Added utils::create_management_node_directory().  This provides a consistent way of creating directories.

Updated utils.pm::get_image_info() and get_computer_info() to include additional data that get_request_info() already retrieves.

Added vmprofile.imageid to the data returned from utils.pm::get_vmhost_info().

Other:
Updated format_data to display object type names.  Added ""use Scalar::Util 'blessed'"" to accomplish this.

Added utils.pm::format_number().  It adds commas and rounds a number to decimal places.

Added open(STDOUT... to utils.pm::notify() so that the log file is guaranteed to be opened when writing to it.  A problem was occurring if the log was rotated without restarting vcld.  After being rotated, the log file remained empty.

Updated regex in utils.pm::getdynamicaddress() to check for a space or '.' after the node name when parsing /etc/hosts.  It was incorrectly finding node names with characters after the name it was supposed to be looking for.  For example: vcla1-10 may be used if looking for vcla1-1.

Updated utils.pm::run_ssh_command() and run_scp_command() to not add the string 'none' to the output if no output was returned.  This string may throw off other subroutines which parse the output and expect something exact.  Rearranged error checking in run_scp_command() so that multiple attempts aren't made if certain errors occur which indicate the connection was made but something is wrong with the SCP arguments.",VCL-298
5d015ab7001746d888502f2291aaa77528c96267,,,1,['managementnode/lib/VCL/Module/Provisioning/esxthin.pm'],"VCL-248

removed RELOAD flag if node is not pingable",VCL-248
668fcb8c3650105876d70232374ded7e4c7b2b6c,,,1,['managementnode/lib/VCL/Module/Provisioning/esx.pm'],"VCL-248

removed RELOAD flag if node is not pingable",VCL-248
74d40a9089fbf0d04a249de4656e697d2dbef54b,,,1,['managementnode/lib/VCL/Module/Provisioning/vmware.pm'],"VCL-248

removed reload flag is node is not pingable.",VCL-248
64f9f187e5b8849ef904a599e7b4bec2e679981a,,,1,['managementnode/lib/VCL/Module/Provisioning/vmware.pm'],"VCL-224

more cleanup of idenity path",VCL-224
8bdb1fc3b7572497a39c26de39180d4d0270803c,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-224

Removed legacy repository paths",VCL-224
720bcd61ddc97754d9a280260dd117b65784539a,,,1,['managementnode/etc/vcl/vcld.conf'],"VCL-224

removed legacy REPOSITORY paths",VCL-224
33c95afe61f98edff63a76cb1692705e3bd71c47,,,1,['managementnode/etc/vcl/vcld.conf'],"VCL-224

removed IDENTITY* key paths, now being pulled from database",VCL-224
9bd0fd5844ef6fe39dd6f9c3cba8a3404ca59a58,,,6,"['managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm', 'managementnode/lib/VCL/Module/Provisioning/esx.pm', 'managementnode/lib/VCL/Module/Provisioning/esxthin.pm', 'managementnode/lib/VCL/Module/Provisioning/vmware.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT21.pm', 'managementnode/lib/VCL/utils.pm']","VCL-224

Removed all instances of IDENTITY_* keys. 
The ssh identity keys are now pulled from the databae and access via the %ENV hash 
or through the DataStructure.pm module.",VCL-224
f55fbf9a3be61c191c859b72749b6777c2a5749f,,,1,['managementnode/lib/VCL/DataStructure.pm'],"VCL-333

Removed if(!defined(... so ENV{management_node_info} will get created correctly.",VCL-333
66eaee794676344d026be20be1b8e5222acc244c,,,1,['managementnode/lib/VCL/Module/Provisioning/esx.pm'],"typo from previous commit, removed a =cut",
7caa43d6ee9c7b3afef6a228afbb44567666f9b1,,,2,"['managementnode/etc/vcl/vcld.conf', 'managementnode/lib/VCL/utils.pm']","VCL-224

Removed references to IMAGELIB* values. This is stored and retrieved from the database management node table and no longer needs to be in vcld.conf",VCL-224
67edacbbad27029d87bb29f54c25c550c468ae42,,,1,['managementnode/lib/VCL/Module/Provisioning/esxthin.pm'],"VCL-224

Removed reference to IMAGELIB*, values are available through datastructure.pm.

This module is not using any image retrivial method, if peer managementment nodes are enabled.",VCL-224
04dfc1c87858f57ef2ab52540f2140c9ad75264b,,,1,['managementnode/lib/VCL/Module/Provisioning/helloworld.pm'],"VCL-224

removed references to IMAGELIB*, this is being pulled from datastructure.pm",VCL-224
717877e9164c25b01d405946616dd4022ca771b3,,,1,['managementnode/lib/VCL/Module/Provisioning/esx.pm'],"VCL-224

Removed reference to IMAGELIB*, values are available through datastructure.pm.

This module is not using any image retrivial method, if peer managementment nodes are enabled.",VCL-224
f4a2becd79e017aa179d85a00478324af1820508,,,1,['managementnode/lib/VCL/Module/Provisioning/vmware.pm'],"VCL-224

removed references to IMAGELIB*, this is being pulled from datastructure.pm",VCL-224
f59fcebd42d99c4f53d833f78d25101c02c7aef9,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT2.pm'],"VCL-239

removed power_on,power_off,power_reset,power_status
These routines get inherited from xCAT.pm",VCL-239
5ab0774b655c147945195b021a29d3618a8295f1,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT2.pm'],"VCL-180

added power_off,power_on,power_status,power_reset,wait_for_on,wait_for_off routines",VCL-180
7fc0c4e985c2915c5b2c797b7ea8a479966f9ae9,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT2.pm'],"VCL-239

hardcoding xCAT group member ship so correct postscripts will be run based on the vcl project name from the image profile table.",VCL-239
54353e9c7d055c15272596263dbca329ea7ae21d,,,2,"['web/.ht-inc/images.php', 'web/.ht-inc/utils.php']","VCL-125
VCL-325

images.php:
-added in patch attached to VCL-125 by Andy Kurth to add control of rootaccess field in imagemeta table
  -modified editOrAddImage, confirmEditOrAddImage, viewImageDetails (tweaked this part to always show rootaccess field, also modified to always show checkuser field), processInputVar, updateImage, addImage
-modified subimageDialogContent: if there were duplicate subimages, only one of them was showing up which was introduced when I made the images sorted; corrected to still sort, but show all subimages
-modified AJremSubimage: moved code to check for and delete imagemeta entry to separate function in utils.php
-modified updateImage: added call to checkClearImageMeta to get the imagemeta entry cleared if all values set to defaults

utils.php:
-added in patch attached to VCL-125 by Andy Kurth to add control of rootaccess field in imagemeta table
  -modified getImages to include rootaccess field
-added checkClearImageMeta",VCL-125
acb4db1de14b2f1f8d181c8bbb345800c1e733ba,,,2,"['web/.ht-inc/utils.php', 'web/.ht-inc/vm.php']","VCL-206

vm.php: modified getVMHostData - the vmprofile table was being pulled in to the query for no reason; removed it

utils.php:
-modified sortKeepIndex: added ending of .edu, .com, .net, .org and checking $b for same as $a when checking to see if compareDashedNumbers should be called instead of strcasecmp
-modified compareDashedNumbers to compare full domain instead of just first part",VCL-206
17677a4827d8d43179ee10b33e47f2395f7d5085,,,1,['web/.ht-inc/images.php'],"VCL-325

to help keep the continuations table a little cleaner, I meant to make the AJaddSubimage and AJremSubimage continuations single use; now, they have $multicall set to 0",VCL-325
6065509f9b3356eb04e2056511599d5c3054c145,,,5,"['web/.ht-inc/images.php', 'web/.ht-inc/states.php', 'web/.ht-inc/utils.php', 'web/js/code.js', 'web/js/images.js']","VCL-325

I decided to just change how subimages are managed completely and make it more web 2.0/ajaxy

images.js:
-added addSubimage
-added addSubimageCB
-added remSubimages
-added remSubimagesCB

code.js: added sortSelect

images.php:
-modified editOrAddImage: removed references to subimtAddSubimage; changed displaying/managing of subimages to be a dijit DropDownButton/TooltipDialog
-added subimageDialogContent;
-added AJaddSubimage
-added AJremSubimage
-modified submitEditImageButtons - removed ""Remove Selected"" and ""Add Subimage"" submodes
-removed removeSubImages
-removed printAddSubimage
-removed submitAddSubimage

states.php:
-added subimageDialogContent
-added AJaddSubimage
-added AJremSubimage
-removed submitAddSubimage

utils.php:
-modified getImages: set imagemetaid to NULL if it is non-null in the image table, but the corresponding record in the imagemeta table is missing
-modified getDojoHTML: added DropDownButton, FilteringSelect, Button, and Dialog to newImage...updateExistingImage section",VCL-325
b1ecd8af4f896174204ee3c1349ac5143cb559fb,,,2,"['web/.ht-inc/computers.php', 'web/.ht-inc/utils.php']","VCL-220

utils.php: modified isAvailable - added condition to query that selects computers requiring virtualmachines to have a vmhostid that is not NULL

computers.php: added check when adding computers that requires virtual machines to be in the maintenance state",VCL-220
f778d366d7b4314347a111dc34133055436ea71b,,,1,['web/.ht-inc/statistics.php'],"VCL-244

modified viewStatistics - added $imagefails that tracks how many times each image failed; it gets printed for people with viewmode of ADMIN_FULL or higher",VCL-244
f813ea66a8c514d5031aa3c1418f2e3ed124a92c,,,1,['web/.ht-inc/utils.php'],"VCL-241

modified getCompLoadLog: for future reservations, we now just use 10 sec as the time spent in the first state since we don't know when preloads start",VCL-241
cce17c5de619296226463ba202b510f600779043,,,4,"['web/.ht-inc/authentication.php', 'web/.ht-inc/authmethods/shibauth.php', 'web/.ht-inc/privileges.php', 'web/.ht-inc/utils.php']","VCL-250

After correcting this issue, I discovered that passing an affiliation not in the affiliation table would cause a query error.  testGeneralAffiliation in authentication.php had to be modified to correct this, resulting in getUserInfo and getAffilidAndLogin in utils.php needing to be modified, and anything that calls either of those functions.

shibauth.php: modified updateShibUser - check for return status of getAffilidAndLogin, if -1, return NULL

utils.php:
-modified checkAccess - uncommented check to see if $authtype is empty after trying to match the user's affiliation
-modified validateUserid - return 0 if return status of getAffilidAndLogin is -1
-modified getAffilidAndLogin - pass along return status of test function if it is non-zero
-modified addOwnedResourceGroups - return without modifying anything if getUserInfo returns NULL
-modified getUserInfo - return NULL if getAffilidAndLogin returns -1

privileges.php: modified checkUserHasPriv - return 0 if getUserInfo returns -1

authentication.php: modified testGeneralAffiliation - if getAffiliationID returns NULL, return -1",VCL-250
5b4ce0205337560bcb4a8666afdd0aa2025abd9e,,,2,"['web/.ht-inc/errors.php', 'web/.ht-inc/groups.php']","VCL-227

groups.php:
-modified checkForGroupUsage: added checks for user group being used in resourcegroup, blockRequest, imagemeta, and usergroup tables
-modified confirmDeleteGroup: changed text stating a user group can't be deleted due to it being in use to be more generic instead of just about the privlege tree

errors.php: added errors 311, 312, 313, and 314, all of which are about which query was a problem in checkForGroupUsage",VCL-227
652e2ffc72fece13125c43f9d2ac040bf629cb03,,,2,"['web/.ht-inc/utils.php', 'web/.ht-inc/xmlrpcWrappers.php']","VCL-32

xmlrpcWrappers.php and utils.php:
-added XMLRPCaddRequestWithEnding - like XMLRPCaddRequest, but allows the end time to be specified
-added XMLRPCextendRequest - allows an active request to be extended
-added XMLRPCsetRequestEnding - allows a new end time to be specified for a request",VCL-32
67af7df0e50243b13aba020f5ef9d9fb3df4c109,,,1,['web/.ht-inc/requests.php'],"There were two places where getUserMaxTimes was being called (in editRequests and printReserveItems) with 'initialmaxtime' as an argument, which doesn't make sense given what it accepts as arguments.  Fortunately, it defaulted to a sane value.",
eff01fa63d1dde0d782778b6851934baa162a386,,,2,"['web/.ht-inc/states.php', 'web/.ht-inc/utils.php']","VCL-138

states.php: removed entries for vcldquery

utils.php:
-modified initGlobals - removed mode checks for vcldquery
-modified checkAccess - removed global reference to $vcldquerykey and removed mode check for vcldquery
-removed vcldquery function",VCL-138
8fb43d1dbea8a0f925cc7285a172eba31817dab6,,,6,"['web/.ht-inc/images.php', 'web/.ht-inc/privileges.php', 'web/.ht-inc/requests.php', 'web/.ht-inc/userpreferences.php', 'web/.ht-inc/utils.php', 'web/shibauth/index.php']","VCL-93

shibauth/index.php: if $row['shibonly'] is false, we now call getUserlistID with $noadd set; if it returns NULL, we call updateShibUser to get the user added to the db without using LDAP

requests.php: modified viewRequestInfo and confirmDeleteRequest to set $noupdate when calling getUserInfo

privileges.php: modified userLookup to try calling getUserInfo with $noupdate set if first call to it returns NULL

images.php: modified addImage to set $noupdate when calling getUserInfo

utils.php:
-modified initGlobals - try calling getUserInfo with $noupdate set if first call to it returns NULL
-modified checkAccess - try calling getUserInfo with $noupdate set if first call to it returns NULL
-modified addOwnedResourceGroups - set $noupdate when calling getUserInfo
-modified getUserInfo - added $noupdate as an optional argument that will return existing user data even if lastupdated is expired

userpreferences.php: modified submitUserPrefs - set $noupdate when calling getUserInfo


VCL-139

utils.php: modified main - there were 2 identical conditionals for the preferredname, changed the second one to be for firstname",VCL-93
d9cbefb6083121aa16abe0c63cae116389fe9eb0,,,1,['web/.ht-inc/computers.php'],"VCL-189

modified confirmEditOrAddComputer - added extra conditional for continuations mode to only be computerAddMaintenanceNote if doing an edit
modified addComputer - if the state is maintenance state, we create a note to be placed in the notes field",VCL-189
337e6e10a98ab71cad73240d7835a6c4aa989dd8,,,1,['web/.ht-inc/utils.php'],"VCL-148

modified getUserRequests - added managementnodeid to the returned data",VCL-148
3e3b63cb806e9453a1339dd5f2a9ffa0b65ae581,,,1,['web/.ht-inc/computers.php'],"VCL-303
modified submitCompStateChange to look up the imageid and imagerevisionid for the noimage image

VCL-233
corrected where I forgot to change $passes to $fails when copy/pasting code",VCL-303
32c032d1a2984f24247ba81e5805a64982cd0a33,,,1,['web/.ht-inc/authmethods/shibauth.php'],"VCL-299
VCL-300

modified updateShibUser to update the user with a matching id instead of uid, and to not update the emailnotices field

thanks to Sean Dilda for reporting these and showing what in the code needed to be corrected",VCL-299
2a2c47ab52a4cb7ee7e14b03d85ea94fca2ea7fd,,,3,"['web/.ht-inc/computers.php', 'web/.ht-inc/vm.php', 'web/js/vm.js']","VCL-233

computers.php: modified submitCompStateChange - added $fails array to track any computers for which simpleAddRequest returned 0 which are then reported by the page output

vm.php:
-modified AJvmFromHost - if simpleAddRequest returns 0, add computer to $fails array with a reason of 'nomgtnode'
-modified AJvmFromHostDelayed - added $fails array to track computers for which simpleAddRequest returns 0 and return with JSON data

vm.js: modified vmFromHostCB and reloadVMhostCB - changed section dealing with fails to print two different messages based on the failed reason",VCL-233
663b3c1c630f37219a36f92442923006acfeaea8,,,1,['web/.ht-inc/requests.php'],"VCL-148

modified viewRequests: added extra column if user's viewmode is ADMIN_DEVELOPER to be able to see the management node assigned to a reservation",VCL-148
82e02cfeae0b55872232c7b21d74dc816580c8f3,,,1,['web/.ht-inc/help.php'],"VCL-139

oops - forgot to save one last time; moved preg_replace in printHelpForm for $name and $summary outside of magic_quotes check",VCL-139
33751db9d05b406415043b1e770d8796cdf52751,,,5,"['web/.ht-inc/help.php', 'web/.ht-inc/privileges.php', 'web/.ht-inc/requests.php', 'web/.ht-inc/userpreferences.php', 'web/.ht-inc/utils.php']","VCL-139

help.php:
-modified printHelpForm to only fill in the name of the user if name fields are defined and to handle magic_quotes being on
-modified submitHelpform to handle magic_quotes being on and to allow name to be empty

requests.php: removed adminEditRequest, confirmAdminEditRequest, and submitAdminEditRequest - these have been commented out for a long time and were referencing user's names. If the functionality was ever needed again, it would probably be implemented very differently; so, it was safe to dump these.

userpreferences.php: modified userpreferences() to only show the Personal section if apprioprate fields (names, email, local affiliation password) are set for the user

privileges.php: modified userLookup to only print name and email info if defined for the user

utils.php: modified main to only print the Hello message if names are defined for the user",VCL-139
20a5b41c26ea109eebc655401b69f35c6f7aeaa4,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT2.pm'],"VCL-239

Created a new xCAT2 module xCAT2.pm

This will be the default moving forward, but will still allow for xCAT21.pm to exist for a couple of sites that are still using xCAT2.1",VCL-239
97a0ae3c4c55e160fd49a79a821bf309ad1883bb,,,1,['managementnode/tools/Windows_Version_6/Security/Sysprep_Reg_Perms.inf'],"VCL-301
Added Sysprep_Reg_Perms.inf to configure the registry permissions on the HKLM\...Sysprep key so they can be modified.",VCL-301
cf59f3b921d6c908da6eef755c0268be2c2ac244,,,1,['managementnode/lib/VCL/Module/OS/Windows/Version_6.pm'],"VCL-301
Removed registry key removal from Version_6.pm::deactivate() because the keys are removed by slmgr.vbs -ckms.  Added command to run slmgr.vbs -dlv to display the license information before running Sysprep.",VCL-301
f700117a21594cff9c7abdc87bc05cb74910fe34,,,1,['web/js/groups.js'],"VCL-98

changed AJAX code to use dijit.Tooltip",VCL-98
b64c094b93a534aa100574e0e194c9e02d2c8571,,,1,['web/js/code.js'],"VCL-98

removed hideResStatusPane because it is no longer used",VCL-98
a85b7230743dd8ffaf88f20df964c2222a8a902d,,,1,['web/css/privileges.css'],"VCL-98

changed class for dijitTreeIcon, dijitFolderOpened, dijitFolderClosed, and dijitTreeNodeSelected from default to privtreediv",VCL-98
96b5372f4e79268fc433b5a51d7d20e9dc6592d0,,,1,['web/.ht-inc/authmethods/ldapauth.php'],"modified validateLDAPUser to search for 'dn' instead of the what is defined for 'email' in the $auth array

added closing php tag to file",
307e7fe78bf3a29b494dd2be4366acdc55757946,,,1,['web/.ht-inc/utils.php'],"VCL-306
removed require_once for php5extras.php

removed layouttable id for table in pickTimeTable

VCL-98
added dijit.Tooltip to viewGroups mode in getDojoHTML",VCL-306
7553537e5095b8df0563603b48d49f99cc938041,,,1,['web/.ht-inc/requests.php'],"VCL-295

modified AJupdateWaitTime to have an extra check of the length to make sure it allows 12 hours for imaging reservations",VCL-295
a32ca65f6d7d75758212a548681b9099efcb6694,,,1,['web/.ht-inc/privileges.php'],"VCL-98

added div around tree to have better control over css of tree

added 'return false' to onClick function for each button that didn't already have it to keep them from causing IE to reload the page",VCL-98
ae90689e13e457ebe44070667e142f42f74cc037,,,1,['web/.ht-inc/groups.php'],"VCL-98

changed mouseover AJAX code for showing members of resource groups to use dojo's popup dialog because some themes were getting the popup in the wrong place",VCL-98
c5fb37d6ba6ae3936fa02ef55f53bcfd1f87d5ec,,,1,['web/.ht-inc/conf.php'],"VCL-306
moved date_default_timezone_set to here from php5extras.php",VCL-306
8cdfd722afcad13e756c107a0966aee356c9faa7,,,6,"['web/.ht-inc/computers.php', 'web/.ht-inc/images.php', 'web/.ht-inc/managementnodes.php', 'web/.ht-inc/schedules.php', 'web/.ht-inc/userpreferences.php', 'web/css/vcl.css']","vcl.css:
changed css for usergrouptable td and th, resourcegrouptable td and th, and layouttable ids to have a collapsed border

userpreferences.php:
removed layouttable id from main table

schedules.php, managementnodes.php, images.php, computers.php:
added layouttable id to several tables so they would get borders",
8ba9fed099b5943e02a75215659d2c43f4de7f70,,,1,['managementnode/tools/Windows/Scripts/update_cygwin.cmd'],"VCL-301
Added call to rebaseall in update_cygwin.cmd so that it runs after an image is loaded.  This is needed for Windows 7 or else sporadic problems with sshd may occur.",VCL-301
f960b2419b7f05e9c606ad081dd61127b72848bb,,,1,['managementnode/lib/VCL/Module/OS/Windows/Version_6.pm'],"VCL-301
Increased the amount of time to wait for the computer to become unresponsive in Windows/Version_6.pm run_sysprep() from 5 minutes to 12.",VCL-301
ef4566fefba7a019dc881460b2c355c49781a6ce,,,1,['managementnode/lib/VCL/DataStructure.pm'],"VCL-329
Fixed bug in DataStructure.pm get_computer_private_ip_address(). The regex that locates the line in /etc/hosts for the computer was modified to allow for both the short hostname and full DNS name in the hosts line.  Also added a warning message to _automethod if an attempt is made to call $self->data->[sub name], where [sub name] doesn't begin with 'set' or 'get'.",VCL-329
6aa5874b446c35a0f657bf9de05dddf262f0c737,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT21.pm'],"VCL-239

- path change for nodeset to XCATROOT/sbin
- getting private_ip_address from database instead of /etc/hosts file",VCL-239
262f055eff788017a163bc488b5db8f2c26c47d8,,,1,['managementnode/tools/Windows/Scripts/set_computer_name.vbs'],"VCL-327
Changed set_computer_name.vbs to call ""%comspec% /c type currentimage.txt"" rather than using the VBScript commands to open and read the file.  This corrects a problem if certain applications such as Aspen are installed in the image which have some sort of hook into the VBScript file open command.  A box was being displayed during Sysprep minisetup asking for the application's installation files.",VCL-327
7f9c09ccbf98ef83e473140bf3fd027e41356d7a,,,1,['INSTALLATION'],added text to installing perl modules,
84b7eeda43f0e5ff09d8d08964189613a9c9fbd3,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-145
Updated get_driver_inf_paths() and set_device_path_key() in Windows.pm to allow for an empty Drivers directory.",VCL-145
7028dbf5a8b1752b2656f1a3ea0a4c8e7d824536,,,3,"['managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/blockrequest.pm', 'managementnode/lib/VCL/utils.pm']","VCL-127
Updated utils.pm::rename_vcld_process() to include the computer, image, and user name in the process name.  Removed Perl class name because it's useless, the state name is already included.  Removed code that sets the $ENV{class_name} variable from State.pm and blockrequest.pm because it was only being used by rename_vcld_process().",VCL-127
bbbcd356142ff5ed25fa14470b673887fdfd58aa,,,1,['managementnode/bin/vcld'],"VCL-127
Moved call to preplogfile() to the beginning and moved call to rename_vcld_process() to after daemonize().  rename_vcld_process() contains calls to notify() and STDOUT should be redirected by daemonize() before it is called.",VCL-127
ebf2ec4bdbb87db01c790a240d11347ed7d0bf28,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-127
Reworked the code in utils.pm::notify() to not open a filehandle every time it's called. This should resolve ""Filehandle STDOUT reopened as FILE only for input"" errors in the log output.  Moved initialization output from the INIT block to preplogfile() so it's all in one place.

Other
Added check for ""resource temporarily unavailable"" in run_ssh_command so that the command is retried instead of failing when this occurs.",VCL-127
86800fbd57bb8984a2eb0718b1e5044f1975220e,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-326
Added disable_shutdown_event_tracker() subroutine to Windows.pm. This is called by pre_capture(). It prevents the box from appearing asking for a reason when the computer is shutdown, rebooted. The box may also appear at login if the computer was shut down unexpectedly. Reservations will fail if this happens just prior to an image being saved. The setting is enabled by default on Windows Server.

VCL-322
Added code to make multiple ipconfig attempts in Windows.pm::get_network_configuration(). This command occasionally fails, but succeeds if another attempt is made.",VCL-326
e004515d090e0d210ce26603c6c6a97bdeeb68a2,,,1,['web/.ht-inc/php5extras.php'],"VCL-306

Moved configuration of timezone to conf.php.  That was the only thing in this file; so, I'm removing it.  We're not supporting php4 anymore anyway.",VCL-306
a546ff095245fa227796035ed0cf88fe0b719c13,,,1,['web/js/privileges.js'],"VCL-98

fixed bug in isChildFocused that sometimes caused the wrong value to be returned, causing the tree to be able to collapse without changing the focus to the now collapsed node",VCL-98
a57362dff32012a03299eee05df550b0e52359af,,,1,['web/css/privileges.css'],"VCL-98

added CSS to support new dijit tree",VCL-98
c4d7451b634d3f93b428b33f8384685f0301b992,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-315
Windows.pm::firewall_enable_rdp() was missing ""return 1"" at the end.",VCL-315
699fb5fc8023aae3de57a1d2053a13629fac14e6,,,1,['mysql/vcl.sql'],added table loginlog,
466910c27eaabe45f74377a7d887c8dd19b9a8bc,,,3,"['managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/7.pm']","VCL-301
Added disable_hibernation() and disable_ceip() (customer experience improvement program) subroutines to Windows.pm and added calls from pre_capture().

Modified Windows.pm::reg_add() to allow 0 to be passed as the registry data argument.

Added DisableSR=1 registry key to Windows.pm::disable_system_restore().  It had only been setting the DisableConfig key.

Updated the SSH firewall subroutines in Version_6.pm.  A single SSH command is executed which consists of multiple netsh.exe commands chained together.  The existing SSH rules need to be deleted and then the desired rule is added in the same SSH command.  It would occasionally hang because the SSH connection is broken when the rules are deleted.  I added the get_firewall_state() sub.  When the SSH firewall rules are modified, the firewall state is first checked -- on or off.  If it's on, it gets turned off, the SSH rules are modified, then turned back on.  This should prevent the SSH process from hanging.  Also updated other firewall subroutines for consistency.",VCL-301
6badfe46f80489d34edeb783f9bde57a648506e3,,,1,['web/.ht-inc/conf.php'],"moved $clickThroughText to be within the ""things to be modified section""",
f3b4d9d89c013fca51e7735e19c7f6c2b30b48a1,,,1,['managementnode/lib/VCL/Module/OS/Linux/UnixLab.pm'],"VCL-307

added empty routine to UnixLab.pm",VCL-307
acb34fe43b84cb1a8c7e7b5f9640948f3c2a76c8,,,2,"['managementnode/lib/VCL/Module/OS/Windows/Version_6/7.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_7/7.pm']","VCL-301
Removed the Version_7 directory and Version_7.pm.  Moved 7.pm to the Version_6 directory since Windows 7 is actually 6.1.  Moved code which used to be in Version_7.pm to 7.pm.",VCL-301
0fb559207adc59875d2048c7c80ef175312b25c4,,,1,['managementnode/tools/Windows_Version_6/Security/My_Computer_Reg_Perms.inf'],"VCL-301
Removed tools/Windows_Version_7 directory. It was created not realizing Windows 7 is actually version 6.1.  The Windows 7 files will be changed to inherit from Version_6.  Moved My_Computer_Reg_Perms.inf to Windows_Version_6/Security.",VCL-301
1e11e608ea23e4e7dee8d3a0bbaf190b8fd9c039,,,1,['managementnode/bin/S99vcld.linux'],"Added echo after ""Starting"" line in S99vcld.linux (vcld daemon startup script). vcld prints output to stdout when it starts. The first line of vcld's output was appearing on the ""Starting"" line.",
da2bf5475a8442f3000efa8b946a61a732a36d2c,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-291
Increased time to wait for SSH after an image is loaded from 600 seconds to 900 seconds.  Also commented out an unnecessary DEBUG message.",VCL-291
40194198b9ffbf7af0e6f224e071749d22c8c36d,,,1,['web/themes/default/css/vcl.css'],"VCL-98

removed #header

changed '#content' to '.default'
changed '#content h2' to '.default h2'
added '.default #content'
changed '#content table' to '.default #content table'
changed '#content table th' to '.default #content table th'
changed '#content table td' to '.default #content table td'",VCL-98
132297422efd6ecacba8ed868dd2240b0d5962f6,,,1,['web/themes/default/page.php'],"VCL-98

changed adding doxygen.css for $mode == viewdocs to a more general function that was added to utils.php - getExtraCSS to allow more flexibility for different modes being able to add in additional css files

moved class=default from content section to be on the body tag",VCL-98
c22fdb72c372cac64140a3452de481ee0ee5db91,,,1,['web/themes/copydojocss.sh'],"VCL-98

There were some small changes in the latest dojo's css. Updated code to match those changes.",VCL-98
76562145d83a53b2d9378f7d33087cc76a079d00,,,1,['web/shibauth/index.php'],"VCL-294

added a call to addLoginLog",VCL-294
14d00f69f840d33fcc2872b39de260a45b8e83d8,,,1,['web/js/privileges.js'],"VCl-98
VCl-200

moved nodeSelect here from code.js
moved refreshPerms here from code.js
moved submitAddUser here from code.js
moved addUserPaneHide here from code.js
moved submitAddUserGroup here from code.js
moved addUserGroupPaneHide here from code.js
moved privChange here from code.js
moved submitAddResourceGroup here from code.js
moved addResourceGroupPaneHide here from code.js
moved changeCascadedRights here from code.js
moved nodeCheck here from code.js
moved submitAddChildNode here from code.js
moved deleteNode here from code.js
moved addChildNode here from code.js
moved setSelectedPrivNode here from code.js

created RPCwrapper
created generalPrivCB
created setLoading2
created unsetLoading2
created updateNodeLabels
created isChildFocused
created showPrivPane
created getTreeIcon
created focusFirstNode
created deleteNodes
created removeNodesFromTree
created removeNodesFromTreeCB
created renameNode
created renameNodeCB
created clearRenameBox
created getGroupMembers
created getGroupMembersCancel
created groupMembersCB",VCl-98
8b2ef9ddaa99518b2e4bd7a1f6aacee9c8d7c227,,,1,['web/js/requests.js'],"VCL-98

moved showResStatusPane here from code.js
moved showWindow here from code.js
moved selectEnvironment here from code.js
moved updateWaitTime here from code.js
moved setMaxRequestLength here from code.js
moved resRefresh here from code.js



VCL-302

created updateBlockStatus
created updateBlockStatusCB",VCL-98
772c083d9138bceea8ee1b25a63b48e11129a276,,,1,['web/js/code.js'],"VCL-98

modified errorHandler:
-added check for args.dojoType being 'cancel' which means that an AJAX call was canceled, in which case, we just return

modified AJdojoCreate:
-simplified with latest dojo so we only have to call the dojo parser

removed fixButtons2
removed initPrivTree
removed checkSelectParent
removed hidePrivileges
removed showPrivileges
removed showAddNodePane
removed showDeleteNodeDialog
removed showAddUserPane
removed showAddUserGroupPane
removed showAddResourceGroupPane
removed submitUserPrivChanges
removed submitUserGroupPrivChanges
removed submitResourceGroupPrivChanges
removed addNodePaneHide
removed submitAddResource
removed submitAddResourcePriv

moved showResStatusPane to requests.js
moved showWindow to requests.js
moved nodeSelect to privileges.js
moved refreshPerms to privileges.js
moved submitAddUser to privileges.js
moved addUserPaneHide to privileges.js
moved submitAddUserGroup to privileges.js
moved addUserGroupPaneHide to privileges.js
moved privChange to privileges.js
moved submitAddResourceGroup to privileges.js
moved addResourceGroupPaneHide to privileges.js
moved changeCascadedRights to privileges.js
moved nodeCheck to privileges.js
moved submitAddChildNode to privileges.js
moved deleteNode to privileges.js
moved addChildNode to privileges.js
moved setSelectedPrivNode to privileges.js
moved selectEnvironment to requests.js
moved updateWaitTime to requests.js
moved setMaxRequestLength to requests.js
moved resRefresh to requests.js

*** add JIRA tags",VCL-98
a3afa0b5682f8ae663f024ab140e71e9b07f73bb,,,1,['managementnode/bin/cygwin-sshd-config.sh'],"VCL-301
Updated cygwin-sshd-config.sh to perform the /usr/bin/rebaseall step required by Windows 7. It generates a batch file and launches it, which then kills all Cygwin processes and proceeds with the rebaseall step. There can't be any Cygwin processes running when rebaseall is run.

Updated the script to detect the Windows version and issue the firewall commands appropriate for the version. Version 6.x uses 'netsh advfirewall'.",VCL-301
c6dc46705aad0c5a3bad46bf8eecc6fef22a4983,,,1,['web/css/vcl.css'],"VCL-98

added #resStatusText
removed background from '#resStatusText table'
changed padding for '#resStatusText table td' to 0 3px
added '#resStatusText table th'
added .resStatusColState
added .resStatusColEst
added '.blockStatusData th'
added .closedtreefolder
added .openedtreefolder
added .privtreeselected",VCL-98
26d25ef0d28d2b8316c085ea0d127422b61e2242,,,1,['web/.ht-inc/utils.php'],"modified checkAccess:
-allow blockRequest mode if user is a member of a current block reservation

modified validateUserid:
-if shibonly is set for the specified affiliation and the user is not in the database, return 0

modified doQuery:
-if $user['id'] is not set, use 0 as the userid to insert into querylog

modified getUserInfo:
-added memberCurrentBlock to returned data

added getBlockRequestIDs

modified showTimeTable:
-added $imaging variable to get passed on to new reservations page

modified setAttribute:
-removed newline from returned string

added sendJSON

modifiedgetNavMenu:
-display Block Reservations if user is a member of a current block reservation

added getExtraCSS

modified getDojoHTML:
-changed code for privileges page to use latest dojo
-changed code for new reservations page to use latest dojo
-added requires block reservations page
-removed old dojo javascript code",
f2578ad4237589ac23a99cbc6a6f63bad480bb70,,,1,['web/.ht-inc/states.php'],"VCL-98
VCL-200
VCL-295
VCL-302

$noHTMLwrappers:
-added AJsubmitRenameNode
-removed submitCreateImage
-removed submitCreateTestProd
-added AJupdateBlockStatus
-added JSONprivnodelist
-added jsonGetUserGroupMembers
-added jsonGetResourceGroupMembers

block reservations section:
-added viewBlockStatus
-added AJupdateBlockStatus

manage images section:
-removed createSelectImage
-removed submitCreateImage
-removed submitCreateTestProd

privileges section:
-removed addChildNode
-removed deleteNode
-added AJsubmitRenameNode
-added JSONprivnodelist
-added jsonGetUserGroupMembers
-added jsonGetResourceGroupMembers",VCL-98
c60effebe73d072e394197fc1cc36b37bc72acd7,,,1,['web/.ht-inc/privileges.php'],"VCL-98
VCL-200

modified viewNodes:
-removed $openNodes cookie control (now managed directly by dojo's tree)
-updated tree to latest dojo version
-updated node buttons to latest dojo version
-added rename node button
-updated user, user group, and resource group buttons to latest dojo version
-added continuation for looking up user group members via call to jsonGetUserGroupMembers
-added continuation for looking up resource group members via call to jsonGetResourceGroupMembers
-changed popup windows to be dijit dialogs instead of floatingpanes
-added popup for renaming nodes
-updated checkboxes in popups to latest dojo version

modified selectNode:
-removed $openNodes cookie control (now managed directly by dojo's tree)
-updated node buttons to latest dojo version
-added rename node button
-updated user, user group, and resource group buttons to latest dojo version
-added continuation for looking up user group members via call to jsonGetUserGroupMembers
-added continuation for looking up resource group members via call to jsonGetResourceGroupMembers
-removed dbDisconnect/exit

removed recursivePrintNodes
removed recursivePrintNodes2

added JSONprivnodelist
added JSONprivnodelist2

removed addChildNode
removed submitAddChildNode

modified AJsubmitAddChildNode:
-changed dbDisconnect/exit to return
-small changes to how errors are displayed

removed deleteNode
removed submtiDeleteNode

modified AJsubmitDeleteNode:
-changed dbDisconnect/exit to return
-updated followup javascript for latest dojo

added AJsubmitRenameNode

modified userLookup:
-added flag to force updating from LDAP if possible

modified printUserPrivRow:
modified getUserPrivRowHTML:
-added code to print javascript for mouseover of group name to display group membership
-updated checkboxes to use latest dojo

added jsonGetUserGroupMembers

modified printResourcePrivRow:
modified getResourcePrivRowHTML:
-changed tooltip that displayed resources in group for mouseover to be a javascript call to dynamically load the members to cut down on the amount of data that gets sent with the page
-updated checkboxes to use latest dojo

added jsonGetResourceGroupMembers

modified AJchangeUserPrivs:
modified AJchangeUserGroupPrivs:
modified AJchangeResourcePrivs:
modified AJsubmitAddUserPriv:
modified AJsubmitAddUserGroupPriv:
-changed dbDisconnect/exit to return

removed addUserPriv
removed submitAddUserPriv
removed addUserGroupPriv
removed submitAddUserGroupPriv

modified AJsubmitAddResourcePriv:
-added check to make sure user has access to add privileges for the submitted group
-changed dbDisconnect/exit to return",VCL-98
97fd1d396c1e12eb7f49bf5f48e81d82dd21cbab,,,1,['mysql/vcl.sql'],"VCL-301
Added Windows 7 entries to the module and OS tables in vcl.sql.",VCL-301
a2a73a9ac56e1032cc97628cd273d00fa4f95961,,,4,"['managementnode/tools/Windows/Security/Windows_Security_Policies.inf', 'managementnode/tools/Windows_7/Utilities/Sysprep/Unattend.xml', 'managementnode/tools/Windows_Version_6/Security/Security_Center_Reg_Perms.inf', 'managementnode/tools/Windows_Version_7/Security/My_Computer_Reg_Perms.inf']","VCL-301
Added tools directories for Windows 7.

Added Unattend.xml Sysprep configuration file for Windows 7.

Added Security_Center_Reg_Perms.inf security template which opens the permissions on the registry key which needs to be set to disable Security Center notifications.  Added My_Computer_Reg_Perms.inf security template which opens the permissions on the registry key which needs to be set to customize the name of the ""My Computer"" icon on the desktop.  Renamed windows_security.inf to match the other policy template files.",VCL-301
d33502022e92891bb0d76257e0eb5154c84263ff,,,1,['managementnode/lib/VCL/Module/OS/Windows/Version_6.pm'],"VCL-301
Added run_slmgr_ckms() and run_slmgr_cpky() subs to Version_6.pm. They clear the KMS and product keys. These are called by deactivate(). Removed call to ""slmgr.vbs -rearm"". It was causing Sysprep to fail.

Added commands to Version_6.pm::run_sysprep() to delete the MSDTC.LOG file and reinstall msdtc.exe before running sysprep.exe. Sysprep occasionally fails because a MsDtc cleanup step fails. These steps prevent that from happening or remedy it if it already happened.

Fixed regex in get_license_status() to handle multiple-word status strings.

Uncommented line in Version_6.pm::activate() to call activate_mak(). It was commented for testing.",VCL-301
cc0f2e0cc489fc2b330dc916a732d56d7a244076,,,1,['managementnode/lib/VCL/Module/OS/Windows/Version_7.pm'],"VCL-301
Added ""return 1"" to end of Version_7.pm::pre_capture().",VCL-301
dce8ff8f79d5da7924d28e98e26d6d1b039cd151,,,4,"['managementnode/lib/VCL/Module/OS/Windows/Version_6.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/Vista.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_7.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_7/7.pm']","VCL-301
Changed Version_6.pm::pre_capture() to use an array and a loop rather than having many lines calling disable_scheduled_task().

Moved the call to disable the OptinNotification scheduled task from pre_capture() in Version_6.pm to Vista.pm because it only applies to Vista.

Added Windows 7 and Windows Server 2008 R2 keys to Version_6.pm::get_kms_client_product_key().

Fixed bug in Version_6.pm::run_slmgr_ipk() where it was calling next instead of return.

Renamed Version_6.pm::ignore_private_default_routes() to set_ignore_default_routes(). Updated the code to set ignoredefaultroutes=enabled on the private interface and ignoredefaultroutes=disabled on the public interface.

Added Version_7.pm and 7.pm modules for the Windows 7 OS. Version_7.pm is set to inherit from Version_6.pm because the code works for Windows 7 with few exceptions.",VCL-301
dbaa5d8f3af9875063a17b22a90abd35804be0c4,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-301
Moved code which applies Windows security templates to earlier in the Windows.pm::pre_capture() subroutine. This allows registry permission changes made by the security templates to occur before other actions happen which require the permissions. The code to disable Security Center notifications and to set the desktop ""My Computer"" icon name require registry permissions to be opened up before they are attempted.

Updated Windows.pm::delete_scheduled_task() subroutine to check for ""cannot find the file specified"" in the schtasks.exe output. Windows 7 displays this message instead of ""task does not exist"" when attempting to delete a task which doesn't exist.

Added calls to set_device_path_key() in prepare_post_load() and prepare_newsid(). This allows the DevicePath registry setting to be set if Sysprep isn't used, allowing the computer to find the driver files copied during image capture.",VCL-301
d3b5ffb17f9c5374d98ab612eebc40956d0d23eb,,,2,"['web/.ht-inc/images.php', 'web/.ht-inc/requests.php']","VCL-295
VCL-251
VCL-302
VCL-98
VCL-252

images.php
modified selectImageOption to call newRequest when ""Create / Update an Image"" is clicked instead of createSelectImage
removed createSelectImage
removed submitCreateImage



requests.php
modified newReservation:
-added $imaging flag to distinguish imaging reservations from normal ones
-if $imaging, check for imageAdmin access
-if ! $imaging, print javascript to set max initial reservation time
-changed default value for now/later to be now
-set initial time for future reservation to be ~1 hour from ""now""

modified AJupdatWaitTime:
-changed dbDisconnect/exit statements to just return
-moved JS that sets text in submit button to here instead of .js file so that it can set it based on being a normal or imaging reservation

modified submitRequest:
-added $imaging flag
-changed dbDisconnect/exit statements to just return

modified blockRequest:
-only allow ADMIN_DEVELOPER users to create/edit/delete block reservations (this check was elsewhere)
-if user is part of any existing block reservations, print links for them to be able to view the status

modified selectEditBlockRequest:
-added links to view status of active block reservations

added viewBlockStatus - prints status info about an active block reservation

modified viewRequests:
-updated dojo code to use latest version of dojo

modified detailStatusHTML:
-added some column specific css to the table

modified editRequest:
-made messages to users about extending reservations more clear
-added 45 minutes as an increment that can be selected when extending reservation

modified printReserveItems:
-added $imaging and $maxlength parameters
-removed $nolength parameter
-moved position of $length parameter
-added in code for imaging reservations
-changed length generating code to list hours up to 2 days, and then just increments of days after that

modified connectRequest:
-updated text about having to make a new reservation if clicked Connect! from wrong computer to just say that Connect! needs to be clicked from right computer

modified processRequestInput:
-process $imaging continuation var
-make sure max length is at least 12 hours for imaging reservations

added getBlockRequestStatus - gets status information about passed in blockrequest id",VCL-295
14536ef1ca4780a07d38c17154f84b46f069f4ea,,,13,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6.pm', 'managementnode/lib/VCL/Module/Provisioning/esx.pm', 'managementnode/lib/VCL/Module/Provisioning/vmware.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT21.pm', 'managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/utils.pm']","VCL-291
Removed section which calls the OS module's post_load() sub from new.pm. This is now handled by the provisioning modules.

Removed code which checks from SSH from vmware.pm, esx.pm, xCAT.pm, and xCAT21.pm. Added calls to post_load() to these modules.

Created Module.pm::code_loop_timeout(). It gets passed a code reference and timeout arguments. It attempts to run the code until it returns true or the timeout is reached.

Moved wait_for_ping(), wait_for_no_ping(), is_ssh_responding(), and wait_for_ssh() from Windows.pm to OS.pm so they can be used by other OSs. These were updated to use the new code_loop_timeout() sub. They were also changed so the arguments are in seconds rather than minutes for better control. Updated all calls to these subs in the Windows modules to use seconds.

Created OS.pm::wait_for_response(). It accepts timeout parameters and waits for the OS to respond to SSH. Added calls to wait_for_response() in Windows.pm::post_load() and Linux.pm::post_load(). Also created separate Version_6.pm::wait_for_response() sub which uses longer timeout values because Vista and 2008's Sysprep takes much longer.


VCL-185
Removed ""$image_os_type =~ /linux/i"" section from load() sub in xCAT.pm and xCAT21.pm which wasn't being called anymore since vmware.pm::post_load() has been implemented.


VCL-42
Moved set_device_path_key() and get_driver_inf_paths() subs from Version_5.pm to Windows.pm so they can be used by newer Windows OSs. Added call to set_device_path_key() in Version_6.pm::run_Sysprep().


VCL-297
Updated DataStructure.pm::get_computer_private_ip_address() to correctly get the private IP address out of /etc/hosts instead of using the database value.


VCL-298
Removed vmware.pm::vmrun_cmd() subroutine. It wasn't being called from anywhere and actually was calling 'vmware-cmd stop hard'.


Other
Updated utils.pm::_pingnode() to check for the hostname argument.

Updated utils.pm::run_ssh_command() to catch if vmware-cmd was run with a syntax error. It returns exit status 255 when this happens. run_ssh_command() was assuming this meant an SSH error occurred and retried the command 3 times needlessly.

Added optional argument to DataStructure.pm::automethod. If get_... is called with a true argument, warning output is suppressed if the value has not been initialized. This allows get_... to be called when the caller knows the data may not be defined without always generating a warning.

Added DataStructure.pm::get_reservation_info_string() subroutine. It assembles a string with reservation  data to be used in notify messages. Similar code used to be contained within xCAT.pm when a load failed. It was moved out so it can be used in other situations and so a consistent message is displayed.",VCL-291
b73ee070b3fccb206d439a9835bf49d4cd105c0d,,,1,['web/.ht-inc/xmlrpcWrappers.php'],"VCL-78

modified XMLRPCprocessBlockTime to stagger preload reservations by 2 minutes if the estimated image load time is > 14 minutes (stagger by 1 minutes otherwise)",VCL-78
2191d7c13f78835e3f5c91b49e5fffaf67a9ceaa,,,1,['managementnode/lib/VCL/Module/OS/Windows/Version_6.pm'],Changed 1 notify message from OK to WARNING.,
ec9bc4793703c32d21eb454181c9d2848bf97002,,,1,['web/.ht-inc/authentication.php'],"VCL-294

modified localLogin
-corrected calls to addLoginLog to specify auth mech as 'Local'
-added $authMechs as a global",VCL-294
d33b97ecace0b57261b723909c2c589319f69d0d,,,1,['managementnode/lib/VCL/reclaim.pm'],"VCL-185
Fixed minor but introduced in last commit for reclaim.pm. It was attempting to get the image name off the computer's currentimage.txt file before checking if the computer state was reloading. If the computer was already reloading, currentimage.txt can't be read and an unnecessary critical messages was sent. Rearranged code to only attempt to read currentimage.txt if the request laststate is reserved.",VCL-185
0454f989acab41be690af7203a974f58471ff983,,,2,"['managementnode/lib/VCL/blockrequest.pm', 'managementnode/lib/VCL/utils.pm']","VCL-254

added better processing of the block requests, if number of allocated
nodes is less than number requested. Attempt several more times to make
it happen.",VCL-254
6a9c9f73caeedb22ebee23bacadd4480aedaecb8,,,1,['web/.ht-inc/authentication.php'],"VCL-292
VCL-293
VCL-294

modified selectAuth
-added option to save selected authmethod

modified printLoginPageWithSkin
-added optional parameter severtimeout to distinguish if function is being called because of a timeout condition - defaults to 0

modified printLoginPage
-added optional parameter severtimeout to distinguish if function is being called because of a timeout condition - defaults to 0

modified ldapLogin
-added code to perform a socket connection to ldap server before calling ldap_connect
-added several calls to addLoginLog

modified localLogin
-added calls to addLoginLog

created addLoginLog function",VCL-292
d8f3ade04cfcb816d76852bcac27e4f656e045d8,,,1,['web/.ht-inc/errors.php'],"(no issue associated with this)

added 53 - ""No nodes to show on privilege tree""",
a3755aab2a1d5b99f38873197a7c490df2e0e804,,,1,['web/.ht-inc/computers.php'],"(no issue associated with this)

modified processBulkComputerInput to look at startpripaddrss and endpripaddress for anyone instead of just users with ADMIN_DEVELOPER access",
2d87554689bf308cc9d1ace92d475217dfa45dd0,,,1,['web/.ht-inc/authmethods/shibauth.php'],"(no issue associated with this)
modified updateShibUser to set firstname to be the first name from displayName if displayName exists and has no commas in it
added example to updateShibGroups for adding all users from a specific affiliation to a single user group",
803d00e2854c5ef7219c9c6509d2f4e4106ed5aa,,,1,['web/.ht-inc/authmethods/ldapauth.php'],"VCL-139

modified getLDAPUserData
-set first and last names to empty string if not returned by LDAP
-set emailnotices to 0 if email address not returned by LDAP",VCL-139
2fc0cee090dd325b83bcca928bfc18c84c11501b,,,2,"['managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6.pm']","VCL-145
Removed old run_sysprep and prepare_drivers subroutines from Windows.pm. These have been replaced by subroutines in Version_5.pm.

Updated Version_6.pm to utilize the product key and KMS server information now stored in the winProductKey and winKMS tables.

The subroutines in Version_6.pm which call slmgr.vbs were not working for 64-bit OS's. This has been fixed.",VCL-145
b75c5b184bd87ef25df8c449eb31d3a7af1cb5f2,,,5,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux/UnixLab.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/Provisioning/Lab.pm', 'managementnode/lib/VCL/reclaim.pm']","VCL-185
Removed obsolete code from reclaim.pm which was no longer being called because the Linux modules now implement a sanitize() subroutine.  Moved call to sanitize() out of reclaim.pm::process and into a new sub called call_os_sanitize() so that the code can be reused.

Moved get_currentimage_txt_contents() and get_current_image_name() out of Windows.pm and into OS.pm so that they can be used by the Linux OS modules. Created get_current_image_name() sub in UnixLab.pm that overrides the one in OS.pm. Lab machines don't contain a currentimage.txt file and the image name should be correct for lab reservations, so it just returns the reservation image name.

Renamed the initialize() sub in Lab.pm to load(). It will get called at the same time when a reservation is processed.",VCL-185
a51c2088bb36271c740cf8f74d51df4ffd0ba0a7,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-279
Added file existence check in Linux.pm's post_reserve() sub so that it doesn't attempt to run the script if it doesn't exist.",VCL-279
75e5402fd06b3d7351637e655d8999a04491a512,,,2,"['managementnode/tools/Windows_Server_2003/Utilities/Sysprep/sysprep.inf', 'managementnode/tools/Windows_XP/Utilities/Sysprep/sysprep.inf']","VCL-145
Removed unused sysprep.inf files.",VCL-145
4ba7bcd041a6c3b007a801284a8ac9f43084052d,,,0,[],"VCL-95
Set svn ignore property on Windows XP Sysprep directory so Subversion ignores the files that need to be copied into it.",VCL-95
f753f14770bccc011e903d0454d8f367227c5aad,,,0,[],"VCL-95
Set svn ignore property on directories under Windows/Utilities so Subversion ignores the files that need to be copied into them.",VCL-95
384448ec5fb4ce92f4a4da5c1b15388ffa2bcd0a,,,0,[],"VCL-145
Added tools/Windows_Version_5 directory. Also added Drivers directories to Windows_Version_5 and Windows_Version_6 directories.

VCL-95
Set svn ignore property on Drivers directories.",VCL-145
24f9f22dc3bdd11657ca6fc44536e204f4c1c3e4,,,1,['managementnode/lib/VCL/Module/OS/Windows/Version_5.pm'],"VCL-145
Created the following new subroutines in Version_5.pm to support the dynamic creation of the sysprep.inf file for Windows XP and Windows Server 2003:
run_sysprep()
get_sysprep_inf_contents()
get_sysprep_inf_mass_storage_section()
get_driver_inf_paths()
set_device_path_key()

These subroutines utilize the winProductKey table to dynamically inject the correct product key (affiliation-specific or global) into the sysprep.inf file. They also scan the driver files to construct the SysprepMassStorage section of sysprep.inf and to set the DevicePath registry key. As a result, the spdrvscn.exe utility is no longer needed and the template sysprep.inf file does not need to be stored on the management node or in the repository.",VCL-145
a2a775e12716f6515ecdbe68ceedaf3e40891520,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-260
Fixed bug in Windows.pm::set_file_owner() subroutine. It wasn't checking the results from run_ssh_command() correctly.

VCL-269
Fixed bug in Windows.pm::logoff_users(). It passes the numeric session ID to logoff.exe if it's > 0. The logoff.exe utility has problems if the ID is 0. If the session ID is 0, it passes the session name.",VCL-260
64412585de0e181a8af16b27a33e51e4f0d88f73,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-145
Added get_product_key, set_product_key, get_kms_servers, and set_kms_server subroutines to Windows.pm. They get/set data from the winProductKey and winKMS tables.",VCL-145
969a7a0100108ac28cb2b419a1c960430c2b9812,,,1,['mysql/vcl.sql'],"VCL-145
Added winKMS and winProductKey tables to vcl.sql. They will store Windows product keys and KMS server addresses.

VCL-288
Added Global row to the affiliation table in vcl.sql.",VCL-145
5d8986d0711e005b8a5ac17e6a0c8abfaab55f66,,,2,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/utils.pm']","VCL-140
Updated code in DataStructure.pm that handles the variable table. Separated out serialize/deserialize functions from get_variable and set_variable to their own subroutines - yaml_serialize and yaml_deserialize. Modified get_variable and set_variable to make them being called as an object method optional.

VCL-145
Added get_image_affiliation_id sub to DataStructure.pm. This returns the affiliation ID of an image owner. It will be used to determine the product key to use when Windows product keys are stored in the database.

Added get_affiliation_info sub to utils.pm. It returns the contents of the affiliation table.",VCL-140
caa26ef49014eaa9178a906399fe5aaf8690f831,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-286

added update_public_hostname routine - collects the hostname of the
public IP address and sets the hostname of the node",VCL-286
b2f1f5ac8694cdc71f824b4fff0cd9a4394818a9,,,1,['managementnode/lib/VCL/Module/Provisioning/vmware.pm'],"VCL-284
Extended vmware.pm's power_reset sub to check for error that occurs if VMware tools are not running on the guest.",VCL-284
a2b8acc5d5b58e42717301feba15b70b8bf5f372,,,2,"['managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/reserved.pm']","VCL-279
Added code to reserve.pm which checks if the OS module has implemented a post_reserve() sub and calls it. Added post_reserve() sub to Linux.pm which attempts to call /etc/init.d/vcl_post_reserve on the node if it exists. This allows the image creator to create a vcl_post_reserve script which is automatically called after all of the reservation tasks are complete. The script has access to the cluster_info file if it's a cluster reservation. Changed Linux.pm's post_load to attempt to call /etc/init.d/vcl_post_load on the node for consistency.",VCL-279
e00256f100420cc2f2ae1ac9763fc0094a0e69eb,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-279
Added call_post_load_custom() sub to Linux.pm. It checks if /etc/init.d/post_load_custom exists and executes it after an image is loaded. This allows an image creator to easily add a custom script which automatically executes on image load. This functionality already exists for Windows. 

Added $NODE_CONFIGURATION_DIRECTORY class variable to Linux.pm to match Windows.pm.

Also added subroutine headers to Linux.pm where they were missing but did not populate the information.",VCL-279
6b03d2b82eda1fca777452e62796a91269eddea0,,,1,['managementnode/lib/VCL/Module.pm'],"VCL-279
Updated Module.pm to not attempt to call initialize if running in setup mode. In this mode, vcld attempts to create an object for each module. However, a valid reservation DataStructure object does not exist which can be passed to the module. This causes problems if a module has an initialize subroutine which expects a valid DataStructure object.",VCL-279
e66a6a37a84ca74562aa6224e669f8de80295493,,,1,['managementnode/bin/vcld'],"VCL-279
Removed command line argument parsing from vcld. This now resides in utils.pm. Added checks for $SETUP_MODE and $DAEMON_MODE variables which are set in utils.pm.

Moved call to rename_vcld_process to earlier in the code, before daemonize is called and commented out line in daemonize which renamed the process. daemonize was unnecessarily renaming the process because it later got renamed by rename_vcld_process.

Added setup_management_node sub to vcld. This gets a list of the modules in the module table, checks each one for the implementation of a setup sub, and calls setup as needed.",VCL-279
04f9b8027f60ae24589bc1401fa52485e94112c5,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-279
Added get_module_info sub to utils.pm. It returns the info from the module table. It is used to retrieve a list of all modules in the database so they can each be checked for the implementation of a setup subroutine.

Added get_current_file_name, get_current_package_name, and get_current_subroutine_name subs to utils.pm. These are mainly for debugging purposes and return information about the code where they are called from.

Reworked the argument parsing section of utils.pm. All arguments are now parsed in utils.pm rather than having some parsed in vcld. Moved help sub from vcld to utils.pm so that it can be called from utils.pm if the -h switch is used or if an argument problem is detected.

Added $DAEMON_MODE and $SETUP_MODE variables to utils.pm. $DAEMON_MODE gets set if -d is specified and $SETUP_MODE gets set if -s is specified. This -d switch used to be contained within vcld to control if daemon mode was to be used.

Changed BEGIN block to INIT in utils.pm. This allows subs defined later in utils.pm (help) to be called within the INIT block.

Removed old, unused $TESTING variable from utils.pm and command line argument.

Added code to notify sub to save and restore the STDOUT and STDERR handles when the sub is entered and left. This allows other parts of the code to write to STDOUT and have it appear on the screen, rather than having all or none of the output written to the log file. This is needed to implement the setup framework, where the user is asked questions. notify messages still get written to the log file, but STDOUT gets written to the screen.

Other:
Temporarily added back disablesshd subroutine. This is still being called from reclaim.pm for lab computers. The logic in reclaim.pm needs to be reworked and then disablesshd can be removed again from utils.pm.",VCL-279
5d3574a58f08c0bd8ab1dd3a80149599b0871273,,,1,['managementnode/lib/VCL/Module/Predictive/Level_1.pm'],typo,
d74091fbd1b30b8bba7c938a1ebaa4d1323f1167,,,1,['managementnode/lib/VCL/Module/Predictive/Level_1.pm'],"vcl-275
typo",vcl-275
e31c9633413c9b17ae6f105cf51cd3b4c6cf8c89,,,1,['managementnode/lib/VCL/Module/Predictive/Level_1.pm'],"VCL-275

cleaned up debug statements",VCL-275
8a192355c673e6b1ff35d8df446b626973fb08e3,,,1,['managementnode/lib/VCL/Module/Predictive/Level_1.pm'],"VCL-275

corrected usage math.
Added additional usage conditions for setting timeframe
Added more debug statments for vcld.log

VCL-92

Previously done in another commit.

HAVING count > 1",VCL-275
af15069c5f596bd432bd4666d675def0bbc1af54,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-273
Added regex to utils.pm's write_currentimage_txt() subroutine to remove single quotes from the file contents before attempting to write them to currentimage.txt.  This should allow run_ssh_command() to handle the command if the user specified an image pretty name with a single quote/apostrophe.  I attempted escaping the single quotes and this did not work.",VCL-273
9c2446acf2c45508161174e0b347423f3c13d969,,,3,"['managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/reserved.pm', 'managementnode/lib/VCL/utils.pm']","VCL-265

utils.pm: if uid is NULL, set to 0
Linux.pm: if uid  is 0, let OS set uid

VCL-271:
utils.pm: cleaned out unused routines disable_sshd,enable_sshd,add_user,del_user
reserved.pm: removed legacy code from reserved",VCL-265
e964dcfa628eb789895e366b7891efcb29b75a6a,,,1,['managementnode/tools/Windows/Security/windows_security.inf'],"VCL-262
Removed privilege rights section from windows_security.inf security template file. The application of the rights to the accounts specified in the file was overwriting rights already assigned on a computer.",VCL-262
cc4c66231f1ccae5554a9a56a3aecb864b178d07,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-260
Added Windows.pm::set_file_owner() subroutine. Added calls to set root as the owner of /root in pre_capture() and post_load().

VCL-259
Added call to disable the ntsyslog service in Windows.pm::pre_capture(). This service was used to send event log messages to syslog on the management node and isn't used anymore. The service is no longer being properly configured and can cause problems if it attempts to send messages to an address it can't get to.

VCL-261
Reworked output/exit status checking in Windows.pm filesystem_entry_exists() so that it first checks if the output contains ""file not found"" rather than checking the exit status first. This should be more reliable.

VCL-269
Reworked Windows.pm::logoff_users() to check for disconnected sessions in addition to logged in sessions.

VCL-262
Updated Windows.pm::apply_security_templates() to use the ""/overwrite /quiet"" secedit.exe switches instead of ""/verbose"". This causes the .inf file being applied to overwrite existing settings rather than append to them. It is needed to remove the ""log on as a service"" permission from overwriting existing accounts with this permission.

Other:
Increased the amount of time Windows.pm::reboot() will wait for ping to respond from 4 to 6 minutes. 4 is too short under some circumstances.

Added check to Windows.pm::copy_capture_configuration_files() to check if the source configuration directory in .../tools on the management node exists before attempting to copy it to the node.

Added path to Windows.pm::clean_hard_drive(): /home/root/%USERPROFILE%. This directory is occasionally created by some Cygwin SSH operation. I'm not sure where it's coming from but the directory is not needed.",VCL-260
e549011b436ad8c4eb5911f5fb1853175accdadd,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-266
Removed check for 'loadimagecomplete' computerloadlog entry in monitorloading subroutine. It now only checks for 'nodeready'. The 'loadimagecomplete' entry is created before the OS module's post_load() subroutine is called. As a result, monitorloading was returning true before the load was entirely done.

Added OS.moduleid to data returned by get_request_info(). This column was missing.

Changed '&' to '&&' in write_currentimage_txt() where echo and cat commands are chained together.",VCL-266
ea46599240d65b0dbcd0f13210e5a4347b810bcc,,,1,['mysql/vcl.sql'],"VCL-268

added 3 OS ids",VCL-268
9b651b8bcdd2d2115da0f562cd9580b44249bedb,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-267

corrected how the parent id was determined",VCL-267
6f016473172109a29a75d903cbe76201860b874f,,,1,['INSTALLATION'],added note about php-ldap being a prerequisite for adding ldap authentication,
042890c9aca440bf56ec98cb0ce26586660581c7,,,1,['CHANGELOG'],re-exported JIRA release notes,re-
b21fff8c0ebd14fc85af4ceeb0c082099c5f5f25,,,1,['RELEASE_NOTES'],updated roadmap,
feb83c69d0b9291e77c1b51a1ee5ed42b286b4c6,,,1,['README'],"Changed the language of ""dependencies"" to ""system requirements"".",
d5c857b78cee928c9c72c25c6bae0f12002d3349,,,1,['README'],"Updated the README file.  Moved Perl modules required for Jabber to conditional section.  Changed URLs of Perl modules to the ""permalink"" addresses provided by cpan.org.  Changed ""Perl 5.8.0 or later"" to ""Perl 5.8.x"" because problems may occur if Perl 5.10 or other later versions are used.",
b5d7ac609ef7ff03032f94474fa1b216cb06183b,,,1,['managementnode/bin/install_perl_libs.pl'],Added note about licensing to POD DESCRIPTION section. Organized the section that lists the module URLs and added comments.,
07180e256cf606bfb0efc43d99ecfea6ba0daca4,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-263

create a usergroup vcl
added the -g vcl option to the useradd cmd",VCL-263
25da38c8ec6bd26412d85a4cf1afa2651cb4aed6,,,1,['managementnode/lib/VCL/reserved.pm'],"VCL-258

relocated check for cluster loads, so vcld would create cluster_info
file correctly",VCL-258
10da59520a2de4fae50807fb612d3885bb1147d3,,,2,"['managementnode/lib/VCL/Module/Provisioning/esxthin.README', 'managementnode/lib/VCL/Module/Provisioning/esxthin.pm']","refactored clone management logic, includes more configuration parameters in the config section, more testing, and updated documentation",
44c7eccb3ff465405e9b9e72a1a93c0933a112b8,,,1,['README'],Fixed a few typos in README.,
85860171d285c57debc3192fa4a78f0a92acdba0,,,2,"['README', 'managementnode/bin/install_perl_libs.pl']","Added disclaimer to install_perl_libs.pl notifying user of the licenses the Perl modules which the script downloads and installs are distributed under. The user has to enter YES in order for the script to run.

Added to Management Node Perl Modules section in README:
-blurb about the types of licenses the dependency modules are distributed under
-the license type and URL for each Perl module dependency

Added URI and Scalar-List-Utils to list of Perl module dependencies. These needed to be added after uninstalling and reinstalling Perl while testing install_perl_libs.pl. Updated the versions of some of the Perl modules. Added perl-DBD-MySQL to Management Node Backend section in README. I noticed I had to install this separately when testing the changes to install_perl_libs.pl.",
181cd86d3f086c8da9c78dd902241b61f0367135,,,1,['managementnode/lib/VCL/Module/Provisioning/esxthin.pm'],This includes clone monitoring and management of thin versus thick efficiency.  This functionality will be explained in a future commit to the esxthin.README file.  This code has been tested and works.,
3bc79e0a77d8a14962a8e04aa2ea8732360aac4e,,,1,['INSTALLATION'],added step 18 in web code install on entering the identity key files,
253a0582d01c99ea763fe3909847d599e7451c16,,,1,['web/.ht-inc/conf.php'],added comments to clarify what BASEURL and SCRIPT should be,
4c6b51a47fd58364cedc37c5f9c04139525b1e31,,,1,['INSTALLATION'],Added Windows drivers section to INSTALLATION.,
a0156ef8cd8311786a9d5cd2be4fcbe55d36e220,,,1,['CHANGELOG'],regenerated to contain most recent issues,
bf73cefa65e6b59057a4bed8b44d31d71abd8ba2,,,2,"['managementnode/tools/Windows_Server_2003/Utilities/Sysprep/sysprep.inf', 'managementnode/tools/Windows_XP/Utilities/Sysprep/sysprep.inf']","VCL-164
Removed lines from Windows XP and Server 2003 sysprep.inf files under SysprepMassStorage specifying a specific LSI SAS storage driver. Drivers are not included in the repository. Sysprep fails if these lines exist but the driver .inf file they point to does not. Added instructions to the management node installation page describing how to populate the SysprepMassStorage section:
http://cwiki.apache.org/confluence/display/VCL/Management+Node+Installation",VCL-164
b96967634508bb8b4cf670ecb1a8fc5791fa83c1,,,1,['managementnode/bin/gen-node-key.sh'],"VCL-164
Updated gen-node-key.sh. Changed how script checks if it's being run as root to use whoami.",VCL-164
bf3985243792ce4d6f753a0edd849299c0bdef2e,,,1,['managementnode/bin/cygwin-sshd-config.sh'],"VCL-164
Updated cygwin-sshd-config.sh. Moved mount point section to beginning of script and set explicit paths to mount.exe and umount.exe. The script was failing to find mount after /usr/bin was unmounted.  This should allow the script to work if mount points are not configured prior to its execution. Also moved section that sets root as the owner of /home/root to earlier in the script.",VCL-164
4d6ad6b78c8bdb9fad5f6352c1735d5daac7e040,,,2,"['managementnode/bin/cygwin-sshd-config.sh', 'managementnode/bin/gen-node-key.sh']","VCL-164
Reworked cygwin-sshd-config.sh and gen-node-key.sh to make Windows base image creation easier. Added some steps to make the scripts more robust to correct problems which would prevent SSH authentication from a management node to a Windows computer using an identity key. Added comments. Set Subversion properties on these scripts.",VCL-164
11f35fc82e84fbdc5c956fae6cba1972c49595f2,,,1,['web/testsetup.php'],added test to try to resolve the server's own hostname,
4d479162ba47cdfc049bcf0e429386d52165bcec,,,1,['web/testsetup.php'],"fixed check for display_errors where

$a = ''

should have been

$a == ''",
3aa9d006ac89af22a3acb2cbc6ad8e802ee8ff65,,,1,['web/testsetup.php'],modified extensions check to not require json for php versions less than 5.2,
2f9f5e3a35e6b1231cd0024bfa825d3b570bf663,,,2,"['managementnode/lib/VCL/Module/Provisioning/esxthin.README', 'managementnode/lib/VCL/Module/Provisioning/esxthin.pm']","Removed old vestiges of esx.pm, added configuration file options, updated documentation, added https support, more testing was done, and removed all hardcoded paths.",
f1cd09d5802a9d0df7d15e191b1b7f1f7523b1ed,,,3,"['INSTALLATION', 'README', 'managementnode/tools/Windows/Scripts/set_computer_name.vbs']",Removed wsname.exe sections from README and INSTALLATION. Added comment to set_computer_name.vbs explaining that wsname.exe is no longer available and the effect of not having this utility. Left script intact.,
a6cbc79f32159ff493e1e5fe819af2473ad94222,,,2,"['managementnode/lib/VCL/Module/Provisioning/esxthin.README', 'managementnode/lib/VCL/Module/Provisioning/esxthin.pm']","Initial commit of the esxthin.pm module.  This module is commited and working, but still needs the configuration variables placed in the database instead of the esxthin.pm file itself.  Also, it still manages an NFS based image library side-by-side for now; that will be removed later.",
759935326fd6fe8fd541feab38e3d5f360559043,,,1,['managementnode/lib/VCL/DataStructure.pm'],"VCL-247

Extended query to also check exact computer_name",VCL-247
3e428d33f01aee135c1684ec2a66e42f4d2583b3,,,1,['INSTALLATION'],Added section describing how to download/install/configure the Windows dependencies.,
346fd537a5c2ee6da0f109993b2b53740b8db590,,,1,['README'],Improved the wording around the conditional dependences.,
946bdc1cfb59cfba4c47ee15ddd9c8a6081b91e4,,,1,['INSTALLATION'],moved web section to be after database section,
c69799d09e270806e9e71afe7c6fe6978fc4105d,,,1,['CHANGELOG'],corrected. listed dependencies instead of feature changes,
9fdcfd8a327f3a57663ce7537a146cd555d426f7,,,2,"['managementnode/lib/VCL/Module/Provisioning/vmware.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT.pm']","VCL-246
Fixed bug in vmware.pm and xCAT.pm where it's checking for the READY flag during load. The regex was not tight enough. Processes which causes lines to be written to /var/log/messages with the word ""ready"" were throwing off the check.",VCL-246
13cf231fdd42a7a61726a414f1736e885b47845f,,,1,['CHANGELOG'],"added comments on database and  backend
Added line explaining the Jira issues.",
2fc45ec49365bedb6a1aff6691973e925c87c2ad,,,1,['managementnode/lib/VCL/DataStructure.pm'],"VCL-184
Reworked the get_variable() and set_variable() subroutines in DataStructure.pm to handle the serialization column.",VCL-184
29016a92e7b812c0d185d0f3a8ea0ab2acedbe9f,,,1,['README'],Added some descriptive text to the management node parts of the README file.,
665f0f2d257d5b09de9f2d9377f0cca04ff1064e,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-242 

added fix to update the permissions on currentimage.txt",VCL-242
4b14c04dba88a039c2d53ef87504bf8863e4017a,,,1,['INSTALLATION'],adding content to backend section regarding xcat and vmware,
4d24133bdd8f8ecbdcf2850a8cf9a88eecd47b39,,,1,['README'],included NOTE about perl_libs install script,
dcde265b587f59232c5589ac6da17142f54b2b4a,,,1,['INSTALLATION'],added initial content to management node section,
ac042b5858ae33d2112de037d4f04a748041b5f3,,,1,['README'],clean up - removed tar.gz extensions from perl libs deps.,
e71b0665c5148b450c8b705287b56331c02abb14,,,1,['README'],more additions,
474bcaf1307eff7d164c1af791480f535528a51e,,,1,['README'],adding additional deps.,
01754f9278e25378216b0b5ba16fcd7e7131a8c4,,,1,['README'],starting conditional dependiences section,
07d2fc191b5e1a718ccd9242ac68c32e2190a8ed,,,1,['README'],adding backend dependiences,
ad46d6bd158a829b60c9edd36e9be6ac5c156a16,,,1,['web/.ht-inc/vcldphpcall.pl'],old file; this API method has not been support for several years,
7a33f97f7ac02251c980f44963357e48319910d0,,,1,['web/images/blank.gif'],removed execute property,
5f52ab4ae8414cfe6c856400e13134607c1b667c,,,1,['INSTALLATION'],restructured file; changed content for web and database to match online install docs,
413ef7c1071e7d702d07fae3e569f449d23b3d04,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-185

left out 2nd attempt to add user",VCL-185
65aa7476c79351fd46dea29f60d4056e227cc681,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-185

useradd fails if the user_name group exists
added groupdel <username> to delete_user routine",VCL-185
ee3f5c4d4ffd13c472e52de0e296a0000bcf799e,,,1,['CHANGELOG'],added changes in dependencies for web and database,
3611d5052a548285862dd65e5a6c90a99a9ae8d9,,,1,['README'],added web and database dependencies,
7b013b1b30f0edb1ccdbb7e3064f41969616d32d,,,1,['managementnode/lib/VCL/utils.pm'],Fixed bug in utils.pm::insert_reload_request(). It was pulling the image ID and imagerevision ID from the wrong place in the request data hash.  Note: no Jira issue is associated with this commit because Jira is having issues and this is a minor change.,
0a47d11cc75209fb12513dda93cd5f7dfec8a7bc,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-238

typo fix: should have -h for shutdown instead of -r for reboot",VCL-238
5f5d600fc76fbf0ddcb13d45700c464f6fba147f,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-238

moved shutdown -h now command into pre_capture routine

removed legacy capture_start routine",VCL-238
5595d476fa614f5cdd2e5312babe51162c1ab781,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT21.pm'],"VCL-135
Removed section in xCAT21.pm referencing one of NCSU's management nodes. This code would never have been executed.",VCL-135
27608bcb23dab6ba043f446b266a64ca9f54aefe,,,1,['mysql/vcl.sql'],"VCL-135
Updated the value for the ""Granting Access to a New Image/Environment"" row in the documentation table. Changed a link pointing to the ""Resources"" documentation page from an absolute NCSU URL to a relative URL.",VCL-135
2b6949de376a9ffced2458d1c196a0c98f85584d,,,1,['managementnode/tools/xcat2_postscripts/remoteshell-dblssh'],"VCL-135
Removed section in remoteshell-dblssh which creates a group called ncsu on Linux images and adds the group to sudoers. This isn't necessary anymore.  Users are added to sudoers.",VCL-135
4ab56304fd8668863400197a3292708e91c10d7c,,,2,"['managementnode/etc/vcl/vcld.conf', 'managementnode/lib/VCL/reserved.pm']","VCL-135
Updated comment in reserved.pm referencing NCSU regarding the STANDALONE flag. Changed comments in vcld.conf to use a generic school name instead of NCSU.",VCL-135
99021349f2aaf605af5af76c2bb2051c1ba42077,,,4,"['managementnode/bin/health_check.pl', 'managementnode/bin/monitor_vcld.pl', 'managementnode/bin/vclclientd', 'managementnode/bin/vcld']","VCL-135
Removed AUTHOR and COPYRIGHT tags from Perl files under bin.",VCL-135
ca68c6b32820fcd08f9d372c094697a6eac5b26a,,,33,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm', 'managementnode/lib/VCL/Module/OS/Linux/UnixLab.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5/2003.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5/XP.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/2008.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/Vista.pm', 'managementnode/lib/VCL/Module/Predictive.pm', 'managementnode/lib/VCL/Module/Predictive/Level_0.pm', 'managementnode/lib/VCL/Module/Predictive/Level_1.pm', 'managementnode/lib/VCL/Module/Provisioning.pm', 'managementnode/lib/VCL/Module/Provisioning/Lab.pm', 'managementnode/lib/VCL/Module/Provisioning/esx.pm', 'managementnode/lib/VCL/Module/Provisioning/helloworld.pm', 'managementnode/lib/VCL/Module/Provisioning/vmware.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT21.pm', 'managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/blockrequest.pm', 'managementnode/lib/VCL/healthcheck.pm', 'managementnode/lib/VCL/image.pm', 'managementnode/lib/VCL/inuse.pm', 'managementnode/lib/VCL/makeproduction.pm', 'managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/reclaim.pm', 'managementnode/lib/VCL/reserved.pm', 'managementnode/lib/VCL/utils.pm']","VCL-135
Removed AUTHOR and COPYRIGHT tags from Perl files under lib/VCL.",VCL-135
da40b0b731ba5bca38937d636c2397013049b2b5,,,1,['managementnode/etc/vcl/vcld.conf'],"VCL-135
Added NOT_STANDALONE property to vcld.conf.",VCL-135
038340809b12763ae37fb14dcf39b9970410178b,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-135
Removed references to NCSU in utils.pm::get_request_info(). Added $NOT_STANDALONE variable which is retrieved from vcld.conf.",VCL-135
1259d0a1a4a770f333dfab421e3c70f96179de53,,,7,"['web/.ht-inc/Doxyfile', 'web/.ht-inc/authmethods/shibauth.php', 'web/.ht-inc/doxyfile.xmlrpc', 'web/.ht-inc/xmlrpcdocs/xmlrpcWrappers_8php.html', 'web/shibauth/.htaccess', 'web/shibauth/index.php', 'web/testsetup.php']",added ASF license header,
644ab5e1cd6475cf8508af781076dca63002c169,,,1,['managementnode/lib/VCL/Module/Provisioning/esx.README'],"VCL-10
Added ASF header to esx.README.",VCL-10
4c66925129a29a5145bee74b5e89489febb9b063,,,7,"['managementnode/etc/vcl/.perltidyrc', 'managementnode/tools/Windows/Security/windows_security.inf', 'managementnode/tools/Windows/Utilities/Sysprep/i386/$oem$/cmdlines.txt', 'managementnode/tools/Windows_Server_2003/Utilities/Sysprep/sysprep.inf', 'managementnode/tools/Windows_Version_6/Security/Disable_UAC.inf', 'managementnode/tools/Windows_XP/Utilities/Sysprep/sysprep.inf', 'managementnode/tools/default.tmpl']","VCL-10
Added ASF header to:
default.tmpl
windows_security.inf
cmdlines.txt
sysprep.inf (XP and 2003)
Disable_UAC.inf
.perltidyrc

Moved .perltidyrc to managementnode/etc/vcl.",VCL-10
6dacd6237b829f7fd918d7a0273660d248beb060,,,2,"['managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6.pm']","VCL-212
Updated Version_6.pm::run_sysprep() to reset some registry keys which prevent Sysprep from running if Sysprep had failed before.  Improved the cleanup tasks in this subroutine so that old logs are deleted before running Sysprep.  Changed the behavior after Sysprep is executed to detect unresponsiveness and power off instead of waiting for a fixed 180 seconds.

Added reg_add() to Windows.pm.  This gets called by Version_6.pm::run_sysprep().",VCL-212
84698fbec284ac412148132e8af6af89a1e3145a,,,1,['managementnode/tools/Windows_Server_2008/Utilities/Sysprep/Unattend.xml'],"VCL-10
Added ASF header to Windows Server 2008 Unattend.xml.",VCL-10
e714137d3a29c3bc1dfc9ab0a0af3f891398bd0f,,,1,['RELEASE_NOTES'],added roadmap content,
36624987a785ee29247b3111c3d16f0bd0eb8ef2,,,1,['CHANGELOG'],initial creation; still need to add dependency changed from 2.0 to 2.1,
a76743c601b27d3da56a6e44468b1dc39c8d42da,,,39,"['managementnode/tools/xcat_postscripts/addhttpdiptables', 'managementnode/tools/xcat_postscripts/checksmp', 'managementnode/tools/xcat_postscripts/checkswap', 'managementnode/tools/xcat_postscripts/correctresolv-conf', 'managementnode/tools/xcat_postscripts/defaultshell-tcsh', 'managementnode/tools/xcat_postscripts/disipv6', 'managementnode/tools/xcat_postscripts/eths4dhcp', 'managementnode/tools/xcat_postscripts/gpfs31', 'managementnode/tools/xcat_postscripts/hosts4dhcp', 'managementnode/tools/xcat_postscripts/makesshgkh', 'managementnode/tools/xcat_postscripts/mysyncdirs', 'managementnode/tools/xcat_postscripts/name4dhcp', 'managementnode/tools/xcat_postscripts/openafs', 'managementnode/tools/xcat_postscripts/otherrpms', 'managementnode/tools/xcat_postscripts/otherrpms-lamp', 'managementnode/tools/xcat_postscripts/private.hardeths', 'managementnode/tools/xcat_postscripts/remoteshell-dblssh', 'managementnode/tools/xcat_postscripts/remoteshell-dblssh-dhcp', 'managementnode/tools/xcat_postscripts/remoteshell-dblssh-dhcp-new', 'managementnode/tools/xcat_postscripts/remoteshell-dblssh-dhcp-test', 'managementnode/tools/xcat_postscripts/remoteshell-dblssh-dhcp.bak', 'managementnode/tools/xcat_postscripts/remoteshell-dblssh-dhcp.bak2', 'managementnode/tools/xcat_postscripts/remoteshell-dblssh-dhcp.bak3', 'managementnode/tools/xcat_postscripts/setupESX', 'managementnode/tools/xcat_postscripts/setupafs', 'managementnode/tools/xcat_postscripts/setupafs64', 'managementnode/tools/xcat_postscripts/setupgpfs', 'managementnode/tools/xcat_postscripts/setupntp', 'managementnode/tools/xcat_postscripts/setupservices-dblssh', 'managementnode/tools/xcat_postscripts/setupsudoers', 'managementnode/tools/xcat_postscripts/setupsudoersFULL', 'managementnode/tools/xcat_postscripts/setupusers', 'managementnode/tools/xcat_postscripts/setupusers-ncsu', 'managementnode/tools/xcat_postscripts/syncdirs', 'managementnode/tools/xcat_postscripts/syslog', 'managementnode/tools/xcat_postscripts/syslog-test', 'managementnode/tools/xcat_postscripts/syslog.ver1', 'managementnode/tools/xcat_postscripts/syslog_ORIG', 'managementnode/tools/xcat_postscripts/syslog_new']","VCL-198

Removing all files copied from xCAT or files that are not used anymore.",VCL-198
693ba1c5c657345fdee4ecabee8dc5c6a7eb1c56,,,1,['managementnode/tools/xcat_postscripts/vmware1-install'],Adding for xcat1.3 installs,
3e73b48b9a58ac44e36c459416e7ce18fcdc390f,,,1,['managementnode/tools/xcat2_postscripts/vmware1-install'],added ASF license,
bb6bd84d38ff7415ddb76e9231f5a3792de90afe,,,1,['RELEASE_NOTES'],"initial pass, proofing still needed; Roadmap part needs to be filled in",
ee78448e5db5d401089a7103973418a82733328f,,,1,['README'],"initial pass, dependencies still need to be listed",
fa316f7786556530145ee7769abb7b2398e3427a,,,1,['NOTICE'],changed copyright date from 2008 to 2009,
08cd40e297db16a2a7d5d7ab1d49a793a02dba9f,,,5,"['web/images/fonts/DroidSans-Bold.ttf', 'web/images/fonts/DroidSans.ttf', 'web/images/fonts/arial.ttf', 'web/images/fonts/arialbd.ttf', 'web/images/textimage.php']",switching from copyrighted arial font to Droid font which is released under the Apache License 2.0,
74d30d0eb9193747ca1b4717281aba7cd64b78b0,,,3,"['managementnode/lib/VCL/Module/Predictive/Level_0.pm', 'managementnode/lib/VCL/Module/Predictive/Level_1.pm', 'managementnode/lib/VCL/utils.pm']","VCL-207

Added checks for predictive preload modules to use image if it is part of a block reservation for reloads.",VCL-207
dbd9704639356a9fc9ffd15a06fb2d98a6b7a453,,,11,"['web/.ht-inc/xmlrpcdocs/doxygen.css', 'web/.ht-inc/xmlrpcdocs/doxygen.png', 'web/.ht-inc/xmlrpcdocs/examples.html', 'web/.ht-inc/xmlrpcdocs/files.html', 'web/.ht-inc/xmlrpcdocs/globals.html', 'web/.ht-inc/xmlrpcdocs/globals_func.html', 'web/.ht-inc/xmlrpcdocs/index.html', 'web/.ht-inc/xmlrpcdocs/tab_b.gif', 'web/.ht-inc/xmlrpcdocs/tab_l.gif', 'web/.ht-inc/xmlrpcdocs/tab_r.gif', 'web/.ht-inc/xmlrpcdocs/tabs.css']",unneeded documentation files,
a8c2b6b87e606d17aadd4c3f13790a56e844aad9,,,1,['web/themes/default/images/belltower.jpg'],image not used and possibly copyrighted,
6ab869b92f790b8785334a3f83cc740e86932150,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-228
Modified Windows pre_capture() to not fail the reservation if it fails to delete the reservation users on the first attempt.  Added 2nd attempt to delete users after the pagefile reboot if the 1st attempt failed.  This should fix the problem where image captures fail because a file is held open in the user's profile.",VCL-228
77939ef05c617cd43d3f0c9d2ad52bb6f5980cfe,,,1,['mysql/vcl.sql'],"VCL-184

added serialization field to structure of variable table (bug reported on vcl-user list that a value was used for it, but it wasn't part of the table structure)",VCL-184
e559cfe17451f6f55533a36002d57b497d94b5f5,,,1,['managementnode/lib/VCL/Module/Provisioning/vmware.pm'],"VCL-218
Added check to the section in vmware.pm where it deleted unused VMs to reclaim space for VM files used for imaging reservations. These are ignored and never reclaimed in order to prevent the loss of an image which is supposed to be captured.

Also added missing else block if the copying of .vmdk files to the image repository fails.",VCL-218
2475e663eb5e675df9852cab7a9b0817e9946284,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-226
Added check for ""computer is processing another action"" error in Windows.pm::reboot(). If this error occurs a power reset is issued.",VCL-226
91c3b95e53ed48deba07fa57a0ff634467a15134,,,1,['mysql/vcl.sql'],"VCL-184

changed vmprofile.vmtypeid for Vmware ESX SAN from 6 to 5",VCL-184
533a2e1f7e7bbf479a75429bdbd6efcf8f69917a,,,1,['mysql/vcl.sql'],"VCL-184

changed computerloadlog.id from mediumint to int
changed vmprofile.username length from 32 to 80
changed vmprofile.password length from 128 to 256
added keys to vmprofile table:
   vmtypeid (vmtypeid, imageid)
   imageid (imageid)
added schema-version entry to variable table",VCL-184
3bd0a2379796bf27af40818da7f4a9e40ab7aa2f,,,1,['managementnode/lib/VCL/DataStructure.pm'],"VCL-215
Fixed bug in DataStructure.pm::get_computer_state_name. The computer hostname search pattern was too broad.",VCL-215
9240ae38b5dff777fc081ef9927394043a2d1484,,,2,"['managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT21.pm']","VCL-217

extended to check for nodes in imaging mode",VCL-217
6a92a9fb941751603ee5f053bd234244ecffcb2d,,,2,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/State.pm']","VCL-215
Updated State.pm::reservation_failed() to check if the computer state is maintenance before updating it in order to prevent the state of computers in maintenance to be changed.

Added DataStructure.pm::get_computer_state_name(). This sub queries the database for the current value of a computer's state rather than simply returning what's saved in the data structure. This sub should eventually replace utils.pm::get_current_computer_state_name().",VCL-215
7f961a01510cb4e1f1d7521dc8f4da47592e57cf,,,2,"['managementnode/lib/VCL/Module/Provisioning/vmware.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT.pm']","VCL-192
Commented out section in does_image_exist where it is checking if an SCP process is currently running to retrieve the image. There is a bug in this section which is causing reservations to loop unnecessarily and fail.",VCL-192
576c2c79f0d298c72383c0c6aeb125c7f44ad594,,,1,['managementnode/tools/Windows/Scripts/post_load.cmd'],"VCL-214
Changed order of scripts which are called from post_load.cmd so that update_cygwin.cmd runs later on. The running of update_cygwin.cmd causes the computer to respond to SSH. The vcld process detects this and tries proceeds with the post_load steps. It's better to run the other tasks from post_load.cmd before running update_cygwin.cmd so that they finish before the vcld process detects the computer to be ready.",VCL-214
b6f250003ab7e67ef88dc9b6838a380c262b1aef,,,1,['web/testsetup.php'],changed checks of return from ini_get('display_errors') to handle updated return values,
1244d52043bc8845683417018dfcba7404a89142,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-214
Added user_logged_in and wait_for_logoff subroutines to Windows.pm and added call to wait_for_logoff to post_load. This causes the vcld process to wait for root's autoadminlogon scripts to finish before forcefully logging off root.

Also fixed bug in set_service_startup_mode where it was possible to try to print an uninitialized variable.",VCL-214
e7674c0b9ffd6b3e1c5000bc98d9557048415cac,,,1,['web/testsetup.php'],"VCL-209

this script is to aide in installation of the web frontend by testing various setting and configuration options",VCL-209
5be1951e15235ca5eaebb3e87c50ef91d2537132,,,2,"['managementnode/lib/VCL/Module/Provisioning/vmware.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT.pm']","VCL-213
Fixed bug in the retrieve_image() subroutines in vmware.pm and xCAT.pm. They were calling next instead of return. This caused an ""Exiting subroutine via next"" error to occur.",VCL-213
aaa9242e89d51aaf908668b387826dafd70f0e17,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-185

added logoff_user routine, user del fails if user is still logged on",VCL-185
b96a071571edce5e362ea8be122f48b74a6b0ed4,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-185

renamed capture_prepare to pre_capture",VCL-185
ee3405f1e40dcb157a4b2f708ac85f58369dacd2,,,1,['managementnode/lib/VCL/healthcheck.pm'],"VCL-169

Added restore option to reset management node to available state.",VCL-169
51704c36a38b9a7cb2c1fc7284c258e069d1b35c,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-23
Added Windows.pm::disable_system_restore() subroutine. This is called from pre_capture() to reduce the image size.",VCL-23
28a5ebfb8914e67097e3aa6a4181ff0ad335237b,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-185

converted changepasswd to be called as a method",VCL-185
664d03006021447df449cc1090f06a2d62d7ba4e,,,5,"['managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/2008.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/Vista.pm']","VCL-195
Rearranged and updated Windows modules so that users are logged off as the first step of the capture process. Added defrag_hard_drive sub to Version_6.pm which only and always returns 1. This step is skipped because it takes a very long time with Vista and 2008. Removed unused Data::Dumper import in Windows.pm.",VCL-195
a68528faebfc7d656c4d8741195965eb663bf4ff,,,1,['managementnode/lib/VCL/Module/OS/Windows/Version_6.pm'],"VCL-195
Updated Version_6.pm::install_kms_client_product_key() sub to not include the trademark strings in the hash of product names. The product name retrieved from the registry is matched up against the keys in this hash to determine the correct product key to use. The trademark string is ignored when finding a product name.

Fixed bug in firewall_enable_ssh() and firewall_enable_ssh_private() subs. The SSH command to delete existing port exceptions and then enable the correct exception was hanging under Windows 2008. These commands are now wrapped in a cygstart call which fixes the problem.",VCL-195
8e65694c7e2bfa6159b637545c922e2cbadcd4fc,,,2,"['managementnode/etc/vcl/vcld.conf', 'managementnode/lib/VCL/utils.pm']","VCL-205

Added VMWARE_MAC_ETH0_GENERATED and VMWARE_MAC_ETH1_GENERATED for esx
module. These allow the site-admins to define a site registered MAC or
lets vmware server generate these. Required for a large distributed set
of esx servers.",VCL-205
b51ab47cdaf2a16937804f5b6d2ffa15ae588b6a,,,1,['managementnode/lib/VCL/Module/Provisioning/esx.pm'],"VCL-191

Added paths for vsphere 4:
module checks for the installed locations, based on the known paths it
sets it either to vsphere4 or the previous vmware toolkit

Added generic get_vmware_host_info routine to fetch various vmware
server information. For this issue it is used to collect the true
hostname of the esx server. In future additions it looks like it could  be used to
determine available capicity 

Added additional guestOS variables

Added option for eth0 and eth1 vmware generated. The
VMWARE_MAC_ETH0_GENERATED and VMWARE_MAC_ETH1_GENERATED
are currently set in the vcld.conf file. If these are not set it skips
the arp checks to find the vmware assigned MAC addresses",VCL-191
59c51ae7ee1c7fdafdb631f03fb3f0db917cf81d,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-204

improved - moved the logic to a seperate routine that can be called
during both the capture_prepare and post_load steps",VCL-204
d2a328179282b1f4c1e2515c2b0e7503d3930c11,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-204

post-load option to clear known identity keys for Linux.pm",VCL-204
2e220960eee1f4778bcef356298b664400d7e5e0,,,1,['mysql/vcl.sql'],"VCL-37
Added vmwarewinvista row to the OS table in vcl.sql.",VCL-37
f1326ca2eff0113d01bd1feb064a996a90043c1c,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-52
Added check to utils.pm::run_ssh_command() to detect and remove the following line from SSH output:
Address x.x.x.x maps to y.y.org, but this does not map back to the address - POSSIBLE BREAK-IN ATTEMPT!

This was causing image retrieval subroutines to fail because of the unexpected output and likely caused other problems for the same reason.",VCL-52
543f83ebe1230c2dfeaf6ab8461c221394e27009,,,1,['managementnode/lib/VCL/Module/Provisioning/vmware.pm'],"VCL-165
Added check in vmware.pm where it is listing the contents of the VM host's data store. If the command fails, the array returned was undefined and this error occurred:

Can't use an undefined value as an ARRAY reference at
 /usr/local/vcl/bin/../lib/VCL/Module/Provisioning/vmware.pm line 263.

This caused the process to die immediately and the process was left in the pending state.",VCL-165
40d255b3456adbcdf423f33e85152519e41ecf77,,,1,['mysql/vcl.sql'],"VCL-195
Added Windows Server 2008 entries to the OS and module tables in vcl.sql.",VCL-195
9719cdcbc6538db8613cb5879d5b3abacd092d5a,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-196
Fixed bug in Windows.pm::configure_time_synchronization() for 64-bit OS's. The full path to w32tm.exe must be used or else the 32-bit version will be called and the time commands will fail.",VCL-196
ca3587d7e9ac646c399c0da9028fd51fdfe58f29,,,1,['managementnode/lib/VCL/Module/OS/Windows/Version_6.pm'],"VCL-195
Added Version_6.pm::ignore_private_default_routes() subroutine and added call to this subroutine from post_load(). The new sub configures default routes configured for the private interface to be ignored. Default routes configured for the private interface cause problems communicating from the computer to the public network if the metric of the private default route is less than the metric of the public default route. When this occurs, traffic is always routed on the private interface.",VCL-195
8f1c8fc933d19a8ba177f612a62c4f4aeda96699,,,3,"['managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/2008.pm']","VCL-195
Added Windows/Version_6/2008.pm file. Improved activation subroutines in Version_6.pm to allow for MAK activation. Added Version_6.pm::run_sysprep() subroutine.

VCL-196
Added is_64_bit(), get_system32_path() and get_product_name() subroutines to Windows.pm. Updated calls which specify system32 to use the get_system32_path() subroutine. This is done to overcome a problem with 64-bit Windows OS's, where there are separate system32 directories for 32-bit and 64-bit.

VCL-23
Added format_path_unix() and format_path_dos() subroutines to Windows.pm. Updated delete_File::Basename() to use these subroutines. It contains a mix of Unix/Linux and DOS commands and the path has to be formatted properly for each.",VCL-195
bbbca0af9eb9381e192029d51d6d6dc0bfc08153,,,1,['managementnode/tools/Windows_Server_2008/Utilities/Sysprep/Unattend.xml'],"VCL-195
Added tools/Windows_Server_2008 directory. 

Created drivers subdirectory and set Subversion property to ignore its contents.

Added Sysprep template file: Utilities/Sysprep/Unattend.xml file. Note: this file contains a product key for Windows Server 2008 Datacenter. This is a publicly available key distributed by Microsoft in the Volume Activation 2.0 Deployment Guide. It is used when activating via a KMS server.",VCL-195
4ddb06fc7cbaa70729b35f804d6fc15219f49fec,,,1,['managementnode/lib/VCL/Module/Provisioning/esx.pm'],"VCL-182 
support for generic Linux OS

VCL-201
support for win2003, win2008 and vista vm's",VCL-182
4d50d46ac1514877edc0388609c64e48e2ff7378,,,1,['managementnode/lib/VCL/Module/Provisioning/vmware.pm'],"VCL-182

Added generic Linux OS type",VCL-182
a6050ff986cc7cf60df97e22a1b8846711a74fb0,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-185

left out uid in reserve routine",VCL-185
b19fff6e208039434ccc63bb208f8cb075e47790,,,1,['managementnode/lib/VCL/Module/Provisioning/vmware.pm'],"VCL-201
Added condition to vmware.pm to set the guestOS value in the .vmx file to winvista for Windows Vista images.",VCL-201
7e7b5b0d53d1278332cecc96fc7ca62584d23d95,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-185

added routine get_public_default_gateway",VCL-185
bdcb339fb97ad9bb1ebb553cf61ccf7539e8033b,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-185

missing global variable $GATEWAY for static IP address assignment",VCL-185
37a5d93293836f6cd26683a695b05daa447b2fd4,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-185

added get_public_interface routine

simply returns defined ethdevice from vcld.conf",VCL-185
3694de796e78bb4c027a9d14deb6fc9c92305963,,,1,['managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm'],"VCL-187
Updated Ubuntu.pm::delete_user(). Added call to retrieve management node's identity keys and this is used for SSH calls. Changed calls to use $user_login_id variable.",VCL-187
0ca3a20ae9deed1e559127a494089a7a863ae1d8,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-185
Fixed typo in Linux.pm. Call to _changelinuxpassword was changed to _changepasswd.",VCL-185
497a3cbfb826cf46ea7d76dd5980ad807fde19ee,,,1,['mysql/vcl.sql'],"VCL-184
Removed phpMyAdmin and NCSU comments from vcl.sql.

Removed AUTO_INCREMENT=x attributes from CREATE TABLE statements in vcl.sql so that newly created tables with auto_increment columns will have their values start at 1.",VCL-184
d3dc8d61208b046dfc2e8b928b6154fb3f67277f,,,0,[],"VCL-23
Set Subversion ignore property on all Windows Drivers directories and removed subdirectories to make them consistent.",VCL-23
d3a075a6dd9d9e9eebec1180c6b087bb724991be,,,111,"['managementnode/legacy_vcl_vbs_scripts/RandPass.wsf', 'managementnode/legacy_vcl_vbs_scripts/VCLprepare1.vbs', 'managementnode/legacy_vcl_vbs_scripts/VCLprepare2.vbs', 'managementnode/legacy_vcl_vbs_scripts/add_user.vbs', 'managementnode/legacy_vcl_vbs_scripts/auto_create_image.vbs', 'managementnode/legacy_vcl_vbs_scripts/auto_prepare_for_image.vbs', 'managementnode/legacy_vcl_vbs_scripts/create_image.vbs', 'managementnode/legacy_vcl_vbs_scripts/del_user.vbs', 'managementnode/legacy_vcl_vbs_scripts/disWAN.vbs', 'managementnode/legacy_vcl_vbs_scripts/enWAN.vbs', 'managementnode/legacy_vcl_vbs_scripts/list_users.vbs', 'managementnode/legacy_vcl_vbs_scripts/prepare_for_image.vbs', 'managementnode/legacy_vcl_vbs_scripts/reboot.vbs', 'managementnode/legacy_vcl_vbs_scripts/release_computer_vcl', 'managementnode/legacy_vcl_vbs_scripts/reserve_computer_vcl', 'managementnode/legacy_vcl_vbs_scripts/setpass.vbs', 'managementnode/legacy_vcl_vbs_scripts/virt_lab_status_vcl', 'managementnode/tools/Sysprep/Scripts/VCLcleanup.cmd', 'managementnode/tools/Sysprep/Scripts/VCLprepare.cmd', 'managementnode/tools/Sysprep/Scripts/VCLrcboot.cmd', 'managementnode/tools/Sysprep/Scripts/enablepagefile.vbs', 'managementnode/tools/Sysprep/Scripts/networkinfo.bat', 'managementnode/tools/Sysprep/Scripts/networkinfosetfw.vbs', 'managementnode/tools/Sysprep/Scripts/postconfig.vbs', 'managementnode/tools/Sysprep/Scripts/setfw.bat', 'managementnode/tools/Sysprep/Scripts/setsyslog.bat', 'managementnode/tools/Sysprep/Scripts/unsetautologon.vbs', 'managementnode/tools/Sysprep/Scripts/updatecygwin.vbs', 'managementnode/tools/Sysprep/Utilities/CleanUp.exe', 'managementnode/tools/Sysprep/Utilities/spdrvscn.exe', 'managementnode/tools/Sysprep/i386/$oem$/cmdlines.txt', 'managementnode/tools/Sysprep/i386/$oem$/nodyndns.reg', 'managementnode/tools/Sysprep/i386/$oem$/setautologon.vbs', 'managementnode/tools/Sysprep/i386/$oem$/setname.vbs', 'managementnode/tools/Sysprep/i386/$oem$/wsname.exe', 'managementnode/tools/Sysprep/sysprep.cmd', 'managementnode/tools/Sysprep/sysprep.inf', 'managementnode/tools/Sysprep_2003/Scripts/VCLcleanup.cmd', 'managementnode/tools/Sysprep_2003/Scripts/VCLprepare.cmd', 'managementnode/tools/Sysprep_2003/Scripts/VCLrcboot.cmd', 'managementnode/tools/Sysprep_2003/Scripts/enablepagefile.vbs', 'managementnode/tools/Sysprep_2003/Scripts/networkinfo.bat', 'managementnode/tools/Sysprep_2003/Scripts/networkinfosetfw.vbs', 'managementnode/tools/Sysprep_2003/Scripts/setfw.bat', 'managementnode/tools/Sysprep_2003/Scripts/setsyslog.bat', 'managementnode/tools/Sysprep_2003/Scripts/unsetautologon.vbs', 'managementnode/tools/Sysprep_2003/Scripts/updatecygwin.vbs', 'managementnode/tools/Sysprep_2003/Utilities/CleanUp ReadMe.txt', 'managementnode/tools/Sysprep_2003/Utilities/CleanUp.exe', 'managementnode/tools/Sysprep_2003/Utilities/spdrvscn.exe', 'managementnode/tools/Sysprep_2003/i386/$oem$/cmdlines.txt', 'managementnode/tools/Sysprep_2003/i386/$oem$/nodyndns.reg', 'managementnode/tools/Sysprep_2003/i386/$oem$/setautologon.vbs', 'managementnode/tools/Sysprep_2003/i386/$oem$/wsname.exe', 'managementnode/tools/Sysprep_2003/sysprep.cmd', 'managementnode/tools/Sysprep_2003/sysprep.inf', 'managementnode/tools/Sysprep_Vista/Scripts/Sysprep.xml', 'managementnode/tools/Sysprep_Vista/Scripts/autoadminlogon_disable.reg', 'managementnode/tools/Sysprep_Vista/Scripts/autoadminlogon_enable.reg', 'managementnode/tools/Sysprep_Vista/Scripts/autologon_disable.cmd', 'managementnode/tools/Sysprep_Vista/Scripts/autologon_enable.cmd', 'managementnode/tools/Sysprep_Vista/Scripts/cleanup_hard_drive.cmd', 'managementnode/tools/Sysprep_Vista/Scripts/configure_kms.cmd', 'managementnode/tools/Sysprep_Vista/Scripts/configure_networking.vbs', 'managementnode/tools/Sysprep_Vista/Scripts/defrag.cmd', 'managementnode/tools/Sysprep_Vista/Scripts/delete_profile_files.txt', 'managementnode/tools/Sysprep_Vista/Scripts/disable_scheduled_tasks.cmd', 'managementnode/tools/Sysprep_Vista/Scripts/disk_cleanup.cmd', 'managementnode/tools/Sysprep_Vista/Scripts/disk_cleanup.reg', 'managementnode/tools/Sysprep_Vista/Scripts/hibernation_disable.cmd', 'managementnode/tools/Sysprep_Vista/Scripts/ipv6_disable.cmd', 'managementnode/tools/Sysprep_Vista/Scripts/ipv6_disable.reg', 'managementnode/tools/Sysprep_Vista/Scripts/kms.cmd', 'managementnode/tools/Sysprep_Vista/Scripts/newsid_accept_eula.reg', 'managementnode/tools/Sysprep_Vista/Scripts/nodyndns.reg', 'managementnode/tools/Sysprep_Vista/Scripts/pagefile_disable.cmd', 'managementnode/tools/Sysprep_Vista/Scripts/set_computer_name.vbs', 'managementnode/tools/Sysprep_Vista/Scripts/set_default_permissions.cmd', 'managementnode/tools/Sysprep_Vista/Scripts/set_network_location.cmd', 'managementnode/tools/Sysprep_Vista/Scripts/update_cygwin.cmd', 'managementnode/tools/Sysprep_Vista/Scripts/vcl_startup.cmd', 'managementnode/tools/Sysprep_Vista/Scripts/vcl_startup_firewall.cmd', 'managementnode/tools/Sysprep_Vista/Utilities/CleanUp.exe', 'managementnode/tools/Sysprep_vmware/i386/$oem$/cmdlines.txt', 'managementnode/tools/Sysprep_vmware/i386/$oem$/nodyndns.reg', 'managementnode/tools/Sysprep_vmware/i386/$oem$/setautologon.vbs', 'managementnode/tools/Sysprep_vmware/i386/$oem$/wsname.exe', 'managementnode/tools/Sysprep_vmware/sysprep.cmd', 'managementnode/tools/Sysprep_vmware/sysprep.inf', 'managementnode/tools/Sysprep_vmware/sysprep.vbs', 'managementnode/tools/VCLprep1.vbs', 'managementnode/tools/VCLrcboot.cmd', 'managementnode/tools/auto_create_image.vbs', 'managementnode/tools/disablenetbios.vbs', 'managementnode/tools/setpass.vbs', 'managementnode/vbs_scripts/VCL/VCLcleanup.cmd', 'managementnode/vbs_scripts/VCL/VCLprepare.cmd', 'managementnode/vbs_scripts/VCL/VCLrcboot.cmd', 'managementnode/vbs_scripts/VCL/VCLstartimage.vbs', 'managementnode/vbs_scripts/VCL/auto_create_image_new.vbs', 'managementnode/vbs_scripts/VCL/enablepagefile.vbs', 'managementnode/vbs_scripts/VCL/networkinfo.bat', 'managementnode/vbs_scripts/VCL/networkinfosetfw.vbs', 'managementnode/vbs_scripts/VCL/setfw.bat', 'managementnode/vbs_scripts/VCL/setsyslog.bat', 'managementnode/vbs_scripts/VCL/unsetautologon.vbs', 'managementnode/vbs_scripts/VCL/updatecygwin.vbs', 'managementnode/vbs_scripts/add_user.vbs', 'managementnode/vbs_scripts/auto_create_image.vbs', 'managementnode/vbs_scripts/del_user.vbs', 'managementnode/vbs_scripts/list_users.vbs']","VCL-23
Removed legacy Windows files and directories residing under the managementnode directory. These files are no longer used. Their functionality has been replaced by files residing under managementnode/tools/Windows* and in the Windows Perl modules.",VCL-23
478484201723b6d81c338e5675da47736ccb883c,,,1,['mysql/vcl.sql'],"VCL-185

Added modules to the module table, modified respective OS module ids.",VCL-185
fea2cf1a8b294918fdf582ffc90fd7c18a291b40,,,1,['managementnode/tools/xcat2_postscripts/vmware1-install'],"VCL-199

post script for automatically installing vmware Free server",VCL-199
fac599c6291669d3a01a6ffade6ab5997689bbea,,,1,['managementnode/INSTALL'],"VCL-198

Deleted INSTALL. This simple script has moved to
./bin/install_perl_libs.pl",VCL-198
0416683f52ae82cea9c7730d16ad7c1a1e154c15,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT21.pm'],"VCL-185

moved cleartmp change root password to post_load routine of the Linux.pm
module",VCL-185
b613be990638d5eeb9f60841978cc68232f3689d,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-135

Cleaned out -g ncsu when added a user to a linux OS.

The main functionality is moving to the Linux OS module",VCL-135
89cfca025b64cfe3fb7ad0b424cfaabf89299937,,,1,['managementnode/lib/VCL/Module/OS/Linux.pm'],"VCL-185

+ added clear tmp to capture_prepare
+ created post_load routine
	- core routine called by provisioning modules
	- changes root password
	- disables external sshd service
	- removes all AllowUsers directive from external sshd config
+ created set_static_public_address
	- copied from utils, if static assignment is set. assigns a static
	  address
+ updated delete_user routine
	 - added all steps to remove a user from blade or vm
+ added reserve routine
	 - adds account to a linux OS
	 - logic copied from utils.pm
+ added grant_access routine
	 - core routine called by reserve.pm
	 - addes user to external_sshd_config
	 - opens external_sshd services
+ added _changepasswd routine
	 - preliminary routine, currently a local routine for Linux.pm
	 - needs to be renamed in order to be inherited
+ added sanitize routine
	 - core routine called by reclaim
	 - clears user if does not need to be reloaded
+ added revoke_access routine
	 - main routine for sanitize to remove a user
+ added stop_external_sshd
	 - simply stops external_sshd service
+ added is_connected
	 - general routine to check if user is connected",VCL-185
14ace85f6073f4266787e12a9550609eab3b00fe,,,1,['managementnode/lib/VCL/Module/OS/Linux/UnixLab.pm'],"VCL-185

Created UnixLab.pm OS module to acount for the differences in linux environments
on lab machines vs. blades or virtual machines",VCL-185
4990d21678ee4cfbadc5e8914f5110a21ae322d1,,,3,"['managementnode/tools/perltidy/.perltidyrc', 'managementnode/tools/perltidy/perltidy', 'managementnode/tools/perltidy/runperltidy']","VCL-198

Removed perltidy",VCL-198
fd73fd6f7d6cd0c91dba04a10b037c9f7621192f,,,1,['managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm'],"VCL-187

Replaced cmdline perl calls to use sed. 
Had issue with interupting single quotes",VCL-187
f965178203b1c4e94d648d45d77cd1747323dccb,,,1,['managementnode/INSTALL'],added ASF 2.0 license,
3b396551a650764687847a7eae00f5efcb017f4e,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-196
Added Windows.pm::reg_import() subroutine and changed import_registry_file() and import_registry_string() to call this new subroutine rather than using SSH to call reg.exe IMPORT directly.

The reg_import() subroutine was configured to call reg.exe using a UNC path to the local computer rather than a normal file path. This tricks Windows into running reg.exe in 64-bit mode if a 64-bit OS is used. If reg.exe is run in 32-bit mode under a 64-bit OS, the location of the registry keys operated on may not be where you would expect. For example, if you run reg.exe in 32-bit mode to alter something under HKLM\SOFTWARE\Microsoft, it actually alters HKLM\SOFTWARE\Wow6432Node\Microsoft.

Removed obsolete run_newsid() subroutine. This is replaced by prepare_newsid().",VCL-196
fc07c67394389f3a0e404ad83fc1aef3807d48c5,,,1,['managementnode/tools/Windows_Version_6/Security/Disable_UAC.inf'],"VCL-195
Renamed Disable UAC.inf to remove the space. This was causing SCP to hang.",VCL-195
df02552ad877020d8181c141822b9106ef5b02b0,,,1,['managementnode/lib/VCL/new.pm'],"VCL-23
Fixed missing conditional in new.pm so that a random password is not generated for Linux non-standalone images.",VCL-23
aff8477d0e556c850643f75a395f0124abb7b8c8,,,1,['managementnode/lib/VCL/new.pm'],"VCL-23
Removed old Windows code which isn't called anymore. Cleaned up section where dynamic address is retrieved.",VCL-23
d79caa67fd9a9d946d20ccf7e8d36b8bdbbadbc4,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-23
Fixed bug in Windows.pm::search_and_replace_in_files() which was encountered if grep displayed a ""permission denied"" error when processing a file. This usually happens on .exe files. Added code so that grep output lines containing "".exe"" are ignored.",VCL-23
804338380cb2f1e80436e89160ad47bd30091201,,,1,['managementnode/lib/VCL/Module/OS/Windows/Version_6.pm'],"VCL-195
Added commands in the subroutines which enable RDP in Version_6.pm to set the registry key to allow RDP from any version of Remote Desktop whenever they are called.",VCL-195
32756e9ed72ed195fe6500991777f7b23f378b2d,,,1,['managementnode/tools/Windows/Security/windows_security.inf'],"VCL-23
Added PasswordComplexity = 0 line to Windows security template so that reservations don't fail when setting passwords.",VCL-23
5b480986d47beb215bc1cf6c3065982449f042f0,,,1,['managementnode/tools/Windows_Version_6/Security/Disable UAC.inf'],"VCL-195
Added tools/Windows_Version_6/Security directory and added ""Disable UAC.inf"" security template.",VCL-195
d2a0fe20d4515c2e840daf3267a7553abef9c423,,,1,['managementnode/lib/VCL/Module/OS/Windows/Version_6.pm'],"VCL-195
Added $SOURCE_CONFIGURATION_DIRECTORY variable to Version_6.pm so that files can be shared which are common to both Windows Vista and Server 2008.",VCL-195
dc724db6b6c6539539ac3e50db4d8ce13fc2f71b,,,4,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/Provisioning/vmware.pm', 'managementnode/lib/VCL/utils.pm']","VCL-186
Added get_management_node_public_default_gateway() sub to DataStructure.pm. This was originally implemented via the hash mappings in DataStructure.pm and only returned the default GATEWAY= value configured in the vcld.conf file. The new sub still returns this value if it has explicitly been configured. If not, it attempts to determine the default gateway using the route command. If this fails, it attempts to determine the default gateway by looking for ""option routers"" lines in dhcpd.conf containing a public IP address.

Added is_public_ip_address(), is_valid_ip_address(), and read_file_to_array() to utils.pm. These are utility subroutines used by get_management_node_public_default_gateway().

Updated Windows.pm::get_public_default_gateway() to use DataStructure.pm::get_management_node_public_default_gateway(). Also changed set_static_public_address() to call Windows.pm::get_public_default_gateway() instead of the one in DataStructure.pm.

Removed unused set_static_private_ip_address() sub from Windows.pm. This code was outdated and isn't called anywhere.


VCL-195
Fixed bug in vmware.pm where it sets the guestOS line in the vmx file. It now sets this value to winnetenterprise if the OS is Windows Server 2003 or 2008.

Updated the regex that takes apart the image name in vmware.pm::capture to allow for digits in the OS part of the image name. It previously only checked for letters which caused a name such as vmwarewin2008 to fail.

Fixed bug in Windows.pm::get_network_configuration() if IPv6 was enabled. It wasn't correctly parsing the ""ipconfig /all"" output because each adapter doesn't contain ""ehternet adapter"" in the name. Added ""tunnel"" to the list of ignored interface names and descriptions. Added ""pseudo"" to the list of ignored interface descriptions.


VCL-23
Removed several outdated and unused Windows subroutines and sections of code from utils.pm. The removed code has been replaced by functionality provided by Windows.pm.


VCL-158
Fixed bug in utils.pm::setstaticaddress(). The argument list was in the incorrect order.",VCL-186
6019d5ec4a76988881f01b711974c9e7ed0246b1,,,2,"['managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT21.pm']","VCL-192
Updated xCAT modules so that image retrieval works with xCAT 2.1 using management node ports defined in the database.

Removed subroutines from xCAT21.pm which were either identical to those in xCAT.pm or updated in xCAT.pm to work with both versions:
_rpower()
does_image_exist()
retrieve_image()
_get_image_repository_path()
power_reset()
power_on()
power_off()
power_status()

Fixed 1 call in xCAT21.pm to _rpower(). Added ""$self->"" to the call.

Removed .gz file extension checks in xCAT.pm::_get_image_repository_path() allowing it to work with both xCAT versions.

Simplified xCAT.pm::_get_image_template_path(). It had a lot of duplicated code from _get_image_repository_path().",VCL-192
9a5fb93b3976b36ca4d54b84e3e02676eb688aa1,,,2,"['managementnode/lib/VCL/Module/Provisioning/vmware.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT.pm']","VCL-81
Fixed bug in image retrieval for xCAT.pm and vmware.pm. It wasn't accurately detecting if another image retrieval SCP process was running. It was getting hung up on SCP processes started by vmware.pm which send images to VMware hosts. The pgrep regex was fixed.

Added short delay before retrieving image for the number of seconds equal to the last digit of the reservation ID.  This prevents multiple reservations for the same image from starting SCP processes at the same time.

Removed unused $imagemeta_sysprep variable from vmware.pm::capture().",VCL-81
d55aefbbc8ce02c7b84fe7ae1669f8cd497c4e76,,,1,['managementnode/lib/VCL/reserved.pm'],"VCL-23
Removed section of Windows-specific code in reserved.pm which is no longer called. It's replaced by the grant_access() subroutine.",VCL-23
43e8932a5c40310d140bf43f242463cfb16fb303,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-190
Added configure_time_synchronization() subroutine to Windows.pm. It configures the Windows time service and executes the synchronization command. Added call to this subroutine from post_load so that time is configured and synchronized on load.",VCL-190
d603d12baa6a7a95af0261fda80bb03cf13cc1b1,,,1,['managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm'],"VCL-187

Added check for image profile root access allowed

cleaned up delete_user routine added step to remove user from sudoers

ran perltidy",VCL-187
45731b37bcc10b24b56b9428a26b98ff6786c804,,,1,['managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm'],"VCL-187

continued improvements on the Ubuntu.pm

typo in grant_access routine

extended reserve routine to add $user_name to /etc/sudoers file",VCL-187
b4066c9be73ec12f199d486a9acdb404a2c270ce,,,1,['managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm'],"VCL-187

added code to grant_access routine which enables the external ssh port",VCL-187
4035c03df9df7a9b11fe483a37b837012aacc0ab,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-186
Windows.pm: Added call to retrieve public default gateway from the one configured for the management node in vcld.conf if retrieving it from the computer's IP configuration fails. Removed ""return 0"" call if set_public_default_route() returns false in post_load().",VCL-186
96e6795eae9d26e7084eac7ea97c44c7e89995b3,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-186
Windows.pm: Added call to set_public_default_route() in post_load(). This causes a persistent default route to be added to the routing table. This is done to prevent loaded computers from losing their default gateways.",VCL-186
8b75332f0e3934beb4776ba8989930769c688346,,,1,['mysql/vcl.sql'],"VCL-185
Added Ubuntu rows to module and OS tables in vcl.sql.",VCL-185
1a57fb7fe9bc62c6de3d1b2d26167c71fdebc342,,,2,"['managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Linux/Ubuntu.pm']","VCL-185
Moved Ubuntu.pm file under Linux directory in preparation for all of the Linux modules to be modularized and inherit from Linux.pm. Modified Ubuntu.pm to inherit from Linux.pm. This should have no effect since both modules currently implement the same subroutines.

Removed unused $imagemeta_sysprep variables from Linux.pm and Ubuntu.pm.",VCL-185
7db4407be939addde4e2cef83e2cd13be0052275,,,0,[],"VCL-185
Created lib/VCL/Module/OS/Linux directory to store Perl modules which inherit from Linux.pm.",VCL-185
63850342d0361a904b1882d6f31f31822ad7c9f8,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT21.pm'],"VCL-23
Removed legacy Windows code from xCAT21.pm::load(). These tasks are now handled by the Windows OS modules.",VCL-23
ec809ac2e1669d35f5e74144438e353460bfd005,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT.pm'],"VCL-23
Removed legacy Windows code from xCAT.pm::load(). These tasks are now handled by the Windows OS modules.",VCL-23
d6129ea3ae802845d5f3dace855ca632db566f04,,,1,['managementnode/lib/VCL/Module/Provisioning/vmware.pm'],"VCL-23
Removed legacy Windows code from vmware.pm::capture(). It is no longer called.

Removed ""if xen"" check, which was not doing anything. If Xen support is implemented the code will not reside in vmware.pm.",VCL-23
9519fa330b851710e81938cfd31732fa4ef596ac,,,4,"['managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5/2003.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5/XP.pm']","VCL-23
Fixed bug that occurred during image capture if Sysprep is disabled. It wasn't configuring the image to automatically log in root and run post_load.cmd. Added prepare_post_load() subroutine to Windows.pm which does this. Added code to Version_5.pm to call prepare_post_load() if Sysprep is disabled, otherwise run_sysprep() is called. Removed pre_capture() subroutines from XP.pm and 2003.pm. This is now implemented by Version_5.pm since the code was the same for XP and 2003. Also moved defrag step to before the parent pre_capture() sub implemented by Windows.pm is called. This causes the hard drive to be defragmented before the pagefile is disabled. This causes the defrag to take less time.

Also fixed bug in Windows.pm::filesystem_entry_exists(). It was replacing forward or backslashes in the path to be checked with a single backslash. This needs to be a double backslash or else it's seen as an escape character.",VCL-23
358f5c4fda7224457595e0d598979898081e594e,,,1,['managementnode/lib/VCL/reclaim.pm'],"VCL-23
Updated reclaim.pm to remove the ""elsif ($image_os_type =~ /windows/)"" since this is now completely modularized as noted in the comment:
# This whole section should be removed once the original Windows.pm is replaced by Windows_mod.pm

Added a comment to remove the ""elsif ($image_os_type =~ /linux/)"" once Linux OSs are completely modularized.",VCL-23
84474ef2861457cfa907c1a1ecdfa377fc4cb4ab,,,1,['managementnode/lib/VCL/Module.pm'],"VCL-23
Updated the pod documentation for get_package_hierarchy(). It provides an example which included the Windows_mod paths. These were changed to reflect the current file names.",VCL-23
b68795df2216178b86297b73ec631c698d90cbbe,,,1,['mysql/phpmyadmin.sql'],"VCL-184
Added a new file called phpmyadmin.sql to the mysql directory. This file can be imported into the phpmyadmin database if phpMyAdmin is used to access the VCL database. It adds rows to the pma_table_info table in the phpmyadmin database. These rows cause the corresponding values to appear when the mouse hovers over them if the column is linked to another column via a constraint.

These columns are added when you manually configure the ""Choose field to display"" value for a table:
-Select a table in phpMyAdmin
-Click the Structure tab
-Click Relation view
-Choose field to display",VCL-184
ff28b1e55062fcd444ec7f72765b672ee71076db,,,1,['mysql/vcl.sql'],"VCL-175
Changed default virtualswitch0 value for VMware GSX standard vmprofile from NULL to VMnet0. This column is set to NOT NULL.

VCL-184
Made updates to vcl.sql to reflect the changes in the modules used for Windows OS.  Also made some cosmetic changes and added missing constraints:

module table:
-Added rows for os_winxp and os_win2003
-Made minor changes to name, prettyname, description of existing rows to make them consistent

OS table:
-Changed moduleid for existing Windows images to point to the correct modules
-Changed existing constraint on moduleid to UPDATE CASCADE

provisioning table:
-Made changes to name, prettyname to make them consistent
-Added constraint on provisioning.moduleid

computer table:
-Added constraint to computer.provisioningid

managementnode table:
-Added constraint on ownerid

vmhost table:
-Added constraint to vmhost.computerid

vmprofile table:
-Added constraint to vmprofile.vmtypeid
-Added constraint to vmprofile.imageid",VCL-175
46b01c7f4a9bb286ebd3b2b8e218044d12fe5ea9,,,2,"['managementnode/bin/health_check.pl', 'managementnode/lib/VCL/healthcheck.pm']","VCL-169 

start of stage1 shutdown functionality, based on the machine type and
state
if machine is of blade type and state= available,failed,maintenance
healthcheck will proceed to shutdown blade using the xcat provisioning
module power_off routine",VCL-169
d5f8196cd65a3f0c4c6768d998e03e958b4ff65f,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-169

added routine, set_managementnode_state that accepts Management node
info hash and desired state.

This is to be used in placing a given management node into maintenance
state if an datacenter shutdown event is triggered.",VCL-169
9ebaf907b9f35c6a72acc8855519d923211b8579,,,4,"['managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5/2003.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5/XP.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/Vista.pm']","VCL-23
Renamed individual Windows module files:
Windows_mod.pm -> Windows.pm
2003_mod.pm -> 2003.pm
XP_mod.pm -> XP.pm
Vista_mod.pm -> Vista.pm",VCL-23
21022f5c4e8319839b07c834de86224a0273b197,,,5,"['managementnode/lib/VCL/Module/OS/Windows/Version_5.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5/2003_mod.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_5/XP_mod.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6.pm', 'managementnode/lib/VCL/Module/OS/Windows/Version_6/Vista_mod.pm']","VCL-23
Renamed Windows_mod directory to Windows.",VCL-23
1a8e276a13aa9061a11ea6b2506380ef8eea11cb,,,6,"['managementnode/lib/VCL/Module/OS/Windows_mod.pm', 'managementnode/lib/VCL/Module/OS/Windows_mod/Version_5.pm', 'managementnode/lib/VCL/Module/OS/Windows_mod/Version_5/2003_mod.pm', 'managementnode/lib/VCL/Module/OS/Windows_mod/Version_5/XP_mod.pm', 'managementnode/lib/VCL/Module/OS/Windows_mod/Version_6.pm', 'managementnode/lib/VCL/Module/OS/Windows_mod/Version_6/Vista_mod.pm']","VCL-23
Changed package paths within Windows modules. The _mod strings were removed. This is being done before renaming the files. As of this revision, the package paths are not correct within the files. I want to make sure to capture these changes in subversion before renaming because subversion does a delete/add when renaming files.

Subversion properties had not been set on 2003_mod.pm, Version_6.pm, and Vista_mod.pm. They were set to match other files.

Deleted unused Utils directory.",VCL-23
9987ca277d9a86befbe137d24a5c13b727cf52fc,,,4,"['managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Desktop.pm', 'managementnode/lib/VCL/Module/OS/Windows/Desktop/Vista.pm', 'managementnode/lib/VCL/Module/OS/Windows/Desktop/XP.pm']","VCL-23
Removed obsolete Windows OS code. This is replaced by the Windows_mod code. This delete needs to be done before renaming Windows_mod to Windows.",VCL-23
d0cf8a0020ed6ea740a25a368de6f61da1e1557d,,,5,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Ubuntu.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Desktop/Vista.pm']","VCL-183
Replaced all calls to DataStructure.pm::get_computer_private_ip() with get_computer_private_ip_address(). Removed get_computer_private_ip() sub from DataStructure.pm.",VCL-183
03789eeedb6d6c8b6bc036b2bf1406a760f12ef6,,,4,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/Provisioning/vmware.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/utils.pm']","VCL-167
There was a bug in the regex which was attempting to find ""Offending key"" and ""Matching host key"" lines in SSH output. Removed ^ from beginning of regex. It now finds the lines.

VCL-183
Removed DataStructure.pm::get_computer_private_ip() sub and created a sub with the same name which only calls get_computer_private_ip_address(). This is so subs with both names exist while the rest of the code which calls either sub is transitioned to only call get_computer_private_ip_address().

Removed utils.pm::get_ip_address_from_hosts(). It was only being called by DataStructure.pm::get_computer_private_ip().

Also fixed bug in regex in get_computer_private_ip_address(). It wasn't handling computer names correctly if names had the same prefix, ie blade1g4-1 and blade1g4-14.

VCL-81
Added is_management_node_process_running() sub to utils.pm. This runs pgrep to determine if a process is running on the management node. It is used to determine if another SCP process is already running to retrieve a given image from another management node.

Updated does_image_exist() subs in vmware.pm and xCAT.pm. The subs now check if an SCP process is running to retrieve the image before checking if the image files exist. If running, they wait and keep checking. This will prevent does_image_exist() from returning true if a partial image exists which is actively being copied.

Updated retrieve_image() subs in vmware.pm and xCAT.pm. The subs now check all partner management nodes and try to retrieve from the partner with the largest image. This will prevent retrieval from a partner which contains a partial image, which could happen if that partner is actively retrieving the same image from another partner.",VCL-167
df3b0b0c9a0dcf652d9c2dc3b464ef3cd35d3e2a,,,1,['managementnode/lib/VCL/Module/OS/Windows_mod.pm'],"VCL-23
Fixed bug in filesystem_entry_exists() sub. Removed /s switch from dir command. It was returning true if a file didn't exist, but a file with a similar name exists under a subdirectory.",VCL-23
76a784af637bbfe661caf97ba7c6bf0b95edc629,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT.pm'],"VCL-21
Added check to xCAT.pm::load() to make sure the image repository directory exists. This wasn't being done. If the image repository directory is a mount point and the underlying storage is down, failed reservations did not indicate the real problem in the notification messages.

Also made minor change to does_image_exist(). Removed period after image name in pattern for files to check for.  It was not catching all files.",VCL-21
d76a72f6a59d3abc88053ff783ca577c12ff6d82,,,1,['managementnode/lib/VCL/Module/Provisioning/vmware.pm'],"VCL-175
Added code to configure the eth0 connection using the value of vmprofile.virtualswitch0 for VMware GSX images.

VCL-176
Removed condition during load that prevented the management node from checking if a VM is responding to ssh during the first 15 iterations of a checking loop. This should speed up loads.


VCL-177
Removed Windows OS post-load tasks from vmware.pm. These were being done twice because new.pm calls the OS module's post_load() subroutine after the provisioning module's load() subroutine returns.",VCL-175
08069d0ed36ec400700baab46de6663832076766,,,1,['mysql/vcl.sql'],"VCL-175
Updated VCL database schema. Configured virtualswitch0 and virtualswitch1 columns in vmprofile to not be null. Set default values: virtualswitch0 = VMnet0, virtualswitch1, VMnet2.",VCL-175
2b782599b5031fd396f2b0621a6d26e789b8e243,,,1,['managementnode/lib/VCL/Module/OS/Windows_mod.pm'],"VCL-23
Removed allow_remote_access() sub and added command to set the registry key to firewall_enable_rdp() and firewall_enable_rdp_private().  Removed call to allow_remote_access() in pre_capture().  This ensures that the fDenyTSConnections registry key is properly set whenever RDP is enabled.

Fixed bug in filesystem_entry_exists().  It had been using ls to determine if a file exists.  This fails if the file is hidden.  The pagefile.sys file is an example.  It was reporting that the file didn't exist even though it did.  Changed sub to use cmd.exe /c dir.

VCL-65
Added get_volume_list() sub.  Added call to get_volume_list() from disable_pagefile().  It now attempts to delete a pagefile.sys file from all drives instead of just C:.  Images containing multiple partitions may contain pagefiles on other drives.  Not removing these causes images to be larger than necessary.",VCL-23
7c582e74b1ec5f5b168b128f5325eccc860cd16c,,,1,['mysql/vcl.sql'],"VCL-78

added imageid to blockComputers table",VCL-78
b8438b187e9b0eaf42b4193a00574c7103f22623,,,2,"['managementnode/bin/cygwin-sshd-config.sh', 'managementnode/bin/gen-node-key.sh']","VCL-164
Added cygwin-sshd-config.sh and gen-node-key.sh scripts. These scripts perform all the steps necessary to allow a management node to access a computer via SSH using a key.",VCL-164
7eed83a0ab96206283454d4e6f36643d7a4dba26,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT21.pm'],"VCL-173

copied power_* routines from xcat.pm module",VCL-173
9736e2e694ea17aee485300c98679051ed10657d,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT21.pm'],"VCL-172

added semaphore locking to _edit_nodetype and _edit_nodelist routines to
prevent database locking issues when multiple loads are being processed

ran perltidy",VCL-172
587aed334f01914ef4f9700b0be02a02d0d95700,,,1,['managementnode/bin/install_perl_libs.pl'],"VCL-164
Added Compress-Raw-Zlib and IO-Compress Perl modules to the list that gets installed by install_perl_libs.pl. These are required for the new block reservation code.",VCL-164
027361986675128e0268bff59020938d09092247,,,1,['managementnode/lib/VCL/Module/Provisioning/esx.pm'],"Typo fix

missing $log, $computer_node_name variable and semin-colon on
$identity_keys in node_status routine",
dbfdd03b3c69a94904b8005785434af10c0ebc36,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-167
utils.pm::run_ssh_command() was not catching SSH ""host key differs"" warning messages. Added code to filter these messages from the output that is returned to the caller. The SSH command was succeeding when this warning was displayed but callers were failing because of the unexpected output.",VCL-167
d7309c62c978ce35da1fb9d0c40c4b6c0c95978e,,,7,"['managementnode/tools/Sysprep/Utilities/EmptyRecycleBin.exe', 'managementnode/tools/Sysprep/sysprep.cmd', 'managementnode/tools/Sysprep_2003/Utilities/EmptyRecycleBin ReadMe.txt', 'managementnode/tools/Sysprep_2003/Utilities/EmptyRecycleBin.exe', 'managementnode/tools/Sysprep_2003/sysprep.cmd', 'managementnode/tools/Sysprep_Vista/Scripts/cleanup_hard_drive.cmd', 'managementnode/tools/Sysprep_Vista/Utilities/EmptyRecycleBin.exe']","VCL-64
Removed calls to EmptyRecycleBin.exe and associated files. It occasionally causes image capture to hang.",VCL-64
a7535a12d2bf17c7cc30b4d165739c470a36b2ae,,,4,"['managementnode/lib/VCL/Module/Provisioning/vmware.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT21.pm', 'managementnode/lib/VCL/utils.pm']","VCL-165
Added check to utils.pm::write_currentimage_txt to make sure $ssh_output is defined before trying to access it. This was causing processes to die and be left in the pending state because the following error occurred: ""Can't use an undefined value as an ARRAY reference""

Added ""return 0"" to the capture() sub in vmware.pm, xCAT.pm, and xCAT21.pm if write_currentimage_txt failed. It wasn't catching this. Not having the correct currentimage.txt saved in an image may cause unnecessary reloads.

Added several checks in vmware.pm to make sure result is defined after running run_ssh_command before attempting to use it. If ssh command failed, the process would die because of a ""Can't use an undefined value as an ARRAY reference"" error and the reservation would be left in the pending state.",VCL-165
697c9def67236f9ca9f4a532fb41201f66249867,,,2,"['managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT21.pm']","VCL-157
xCAT.pm's image_size() sub was returning undefined if the image didn't exist, causing errors if an attempt was made to use the undefined value. I changed this sub to return 0 if the image doesn't exist, and undefined only if a problem occurred trying to get the image size.

Modified capture_monitor() in xCAT21.pm and xCAT.pm to check if result from get_image_size() is defined.",VCL-157
574e9016b5f65f8ebb3ce4ede83f39a810530f84,,,2,"['managementnode/lib/VCL/Module/OS/Windows_mod.pm', 'managementnode/lib/VCL/Module/OS/Windows_mod/Version_6.pm']","VCL-166
Changed how the Windows firewall subroutines check the output of running the netsh.exe commands. Previously, the last line of output had to be ""Ok."" in order for the subroutines to return true. Under some conditions, the last line is ""The object already exists."". If this is the case the subs now return true.",VCL-166
ff93ec5a2cfc89e30dfb867b87b8caf012e15979,,,1,['managementnode/bin/install_perl_libs.pl'],"VCL-164
Forgot to set svn properties on bin/install_perl_libs.pl when I added. Set properties to eol-style=native, keywords=""Date Revision Author HeadURL Id"", executable=*.",VCL-164
b86d9a41a68801811346683c3b050442709630e9,,,1,['managementnode/bin/install_perl_libs.pl'],"VCL-164
Added bin/install_perl_libs.pl script. It attempts to download and install the Perl modules required for vcld to run.",VCL-164
214c046fbe1f1b1258e29cc35df9337ea8c4180b,,,1,['managementnode/etc/vcl/vcld.conf'],"VCL-78

added comments explaining xml-rpc username password and url a little more
added default values for xmlrpc_username and xmlrpc_pass",VCL-78
8e5807629fc35b071971501d3f156e5449fdaedd,,,1,['mysql/vcl.sql'],"VCL-78

added vclsystem user to user and localauth tables so that it can be used as a default user to call the block allocation XML RPC API",VCL-78
4849eb71097fd2e467d3f0dca7199b43f8e733a1,,,2,"['web/.ht-inc/conf.php', 'web/.ht-inc/xmlrpcWrappers.php']","VCL-78

added a quick and dirty fix for authorization of XML RPC API calls to block reservation stuff - added $xmlrpcBlockAPIUsers to conf.php that is an array of userids that have access to call XMLRPCblockAllocation and XMLRPCprocessBlockTime; added conditional to begenning of those functions to make sure calling user is in the array",VCL-78
7bbd6f863261e1f2925f4ef923059226b60961a9,,,1,['web/.ht-inc/utils.php'],"VCL-143

utils.php:
-modified isAvailable to consider computers that are being reloaded to be unavailable - previously, it was causing a problem with reloads for block reservations",VCL-143
3376a81da68626822d55996e48b239d405831610,,,1,['mysql/vcl.sql'],"VCL-3

removed:
computer.deptid
image.deptid
dept table
curriculum table
schedule.?start
schedule.?end
schedule.contactemail
schedule.interlockid
schedule.deptid
app table
request.reservationid
user.middlename
group table
reservation.start
reservation.end
reservation.daterequested
reservation.datemodified
request.imageid
imageapplist tabl",VCL-3
72f9391e1f1e92e9b20208a7dfebb29e44f595a2,,,5,"['web/.ht-inc/authmethods/itecsauth.php', 'web/.ht-inc/authmethods/ldapauth.php', 'web/.ht-inc/authmethods/shibauth.php', 'web/.ht-inc/userpreferences.php', 'web/.ht-inc/utils.php']","VCL-151

modified code to ensure apostrophes in names are appropriately escaped; also added some checks for anything that gets inserted/updated in the user table

itecsauth.php:
-modified addITECSUser and updateITECSUser to call mysql_escape_string to escape data before it gets inserted into the user table

ldapauth.php:
-modified updateLDAPUser - added check that numericid is actually numeric before using it for anything
-modified getLDAPUserData to use mysql_escape_string instead of ereg_replace to replace apostrophes; also added check for numericid being numeric

shibauth.php:
-modified updateShibUser and addShibUser to escape things with mysql_escape_string before inserting or updating things in the user table

userpreferences.php:
-modified submitUserPrefs to check for $width and $height being numeric before calling updateUserPrefs

utils.php:
-modified updateUserPrefs to call mysql_escape_string on $preferredname and $audio before updating the user table",VCL-151
cd317a2a7697822bb0b5cd49a8c82e77fbf216c8,,,2,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/utils.pm']","VCL-3

user.middlename removed from utils.pm and DataStructure, it not being
used",VCL-3
f778fa0e5aff041b32763e5d3759d1b70deb36d1,,,1,['managementnode/lib/VCL/DataStructure.pm'],Added return 1 to end of DataStructure.pm::refresh.  It wasn't explicitly returning anything and reported false.,
87f29926d877c787c13b38aa937a4af51a2809e8,,,2,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/utils.pm']","VCL-3

Removed deptid and all references to dept table.
This is an unused variable.",VCL-3
ebdeeae83fb98ded8876c50c52b57e16f192a379,,,1,['managementnode/lib/VCL/Module.pm'],"VCL-23
Added arguments passed to new() to initialize().",VCL-23
b0ffb21f0dec9aa9065e44d0d0406a1c00c7840c,,,3,"['managementnode/lib/VCL/Module/OS/Windows_mod.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT21.pm']","VCL-158
Added multiple netsh attempts to Windows_mod.pm::set_static_public_address(). The netsh command occasionally fails but can be successfully run on subsequent attempts.

VCL-153
xCAT21.pm::get_image_size() was failing because of the way the output was being parsed. I updated how  xCAT.pm::get_image_size() parses the du command output. This subroutine also works for xCAT 2.1 so the xCAT21.pm::get_image_size() was removed.",VCL-158
3b84ca351d36a143e84b3c693ae351ad1da07754,,,1,['web/.ht-inc/utils.php'],"VCL-121

modified checkAccess to handle processing of API password inline instead of calling processInputData to allow special characters in the password

not related to 121:
modified simpleAddRequest to fail if it could not insert into the reservation table
modified sendHeaders to log user out of local SP with Shibboleth if Shib-logouturl not provided",VCL-121
196e393fef858faa0601139f829ab9d82f567f73,,,1,['web/index.php'],moved call to printHTMLFooter to be before call to dbDisconnect in case any footer stuff needs access to the database,
5e4afbe065ef6eeb079aa617eaf1671c3093e112,,,1,['web/.ht-inc/xmlrpcWrappers.php'],"VCL-78

modified XMLRPCprocessBlockTime - added a check to see if the call to simpleAddRequest failed",VCL-78
cadf8686ef8b24205147cb025f9dccc7196b3734,,,2,"['web/.ht-inc/authmethods/shibauth.php', 'web/shibauth/index.php']","VCL-139

both files:
removed requirement of user's email address being passed in

shibauth/index.php:
-added a check for passed in eppn already existing in database; if so, no other fields are required
-removed all NCSU specific cases when setting the skin cookie",VCL-139
6adc6e5956abbfac70da21d6c6a943c8ad4da01b,,,1,['managementnode/lib/VCL/Module/OS/Windows_mod.pm'],"VCL-23
Fixed bug in get_network_configuration() if an adapter is using autoconfiguration. It now checks for ""Autoconfiguration IP Address"" in ipconfig output.",VCL-23
26b396cb64c8dae8a146a8e14b5de9c4d990cb1f,,,1,['managementnode/lib/VCL/Module/OS/Windows_mod.pm'],"VCL-160
Added -T switch to copy drivers command so that files are copied to the correct location whether or not the directory already exists.",VCL-160
e401894515307047834c63bd30d3731ddba2f68c,,,1,['mysql/vcl.sql'],"VCL-3

removed unused database keys
request.imageid
reservation.start
reservation.end
reservation.daterequested
reservation.datemodified",VCL-3
86c340e45f43f19b5612c585bf55984d9c7b93fd,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-3

removed request_reservationid from get_managementnode_requests 
variable is not used",VCL-3
1a866ebf71686a32a331a306184420af668301f7,,,1,['managementnode/lib/VCL/Module/OS/Windows_mod.pm'],"VCL-160
Modified Windows_mod.pm::prepare_drivers() to delete existing DevicePath key before running spdrvscn.exe. Also fixed a bug if the driver directory didn't exist beforehand by adding mkdir -p command before attempting to copy drivers.",VCL-160
2cbbb89a8b930bc58e56cd31cdeb0e8924a37a98,,,7,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS/Windows_mod.pm', 'managementnode/lib/VCL/Module/OS/Windows_mod/Version_6.pm', 'managementnode/lib/VCL/Module/Provisioning/vmware.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT21.pm', 'managementnode/lib/VCL/utils.pm']","VCL-158
Added keys to hash in DataStructure.pm to allow management node static IP parameters to be accessed.
Added code to add static IP configuration information to the hash returned by get_management_node_info().
Added the following subs to Windows_mod.pm:
get_public_default_gateway()
get_private_subnet_mask()
set_static_public_address()
set_static_private_address()
delete_default_routes()
set_public_default_route()

Updated xCAT.pm, xCAT21.pm, and vmware.pm to check if the OS module has implemented a set_static_public_address() function. This gets called instead of utils.pm::setstaticaddress().


VCL-159
Changed wait time for ssh to respond from approximately 5 minutes to 10.
Updated power_off() and power_on() to call wait_for_on/off() after executing rpower instead of simply waiting 2 seconds. They now wait up to 1 minute for the node to power on or off.
Updated wait_for_on/off() to accept node name arguments instead of requiring 


VCL-23
Changed Windows_mod.pm's get_private_ip_addresses() and get_public_ip_addresses() sub to return single values and renamed them accordingly. Updated subroutines in Version_6.pm which call this.  Version_6.pm is the only module using these subs.

Other
Added code to utils.pm::run_ssh_command() to use the managementnode SSH keys value if no identity key paths are provided as an argument.",VCL-158
951e4b21b12f14eff50cff11b79ef37f51329a90,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT21.pm'],"VCL-157
Updated xCAT21.pm's does_image_exist() and get_image_size() subroutines to check for partimage .gz files.",VCL-157
0a5062e30eee6ec6cb51cd0a4e7e18de4025251a,,,3,"['managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT21.pm', 'managementnode/lib/VCL/new.pm']","VCL-156

new.pm:
added check on kickstart installs to run write_currentimage

xcat,xcat21 - removed checks on imagename in node_status",VCL-156
fa2dbfd5fe4183809360252be75b243c5ef8f311,,,1,['managementnode/lib/VCL/Module/OS/Windows_mod.pm'],"VCL-23
Commented out set_computer_name() call in post_load(). This isn't necessary and can cause problems if it's done after Cygwin SSHD is configured.

Added ""return 0"" statements to a few operations in post_load() to cause the reservation to fail if the operations fail.

Updated delete_file() to first check if the file/directory exists. It then runs chmod -R 777 to prevent permission denied errors from occurring.

Updated filesystem_entry_exists() to call ls -lad instead of ls -la. It would fail using -la if checking for the existence of a directory if root didn't have permission to view its contents.

Added ""return 0"" statement to delete_capture_configuration_files() if it's unable to delete an existing capture configuration directory.

Fixed bug in apply_security_templates(). It now should correctly detect if an OS doesn't have any templates.",VCL-23
9ba1a017905ee85f4db708faabd9f93e4088e3df,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-154
Added condition to utils.pm::run_scp_command() to check for permission denied errors.",VCL-154
e0b748cb95c53558b157b3c977973fbaf4910dd2,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT21.pm'],"VCL-153
Updated xCAT21.pm to more closely match xCAT.pm.  Renamed capture_prepare() to capture(), and changed calls to OS pre_capture() subroutines.  Also changed xCAT.pm's parent module to xCAT.pm so common subroutines can be shared.",VCL-153
f530c9880f76b2d754c4a17433a9fc6736ef9c50,,,1,['managementnode/lib/VCL/Module/OS/Windows_mod.pm'],"VCL-23
Fixed bug in Windows_mod.pm::get_network_configuration() where it was returning the wrong interface if the public adapther is listed first in ipconfig output.",VCL-23
413f6bf399b3bf31bb4ef340955875fa31d8be62,,,1,['managementnode/lib/VCL/Module/OS/Windows_mod.pm'],"VCL-23
Fixed bug in Windows_mod.pm::set_password(). It wasn't properly checking if the SSH command failed entirely.",VCL-23
2a37c640e4fd328034ac957d3e2d44d7847f47ea,,,9,"['web/.ht-inc/xmlrpcdocs/doxygen.css', 'web/.ht-inc/xmlrpcdocs/examples.html', 'web/.ht-inc/xmlrpcdocs/files.html', 'web/.ht-inc/xmlrpcdocs/globals.html', 'web/.ht-inc/xmlrpcdocs/globals_func.html', 'web/.ht-inc/xmlrpcdocs/index.html', 'web/.ht-inc/xmlrpcdocs/tabs.css', 'web/.ht-inc/xmlrpcdocs/xmlrpcWrappers_8php.html', 'web/.ht-inc/xmlrpcdocs/xmlrpc__example_8php-example.html']",regenerated these docs from the source code using doxygen and the doxyfile.xmlrpc config file,
46d52ae584de6386f492a2b86df783c69c76991f,,,2,"['web/.ht-inc/requests.php', 'web/.ht-inc/utils.php']","VCL-16

requests.php
modified submitRequest:
-made footer get printed for error conditions
-changed to not print overlapping reservation message if request is not available
modified viewRequestInfo to display cluster reservations better
modified confirmDeleteRequest and submitDeleteRequest to print better text if an admin is deleting someone else's reservation

utils.php
modified getRequestInfo to sort reservations by id to make sure the first reservation in the array is the parent reservation",VCL-16
8ea81fd0ae309de427db4e467af02fbdbf2ace2c,,,1,['managementnode/lib/VCL/Module/OS/Windows_mod.pm'],"VCL-23
Added query_registry_value() sub to Windows_mod.pm",VCL-23
5b7cbba219e032127f915b4cdc3da373769a1d67,,,1,['managementnode/lib/VCL/Module/OS/Windows_mod/Version_5/2003_mod.pm'],"VCL-23
Added 2003_mod.pm file.  It's currently the same as XP_mod.pm with different paths contained within.",VCL-23
1af70bcda76aa2ea037ea5847223f8e2e3ea0ed1,,,1,['managementnode/tools/Windows_Server_2003/Utilities/Sysprep/sysprep.inf'],"VCL-23
Added tools/Windows_Server_2003 and tools/Windows_Vista directories. Created Drivers directory underneath and set svn property to ignore files under driver directories. Copied in sysprep.inf for Windows 2003.",VCL-23
ea3697346652d2ce30d205fbbb56fd846782add6,,,1,['managementnode/lib/VCL/utils.pm'],"minor clean-up of unused routines

removed routine entrys for
virtual_status_vm
virtual_status_unix
getanothermachine
an older reservations_ready routine",
5328531f0e626b7259ca01948704ccb435d2bb9f,,,1,['managementnode/lib/VCL/DataStructure.pm'],Fixed bug in DataStructure.pm in retrieve_user_DataStructure.pm(). It shouldn't update the data stored in the object.,
e032aad96490cf3ab098b07a0916d97edbfe1faf,,,3,"['managementnode/lib/VCL/Module/OS/Windows_mod.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/image.pm']","VCL-144
Changed name of image_creation_failed() sub in image.pm to reservation_failed(). There is a sub named reservation_failed() in State.pm. Having a sub with the same name in image.pm will cause any calls to this sub for imaging reservations to use the one in image.pm because of inheritance. Also changed name of image_creation_successful() to reservation_successful() for consistency. 

VCL-144
There were calls in xCAT.pm to image_creation_failed(). This is a state module function and provisioning modules don't have access to call state module functions so the call would have failed. I changed these calls to return 0. This will return control to the state module, which will then call reservation_failed();

VCL-23
Changed behavior in xCAT.pm::capture() when the OS module returns from pre_capture(). It now waits up to 2 minutes for the computer to shut down instead of shutting the computer down immediately. This will fix a problem where the OS initiates a shutdown then returns immediately, then xCAT.pm forces a power off while the OS is shutting down.

VCL-23
Added check for the existence of the TransardAFSDaemon service before attempting to stop it in clean_hard_drive(). This prevents an error from appearing in the log file if the service isn't installed.",VCL-144
533743ad990347c1ae22fcb75ff58fde20182b16,,,1,['managementnode/lib/VCL/Module/OS/Windows_mod/Version_6.pm'],"VCL-23
Updated deactivate_license() sub to remove KMS registry keys. These weren't being removed by running slmgr.vbs -ckms.
Added call to deactivate_license() in pre_capture() in Version_6.pm. This needs to be done or else a Vista image which was captured a while ago will have problems when it comes up. The autoadminlogon sequence will fail because an activate now or later screen appears.",VCL-23
ecb40d5097ff152196e64f3b3b33b740ab2f1c9a,,,2,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/State.pm']","VCL-15
Added is_blockrequest() sub to DataStructure.pm.
Added check to State.pm::DESTROY() to determine if a blockrequest is being processed or not. It now attempts to delete the computerloadlog entries only if not a blockrequest.",VCL-15
2997e6de711e74fcdde6eb704af178785ac3a6c7,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-15

routines added -
process_block_time:
calls the xmlrpc_call with the desired method

clear_blockComputers:
to remove computers from blockComputers table when blockrequest has
expired

delete_block_request:
removes blockRequest entry

update_blockTimes_processing:

xmlrpc_call: using the URL, xmlrpc_username and xmlrpc_password. make
the xmlrpcfunction call

added global vars for xmlrpc_user,xmlrpc_pass,xmlrpc_url",VCL-15
2281eb1b673b2d7a7c0c2b10cbf29793f0ee857e,,,1,['managementnode/lib/VCL/blockrequest.pm'],"VCL-15

Converted to use xmlrpc calls, eliminates duplication of code on
backend.

moved all sql queries to sub routines in utils.",VCL-15
91c69de4e9eadc5df1a17f55db151fecb7632b79,,,1,['managementnode/etc/vcl/vcld.conf'],"VCL-15

included xmlrpc_url option as this would change for each instance",VCL-15
a706568a553bf22b2098f31a1857c847e292d5f8,,,1,['managementnode/INSTALL'],"VCL-15

added XML-Parser-2.36,RPC-XML-0.64,Crypt-SSLeay-0.57 install steps. Required
dependiences for xmlrpc calls.

Note: Even if Crypt-SSLeay-0.57 was already via rpm, it had to be
re-installed else it would seg-fault.",VCL-15
ea8c462b2efc30c600baa43b2b9518049a4baae9,,,1,['managementnode/etc/vcl/vcld.conf'],"VCL-15,VCL-135

Added ASF 2.0 license. Removed NCSU copyright

Added xmlrpc_user,xmlrpc_pass for xmlrpc calls",VCL-15
2a8ed5f5a1a52c24fc869fb21749c1a8237b899c,,,1,['managementnode/lib/VCL/Module/OS/Windows_mod.pm'],"VCL-23
Added step to copy_capture_configuration_files() to delete any Subversion files which may have been copied to the computer in case management node's working VCL directory has been checked out.",VCL-23
39b55558a762a6004cd18af84f6a711f8b7a5b9e,,,1,['managementnode/lib/VCL/Module/OS/Windows_mod.pm'],"VCL-23
Added service_exists() subroutine.  Added check to disable_windows_defender() to check if the service exists before trying to disable it to prevent warnings from appearing if it isn't installed.

Changed OK notify messages to WARNING in start_service() and stop_service() if the service doesn't exist.
Added check in set_service_startup_mode() if the service doesn't exist, displays a warning if it doesn't.",VCL-23
5b490f9933b2063bc40c03935ccdc8cb901d2f34,,,1,['managementnode/lib/VCL/Module/OS/Windows_mod.pm'],"VCL-23
Added subroutines and added calls in pre_capture() to further automate image creation tasks:
disable_windows_defender()
disable_automatic_updates()
disable_security_center_notifications()

Added condition to delete_file() to check for ""Circular directory"" warning when rm is used. It now catches this and doesn't display a warning. Other deletion methods are then attempted.

Fixed bug in filesystem_entry_exists() if path specified included backslashes. Added regex to convert them to forward slashes before checking if exists. Changed command to enclose path in double quotes instead of single.

Added ipconfig_renew() subroutine and added call to it from enable_dhcp(). This is necessary because the default gateways are sometimes lost when DHCP is enabled.

Added to the POD documentation for a few of the subroutines.",VCL-23
a755d1745d5672909c3a607bbcd2ea7d218951ad,,,1,['managementnode/lib/VCL/Module/OS/Windows_mod.pm'],"VCL-120
Added DisableFirstRunCustomize key to the disable_ie_configuration_page() subroutine. IE8's user setup pages weren't being disabled by the existing registry settings in this subroutine. The additional key seems to prevent IE8's user setup pages from appearing.",VCL-120
5166291150271937fcb97116e10da184677a8948,,,1,['managementnode/lib/VCL/Module/OS/Windows_mod.pm'],"VCL-23
Added call to set the Cygwin SSHD service startup mode to auto in Windows_mod.pm::post_load(). This is necessary for images created with the old code because none of the scripts stored in the image perform this step. The update_cygwin.cmd script that gets run after an image is loaded with the new code performs this step.",VCL-23
6bf473e9ccf48fb2c8a8638bc9d0ba137250c577,,,2,"['managementnode/lib/VCL/Module/OS/Windows_mod.pm', 'managementnode/lib/VCL/Module/OS/Windows_mod/Version_6/Vista_mod.pm']","VCL-23
Updated Vista_mod.pm to call prepare_newsid() instead of performing the steps itself. Also removed an exit call from Windows_mod.pm::prepare_newsid().",VCL-23
117d95a38b23b363d07882000f14b0c885af2aec,,,2,"['managementnode/lib/VCL/Module/OS/Windows_mod.pm', 'managementnode/lib/VCL/Module/OS/Windows_mod/Version_6/Vista_mod.pm']","VCL-23
Added prepare_newsid() to Windows_mod.pm. It configures a computer to automatically call the run_newsid.cmd script the next time a user logs on. Also removed call to enable_autoadminlogon() from pre_capture(). The prepare_newsid() or Sysprep script files control this.

Fixed accidental exit call that got saved in Vista_mod.pm.",VCL-23
0d50c1b091b41691a0abb84c29efcbeeec9fafe9,,,2,"['managementnode/tools/Windows/Scripts/debug_info.cmd', 'managementnode/tools/Windows/Scripts/run_newsid.cmd']","VCL-23
Added run_newsid.cmd. Updated debug_info.cmd to display the computer's SID.",VCL-23
6e1eba78bc86bca24df6268dc8d88d857bd3f691,,,5,"['managementnode/lib/VCL/Module/OS/Windows_mod.pm', 'managementnode/lib/VCL/Module/OS/Windows_mod/Version_5.pm', 'managementnode/lib/VCL/Module/OS/Windows_mod/Version_5/XP_mod.pm', 'managementnode/lib/VCL/Module/OS/Windows_mod/Version_6.pm', 'managementnode/lib/VCL/Module/OS/Windows_mod/Version_6/Vista_mod.pm']","VCL-23
Made several minor improvements to Windows modules during testing.

Windows_mod.pm:
-Added check for 'end_state' argument in pre_capture() so child classes don't have to check for it
-Set pre_capture() to disable RDP before capture instead of enabling it for 10.x.x.x addresses in case these addresses are used for public access. Also set post_load to enable RDP on the private interface.
-Added call to post_load() to set the computer name. The script that runs during Sysprep does not always work correctly.
-Commented out disable_netbios() and disable_dynamic_dns() calls from post_load() to speed things up. These can be controlled by OS config variables some day.
-Moved grant_access() and revoke_access() within the file so they appear under the pod section for interface functions.
-Added max_depth argument and default setting to delete_files_by_pattern(). This was running very slow on Vista when searching directories with many files.
-Changed enable_pagefile() and disable_pagefile() to call reg.exe instead of importing a .reg file. The pagefile key should be a REG_MULTI_SZ. This type is difficult to configure using a .reg file.
-Changed enable_pagefile() to set the registry key to C:\pagefile.sys instead of ?:\pagefile.sys. The question mark string worked but the interface to control the pagefile did not reflect the actual setting properly.
-Changed import_registry_string() to name the temporary .reg file after the sub and line number which called it so it's easy to determine where the .reg file came from.
-Added shutdown() subroutine. This is called after newsid.exe runs.
-Changed run_newsid() to not rename the computer. This is done elsewhere.
-Added commands to disable_dynamic_dns() to disable DNS updating for each adapter.
-Added firewall_enable_rdp_private() sub which will allow RDP only on the private interface.
-Added get_node_configuration_directory() so child classes can use the variable stored in Windows_mod.pm. It is the location on the node where VCL files are stored.
-Added set_computer_name() which sets registry entries to rename the computer.

Version_5.pm:
-Added argument to SUPER::pre_capture() call to pass the args which were passed to it.

XP_mod.pm:
-Removed end_state argument check. This was moved up to Windows_mod.pm so other classes don't duplicate the code. This is only possible by passing the arguments up to the parent's subroutine.

Added Version_6.pm, Version_6 directory, and Vista_mod.pm.",VCL-23
72a9f19063557e7ee1039b4d83da71335778c9e2,,,1,['managementnode/lib/VCL/utils.pm'],Made a minor change to utils.pm::notify(). I changed the regex which removes spaces from the beginning and end of each line of log output to only remove them from the end. It was causing output which is supposed to display a tree structure to be displayed poorly.,
05647edbe46715825b7094042fb7c0efeadfcb62,,,1,['managementnode/lib/VCL/DataStructure.pm'],"VCL-142
Added get_image_affiliation_name() subroutine to DataStructure.pm. This will be used to determine which KMS server to use based on the servers configured for different affiliations.",VCL-142
7781b6498d13f9c8cebd875cbfbcd8d51b9c9dd2,,,1,['managementnode/lib/VCL/DataStructure.pm'],"VCL-140
Added get_variable() and set_variable() subroutines which access the variable table.

Other
Added get_computer_private_ip_address() subroutine. It searches the /etc/hosts file on the managment node for the computer specified",VCL-140
05bc9c825b0b8ac816e345c96bfece06b894633e,,,1,['mysql/vcl.sql'],Added definition for variable table to vcl.sql.,
bfab583d367a1994846ea17ff17cfc315846ed9f,,,1,['managementnode/lib/VCL/Module/OS/Windows_mod.pm'],"VCL-23
Reworked firewall subroutines. That had been calling a firewall_configure() sub by passing a hash of details.  This was overly complicated.  I changed each firewall sub to call netsh.exe directly with the proper switches.",VCL-23
87ced69bebac853a9ab5a6e77717fee35a0cf96a,,,1,['web/.ht-inc/xmlrpcWrappers.php'],"modified inline documentation to say that when calling XMLRPCaffiliations, the mode in the URL needs to be xmlrpcaffiliations",
5d174f6d725068bde5da5d97f22bd7b87c687ff1,,,1,['managementnode/bin/vclclientd'],"VCL-135
Removed section where NCSU email address was specified in vclclientd. This section of code was never executed because the condition would only be true if notify() was called with a 'MAILMASTERS' argument.  Also ran perltidy on the file.",VCL-135
536cfa8a27ab6853e0ccd62725b261435242bfbf,,,2,"['managementnode/lib/VCL/Module/OS/Windows_mod.pm', 'managementnode/lib/VCL/utils.pm']","VCL-118
Added delay after a failed attempt to utils.pm:run_ssh_command() and run_scp_command(). Also added ability to pass a hash reference to run_ssh_command(). The list of arguments it accepts is somewhat lengthy and this will make it easier to keep the arguments straight when calling it. It will also make it easier to add additional arguments later on.

Added 'max_attempts' argument to run_ssh_command allowing caller to specify how many times the command will be attempted if it fails. The default is 3. This argument allows caller to control the number of attempts. For example, only 1 attempt may be desired if the caller only wants to know if SSH is responding.

Changed call in Windows_mod.pm::wait_for_ssh() to call run_ssh_command using a hash reference argument. It specifies max_attempts to be 1.",VCL-118
490edac2620b178f42e2cf1b6a0e41411607a6c1,,,1,['managementnode/lib/VCL/Module/OS/Windows_mod.pm'],"VCL-120
Added Windows_mod.pm::disable_ie_configuration_page(). This configures the registry to prevent the initial IE configuration page from appearing for users. Added a call to this sub in pre_capture().

Also removed call to allow_remote_access() in firewall_enable_rdp() and added a call to it in pre_capture(). This speeds up the tasks that occur after a user clicks the Connect button.",VCL-120
3da37acac8ed3c06ae8bb4b2a3a7f3525fc64b29,,,2,"['managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT21.pm']","VCL-135
Fixed a bug which was introduced in r774413. The xCAT template path was not being returned correctly if linux_image path was used.

Other
Changed xCAT.pm::node_status() so that it returns 'RELOAD' if the nodetype.tab file does not match what is in the currentimage.txt file on the node. It had been checking for this but ignoring mismatches, assuming that nodetype.tab was correct.

Fixed typos in xCAT.pm and xCAT21.pm where 'CRITCAL' should have been 'CRITICAL'.",VCL-135
56832592f671aee6177b65b6b07a0291ef92dce1,,,1,['managementnode/tools/Windows_XP/Utilities/Sysprep/sysprep.inf'],"VCL-135
Removed NCSU as the organization name in Windows XP's sysprep.inf.

VCL-23
Corrected the mass storage device driver paths in Windows XP's sysprep.inf. They had been pointing to C:\Drivers instead of C:\Sysprep\Drivers.",VCL-135
accc2a52251042707300b7d237deba90cc7fbc44,,,1,['managementnode/tools/Windows/Scripts/configure_networking.vbs'],"VCL-23
Fixed a bug in configure_networking.vbs where it wasn't correctly identifying the public and private adapter names for VMWare images.",VCL-23
e59612f55e4c710a235b6e08581bbe19858c3f36,,,9,"['managementnode/bin/S99vclclient.linux', 'managementnode/bin/S99vclclient.solaris', 'managementnode/bin/S99vcld.linux', 'managementnode/bin/health_check.pl', 'managementnode/bin/monitor_vcld.pl', 'managementnode/bin/search-replace', 'managementnode/bin/vclclientd', 'managementnode/bin/vcld', 'managementnode/bin/vcld_cron_check']","VCL-10
Added ASF license header to the S99vcl* files, search-replace, and vcld_cron_check.

VCL-135
Removed NCSU URL from footer. Updated header and footer to all files are consistent.",VCL-10
26b42086505154735184b2011de02d8f13078da8,,,3,"['managementnode/lib/VCL/Module/Utils/Logging.pm', 'managementnode/lib/VCL/Module/Utils/SCP.pm', 'managementnode/lib/VCL/Module/Utils/SSH.pm']","VCL-135
Removed NCSU URL from footer. Updated header and footer to all files are consistent.",VCL-135
5f8564355d52133107109ed27dbf53f45a486ab5,,,11,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/blockrequest.pm', 'managementnode/lib/VCL/healthcheck.pm', 'managementnode/lib/VCL/image.pm', 'managementnode/lib/VCL/inuse.pm', 'managementnode/lib/VCL/makeproduction.pm', 'managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/reclaim.pm', 'managementnode/lib/VCL/reserved.pm', 'managementnode/lib/VCL/utils.pm']","VCL-135
Removed NCSU URL from footer. Updated header and footer to all files are consistent.",VCL-135
1c00bd09c258c63935da80047e140e736cf5fbca,,,4,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/Predictive.pm', 'managementnode/lib/VCL/Module/Provisioning.pm', 'managementnode/lib/VCL/Module/State.pm']","VCL-135
Removed NCSU URL from footer. Updated header and footer to all files are consistent.",VCL-135
1ec4dcc2144f4e2e62ec28771b5f226663a19e33,,,6,"['managementnode/lib/VCL/Module/Provisioning/Lab.pm', 'managementnode/lib/VCL/Module/Provisioning/esx.pm', 'managementnode/lib/VCL/Module/Provisioning/helloworld.pm', 'managementnode/lib/VCL/Module/Provisioning/vmware.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT21.pm']","VCL-135
Removed NCSU URL from footer. Updated header and footer to all files are consistent.",VCL-135
baaa9470ecee986e826dbacac96207085fdb8c36,,,2,"['managementnode/lib/VCL/Module/Predictive/Level_0.pm', 'managementnode/lib/VCL/Module/Predictive/Level_1.pm']","VCL-135
Removed NCSU URL from footer. Updated header and footer to all files are consistent.",VCL-135
9877dc6953a97892e6c0400393ed226757ca8147,,,9,"['managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Ubuntu.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Desktop.pm', 'managementnode/lib/VCL/Module/OS/Windows/Desktop/Vista.pm', 'managementnode/lib/VCL/Module/OS/Windows/Desktop/XP.pm', 'managementnode/lib/VCL/Module/OS/Windows_mod.pm', 'managementnode/lib/VCL/Module/OS/Windows_mod/Version_5.pm', 'managementnode/lib/VCL/Module/OS/Windows_mod/Version_5/XP_mod.pm']","VCL-135
Removed NCSU URL from footer. Updated header and footer to all files are consistent.",VCL-135
cc99df1ce99b9a888f679f8cee964076d23ea8d0,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT.pm'],"VCL-20, VCL-135
Reworked a few subs in xCAT.pm to remove references to NCSU and to utilize the management node SSH port value in the database.

Changed a few 'OK' notify() messages to 'DEBUG' so they wouldn't be displayed in the log file if verbose mode is disabled.",VCL-20
74ccbb52e54a9fc7f086ea38e9751af0a3fb9615,,,1,['managementnode/bin/vcld'],Made minor changes to a few of the notify() messages in vcld. Some 'OK' messages were changed to 'DEBUG' so they wouldn't be displayed if verbose mode is disabled and a few other messages were commented out.,
fe20fce3d12ada5f78ee614339e1e09090628b98,,,1,['managementnode/lib/VCL/Module/State.pm'],Made minor changes to a few of the notify() messages in State.pm. Some 'OK' messages were changed to 'DEBUG' so they wouldn't be displayed if verbose mode is disabled. A few useless messages were also removed.,
34c727c9d7d4e50f311fe67f0dd105760b3d19dd,,,2,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/utils.pm']","VCL-20
Added ability to DataStructure.pm to retrieve management node's ssh port. Extended DataStructure.pm to allow the management node to be specified when using any of the get_management_node_xxx() functions.

VCL-82
Modified regex's in utils.pm::notify() to remove blank lines from the log output and to remove spaces from the beginning of lines.

VCL-22
Modified utils.pm::get_management_node_info() to accept an IP address as the argument. It will return the info for the management node with the IP specified.

Other
Made minor change to utils.pm::run_ssh_command() output. It displays the full ssh command in the log if verbose mode is enabled. I also modified it to not display the return values if the 'no output' option was specified.

Added an optional 'no output' argument to utils.pm::run_command(). This was done to control the output and to match run_ssh_command().

Changed a few 'OK' notify() messages to 'DEBUG' so they wouldn't appear in the log file if verbose mode is disabled.",VCL-20
0f3b89372c758359eda86f78bcfe90dcec6b020b,,,1,['managementnode/lib/VCL/Module/Provisioning/vmware.pm'],"VCL-137
Updated vmware.pm to include subroutines which are part of the provisioning module API specification:
-power_status()
-power_on()
-power_off()
-power_reset()

Added block of code to capture() which calls a modular OS module's pre_capture() subroutine instead of performing OS-specific tasks within capture().

Changed a regex in capture to include the possibility of an underscore in an OS name. Capture was failing because the regex didn't properly handle an image name beginning with vmwarewinxp_mod.

Fixed a bug in a regex in get_image_size(). It wasn't getting all of the vmdk file names.

Updated header and footer of vmware.pm to match other files, as well as removing NCSU references.

Added get_vmx() sub which returns various paths and filenames. It's functionality would have had to be done in each of the new power_ subs.",VCL-137
2aff59697399f6120c3d9096b231c0d9f80661cb,,,1,['managementnode/lib/VCL/Module/OS/Windows_mod.pm'],"VCL-23
Windows_mod.pm
-Modified delete_files_by_pattern(). It now runs chmod before attempting to delete a file in case root doesn't have permission to do so
-Modified reboot(), wait_for_ping(), wait_for_no_ping(), and wait_for_ssh(). Changed timing to work better with VMWare images, which take less time to reboot.
-Fixed bug in get_private_interface_names() and get_public_interface_names(). It was ignoring the adapters under VMWare because they had VM in the interface name.
-Added kill_process() subroutine.",VCL-23
1552ff51455627f176d21b1425650d1e71a50082,,,2,"['web/.ht-inc/userpreferences.php', 'web/.ht-inc/utils.php']","VCL-135

missed removing a few references to WRAP in the last checkin",VCL-135
68542a69c4db09d05a1f69a64e62ba6c04b73e70,,,13,"['web/.ht-inc/Doxyfile', 'web/.ht-inc/authentication.php', 'web/.ht-inc/authmethods/ldapauth.php', 'web/.ht-inc/doxyfile.xmlrpc', 'web/.ht-inc/errors.php', 'web/.ht-inc/help.php', 'web/.ht-inc/requests.php', 'web/.ht-inc/userpreferences.php', 'web/.ht-inc/utils.php', 'web/.ht-inc/xmlrpcWrappers.php', 'web/images/textimage.php', 'web/js/code.js', 'web/shibauth/index.php']","VCL-135

removed references to NCSU/ncsu and a few short blocks of code that were specific to the production install at NCSU

updated some of the detailed description in the xmlrpcWrappers.php file to bring it up to date and remove references to NCSU

removed updateEXAMPLE1Groups from ldapauth.php, renamed updateEXAMPLE2Groups to be updateEXAMPLE1Groups, and removed references to EXAMPLE2 - all this was done because updateEXAMPLE1Groups called ldapUIDLookup which was an ldap function specific to ncsu",VCL-135
11d7c1ba45161eabc02ddc97fa20f0cc84439981,,,11,"['web/.ht-inc/authmethods/itecsauth.php', 'web/.ht-inc/authmethods/ldapauth.php', 'web/.ht-inc/computers.php', 'web/.ht-inc/conf.php', 'web/.ht-inc/errors.php', 'web/.ht-inc/images.php', 'web/.ht-inc/privileges.php', 'web/.ht-inc/schedules.php', 'web/.ht-inc/userpreferences.php', 'web/.ht-inc/utils.php', 'web/.ht-inc/xmlrpcWrappers.php']","VCL-3

removed all references to user.middlename (and any usage of a middle name at all), curriculum table, dept table, and schedule.start0/end0-start6/end6
removed getAppId, getDepartmentID, and getDepartments functions
added comments that support for API version 1 should be removed in VCL 2.2",VCL-3
0003040f21b502589ff2c3959b1e07b2ddb76964,,,1,['web/.ht-inc/genkeys.sh'],added executable property,
d945a75510547dc060d339ced8afc2836c41480f,,,1,['web/.ht-inc/utils.php'],minor modification to showTimeTable - added conditional at beginning of main foreach loop to skip any time stamps in the past - this was to fix an odd corner case that caused showTimeTable to throw an error,
f589a5c93d88b186632dc04f01fdc6e2b45ee395,,,3,"['web/js/code.js', 'web/js/computers.js', 'web/js/images.js']",moved function errorHandler from computers.js and images.js to code.js to allow new developers to more easily add dojo AJAX calls,
e3a63e90bf2644a5080316acc63241f081f102bc,,,1,['managementnode/lib/VCL/Module/Provisioning/vmware.pm'],"VCL-7

changed return value for node_status to always return hash
- if node was not pingable it returned a scalar value with just ""RELOAD""
- tobe consistent - removed the return value at affected check",VCL-7
9b018d38c8a9a26eacde943675907d5b646997d3,,,1,['managementnode/lib/VCL/Module/Provisioning/esx.pm'],"VCL-7 

updated node_status routine so it can be called by tools outside of
vcld
node_status:
- extended to accept non-class method calls",VCL-7
a668efb070a7393973ec76ff780c8e03cebf7936,,,1,['managementnode/lib/VCL/Module/Provisioning/vmware.pm'],"VCL-135

removed ncsu references",VCL-135
ad1394d5a2cfd8879e954ff96d27a0d5591a8efb,,,2,"['managementnode/bin/health_check.pl', 'managementnode/lib/VCL/healthcheck.pm']","VCL-6
VCL-7

health_check.pl
- disabled mailing report (commented out method call), it can be
  uncommented on a per site basis if desired

healthcheck.pm
- simplfied
- all sql queries have moved to generic routines in utils.pm
- removed need to list packages directly, calls the specified
  provisioning modules on a per computer_type method, which is provided
  through the database
- created additional routines called type_investigator to dig deeper
  into the issue of a node being down. this is initially only comparing
  the the listed image on the node against the database entry.
- supports virtual machines",VCL-6
afddb28314d235aaa4b9c38848dfc81068fbf9e0,,,2,"['managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT21.pm']","VCL-6 

updated node_status routine so it can be called by tools outside of
vcld  - specifically healthcheck
node_status:
- extended to accept non-class method calls",VCL-6
f91b5bb80f10ac7f379fa15d5a455c33dfe46e94,,,1,['managementnode/lib/VCL/Module/Provisioning/Lab.pm'],"VCL-6

updated node_status routine so it can be called by tools outside of
vcld  - specifically healthcheck
node_status:
- extended to accept non-class method calls",VCL-6
03f422e69cba24c4a1ed220b3c79e4f71c6a2720,,,1,['mysql/vcl.sql'],Added the rootaccess column to the imagemeta table definition.,
3686756523ec618301eb6f50929e7a5953264670,,,2,"['managementnode/lib/VCL/Module/OS/Windows_mod.pm', 'managementnode/lib/VCL/utils.pm']","VCL-125
Windows_mod.pm::create_user() - Improved the ""if"" statement logic where the value retrieved from imagemeta.rootaccess is checked. If the value was undefined because the database didn't contain the column, a warning message would appear in the log output. It was working correctly but the new logic prevents the warning message from appearing.

utils.pm::get_imagemeta_info() - Added line to set the rootaccess key in the hash being returned to 1 if it isn't defined in the database. This helps ensure the default is always to grant rootaccess unless explicitly configured to not grant root access.

Other
Windows_mod.pm::create_user() - Fixed bug where it was calling an invalid subroutine name get_user_password() from DataStructure.pm. It should be get_reservation_password().

Windows_mod.pm::user_exists() - Changed run_ssh_command() to not display output. It was causing a large section of user into to appear in the log file.",VCL-125
cd7e660a58a9e6d76f44000a24b2a4154e1ba7a7,,,1,['managementnode/tools/Windows/Security/windows_security.inf'],"VCL-125
Added tools\Windows\Security directory and a default Windows security template file in this directory.",VCL-125
1aedd417f458bfd5598c81add892af766ee27039,,,3,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS/Windows_mod.pm', 'managementnode/lib/VCL/utils.pm']","VCL-125
Added ability to retrieve the value from the imagemeta.rootaccess column in DataStructure.pm and utils.pm::get_imagemeta_info().

Modified Windows_mod.pm::create_user() to check the rootaccess value and only add the user to the Administrators group if rootaccess is enabled.

Added apply_security_templates() sub in utils.pm after encountering a problem where a user could not log in if not in the Administrators group due to a corrupt security database on the machine. Reapplying security template files with secedit.exe fixed the problem. This sub also adds the ability to apply security settings automatically during image capture.

Added call to apply_security_templates() to Windows_mod.pm::pre_capture().


VCL-135
Updated file header and footer in utils.pm and DataStructure.pm.
Removed a section which was already commented out in utils.pm::hostname() referencing an NCSU DNS domain name.
Changed utils.pm::get_request_info() to set the default sitewwwaddress to http://cwiki.apache.org/VCL and helpaddress to vcl-user@incubator.apache.org instead of NCSU addresses.


Other
Fixed bug in utils.pm::_sshd_status() where it was returning ""on"" if the test ssh command completely failed and returned undefined. It now returns off if it fails in this manner. 

Fixed minor bug in utils.pm::format_data() if an empty array was passed to it.",VCL-125
52b6d32339006091dfb22ef8e41fc484d659ff9a,,,1,['managementnode/lib/VCL/Module/Provisioning/vmware.pm'],"VCL-7

updated node_status routine so it can be called by tools outside of
vcld  - specifically healthcheck
node_status:
- extended to accept non-class method calls
- changed basic flow to always get the state of a vm
- vmstate is now on,off,stuck instead of 0,1",VCL-7
897fc18a0c06fe3e4b1976575a2dca879f599ee8,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-6

set notify statements to related routines to print only in debug mode",VCL-6
89432f5ae3d7b1d182a5d194bab1501189e55b5e,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-6

Added two routines
update_computer_lastcheck: updates the lastcheck time of a given
computerid - primarily called by healthcheck

update_computer_imagename: updates the computer imageid and
imagerevisionid based on the input of a imagename 

Extended get_imagerevision_info to accept either a imagerevisionid or
the imagename",VCL-6
905d959cb66d02c86f99119b5c1ac67b371ac26a,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-100

utils::add_user: missed updating variable list of a routine call to del_user",VCL-100
57c279bf25a2327ce8e116f3f8e1cc5363b7357b,,,5,"['managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Windows_mod.pm', 'managementnode/lib/VCL/Module/OS/Windows_mod/Version_5.pm', 'managementnode/lib/VCL/Module/OS/Windows_mod/Version_5/XP_mod.pm']","VCL-23
In all files being committed:
-Moved $Id: line so it appears just below the #! line at the beginning of the file for consistency.
-Updated POD sections at the end of the file to change NCSU information to ASF.

Changes in following files streamline the task of copying configuration files for the OS from the management node to a computer. If a class has a $SOURCE_CONFIGURATION_DIRECTORY variable set, it will be automatically copied to the node during the image capture process. Top-most class directories are copied first so subclasses can essentially override any files from above.

Module.pm:
-Added get_package_hierarchy() subroutine. It returns an array containing Perl package names of all of the packages which make up a module's inheritance hierarchy.
-Improved POD sections throughout file for better code documentation.

OS.pm:
-Added get_source_configuration_directories() subroutine. This calls Module.pm::get_package_hierarchy().

Windows_mod.pm:
-Fixed a few heredoc sections where double quotes should have been used instead of single. This caused a bug where backslashes were being duplicated in registry file sections being merged.
-Added firewall_enable_sessmgr() subroutine. This is helpful for Win2k3 image capture. Sysprep hangs because it wants sessmgr.exe allowed through the firewall.
-Updated copy_capture_configuration_files() to handle multiple paths. It now calls OS.pm::get_source_configuration_directories().
-Fixed prepare_drivers() so it works with Win2k3. The DevicePath string is a REG_SZ in Win2k3 instead of a REG_EXPAND_SZ.

Version_5.pm:
-Removed $SOURCE_CONFIGURATION_DIRECTORY variable because it wasn't being used.

XP_mod.pm:
-Removed call to copy_capture_configuration_files() because Windows_mod.pm now handles it for all inherited classes.",VCL-23
f07322d3f0fe2bfb83868b177f8ed515f510457f,,,1,['mysql/vcl.sql'],"VCL-136

added dummy OS module for id 6 in module table

caused 'tomaintenace' requests to die due to missing perlpackage",VCL-136
c9de9c7c06a5d1eed3433dc956413489d75b2767,,,1,['managementnode/lib/VCL/new.pm'],"VCL-119
Modified new.pm which handles tomaintenance reservations. Removed switch_state() argument which caused the an attempt to be made to set the log.ending value to EOR.",VCL-119
12c78f6619b54281ad45d9a17af8763aded6a369,,,1,['managementnode/lib/VCL/reclaim.pm'],"VCL-128
Cleaned up reclaim.pm. Removed unnecessary call to get_next_image_DataStructure() in process(). Removed a few instances of duplicate code which did the same thing as insert_reload_and_exit(). The sub now gets called. 

VCL-119
Removed argument where switch_state() is called in reclaim.pm::insert_reload_and_exit() which sets log.ending to EOR. This was causing the correct log.ending value to be overwritten by EOR.",VCL-128
22701028460098a45c2ce9fd1e9fca23c6c52af3,,,92,"['managementnode/bin/S99vclclient.linux', 'managementnode/bin/S99vclclient.solaris', 'managementnode/bin/S99vcld.linux', 'managementnode/bin/health_check.pl', 'managementnode/bin/monitor_vcld.pl', 'managementnode/bin/search-replace', 'managementnode/bin/vclclientd', 'managementnode/bin/vcld_cron_check', 'managementnode/etc/vcl/vcld.conf', 'managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Ubuntu.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Desktop.pm', 'managementnode/lib/VCL/Module/OS/Windows/Desktop/Vista.pm', 'managementnode/lib/VCL/Module/OS/Windows/Desktop/XP.pm', 'managementnode/lib/VCL/Module/Predictive.pm', 'managementnode/lib/VCL/Module/Predictive/Level_0.pm', 'managementnode/lib/VCL/Module/Predictive/Level_1.pm', 'managementnode/lib/VCL/Module/Provisioning.pm', 'managementnode/lib/VCL/Module/Provisioning/Lab.pm', 'managementnode/lib/VCL/Module/Provisioning/esx.pm', 'managementnode/lib/VCL/Module/Provisioning/helloworld.pm', 'managementnode/lib/VCL/Module/Provisioning/vmware.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/Module/Utils/Logging.pm', 'managementnode/lib/VCL/Module/Utils/SCP.pm', 'managementnode/lib/VCL/Module/Utils/SSH.pm', 'managementnode/lib/VCL/blockrequest.pm', 'managementnode/lib/VCL/healthcheck.pm', 'managementnode/lib/VCL/image.pm', 'managementnode/lib/VCL/inuse.pm', 'managementnode/lib/VCL/makeproduction.pm', 'managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/reclaim.pm', 'managementnode/lib/VCL/reserved.pm', 'managementnode/lib/VCL/utils.pm', 'managementnode/tools/Sysprep/Scripts/VCLcleanup.cmd', 'managementnode/tools/Sysprep/Scripts/VCLprepare.cmd', 'managementnode/tools/Sysprep/Scripts/VCLrcboot.cmd', 'managementnode/tools/Sysprep/Scripts/enablepagefile.vbs', 'managementnode/tools/Sysprep/Scripts/networkinfo.bat', 'managementnode/tools/Sysprep/Scripts/networkinfosetfw.vbs', 'managementnode/tools/Sysprep/Scripts/postconfig.vbs', 'managementnode/tools/Sysprep/Scripts/setfw.bat', 'managementnode/tools/Sysprep/Scripts/setsyslog.bat', 'managementnode/tools/Sysprep/Scripts/unsetautologon.vbs', 'managementnode/tools/Sysprep/Scripts/updatecygwin.vbs', 'managementnode/tools/Sysprep/i386/$oem$/setautologon.vbs', 'managementnode/tools/Sysprep/i386/$oem$/setname.vbs', 'managementnode/tools/Sysprep/sysprep.cmd', 'managementnode/tools/Sysprep_2003/Scripts/VCLcleanup.cmd', 'managementnode/tools/Sysprep_2003/Scripts/VCLprepare.cmd', 'managementnode/tools/Sysprep_2003/Scripts/VCLrcboot.cmd', 'managementnode/tools/Sysprep_2003/Scripts/enablepagefile.vbs', 'managementnode/tools/Sysprep_2003/Scripts/networkinfo.bat', 'managementnode/tools/Sysprep_2003/Scripts/networkinfosetfw.vbs', 'managementnode/tools/Sysprep_2003/Scripts/setfw.bat', 'managementnode/tools/Sysprep_2003/Scripts/setsyslog.bat', 'managementnode/tools/Sysprep_2003/Scripts/unsetautologon.vbs', 'managementnode/tools/Sysprep_2003/Scripts/updatecygwin.vbs', 'managementnode/tools/Sysprep_2003/i386/$oem$/setautologon.vbs', 'managementnode/tools/Sysprep_2003/sysprep.cmd', 'managementnode/tools/Sysprep_Vista/Scripts/autoadminlogon_disable.reg', 'managementnode/tools/Sysprep_Vista/Scripts/autoadminlogon_enable.reg', 'managementnode/tools/Sysprep_vmware/i386/$oem$/setautologon.vbs', 'managementnode/tools/Sysprep_vmware/sysprep.cmd', 'managementnode/tools/Sysprep_vmware/sysprep.vbs', 'managementnode/tools/VCLprep1.vbs', 'managementnode/tools/VCLrcboot.cmd', 'managementnode/tools/auto_create_image.vbs', 'managementnode/tools/disablenetbios.vbs', 'managementnode/tools/setpass.vbs', 'managementnode/vbs_scripts/VCL/VCLcleanup.cmd', 'managementnode/vbs_scripts/VCL/VCLprepare.cmd', 'managementnode/vbs_scripts/VCL/VCLrcboot.cmd', 'managementnode/vbs_scripts/VCL/VCLstartimage.vbs', 'managementnode/vbs_scripts/VCL/auto_create_image_new.vbs', 'managementnode/vbs_scripts/VCL/enablepagefile.vbs', 'managementnode/vbs_scripts/VCL/networkinfo.bat', 'managementnode/vbs_scripts/VCL/networkinfosetfw.vbs', 'managementnode/vbs_scripts/VCL/setfw.bat', 'managementnode/vbs_scripts/VCL/setsyslog.bat', 'managementnode/vbs_scripts/VCL/unsetautologon.vbs', 'managementnode/vbs_scripts/VCL/updatecygwin.vbs', 'managementnode/vbs_scripts/add_user.vbs', 'managementnode/vbs_scripts/auto_create_image.vbs', 'managementnode/vbs_scripts/del_user.vbs', 'managementnode/vbs_scripts/list_users.vbs']","VCL-95

Set Subversion properties

for all perl scripts in bin to:
executable: *
eol-style: native
keywords: Date Revision Author HeadURL Id

for all perl scripts, including modules:
eol-style: native
keywords: Date Revision Author HeadURL Id

for unix scripts:
eol-stype: native
keywords: Date Revision Author HeadURL Id

for all windows specific files (.cmd, .vbs, .inf, .bat, .txt):
eol-style: CRLF

for all windows specific scripts (.cmd, .vbs, .bat):
keywords: Date Revision Author HeadURL Id

Some windows files had a mix of EOL characters due to the apache header having been injected with unix style EOLs.  These files had to be updated to have matching EOL characters throughout before adding the eol-style property.",VCL-95
58d6b36a884de9dd9b398a1a4b192dca3b2747cb,,,1,['web/themes/copydojocss.sh'],initial add - this is a script to copy css files from dojo to a theme's css directory and modify them appropriately,
7df2cec0f28763343dbf9845c86609ea98088da0,,,14,"['managementnode/tools/Windows/Scripts/add_post_load_run_key.cmd', 'managementnode/tools/Windows/Scripts/autologon_disable.cmd', 'managementnode/tools/Windows/Scripts/autologon_enable.cmd', 'managementnode/tools/Windows/Scripts/cmdlines.cmd', 'managementnode/tools/Windows/Scripts/configure_networking.vbs', 'managementnode/tools/Windows/Scripts/debug_info.cmd', 'managementnode/tools/Windows/Scripts/delete_post_load_run_key.cmd', 'managementnode/tools/Windows/Scripts/post_load.cmd', 'managementnode/tools/Windows/Scripts/remove_first_boot_key.cmd', 'managementnode/tools/Windows/Scripts/set_computer_name.vbs', 'managementnode/tools/Windows/Scripts/sysprep_cmdlines.cmd', 'managementnode/tools/Windows/Scripts/system_startup.cmd', 'managementnode/tools/Windows/Scripts/update_cygwin.cmd', 'managementnode/tools/Windows/Utilities/Sysprep/i386/$oem$/cmdlines.txt']","VCL-23
Reworked Windows scripts. These scripts are only used by the modularized Windows_mod.pm code.  Added ASF headers.  Removed Windows root password from script files.  The Perl code now searches for and replaces the WINDOWS_ROOT_PASSWORD string in the files when it copies them to a node.  Renamed vcl_* files to make the names more generic.",VCL-23
b6d6ab49274705798a0a8d12d5e275e52c191586,,,1,['managementnode/lib/VCL/Module/State.pm'],"VCL-1
Added support for ""fedora"" as an image OS name in State.pm::check_image_os(). This image OS name is used by xCAT 2.x.  The check_image_os() sub detects if an image is being creating from a Kickstart base OS, and corrects the image.OSid column in the database.",VCL-1
1c2940a0817bc2e28e0d6223e496a8d850d4e2a1,,,1,['managementnode/lib/VCL/Module/OS/Windows_mod.pm'],"VCL-23
Made several improvements to Windows_mod.pm after testing. Reworked image capture/load process. It now adds a Run registry key to call post_load.cmd after an image is loaded and Windows boots for the first time. This replaces the group policy scripts.ini manipulation which was problematic. Renamed delete_filesystem_entry() to delete_file() and fixed some bugs in it. Added move_file() and a few other utility subroutines.",VCL-23
156ed1c3b656eccb91f2fc5b6719f1f612410f0c,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT21.pm'],Changed package path to VCL::Module::Provisioning::xCAT21 after xCAT2.pm was renamed to xCAT21.pm.,
2b445bba5264e518b0bd621bb735e58111bf81a5,,,1,['managementnode/lib/VCL/Module/Provisioning/Lab.pm'],"VCL-6

Continued work - extended node_status routine of Lab.pm provisioing
module to also except a hash as an indirect input option.",VCL-6
5d0be9c8affd1722313ac5a605e3b50fa45e5683,,,1,['mysql/vcl.sql'],"VCL-1

added xCAT2.1 to module and provisioning tables",VCL-1
6248afa9b9ce79f95ddc543a5fdb266a04fc12ec,,,6,"['web/themes/default/css/vcl.css', 'web/themes/default/images/menu_selected.jpg', 'web/themes/default/images/vclbanner_C.jpg', 'web/themes/default/images/vclbanner_L.jpg', 'web/themes/default/images/vclbanner_R.jpg', 'web/themes/default/page.php']",removed NCSU stuff and added ASF stuff,
842770072c096ff64982ca0d2f722878e646daf1,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT21.pm'],"VCL-1

renaming xCAT2.pm module to xCAT21.pm, 
xCAT2.2 was released with substanstial feature set that will likely
require an additional module.

- xCAT2.1 did not have partimage imaging support.
- xCAT2.2 does, plus many other features",VCL-1
837346545e2afc5826ad6edde4c23fbe95ecf805,,,1,['managementnode/lib/VCL/Module/Provisioning/vmware.pm'],"additional check to speed up node checks if vcld can ssh into node move
forward to post processing steps",
412f5fa862742de16e1cdc78507be9485322bf9a,,,1,['web/.ht-inc/requests.php'],"VCL-84

added modified version of patch submitted by Nathan Dawson
modified viewRequests to not print the Create Image button unless the reservation has current state or last state as inuse

modified printEditNewUpdate to return if reservation doesn't have current state or last state as inuse",VCL-84
16c21033ea56dfdbfc53a8de334bc519fd284f83,,,2,"['managementnode/bin/vcld', 'managementnode/lib/VCL/utils.pm']","VCL-132

Corrected return start flag for requests with start times greater than
17 minutes. This was a needless setting. If a requests start time is past NOW then process.

utils:
removed 'old' conditional check from from check_time routine

vcld:
removed check for 'old' checktime return value",VCL-132
62da32bb7dc5718c3a13aa6661314414e7e0f9b7,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-131


Updated getdyanmicaddress routine

- locked down to specific private address ranges.
- supports the use of 10. address for 'public' adapter, for sandbox testing",VCL-131
5056251c408da3dc9c491a957439efa4b0e2f99d,,,1,['mysql/vcl.sql'],"Small corrections:

corrected winvista to vista moduleid 
added disk image name for CentOS",
a5c3a16b2b6324c89905519beb3dc86ac27599ae,,,1,['managementnode/tools/xcat2_postscripts/remoteshell-dblssh'],"VCL-1

post scripts for xCAT kickstart linux installs",VCL-1
afcfbe428e7ea288abc0b41bb67ea0734fbaa25a,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT2.pm'],"VCL-1

Initial commit of xCAT2 provisioing module.

- VCL support for xCAT 2.X provisioning module http://xcat.org or
  http://xcat.sourceforge.net",VCL-1
b4febfcaba17437517d79dcb987eb5d65fab0b31,,,1,['managementnode/lib/VCL/Module/OS/Windows_mod.pm'],"VCL-23
Added code to output DevicePath registry key after spdrvscn.exe runs for debugging.",VCL-23
f368250abd8ec07c9eaaecadbc50f1941343c33e,,,1,['managementnode/lib/VCL/utils.pm'],"Added ""ambiguous target"" to the regex used to determine if run_scp_command() was successful. It wasn't catching this.",
050e2b56a2207d0c9aab604e385d30f96705f349,,,1,['managementnode/lib/VCL/utils.pm'],VCL-129,VCL-129
2764711d308acf27bc6c0b02d628ed88d2bf4085,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-6

preliminary steps for updating healthcheck.pl

extended get_management_node_info to collect resourceid

added routines:
get_computers_controlled_by_MN
get_resource_groups
get_managable_resource_groups
get_computer_grp_members
get_computer_info",VCL-6
9de03eed8e7890bfc8dd6f06bb81b578da0c19b6,,,2,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/State.pm']","Added new subs to State.pm which will replace existing subs in utils.pm. The new subs use the DataStructure object. They are:
-update_request_state_new
-update_computer_state_new
-insert_computerloadlog
-update_log_ending_new

Fixed some notify() messages in State.pm. There were several ""OK"" messages which should be ""DEBUG"", and a few warning messages weren't set to ""WARNING"".

Removed DataStructure.pm::update_log_ending_DataStructure() which was added yesterday. It now resides in State.pm because only state objects (new, image...) should be able to access it.",
cbcb61e7da2daf42311b87a323ae097bd1c034a1,,,1,['managementnode/lib/VCL/utils.pm'],"Added space between -f and the $RETURNPATH variable in utils.pm::Mail::Mailer(). If $RETURNPATH is not set and without a space, sendmail displays an error and doesn't send the message:
/usr/lib/sendmail: option requires an argument -- f

Made minor update to run_ssh_command() output. If the exit status of the executed command isn't 0, it displays the full SSH command. This is useful for debugging.",
4758a857e61d75f45b26eb1da0295341b651864d,,,1,['managementnode/lib/VCL/Module/Provisioning/esx.README'],"VCL-29

Added a required step when adding an image for this module to use.  This is a very small but important documentation fix.",VCL-29
56ce99008a7d5744ec26694e5f4daa0171b6771c,,,1,['managementnode/lib/VCL/DataStructure.pm'],"VCL-122
Added functionality to DataStructure.pm allowing it to get/set data from the log table.

Added DataStructure.pm::update_log_ending_DataStructure(). This sub will replace utils.pm::update_log_ending(). The new sub has access to all of the DataStructure data and adds logic to set the log.ending value to ""failedtest"" instead of ""failed"" under any of these conditions:
-imagerevision.production = 0
-image is only assigned to a single group named newimages-*
-state = reload
-state = to* (tomaintenance...)
-state = makeproduction
-state = *hpc*
-state = image",VCL-122
590f627a2229a35f9aa78c094d26923def5bce59,,,1,['managementnode/lib/VCL/Module/Provisioning/esx.README'],"VCL-29

Updating the module's setup instructions now that the installation has been moved to vcl.sql",VCL-29
f6c05ea43ccedffa464a89261344955266dc8c07,,,1,['mysql/vcl.sql'],"VCL-122
Added 'failedtest' to list of possible values for log.ending.",VCL-122
b955962adc14d39fb7bc9a41207c4e47f98f4e77,,,1,['mysql/vcl.sql'],"VCL-29

These modifications auto-install the esx.pm module as an available provisioning module by default.",VCL-29
1ae38aa5e5c180f65f2edfde0269924290aee1cf,,,1,['managementnode/lib/VCL/reclaim.pm'],"VCL-128
Removed $notify_prefix from all of the notify() messages in reclaim.pm. It was adding redundant information. The variable also wasn't being set correctly, causing this to appear in the log file messages:
req=HASH(0x1f12610), res=550900:",VCL-128
ccc6172f580de10b7d83a3e72e1fedf11f364aa8,,,1,['managementnode/lib/VCL/Module/OS/Windows_mod.pm'],"VCL-23
Added get_scheduled_tasks() subroutine. It runs schtasks.exe and returns an array of hashes containing all of the data for scheduled tasks configured the machine. This isn't currently being called from anywhere.",VCL-23
e7233ff43ca0beb31d20fb7189401a27f6fc719d,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT.pm'],Changed CRITICAL notify() message to WARNING if 2 rinstall attempts fail. This is generating duplicate email messages being send for a single failed reservation.,
e7daccd90ea7a8105b300e4c445e112926d174fc,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-126
Fixed bug in get_new_dbh() where it may return the incorrect handle if a different database is specified via an argument.

Made minor changes to run_ssh_command's log file output.",VCL-126
cb128da5be9f8b3baa0e60e4e0dd371118770da2,,,3,"['web/.ht-inc/errors.php', 'web/.ht-inc/userpreferences.php', 'web/js/code.js']","VCL-124

errors.php:
added error 390: Failed to fetch salt while updating locally affiliated user password

userpreferences.php:
added define for LOCALPASSWORDERR
modified userpreferences:
-added section that shows up for users with affiliation Local that allows them to change their passwords
-added check in updateinfo anchor area to only print updateText and its following br's if it's not empty
modified confirmUserPrefs:
-added check for new password being submitted, in which case it will notify the user that the password will be updated
modified submitUserPrefs:
-added block of code to update password for users with an affiliation of Local if they submit a new password
modified processUserPrefsInput:
-added block of code to handle new password submission for users with an affiliation of Local

code.js:
added checkNewLocalPassword",VCL-124
a2c249688b7a9e6edc73d4c3bd9763fbb8d32823,,,1,['web/.ht-inc/authmethods/ldapauth.php'],"(no JIRA issue associated with this)

fixed minor issue where shibonly and emailnotices were not getting in to the $user global array when user data was updated from LDAP",
82a3b215035e26a6fc84dd4c6482d56b7ea68825,,,1,['managementnode/lib/VCL/Module/OS/Ubuntu.pm'],"VCL-123

This version has the comments cleaned up.  I should have submitted this version the first time; sorry for the confusion.",VCL-123
9c8ee0c6ccc79b511418e1b40c44e280dbe41031,,,1,['managementnode/lib/VCL/Module/OS/Ubuntu.pm'],"VCL-123

This commit adds basic Ubuntu support through an Ubuntu.pm OS module using the new OS module framework corresponding to the VCL-123 ticket.  The Linux.pm isn't adequate to handle the user adding because Ubuntu doesn't support setting the password using --stdin which is what the core defaults to if there is not OS module to tell it how to do it otherwise.  Additionally, the core isn't suitable to handle the user adding because it contains the '-g ncsu' field which is not appropriate for places outside of NCSU.",VCL-123
7c07d5456e9dd18cf665a3152404b4449eeaa4d3,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"Removed copy_file(), run_command() and run_remote_script() subs in Windows.pm.  They were created a while ago as a test and never used.  The run_command() sub causes conflicts with utils.pm::run_command().",
f539d09d665c297dc51be4e23d0b29bb2155bcf3,,,2,"['managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/utils.pm']","VCL-122

utils:
switch_state - added check for reload state if found ignore logid 
insert_reload_request - set logid variable to zero instead of using the logid of previous user reservation

Module/State.pm: 
reservation_failed - added check for proper states to update the ending flag on the specified logid",VCL-122
e93caa1b45a4a7d199c61319cddfe7352ebdd305,,,1,['managementnode/lib/VCL/Module/Provisioning/esx.pm'],"VCL-29

Added more robust debugging for the esx.pm as it interacts with the hypervisor.  This debugging uses the 'DEBUG' level of logging.",VCL-29
6d43f6f281b514f1f1674d93ad77cf4a4f0829ce,,,2,"['web/.ht-inc/requests.php', 'web/.ht-inc/utils.php']","VCL-109

requests.php:
modified viewRequestInfo: changed processInputVar to getContinuationVar

utils.php:
modified showTimeTable: changed href link for viewRequestInfo to use a continuation",VCL-109
63dd1066c93d112752d29ea641a66f8edc7fe14f,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-117

Removal of the commented-out code in the mail routine.",VCL-117
cbe973008d279494ffb061440349940497ee34af,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-117 


Removed hardcoded value for the return-path sendmail -f option in the
utils:mail routine

created a global value that gets set in the vcld.conf file RETURNPATH

NOTE: the previous utils.pm was a premature check-in of work being done on healthcheck. this checkin are the changes
related to the return-path variable.",VCL-117
4af04ff7e30841e593740e6493bec7ae03db114b,,,2,"['managementnode/etc/vcl/vcld.conf', 'managementnode/lib/VCL/utils.pm']","VCL-117

Left hardcoded value for the return-path sendmail -f option in the
utils:mail routine

created a global value that gets set in the vcld.conf file RETURNPATH",VCL-117
949cc8a00f07fad0395c48e9983f82e99df28599,,,1,['web/.ht-inc/groups.php'],"VCL-115

modified checkForGroupName: renamed argument $resourcetypeid to $extraid and then also used it for the affiliationid of a user group in addition to ho
w it was already being used so that user group uniqueness is determined by both name and affiliation
modified processGroupInput: updated to checkForGroupName with resourcetypeid or affiliation as $extraid",VCL-115
9e541a82e47301ca356f3147f3bd7331476d6994,,,4,"['web/.ht-inc/authentication.php', 'web/.ht-inc/errors.php', 'web/.ht-inc/utils.php', 'web/.ht-inc/xmlrpcWrappers.php']","VCL-33

authentication.php:
modified testGeneralAffiliation: regular expression allowed there to be nothing before the @ that separates the userid from the affiliation; modified
to require at least one character before the @

errors.php:
added error 12: Failed to determine affiliation id in getUserListID

utils.php:
modified updateUserOrGroupPrivs:
-changed $name parameter such that a user group name is not allowed because this doesn't account for the affiliation part of the user group; no calling functions were using it this way anyway
modified getUserlistID:
-added an optional $noadd parameter that allows the function to just check to see if a user already exists in the database without trying to add it from configured sources
-modified abort error code to be 12 instead of 11 that was there incorrectly
modified getUsersGroups:
-added optional $includeaffil parameter that if set will cause the affiliation of the groups to be appended to the end of the group name
modified getUserGroupID:
-now it always checks the affiliation with the name instead of only when the group was both not custom or a courseroll group
modified xmlrpccall:
-registered new functions added to xmlrpcWrappers
modified xmlRPChandler:
-mysql_escape_string called for $saveargs data
added validateAPIgroupInput

xmlrpcWrappers.php:
added these functions:
XMLRPCaddUserGroup
XMLRPCgetUserGroupAttributes
XMLRPCdeleteUserGroup
XMLRPCeditUserGroup
XMLRPCgetUserGroupMembers
XMLRPCaddUsersToGroup
XMLRPCremoveUsersFromGroup",VCL-33
ee2fce3745db18aa3a3ee9128ab730ed90601fb7,,,2,"['managementnode/lib/VCL/Module/Provisioning/esx.README', 'managementnode/lib/VCL/Module/Provisioning/esx.pm']","VCL-29

Removed all configuration which required the setting of variables inside the esx.pm file.  These items have now been moved to the database in the vmhost table.

Removed the requirement that all management nodes mount the storage library via NFS.  These connections have been refactored to use SSH.

Updated the instructions to reflect these changes",VCL-29
d46a2a240c3999e46031a17be8ddc01c015cc8ec,,,1,['managementnode/lib/VCL/DataStructure.pm'],"VCL-112
Added DataStructure.pm::retrieve_user_data(). This subroutine retrieves user data from the database. It adds flexibility in that the DataStructure class can be used to retrieve user data whether or not a reservation exists for that user. It will be used in the near future to retrieve the data about an image owner so that the image affiliation can be determined. Image owner detailed data is not being retrieved when a DataStructure object is created based on a reservation.

There are no hard-coded column names in the subroutine code. The column names are retrieved from the information_schema database.  

The subroutine can be called as either an object method or class function. A default value had to be added to request_data in order for this to work without warning messages. Arguments can either be a user ID or login ID. If no argument is given, the subroutine must be called as an object method and a user ID must already be stored in the DataStructure.",VCL-112
fb8551f42c6f1bd84b1dcdd3865aa0d3a0022ad0,,,1,['mysql/vcl.sql'],"VCL-111

Added defaults to  vmtype table. These are also referenced in the
vmprofile table.",VCL-111
07d672827a148b795ffd7235ac11e8fe4fc66a91,,,1,['managementnode/bin/vcld'],"VCL-110
Removed 2 second delay in vcld's loop. It may have caused very rare timing problems with imaging.

Commented out 2 notify() messages in the REAPER() sub. They were only needed for troubleshooting exit status problems.",VCL-110
7ccd4720fecfa25a45eca2e41e549c5317c1768c,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT.pm'],"VCL-23
Changed xCAT.pm's load() sub to check if the OS module has implemented a post_load() sub instead of checking if the OS name was winvista. This has the same effect but is more generic.

Renamed xCAT.pm::capture_prepare() to capture(). This follows the design described on the list. A provisioning module's capture() sub will take care of everything instead of splitting it up into capture_prepare() and capture_monitor().

Added code to xCAT.pm::capture() to check if OS module has implemented a pre_capture() sub. If not, it checks if the OS module has implemented a capture_prepare() sub. All OS modules will eventually have pre_capture() subs but this will work through the transition.  If OS::pre_capture() exists and has returned 1, it powers on the computer and proceeds to monitor the capture.

Added subs to xCAT.pm: power_reset(), power_on(), power_off(), power_status(), wait_for_on(), wait_for_off().

Made changes to xCAT.pm::_rpower() so it can use either a passed argument or the data structure to determine the computer node name.  It can also be called as an object method or class method.",VCL-23
795666fef8a3ee7a54c80c6aa85f579f52a1e13c,,,12,"['managementnode/tools/Windows/Scripts/autologon_disable.cmd', 'managementnode/tools/Windows/Scripts/autologon_enable.cmd', 'managementnode/tools/Windows/Scripts/cmdlines.cmd', 'managementnode/tools/Windows/Scripts/configure_networking.vbs', 'managementnode/tools/Windows/Scripts/query_registry.cmd', 'managementnode/tools/Windows/Scripts/remove_first_boot_key.cmd', 'managementnode/tools/Windows/Scripts/set_computer_name.vbs', 'managementnode/tools/Windows/Scripts/update_cygwin.cmd', 'managementnode/tools/Windows/Scripts/vcl_first_boot.cmd', 'managementnode/tools/Windows/Scripts/vcl_startup.cmd', 'managementnode/tools/Windows/Utilities/Sysprep/i386/$oem$/cmdlines.txt', 'managementnode/tools/Windows_XP/Utilities/Sysprep/sysprep.inf']","VCL-23
Added new Windows and Windows_XP directories under tools. These contain scripts and utilities used by the modularized Windows OS modules.",VCL-23
4833b6c4c57fb46f85b4610c05d7ea10bdfd5b72,,,2,"['managementnode/lib/VCL/Module/OS/Windows_mod/Version_5.pm', 'managementnode/lib/VCL/Module/OS/Windows_mod/Version_5/XP_mod.pm']","Added Windows_mod and Version_5 directories, Version_5.pm, and XP_mod.pm.  Version_5.pm is the parent class for Windows 5.x OS modules including Windows XP and Windows Server 2003.  XP_mod.pm will eventually be renamed and replace XP.pm.  These files provide support for Windows XP in line with the OS modularization design.",
d6ca48f1e4af9b5a4cf39c5a9476ec417aaa1926,,,1,['managementnode/lib/VCL/Module/OS/Windows_mod.pm'],"VCL-23
Added Windows_mod.pm. This contains several new subroutines and is in line with the OS modularization design. It will eventually replace Windows.pm once it has been fully tested.",VCL-23
d5d1223fbfbdb15e73a7066a7b04683165d26311,,,3,"['web/.ht-inc/utils.php', 'web/.ht-inc/vm.php', 'web/js/vm.js']","VCL-29

utils.php:
modified getVMProfiles: added username and password to returned data

vm.php:
modified editVMInfo: added rows under profile section for editing the username and password associated with the profile
modified AJupdateVMprofileItem: added code specific to handling the password field

vm.js:
modified getVMprofileDataCB: added code to handle username and password
modified updateProfile: added code to handle specifics of saving the profile password
added checkProfilePassword",VCL-29
20a968b2d65e1435b43c6829a44c9733fb787858,,,1,['web/.ht-inc/privileges.php'],"VCL-108

modified getResourcePrivRowHTML: added call to preg_replace to replace all apostrophes in $text with &#39; before returning it",VCL-108
2ea1e4ff63c98e646059a77f54d8a16cdffedd22,,,1,['web/.ht-inc/requests.php'],"VCL-85

modified AJupdate WaitTime to replace and apostrophes in the image description with &#39;",VCL-85
845a44cf504cb843c76eb14c8140f8206bb7284e,,,1,['web/.ht-inc/schedules.php'],"VCL-79

modified daytimeToMin: added extra check when setting $day = 7 to also require $min == 0",VCL-79
4feaed50ab993731e15b9de51291957c87aa1366,,,1,['web/.ht-inc/requests.php'],"VCL-91

this was really already coded, but was not working right because of the bug in getUserRequests mentioned in revision 753339

modified editRequest to call printEditNewUpdate using $reservation instead of $res
moved check to not allow saving/updating reservation for imaging reservations when editing a reservation from editRequest to printEditNewUpdate",VCL-91
c8e23749045de27ae25684cf7e00f16c89702686,,,1,['web/.ht-inc/utils.php'],"VCL-90

utils.php
-accidentally left some WRAP stuff uncommented in the last checkin; commented back out in this version",VCL-90
228b407f4e80b818b669ad13432acefd33f1caee,,,3,"['web/.ht-inc/images.php', 'web/.ht-inc/requests.php', 'web/.ht-inc/utils.php']","VCL-90

utils.php:
-modified isAvailable to have an additional optional argument named forimaging that, when set, will only allocate a single computer for images that have subimages instead of allocating the whole cluster
-modified getUserRequests:
  -added forcheckout as a returned index
  -fixed bug in query for subreservations where $id was set to user's numeric id
  -only restrict primary query to include 'forcheckout = 1' when $type = 'normal'
  -added array to track fetched requests so that don't duplicate requests for cluster reservations

requests.php:
-modified viewRequests: added check to keep requests with forcheckout and forimaging both set to 0 from being displayed (may never happen anyway)
-modified viewRequestInfo, editRequest, confirmEditRequest, confirmDeleteRequest, and submitDeleteRequest to set $reservation in a way that works with cluster reservations
-modified editRequest to not print option to save/update image if request is an imaging reservation

images.php:
-modified submitCreateImage to call isAvailable with new forimgaging argument",VCL-90
af13dc7103c15cc77fd6def9ddf61e35c3cab206,,,1,['web/.ht-inc/images.php'],"VCL-105

modified printAddSubimage, removed unset($images[$iamgeid])
also found and fixed bug where an unnecessary line was being printed because an else statement didn't have braces with it",VCL-105
9dd08869fee61fa7ddc25760f30066882fcd7bea,,,3,"['web/.ht-inc/computers.php', 'web/.ht-inc/statistics.php', 'web/.ht-inc/vm.php']","VCL-88

computers.php:
modified submitReloadComputers and submitCompStateChange to use 'vclreload@Local' when calling getUserlistID instead of just 'vclreload'

statistics.php:
modified viewStatistics, getStatGraphDayData, getStatGraphHourData, getStatGraphDayConUsersData, and getStatGraphConBladeUserData to use 'vclreload@Local' when calling getUserlistID instead of just 'vclreload'

vm.php:
modified AJvmFromHost and AJvmFromHostDelayed to use 'vclreload@Local' when calling getUserlistID instead of just 'vclreload'",VCL-88
0b7b083a9c5965fdc799f8c0b1a22484f5896086,,,1,['web/.ht-inc/privileges.php'],"VCL-51

modified printUserPrivRow and getUserPrivRowHTML to use the array + operator instead of array_merge to create $allprivs; array_merge reindexes any numeric keys when combining the arrays which resulted in numeric group names that were keys being changed",VCL-51
de4fd8ee42a7775c841f852e45ceace56a0b5e53,,,1,['managementnode/lib/VCL/reserved.pm'],"VCL-107

Added additional information about automated notice and instructions on how to disable email notifications.",VCL-107
591d0ef2ce5aedbb830f39370ae19f0223292cdb,,,2,"['managementnode/lib/VCL/inuse.pm', 'managementnode/lib/VCL/new.pm']","VCL-107

Added additional information about automated notice and instructions on how to disable email notifications.",VCL-107
651524c5745b6730f2306646d3d274d195a58c5b,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-106

Seperated the critical and information section of notify routine. The critical notices caputure the last 100 lines of the vcld.log file the informational notices are for folks that have emails disabled. By doing this it can shave 20 or more secs off the wait time for the connect button to show.",VCL-106
3f08d5eea154d1ff39da896c1cbfd05b027ab994,,,1,['web/.ht-inc/xmlrpcWrappers.php'],"VCL-78

tweaked headers for XMLRPCblockAllocation and XMLRPCprocessBlockTime to produce more nicely formatted output when running doxygen",VCL-78
038b8a719789e49b52d2502562381650c0690d85,,,2,"['web/.ht-inc/utils.php', 'web/.ht-inc/xmlrpcWrappers.php']","VCL-78

xmlrpcWrappers.php:
-added XMLRPCblockAllocation
-added XMLRPCprocessBlockTime

utils.php:
-added dbLastInsertID as an easier way to get the last insert id for inserts into tables with auto incremented ids
-modified isAvailable: added $ignoreprivileges as an optional argument which allows for user access privileges to be ignored when allocating computers
-modified getAvailableBlockComputerids: added $allocatedcompids as an argument which is an array of computers that should not be included in the returned list
-modified xmlrpccall: added XMLRPCblockAllocation and XMLRPCprocessBlockTime as registered functions",VCL-78
a26f22c6037ed1937a5a203b81dd64fb270b17b7,,,3,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/Provisioning/vmware.pm', 'managementnode/lib/VCL/utils.pm']","VCL-29
VCL-29

utils.pm : extended query in get_vmhost_info to fetch username and password
since these variables can be NULL, added a checks for NULL or undefined return values and set to '0' so DataStructure doesn't send warnings.

DataStructure.pm : added vmprofile username and password to data hash

These variables can be accessed using:
$self->data->get_vmhost_profile_username();
$self->data->get_vmhost_profile_password(); 

ie.
my $mvhost_username = $self->data->get_vmhost_profile_username();
my $vmhost_password = $self->data->get_vmhost_profile_password();

vmware.pm : cleanup removal of useless commented out lines",VCL-29
1c14dfbbc81d31f2c2c41c6f7d19cc34e65c65c9,,,1,['mysql/vcl.sql'],"VCL-29

extended vmprofile table to include username and password for esx module",VCL-29
f400d76b94c45cae5a13155ffdc2948c9dc2948a,,,1,['managementnode/lib/VCL/Module/State.pm'],"VCL-100

added a conditional check to account for new distro - This is the only location on the backend that still depends on the distro name. This will be removed at a future date once a method for generalizing Linux distros is pushed to the database or we get away from using distros in the prefix of the internal imagename.",VCL-100
235803684cf06a82c658bd94673b7695ef66b103,,,1,['managementnode/lib/VCL/healthcheck.pm'],"VCL-104 

removed dns server array as an option to pass to resolver.
Letting it use the systems default resolve.conf file",VCL-104
38fd5a4edfc26f554281f67bf078fa6e827cd202,,,1,['managementnode/lib/VCL/reclaim.pm'],"VCL-100

Left out reclaims del_user routine call out of original submit",VCL-100
feb6a33aec35c525599918cdf4d4067e3f456425,,,1,['mysql/vcl.sql'],"VCL-103

changed curiculumid for vclreload user to be 1",VCL-103
db525bed1c18ff97a2c15a24b030b1a527a26716,,,1,['managementnode/lib/VCL/Module/Provisioning/esx.pm'],"VCL-29

This version now has working capture code.  Creating a new image version, or creating a derivative image now works.",VCL-29
cbf9ba41b1e8b12c4f9295aa48b786268a903c53,,,1,['managementnode/lib/VCL/reserved.pm'],"VCL-101

Added an OS check when the $forimaging flag is set to 1.  This new version ensures the username checked for login is ""Administrator"" for windows only, and will use the VCL user's username otherwise.",VCL-101
22960664194c894dee3abe25cec8695d143592f5,,,9,"['managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/Provisioning/esx.pm', 'managementnode/lib/VCL/Module/Provisioning/vmware.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/inuse.pm', 'managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/reclaim.pm', 'managementnode/lib/VCL/reserved.pm', 'managementnode/lib/VCL/utils.pm']","VCL-100

Generic support for linux distros


Removed the dependent regular expression and replaced with
image_os_type. With this change several routines required the additional
variable to tell what the image OS type was.

routines from utils.pm touched:

setstaticaddress
getdynamicaddress
check_connection
isconnected
_sshd_status
_is_user_added
add_user
add_users_by_group
del_user


Clean-up - removed utils.pm doesimageexist from utils.pm, this routine
was previously moved to the provisioning modules.",VCL-100
5ccc1c8e231c920da2aa41af68ac4ea11f71c8a6,,,4,"['web/.ht-inc/managementnodes.php', 'web/.ht-inc/utils.php', 'web/css/vcl.css', 'web/js/managementnodes.js']","VCL-19
VCL-20

managementnodes.php
-added MNINSTPATHERR, MNIMGLIBUSERERR, MNIMGLIBKEYERR, MNSSHPORTERR, MNSSHIDKEYSERR, and MNIMGLIBGRPIDERR defines
-modified viewMgmtnodes to use mode addMgmtNode when add button clicked instead of going straight to confirmAddMgmtnode so that all management node fields don't need to be displayed on the view management nodes page, but when the add button is clicked, errors aren't displayed for the fields that couldn't have been entered yet
-modified editOrAddMgmtnode to include checkininterval, installpath, imagelibenable, imagelibgroupid, imagelibuser, imagelibkey, keys, and sshport; also added help popup box that shows up when the TH of the new fields are moused over
-modified confirmEditOrAddMgmtnode, updateMgmtnode, addMgmtnode, and processMgmtnodeInput to include the new fields

utils.php
-modified getManagementNodes to include checkininterval, installpath, imagelibenable, imagelibgroupid, imagelibgroup, imagelibuser, imagelibkey, keys, and sshport
-modified getDojoHTML to include dojo stuff for these modes: editMgmtNode, addMgmtNode, confirmEditMgmtnode, confirmADdMgmtnode

vcl.css
-added #helpbox
-modified #listitems to have a working definition for border

added managementnodes.js",VCL-19
1458ad0d23257188fb822ca8d7041eb79fafaf7b,,,1,['mysql/vcl.sql'],"VCL-20

added sshport to managementnode table",VCL-20
b06e68d05e4feb9af75326e4cdcae4ecac075d4c,,,1,['managementnode/lib/VCL/new.pm'],"VCL-23
Added a block in new.pm::reserve_computer() to call the OS module's reserve() subroutine if it has been implemented. Otherwise, flow continues exactly as it did before. Existing OS modules do not have reserve() subroutines so they aren't affected.",VCL-23
87254fd3067948594cdd534fa0bc9bb68f3d4203,,,5,"['managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/Provisioning.pm', 'managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/image.pm', 'managementnode/lib/VCL/utils.pm']","VCL-94
Added set_provisioner() and provisioner() subroutines to OS.pm, allowing OS modules to access the provisioning module object.

Added set_os() and os() subroutines to Provisioning.pm, allowing provisioning modules to access the OS module object.

Added code to State.pm::initialize() calling the above-mentioned subroutines. This allows provisioning and OS module objects to access each other via $self->os and $self->provisioner.

Added a block to the beginning of image.pm::process() to call the provisioning module's capture() subroutine if it has been implemented. If it hasn't, the block is ignored and process() behaves exactly as it did before.

Made 2 minor changes in utils.pm. Added run_command to the EXPORT list. Added a check in run_scp_command() for the existence of 'no such file' in the output. This wasn't being caught.",VCL-94
97d374cdae1ae291a472be2e37526906ebf8090d,,,1,['managementnode/lib/VCL/Module/Predictive/Level_1.pm'],"VCL-99

change ""which of those are loaded"" query to determine loaded images modified to only consider a image loaded if exists two or more times",VCL-99
1b6ec0e6861b2ef294ed6c72a9e15b5541a89220,,,1,['managementnode/lib/VCL/Module/Provisioning/vmware.pm'],"VCL-97

missing 2>&1 from system call and wasn't capturing the output",VCL-97
a43cd21f8bcaa53f8dbf8fc4e2090d4399fabcbb,,,1,['web/.ht-inc/authentication.php'],"VCL-96

modified submitLogin to get $passwd directly from $_POST['password'] instead of calling processInputVar
removed $authtype from args being passed to localLogin

modified localLogin to accept $userid and $passwd as parameters instead of getting them from processInputVar",VCL-96
a738568ce0f0c302a8d2bf9f4129c2131ef76b9a,,,1,['managementnode/bin/vcld'],"VCL-95
Set the Subversion properties on vcld to:
executable: *
eol-style: native
keywords: Date Revision Author HeadURL Id

vcld has to manually be set to executable after you check it out.  The Subversion executable property will prevent this from having to be done.  

The $Id: tag is not being updated when vcld is committed.  The keywords property should fix this.",VCL-95
7dccdce75fe641263c5ee94a21b5f1603bcc7c30,,,1,['managementnode/lib/VCL/new.pm'],"VCL-83

Added conditional to check imagename assigned in database for given
node. If node does not need to be reinstalled and db imagename does not
match what is on the actual node - update the database

VCL-87

imagerevision_id was pulling from computer information instead  of
request information",VCL-83
eb5aafdf471ae96e2b08e966c00bdf23b96e0ad4,,,3,"['managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/utils.pm']","VCL-75
Added check throughout utils.pm where $? is used. If an external command is executed and $? gets set to -1, the exit status is assumed to be 0. This is encountered with Perl 5.8.0 because a bug in SIGCHLD signal handling causes $? to be incorrectly set to -1.

VCL-20
Added conditions in utils.pm::run_ssh_command and utils.pm::run_scp_command to attempt the command a 4th time using port 24 if the command failed 3 times. The code assumes port 22 is used but some managment nodes use port 24. This is a temporary fix until a better solution is designed.

VCL-56
Added 'use English qw( -no_match_vars );' to xCAT.pm. This allows the friendly $PID variable to be used.

Other - xCAT.pm
Changed a few WARNING notify() messages in xCAT.pm to OK messages. Warnings were not necessary. Added a CRITICAL notify() message to xCAT.pm if rinstall fails on the first attempt. This allows an administrator to watch the 2nd attempt and have a chance to troubleshoot. Also added an NCSU-specific fix to legacy code in xCAT.pm. One of NCSU's management nodes is configured differently for Linux images.

Other - new.pm
Changed 1 CRITICAL notify() message to WARNING. This reduces redundant messages being sent when a reservation fails.",VCL-75
f6ed6e9d97c31b70b1b54953b7128e08723c30e7,,,1,['web/.ht-inc/images.php'],"VCL-76

modified viewImages - moved form html tags for edit, delete, and details buttons
inside of td tags to keep IE from displaying extra whitespace at the top of the
table",VCL-76
9d19f223308af02cd048ed85a4d39ecc3330c728,,,1,['managementnode/lib/VCL/Module/Provisioning/esx.pm'],"VCL-29

This patch removes my test variables from the esx.pm file.",VCL-29
e92ccf3c4e1d2c7d11e18c840c7be1ecb99b429f,,,2,"['managementnode/lib/VCL/Module/Provisioning/esx.README', 'managementnode/lib/VCL/Module/Provisioning/esx.pm']","VCL-29

This patch reworks how the module discovers the private IP address of VMs that it provisions to ESX and ESX 3i hosts.  Specifically, it implements the following new work flow:

1)  Create the VM on the hypervisor, but DO NOT specify any mac addresses
2)  Power on the VM
3)  Ask the hypervisor, what the MAC address is of the eth0 (private) interface of the vm just provisioned
4)  Watch the arp table of the management module for the dhcp address handed back to the VM when it's eth0 does the required dhcp request.
5)  Delete the old entry from /etc/hosts for the VM
6)  Add the new entry to /etc/hosts so that VCL can resolve this VM's hostname for account setup, etc...

This simplifies the setup significantly by removing the following three manual, per-vm steps:
1)  Manual setting of eth0 mac address in database
2)  Manual configuration of that same eth0 mac in the the management module's dhcpd.conf
3)  Manual addition of IP/hostname pair to /etc/hosts file

The documentation (esx.README) has been simplified and updated as a result",VCL-29
7b9e38d04dce033470d99a030fbdd078c1544fa7,,,1,['managementnode/bin/vcld'],"VCL-71
The call to reinstall the signal handler was in the wrong place in REAPER.",VCL-71
a57c815e9496ba1e5e481b00cc3f8505beaf85ff,,,1,['managementnode/lib/VCL/reserved.pm'],"VCL-63
Changed the following notify() message from CRITICAL to OK:
image claims group access but membership is 0, usergrouid: $imagemeta_usergroupid, only adding requester

This message occurs when an image has a group specified but the group has 0 members. There's no reason for this to be a CRITICAL message.",VCL-63
ec12fc503716b3193979794287c1e2f691cd66c7,,,2,"['managementnode/lib/VCL/Module/Provisioning/esx.README', 'managementnode/lib/VCL/Module/Provisioning/esx.pm']","VCL-29

An working alpha version of the esx provsioning module.  Includes instructions in the esx.README file",VCL-29
a81dd975da5eef213d78296c0d482b31dc3d0196,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-74
If a user has a null UID value, the default value was being set to -1. This caused the linux add user command to fail because -1 isn't a valid UID value. I changed utils.pm::get_request_info to set the default value to the user's ID instead of -1.",VCL-74
23e33f7ffe2dcd7fce7eaa02046b8d2f00a32587,,,1,['managementnode/lib/VCL/new.pm'],"VCL-73
Added a sanity check to new.pm::computer_not_being_used if a neighbor process was in the maintenance state. If it finds this, it returns 0 immediately. This state will occur if an imaging reservation failed. The computer cannot be reloaded until the imaging problem is fixed.

If new.pm::computer_not_being_used attempted to kill a process but the exit status returned was not 0, it could hang if the process was actually killed. There is a bug with Perl 5.8.0 which causes exit statuses to be reported incorrectly. I removed the loop continuation if kill looks like it failed. This is safer than the possibility of in infinite loop because it will only get to that point if the reservation process being killed isn't another user's process.",VCL-73
91f4f3f4822e667805286d448a11f3bfbeb1e506,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-71
Added a sanity check to utils.pm::kill_reservation_process so it would never attempt to kill a process if the process ID failed to match a pattern of all digits. Updated utils.pm::reservation_being_processed to check if both a computerloadlog 'begin' entry exists and to check if a process is running. The process running part was and still is commented out because it needs more testing. Added utils.pm::run_command. This is similar to run_ssh_command but will run commands locally on the management node.",VCL-71
8b6dc3c966f4e4335f4c17e445e99ea1c5f3df4d,,,1,['managementnode/bin/vcld'],"VCL-56
Changed 'use English;' to 'use English qw( -no_match_vars );' in vcld. Documentation for the English module states this improves performance.

VCL-71
Reworked REAPER and HUNTSMAN in vcld. HUNTSMAN was killing all child processes under some circumstances. If kill is issued without -9, any VCL process would attempt to kill all of the child processes of the parent vcld process. I removed this capability all together for safety. Kill or kill -9 now only kills the specified process. REAPER was modified to correctly handle the exit status of the process which was reaped. It had not been setting $? correctly if wait() reaped a process. I also changed the wait() command to waitpid() per recommendations in the Perl books.

VCL-72
Added die_handler and warning_handler subroutines. These catch die and warning signals which weren't caught at all before. A die signal could happen if any part of the code attempted to call an undefined subroutine. When this occurred, the process would exit without sending a notification via notify(). The die_handler subroutine causes a critical message to be sent. The warning_handler subroutine causes warning messages to be logged via notify() when a notify signal occurs.

Made some other minor spelling corrections to vcld.",VCL-56
a7914703056b8c841b11bfefee953c363d07c72c,,,1,['managementnode/lib/VCL/Module/Provisioning/helloworld.pm'],"VCL-70

Added installation instructions to the beginning of the moduel so others know how to install this module",VCL-70
61a321b64488cfe97fbb50ee2ea30a652d08ee85,,,1,['managementnode/lib/VCL/Module/Provisioning/helloworld.pm'],"VCL-70

Created helloworld.pm as a starting place for others to write provisioning modules from",VCL-70
339f9546aac37b049b83ec410dcb0715092be32f,,,1,['mysql/vcl.sql'],"VCL-69

added shibname and shibonly to affiliation table

added shibauth table",VCL-69
5cc94e04844c67482d019a57abf87965c5e94568,,,1,['managementnode/lib/VCL/Module/OS/Windows.pm'],"VCL-62
Added 'use VCL::Module::Provisioning::xCAT' and changed all calls in Windows.pm to xCAT.pm's _rpower() subroutine to 'VCL::Module::Provisioning::xCAT::_rpower()'. Reservation processes were dying whenever _rpower() was called because it was undefined. None of the subroutines in xCAT.pm are exported so the full package path must be specified.",VCL-62
cc8248a6bb711abb7abc150c57c221d5457c999a,,,1,['managementnode/lib/VCL/DataStructure.pm'],"VCL-26
Fixed a bug in DataStructure.pm::get_reservation_remote_ip where it was returning undefined instead of 0 if the remoteIP column was set to null.",VCL-26
3d5802e3ae29e87e13bc0e409b90e70218e31a7f,,,1,['managementnode/lib/VCL/new.pm'],"VCL-61

temporary fix, changed conditional to check computer_state_name instead of request_state_name  to force a reload. This is until we decide on another specific state which would be better designed to force a reload.",VCL-61
480a2aaca49ed4a1ae86565991fae0b76f67ffa8,,,3,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/reserved.pm', 'managementnode/lib/VCL/utils.pm']","VCL-26
Fixed ""Subroutine get_reservation_remote_ip redefined"" error messages.

Changed DataStructure.pm::get_reservation_remote_ip to return undefined if an error occurred, and 0 if the remote IP isn't set. This makes the return values consistent with the rest of the code.

Updated reserved.pm to use the subroutine in DataStructure.pm instead of the old one in utils.pm. Also updated it to recognize the new return values.

Removed old utils.pm::get_reservation_remote_ip subroutine.",VCL-26
708f82d8bd253e47dfb3ad2e3ac0301ccf30c894,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT.pm'],"VCL-58
Modified xCAT.pm::does_image_exist. It had been returning undefined if the tmpl file exists but the image files do not, causing new.pm to fail the reservation unnecessarily. 

If the tmpl file exists but the image files do not, it now deletes the orphaned tmpl file and returns 0.  If the tmpl file doesn't exist but the image files do, it now creates a tmpl file for the image and returns 1.

Added _create_template and _delete_template subroutines. Changed all locations in xCAT.pm to use _create_template where it had previously been copying the tmpl file inline for consistancy.

Added argument to not display output in ls SSH call in xCAT.pm::retrieve_image..  This command lists remote image library contents. It was adding a lot of useless lines to the log file.

Improved some other comments and log file messages.",VCL-58
bdbd22fbbaf9e4cca3dad65bc1e8af3d4619ec68,,,1,['web/.ht-inc/computers.php'],"modified processBulkComputerInput - moved startpripaddress, endpripaddress, startmac outside of if/else conditional

removed extranious '{' from header comments of printComputerInfo",
9b04690c22eecf7a2953a50063430c6569fe91bb,,,3,"['web/.ht-inc/authentication.php', 'web/.ht-inc/authmethods/ldapauth.php', 'web/.ht-inc/utils.php']","VCL-54
all remaining places where and ldap_bind occurs had a call added to ldap_set_option to disable LDAP referrals

authentication.php:
ldapLogin modified

utils.php
checkAccess and ldapUIDLookup modified

authmethods/ldapauth.php
updateEXAMPLE2Groups modified",VCL-54
ecff9aa2553ac9aabe255a55321d5b9a674eb1e5,,,8,"['web/.ht-inc/authentication.php', 'web/.ht-inc/authmethods/shibauth.php', 'web/.ht-inc/conf.php', 'web/.ht-inc/states.php', 'web/.ht-inc/utils.php', 'web/index.php', 'web/shibauth/.htaccess', 'web/shibauth/index.php']","VCL-4
added support for Shibboleth authentication

authentication.php:
-modified getAuthCookieData to accept $shibauthid as an extra argument; if passed in, it is added to the end of the cookie data before encryption
-corrected description header for readAuthCookie
-modified readAuthCookie to set global $shibauthed to the value passed to getAuthCookieData as $shibauthid; if $shibauthed gets set, the shibauth table is checked to see if a corresponding record exists for it; if not the VCLAUTH cookie is cleared and the user is redirected to the login page
-modified ldapLogin and localLogin to set VCLAUTH as a session cookie instead of a lifetime cookie - this was done because the UNC Federation logout page uses iframes to load each SP's logout page and IE7 seems to only pass session cookies to iframes (and not lifetime cookies) so the user was not authenticated in the iframe to be correctly logged out

conf.php:
-added (commented out) Shibboleth as a type in $authMechs, leaving the UNC federation config as an example
-added (commented out ) require_once for .ht-inc/authmethods/shibauth.php

states.php:
-added shiblogout to $actions['entry']
-created entries for logout and shiblogout in $actions['pages'] array

utils.php:
-modified initGlobals - added check for _shibsession cookie to block of conditionals checking to see if user is authenticated
-modified getUserInfo to include shibonly in user data and to not try to pull updated information about the user if shibonly is true
-added getShibauthData
-modified sendHeaders - changed conditional for $mode being logout to a switch statement that handles $mode being both logout and shiblogout

index.php:
-added initialization of global $shibauthed

added .ht-inc/authmethods/shibauth.php
added added shibauth directory
added shibauth/.htaccess
added shibauth/index.php",VCL-4
18e89054e6987898626e7cc69bed5f285febaf4f,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-53

changed getdynamicaddress routine from using netsh diag show ip to ipconfig. netsh randomally fails to produce any output and  
is also not available under vista. might as well be consistent between windows OS's",VCL-53
20f960bdcc23ce45bc5484cbb3006651868c11ed,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-52
Fixed a bug which was causing reservations to fail if the node was not properly added to the gkh file.  Added regular expression to utils.pm::run_ssh_command which removes the known hosts warning message from the SSH output.  This message appears if the host is not listed in /opt/xcat/etc/gkh.  It was causing problems in calling subroutines if they expect the output to exactly match a certain format.",VCL-52
3763c646c3f1ed28aa21394e5f6e354e3ee9e37a,,,2,"['managementnode/lib/VCL/inuse.pm', 'managementnode/lib/VCL/utils.pm']","VCL-49
Fixed a bug which could cause multiple state processes to be running at the same time for a reservation.  This should never happen.  inuse.pm was clearing all computerloadlog rows for the reservation when it began processing, including the entry matching computerloadstate = 'begin'. This entry is used by vcld to determine if any other reservation processes are running before forking a new one. This caused vcld to fork an image process when a user initiates imaging while an inuse process is running.

Extended utils.pm::delete_computerloadlog_reservation to allow you to specify the load state names which shouldn't be deleted by prepending a '!' to the load state name argument.

Modified the call to delete_computerloadlog_reservation in inuse.pm to specify that 'begin' entries should not be deleted.",VCL-49
9ea67f33cb9fa193fb72afbfba2851679c924df0,,,3,"['managementnode/lib/VCL/image.pm', 'managementnode/lib/VCL/inuse.pm', 'managementnode/lib/VCL/utils.pm']","VCL-48
Fixed serious bug which could cause the computer on which a failed imaging reservation occurred to be reloaded.  Added additional checks to inuse.pm to make sure a normal reservation hasn't been changed to imaging.  If imaging has begun, the inuse process exits immediately.  Created inuse.pm::_check_imaging_request to avoid redundant code.

Extended utils.pm::is_request_imaging to also check if the forimaging flag is set.

Fixed cosmetic problem in image.pm that only affects log file messages.  If the OS capture_prepare or other modularized capture subroutines failed, it was displaying a log message saying it was attempting the next stage even though it wasn't.",VCL-48
b0f71bf0fd5c7c8674d6d6be43b3e1eb053ee5df,,,2,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/reclaim.pm']","VCL-40
Added code to DataStructure.pm get_next_image_dataStructure so that it returns the current image information if it fails to determine the the next image to be loaded.

Fixed reclaim.pm insert_reload_and_exit. It was calling get_next_image instead of get_next_image_dataStructure.",VCL-40
3db7d3262b369ec096831c365a72d09de5cc3c10,,,1,['managementnode/lib/VCL/new.pm'],"VCL-39
Added password parameter when calling set_password.",VCL-39
b47a4a38b7b5b5f487440e18f46155d32de86399,,,1,['managementnode/lib/VCL/Module/OS/Windows/Desktop/Vista.pm'],"VCL-38
Added enable_user subroutine to Vista.pm. This gets called by grant_access. When access is granted, it makes sure the user account is enabled. This resolves the problem that occurs if the Administrator account is disabled for an imaging resquest.",VCL-38
95ce3ad84bc790715d5fe1a86ff51ac705dd909f,,,1,['managementnode/lib/VCL/utils.pm'],"VCL-47

bug fix - changed conditional checks in getdynamicaddress routine to correct format for windows output",VCL-47
a066fc9913412647a4b13d1574edcfbc0a1d7ab3,,,1,['managementnode/lib/VCL/Module/Provisioning/vmware.pm'],"VCL-36 

Bug fix - added 1; before END statement so it returns true when being
loaded.",VCL-36
0ab65a90d02fa61e39b941b02d3155b600ee9d5b,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT.pm'],"jira issue VCL-14

reduced the capture_loop_count limit from 80 to 40
only write notify string to log if capture_loop_attempts >2",
e8c6eb1c66e0f4bbf29f9d6a132c30e27ea50069,,,1,['managementnode/lib/VCL/utils.pm'],Updated getdynamicaddress in utils.pm.  It did not work with Vista because the 'netsh diag' command is not supported.  I added an additional section which uses ipconfig.  This functionality will eventually be moved to the various OS modules.,
0e76d2a9ffdc1d4f54cf8cbd64352f4d52103102,,,7,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/OS/Windows/Desktop/Vista.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/reclaim.pm', 'managementnode/lib/VCL/reserved.pm', 'managementnode/lib/VCL/utils.pm']","Updated several modules to support Windows Vista. Vista.pm has been written as a modularized OS. The other state modules have been modified to call the generic OS subroutines if they have been implemented instead of checking for OS type and then proceeding. Existing OS's should not have been affected.

DataStructure.pm: Added get_reservation_remote_ip subroutine.  This queries the database whenever called so the data is current.

Vista.pm: Added and updated many subroutines.

xCAT.pm: Added check for Vista. xCAT skips the post-load tasks if the OS is Vista. These tasks are now handled by Vista.pm's post_load subroutine, which is called by new.pm. Modified reload checking loop to always attempt to connect via ssh while waiting for the READY flag. The if statement was commented out. It had only been checking after the 2nd attempt. This was causing Vista's reload to take longer because ssh was up but the loop wasn't catching the READY flag.

new.pm: Added check to see if OS module implements a post_load subroutine and calls it. Code was added to the reserve_computer subroutine to call Vista's set_password or add_users subroutines depending on whether or not it's an imaging request.

reclaim.pm: Added check to see if OS module implements get_current_image_name and sanitize subroutines. It calls these if they're implemented instead of calling the old subroutines to delete users and close RDP. A check was added to make sure the image loaded on a node matches what's set in the computer table for the computer's current image. If they differ, a reload is performed. This currently only applies to Vista. Added insert_reload_and_exit subroutine. There is some duplicated code in process. This subroutine will eventually replace the duplicated code.

reserved.pm: Added check to see if OS module implements a grant_access subroutine. It calls this instead of calling the old subroutine to open RDP.

utils.pm: Added check for image name = vista in get_request_info so it wouldn't complain about an unsupported OS.",
4aa2e2c79d4481c00e69ebba55df21e226d2086d,,,28,"['managementnode/tools/Sysprep_Vista/Scripts/Sysprep.xml', 'managementnode/tools/Sysprep_Vista/Scripts/autoadminlogon_disable.reg', 'managementnode/tools/Sysprep_Vista/Scripts/autoadminlogon_enable.reg', 'managementnode/tools/Sysprep_Vista/Scripts/autologon_disable.cmd', 'managementnode/tools/Sysprep_Vista/Scripts/autologon_enable.cmd', 'managementnode/tools/Sysprep_Vista/Scripts/cleanup_hard_drive.cmd', 'managementnode/tools/Sysprep_Vista/Scripts/configure_kms.cmd', 'managementnode/tools/Sysprep_Vista/Scripts/configure_networking.vbs', 'managementnode/tools/Sysprep_Vista/Scripts/defrag.cmd', 'managementnode/tools/Sysprep_Vista/Scripts/delete_profile_files.txt', 'managementnode/tools/Sysprep_Vista/Scripts/disable_scheduled_tasks.cmd', 'managementnode/tools/Sysprep_Vista/Scripts/disk_cleanup.cmd', 'managementnode/tools/Sysprep_Vista/Scripts/disk_cleanup.reg', 'managementnode/tools/Sysprep_Vista/Scripts/hibernation_disable.cmd', 'managementnode/tools/Sysprep_Vista/Scripts/ipv6_disable.cmd', 'managementnode/tools/Sysprep_Vista/Scripts/ipv6_disable.reg', 'managementnode/tools/Sysprep_Vista/Scripts/kms.cmd', 'managementnode/tools/Sysprep_Vista/Scripts/newsid_accept_eula.reg', 'managementnode/tools/Sysprep_Vista/Scripts/nodyndns.reg', 'managementnode/tools/Sysprep_Vista/Scripts/pagefile_disable.cmd', 'managementnode/tools/Sysprep_Vista/Scripts/set_computer_name.vbs', 'managementnode/tools/Sysprep_Vista/Scripts/set_default_permissions.cmd', 'managementnode/tools/Sysprep_Vista/Scripts/set_network_location.cmd', 'managementnode/tools/Sysprep_Vista/Scripts/update_cygwin.cmd', 'managementnode/tools/Sysprep_Vista/Scripts/vcl_startup.cmd', 'managementnode/tools/Sysprep_Vista/Scripts/vcl_startup_firewall.cmd', 'managementnode/tools/Sysprep_Vista/Utilities/CleanUp.exe', 'managementnode/tools/Sysprep_Vista/Utilities/EmptyRecycleBin.exe']",Added Sysprep_Vista directory. This contains the files necessary to configure Windows Vista.  Dependency utilities have been removed.  Product keys and passwords have been replaced.,
a64563f7509a30d7d80aec7b96358344275d2e58,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT.pm'],"extended regexp for stage5 in load routine to account for privateIP
address in addition to the nodename",
782980a66d0cbc3eeb4355926cd7040334f118db,,,3,"['managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/reclaim.pm']","Datastructure: added routine to refresh env variables for predictive
load module, then load and call that modules get_next_image routine.
This functionality allows for dynamically changing which predictive load
module  to use, currently only two predictive load modules under
Module/Predictive: Level_0.pm Level_1.pm each with different algorithms

State: deleted eval for predictive load module, since this only needs to
happen for reclaims. there is no need to load the module for every
state, new, inuse, etc. State.pm gets loaded on every request and then
creates additional objects by loading the respective modules.

reclaim: changed to call get_next_image_dataStructure from the
DataStructure module.",
ab8e69166431dd430d558fdb1de9fe1c13249054,,,1,['managementnode/lib/VCL/utils.pm'],"getdynamicaddress - fixed checks for private address 127. 172., 192.,
address ranges. Previously could capture wrong address for win OS's. 
If someone installs a hypervisor or creates any additional adapters,
this routine needs to know which one is the public address to handout.",
be55d68a0cacd6aa8418d27ec634ccbc322a6f4b,,,50,"['managementnode/tools/Sysprep/Scripts/VCLcleanup.cmd', 'managementnode/tools/Sysprep/Scripts/VCLprepare.cmd', 'managementnode/tools/Sysprep/Scripts/VCLrcboot.cmd', 'managementnode/tools/Sysprep/Scripts/enablepagefile.vbs', 'managementnode/tools/Sysprep/Scripts/networkinfo.bat', 'managementnode/tools/Sysprep/Scripts/networkinfosetfw.vbs', 'managementnode/tools/Sysprep/Scripts/postconfig.vbs', 'managementnode/tools/Sysprep/Scripts/setfw.bat', 'managementnode/tools/Sysprep/Scripts/setsyslog.bat', 'managementnode/tools/Sysprep/Scripts/unsetautologon.vbs', 'managementnode/tools/Sysprep/Scripts/updatecygwin.vbs', 'managementnode/tools/Sysprep/i386/$oem$/setautologon.vbs', 'managementnode/tools/Sysprep/i386/$oem$/setname.vbs', 'managementnode/tools/Sysprep/sysprep.cmd', 'managementnode/tools/Sysprep_2003/Scripts/VCLcleanup.cmd', 'managementnode/tools/Sysprep_2003/Scripts/VCLprepare.cmd', 'managementnode/tools/Sysprep_2003/Scripts/VCLrcboot.cmd', 'managementnode/tools/Sysprep_2003/Scripts/enablepagefile.vbs', 'managementnode/tools/Sysprep_2003/Scripts/networkinfo.bat', 'managementnode/tools/Sysprep_2003/Scripts/networkinfosetfw.vbs', 'managementnode/tools/Sysprep_2003/Scripts/setfw.bat', 'managementnode/tools/Sysprep_2003/Scripts/setsyslog.bat', 'managementnode/tools/Sysprep_2003/Scripts/unsetautologon.vbs', 'managementnode/tools/Sysprep_2003/Scripts/updatecygwin.vbs', 'managementnode/tools/Sysprep_2003/i386/$oem$/setautologon.vbs', 'managementnode/tools/Sysprep_2003/sysprep.cmd', 'managementnode/tools/Sysprep_vmware/i386/$oem$/setautologon.vbs', 'managementnode/tools/Sysprep_vmware/sysprep.cmd', 'managementnode/tools/Sysprep_vmware/sysprep.vbs', 'managementnode/tools/VCLprep1.vbs', 'managementnode/tools/VCLrcboot.cmd', 'managementnode/tools/auto_create_image.vbs', 'managementnode/tools/disablenetbios.vbs', 'managementnode/tools/setpass.vbs', 'managementnode/vbs_scripts/VCL/VCLcleanup.cmd', 'managementnode/vbs_scripts/VCL/VCLprepare.cmd', 'managementnode/vbs_scripts/VCL/VCLrcboot.cmd', 'managementnode/vbs_scripts/VCL/VCLstartimage.vbs', 'managementnode/vbs_scripts/VCL/auto_create_image_new.vbs', 'managementnode/vbs_scripts/VCL/enablepagefile.vbs', 'managementnode/vbs_scripts/VCL/networkinfo.bat', 'managementnode/vbs_scripts/VCL/networkinfosetfw.vbs', 'managementnode/vbs_scripts/VCL/setfw.bat', 'managementnode/vbs_scripts/VCL/setsyslog.bat', 'managementnode/vbs_scripts/VCL/unsetautologon.vbs', 'managementnode/vbs_scripts/VCL/updatecygwin.vbs', 'managementnode/vbs_scripts/add_user.vbs', 'managementnode/vbs_scripts/auto_create_image.vbs', 'managementnode/vbs_scripts/del_user.vbs', 'managementnode/vbs_scripts/list_users.vbs']","inserted ASL header to all .cmd, .vbs, and .bat files",
352acbe7c0665d4970e16b9bf786d2fb4b1a0cd3,,,2,"['managementnode/lib/VCL/utils.pm', 'managementnode/tools/check_ssh']","check_ssh - removed check_ssh binary - this was a nagios plugin that was
being used to simply check for ssh running on the remote node. one less
dependency.

utils:check_ssh routine - replaced check_ssh call with nmap call",
f1086204ab1156edb6ac875c430c009f17d4cfa0,,,1,['managementnode/lib/VCL/Module/OS/Windows/Desktop/Vista.pm'],Updated Vista.pm.  Added several subroutines for image capture and load support.,
68d45abe4b68294c2d445e1fef221e2c3958180d,,,1,['managementnode/lib/VCL/Module/Provisioning/xCAT.pm'],"xCAT: caputure_monitor routine,  reset capture_loop_count = 0 if
image_size increases. On large image captures this limit gets hit if not
reset",
d239461c10b20f72e4d3f2ee6e774b476ee8a936,,,1,['managementnode/bin/vcld'],Fixed a bug in vcld::REAPER. It was capturing $? at the beginning of the subroutine but not setting this variable back to its initial value when the sub was done.  It was setting $? to the child process exit status ($? >> 8).,
e5e0e71b0dfda8d76b4f6cf0ee1d3528632bea8d,,,1,['managementnode/lib/VCL/Module/Provisioning/vmware.pm'],"vmware.pm: missing forimaging check in node_status, which caused image
creation request to access vms that are in non-persistent mode. which of
course in this mode looses any changes a user makes. 

load routine, typo in regex for detecting spaces in paths for vms
added additional state checks for vms off and stuck in block which
handles space issues on remote vmware server using localdisk",
e13889d374242b64817a1fe33df91186f74e8dd5,,,1,['managementnode/lib/VCL/utils.pm'],utils: extended regex in BEGIN for server variable to handle hyphens in database server name,
85ea021b72aeb1afd05515cd7c165c8aca07937c,,,0,[],removing import from under trunk,
d1dc11a74f3062eb2b35318d0d9fd9ef0ec9012f,,,80,"['web/.ht-inc/Doxyfile', 'web/.ht-inc/authentication.php', 'web/.ht-inc/authmethods/itecsauth.php', 'web/.ht-inc/authmethods/ldapauth.php', 'web/.ht-inc/computers.php', 'web/.ht-inc/conf.php', 'web/.ht-inc/doxyfile.xmlrpc', 'web/.ht-inc/errors.php', 'web/.ht-inc/genkeys.sh', 'web/.ht-inc/groups.php', 'web/.ht-inc/help.php', 'web/.ht-inc/images.php', 'web/.ht-inc/managementnodes.php', 'web/.ht-inc/php5extras.php', 'web/.ht-inc/privileges.php', 'web/.ht-inc/requests.php', 'web/.ht-inc/schedules.php', 'web/.ht-inc/secrets.php', 'web/.ht-inc/states.php', 'web/.ht-inc/statistics.php', 'web/.ht-inc/userpreferences.php', 'web/.ht-inc/utils.php', 'web/.ht-inc/vcldocs.php', 'web/.ht-inc/vcldphpcall.pl', 'web/.ht-inc/vm.php', 'web/.ht-inc/xmlrpcWrappers.php', 'web/.ht-inc/xmlrpc_example.php', 'web/.ht-inc/xmlrpcdocs/doxygen.css', 'web/.ht-inc/xmlrpcdocs/doxygen.png', 'web/.ht-inc/xmlrpcdocs/examples.html', 'web/.ht-inc/xmlrpcdocs/files.html', 'web/.ht-inc/xmlrpcdocs/globals.html', 'web/.ht-inc/xmlrpcdocs/globals_func.html', 'web/.ht-inc/xmlrpcdocs/index.html', 'web/.ht-inc/xmlrpcdocs/tab_b.gif', 'web/.ht-inc/xmlrpcdocs/tab_l.gif', 'web/.ht-inc/xmlrpcdocs/tab_r.gif', 'web/.ht-inc/xmlrpcdocs/tabs.css', 'web/.ht-inc/xmlrpcdocs/xmlrpcWrappers_8php.html', 'web/.ht-inc/xmlrpcdocs/xmlrpc__example_8php-example.html', 'web/css/doxygen.css', 'web/css/vcl.css', 'web/images/blank.gif', 'web/images/fonts/arial.ttf', 'web/images/fonts/arialbd.ttf', 'web/images/gray.jpg', 'web/images/green.jpg', 'web/images/list.gif', 'web/images/orange.jpg', 'web/images/red.jpg', 'web/images/textimage.php', 'web/images/x.png', 'web/index.php', 'web/js/code.js', 'web/js/computers.js', 'web/js/groups.js', 'web/js/images.js', 'web/js/vm.js', 'web/themes/default/css/vcl.css', 'web/themes/default/images/background.gif', 'web/themes/default/images/background_L.png', 'web/themes/default/images/background_R.png', 'web/themes/default/images/background_bottom_C.jpg', 'web/themes/default/images/background_bottom_L.jpg', 'web/themes/default/images/background_bottom_R.jpg', 'web/themes/default/images/background_gradient.gif', 'web/themes/default/images/background_whitespace.gif', 'web/themes/default/images/bar_bg.jpg', 'web/themes/default/images/belltower.jpg', 'web/themes/default/images/black.jpg', 'web/themes/default/images/content_border_R.jpg', 'web/themes/default/images/menu-leaf.png', 'web/themes/default/images/menu.jpg', 'web/themes/default/images/menu_bg.jpg', 'web/themes/default/images/menu_dividerblock.jpg', 'web/themes/default/images/menu_selected.jpg', 'web/themes/default/images/vclbanner_C.jpg', 'web/themes/default/images/vclbanner_L.jpg', 'web/themes/default/images/vclbanner_R.jpg', 'web/themes/default/page.php']",moving stuff from trunk/import to just be under trunk,
d6498ef6655ecda39ffd3fd1a6b89c71fa00157e,,,1,['mysql/vcl.sql'],moving stuff from trunk/import to just be under trunk,
d229db97d3393aadb9d2c6457b01757236499370,,,171,"['managementnode/INSTALL', 'managementnode/bin/S99vclclient.linux', 'managementnode/bin/S99vclclient.solaris', 'managementnode/bin/S99vcld.linux', 'managementnode/bin/health_check.pl', 'managementnode/bin/monitor_vcld.pl', 'managementnode/bin/search-replace', 'managementnode/bin/vclclientd', 'managementnode/bin/vcld', 'managementnode/bin/vcld_cron_check', 'managementnode/etc/vcl/vcld.conf', 'managementnode/legacy_vcl_vbs_scripts/RandPass.wsf', 'managementnode/legacy_vcl_vbs_scripts/VCLprepare1.vbs', 'managementnode/legacy_vcl_vbs_scripts/VCLprepare2.vbs', 'managementnode/legacy_vcl_vbs_scripts/add_user.vbs', 'managementnode/legacy_vcl_vbs_scripts/auto_create_image.vbs', 'managementnode/legacy_vcl_vbs_scripts/auto_prepare_for_image.vbs', 'managementnode/legacy_vcl_vbs_scripts/create_image.vbs', 'managementnode/legacy_vcl_vbs_scripts/del_user.vbs', 'managementnode/legacy_vcl_vbs_scripts/disWAN.vbs', 'managementnode/legacy_vcl_vbs_scripts/enWAN.vbs', 'managementnode/legacy_vcl_vbs_scripts/list_users.vbs', 'managementnode/legacy_vcl_vbs_scripts/prepare_for_image.vbs', 'managementnode/legacy_vcl_vbs_scripts/reboot.vbs', 'managementnode/legacy_vcl_vbs_scripts/release_computer_vcl', 'managementnode/legacy_vcl_vbs_scripts/reserve_computer_vcl', 'managementnode/legacy_vcl_vbs_scripts/setpass.vbs', 'managementnode/legacy_vcl_vbs_scripts/virt_lab_status_vcl', 'managementnode/lib/VCL/.perltidyrc', 'managementnode/lib/VCL/DataStructure.pm', 'managementnode/lib/VCL/Module.pm', 'managementnode/lib/VCL/Module/OS.pm', 'managementnode/lib/VCL/Module/OS/Linux.pm', 'managementnode/lib/VCL/Module/OS/Windows.pm', 'managementnode/lib/VCL/Module/OS/Windows/Desktop.pm', 'managementnode/lib/VCL/Module/OS/Windows/Desktop/Vista.pm', 'managementnode/lib/VCL/Module/OS/Windows/Desktop/XP.pm', 'managementnode/lib/VCL/Module/Predictive.pm', 'managementnode/lib/VCL/Module/Predictive/Level_0.pm', 'managementnode/lib/VCL/Module/Predictive/Level_1.pm', 'managementnode/lib/VCL/Module/Provisioning.pm', 'managementnode/lib/VCL/Module/Provisioning/Lab.pm', 'managementnode/lib/VCL/Module/Provisioning/vmware.pm', 'managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'managementnode/lib/VCL/Module/State.pm', 'managementnode/lib/VCL/Module/Utils/Logging.pm', 'managementnode/lib/VCL/Module/Utils/SCP.pm', 'managementnode/lib/VCL/Module/Utils/SSH.pm', 'managementnode/lib/VCL/blockrequest.pm', 'managementnode/lib/VCL/healthcheck.pm', 'managementnode/lib/VCL/image.pm', 'managementnode/lib/VCL/inuse.pm', 'managementnode/lib/VCL/makeproduction.pm', 'managementnode/lib/VCL/new.pm', 'managementnode/lib/VCL/reclaim.pm', 'managementnode/lib/VCL/reserved.pm', 'managementnode/lib/VCL/utils.pm', 'managementnode/tools/Sysprep/Scripts/VCLcleanup.cmd', 'managementnode/tools/Sysprep/Scripts/VCLprepare.cmd', 'managementnode/tools/Sysprep/Scripts/VCLrcboot.cmd', 'managementnode/tools/Sysprep/Scripts/enablepagefile.vbs', 'managementnode/tools/Sysprep/Scripts/networkinfo.bat', 'managementnode/tools/Sysprep/Scripts/networkinfosetfw.vbs', 'managementnode/tools/Sysprep/Scripts/postconfig.vbs', 'managementnode/tools/Sysprep/Scripts/setfw.bat', 'managementnode/tools/Sysprep/Scripts/setsyslog.bat', 'managementnode/tools/Sysprep/Scripts/unsetautologon.vbs', 'managementnode/tools/Sysprep/Scripts/updatecygwin.vbs', 'managementnode/tools/Sysprep/Utilities/CleanUp.exe', 'managementnode/tools/Sysprep/Utilities/EmptyRecycleBin.exe', 'managementnode/tools/Sysprep/Utilities/spdrvscn.exe', 'managementnode/tools/Sysprep/i386/$oem$/cmdlines.txt', 'managementnode/tools/Sysprep/i386/$oem$/nodyndns.reg', 'managementnode/tools/Sysprep/i386/$oem$/setautologon.vbs', 'managementnode/tools/Sysprep/i386/$oem$/setname.vbs', 'managementnode/tools/Sysprep/i386/$oem$/wsname.exe', 'managementnode/tools/Sysprep/sysprep.cmd', 'managementnode/tools/Sysprep/sysprep.inf', 'managementnode/tools/Sysprep_2003/Scripts/VCLcleanup.cmd', 'managementnode/tools/Sysprep_2003/Scripts/VCLprepare.cmd', 'managementnode/tools/Sysprep_2003/Scripts/VCLrcboot.cmd', 'managementnode/tools/Sysprep_2003/Scripts/enablepagefile.vbs', 'managementnode/tools/Sysprep_2003/Scripts/networkinfo.bat', 'managementnode/tools/Sysprep_2003/Scripts/networkinfosetfw.vbs', 'managementnode/tools/Sysprep_2003/Scripts/setfw.bat', 'managementnode/tools/Sysprep_2003/Scripts/setsyslog.bat', 'managementnode/tools/Sysprep_2003/Scripts/unsetautologon.vbs', 'managementnode/tools/Sysprep_2003/Scripts/updatecygwin.vbs', 'managementnode/tools/Sysprep_2003/Utilities/CleanUp ReadMe.txt', 'managementnode/tools/Sysprep_2003/Utilities/CleanUp.exe', 'managementnode/tools/Sysprep_2003/Utilities/EmptyRecycleBin ReadMe.txt', 'managementnode/tools/Sysprep_2003/Utilities/EmptyRecycleBin.exe', 'managementnode/tools/Sysprep_2003/Utilities/spdrvscn.exe', 'managementnode/tools/Sysprep_2003/i386/$oem$/cmdlines.txt', 'managementnode/tools/Sysprep_2003/i386/$oem$/nodyndns.reg', 'managementnode/tools/Sysprep_2003/i386/$oem$/setautologon.vbs', 'managementnode/tools/Sysprep_2003/i386/$oem$/wsname.exe', 'managementnode/tools/Sysprep_2003/sysprep.cmd', 'managementnode/tools/Sysprep_2003/sysprep.inf', 'managementnode/tools/Sysprep_vmware/i386/$oem$/cmdlines.txt', 'managementnode/tools/Sysprep_vmware/i386/$oem$/nodyndns.reg', 'managementnode/tools/Sysprep_vmware/i386/$oem$/setautologon.vbs', 'managementnode/tools/Sysprep_vmware/i386/$oem$/wsname.exe', 'managementnode/tools/Sysprep_vmware/sysprep.cmd', 'managementnode/tools/Sysprep_vmware/sysprep.inf', 'managementnode/tools/Sysprep_vmware/sysprep.vbs', 'managementnode/tools/VCLprep1.vbs', 'managementnode/tools/VCLrcboot.cmd', 'managementnode/tools/auto_create_image.vbs', 'managementnode/tools/check_ssh', 'managementnode/tools/default.tmpl', 'managementnode/tools/disablenetbios.vbs', 'managementnode/tools/perltidy/.perltidyrc', 'managementnode/tools/perltidy/perltidy', 'managementnode/tools/perltidy/runperltidy', 'managementnode/tools/setpass.vbs', 'managementnode/tools/xcat_postscripts/addhttpdiptables', 'managementnode/tools/xcat_postscripts/checksmp', 'managementnode/tools/xcat_postscripts/checkswap', 'managementnode/tools/xcat_postscripts/correctresolv-conf', 'managementnode/tools/xcat_postscripts/defaultshell-tcsh', 'managementnode/tools/xcat_postscripts/disipv6', 'managementnode/tools/xcat_postscripts/eths4dhcp', 'managementnode/tools/xcat_postscripts/gpfs31', 'managementnode/tools/xcat_postscripts/hosts4dhcp', 'managementnode/tools/xcat_postscripts/makesshgkh', 'managementnode/tools/xcat_postscripts/mysyncdirs', 'managementnode/tools/xcat_postscripts/name4dhcp', 'managementnode/tools/xcat_postscripts/openafs', 'managementnode/tools/xcat_postscripts/otherrpms', 'managementnode/tools/xcat_postscripts/otherrpms-lamp', 'managementnode/tools/xcat_postscripts/private.hardeths', 'managementnode/tools/xcat_postscripts/remoteshell-dblssh', 'managementnode/tools/xcat_postscripts/remoteshell-dblssh-dhcp', 'managementnode/tools/xcat_postscripts/remoteshell-dblssh-dhcp-new', 'managementnode/tools/xcat_postscripts/remoteshell-dblssh-dhcp-test', 'managementnode/tools/xcat_postscripts/remoteshell-dblssh-dhcp.bak', 'managementnode/tools/xcat_postscripts/remoteshell-dblssh-dhcp.bak2', 'managementnode/tools/xcat_postscripts/remoteshell-dblssh-dhcp.bak3', 'managementnode/tools/xcat_postscripts/setupESX', 'managementnode/tools/xcat_postscripts/setupafs', 'managementnode/tools/xcat_postscripts/setupafs64', 'managementnode/tools/xcat_postscripts/setupgpfs', 'managementnode/tools/xcat_postscripts/setupntp', 'managementnode/tools/xcat_postscripts/setupservices-dblssh', 'managementnode/tools/xcat_postscripts/setupsudoers', 'managementnode/tools/xcat_postscripts/setupsudoersFULL', 'managementnode/tools/xcat_postscripts/setupusers', 'managementnode/tools/xcat_postscripts/setupusers-ncsu', 'managementnode/tools/xcat_postscripts/syncdirs', 'managementnode/tools/xcat_postscripts/syslog', 'managementnode/tools/xcat_postscripts/syslog-test', 'managementnode/tools/xcat_postscripts/syslog.ver1', 'managementnode/tools/xcat_postscripts/syslog_ORIG', 'managementnode/tools/xcat_postscripts/syslog_new', 'managementnode/vbs_scripts/VCL/VCLcleanup.cmd', 'managementnode/vbs_scripts/VCL/VCLprepare.cmd', 'managementnode/vbs_scripts/VCL/VCLrcboot.cmd', 'managementnode/vbs_scripts/VCL/VCLstartimage.vbs', 'managementnode/vbs_scripts/VCL/auto_create_image_new.vbs', 'managementnode/vbs_scripts/VCL/enablepagefile.vbs', 'managementnode/vbs_scripts/VCL/networkinfo.bat', 'managementnode/vbs_scripts/VCL/networkinfosetfw.vbs', 'managementnode/vbs_scripts/VCL/setfw.bat', 'managementnode/vbs_scripts/VCL/setsyslog.bat', 'managementnode/vbs_scripts/VCL/unsetautologon.vbs', 'managementnode/vbs_scripts/VCL/updatecygwin.vbs', 'managementnode/vbs_scripts/add_user.vbs', 'managementnode/vbs_scripts/auto_create_image.vbs', 'managementnode/vbs_scripts/del_user.vbs', 'managementnode/vbs_scripts/list_users.vbs']",moving stuff from trunk/import to just be under trunk,
7f08edc21a2bf6fcfc90672ec7d963b2d2641fc9,,,1,['NOTICE'],moving stuff from trunk/import to just be under trunk,
f2d4370398227931967236b0823707c739e76f0a,,,1,['LICENSE'],moving stuff from trunk/import to just be under trunk,
11bbb36de3199540e984719e866d8c43cf5bab4e,,,1,['INSTALLATION'],moving stuff from trunk/import to just be under trunk,
4fa2918913b2bc8b4af55e669d64aa002d312012,,,255,"['import/INSTALLATION', 'import/LICENSE', 'import/NOTICE', 'import/managementnode/INSTALL', 'import/managementnode/bin/S99vclclient.linux', 'import/managementnode/bin/S99vclclient.solaris', 'import/managementnode/bin/S99vcld.linux', 'import/managementnode/bin/health_check.pl', 'import/managementnode/bin/monitor_vcld.pl', 'import/managementnode/bin/search-replace', 'import/managementnode/bin/vclclientd', 'import/managementnode/bin/vcld', 'import/managementnode/bin/vcld_cron_check', 'import/managementnode/etc/vcl/vcld.conf', 'import/managementnode/legacy_vcl_vbs_scripts/RandPass.wsf', 'import/managementnode/legacy_vcl_vbs_scripts/VCLprepare1.vbs', 'import/managementnode/legacy_vcl_vbs_scripts/VCLprepare2.vbs', 'import/managementnode/legacy_vcl_vbs_scripts/add_user.vbs', 'import/managementnode/legacy_vcl_vbs_scripts/auto_create_image.vbs', 'import/managementnode/legacy_vcl_vbs_scripts/auto_prepare_for_image.vbs', 'import/managementnode/legacy_vcl_vbs_scripts/create_image.vbs', 'import/managementnode/legacy_vcl_vbs_scripts/del_user.vbs', 'import/managementnode/legacy_vcl_vbs_scripts/disWAN.vbs', 'import/managementnode/legacy_vcl_vbs_scripts/enWAN.vbs', 'import/managementnode/legacy_vcl_vbs_scripts/list_users.vbs', 'import/managementnode/legacy_vcl_vbs_scripts/prepare_for_image.vbs', 'import/managementnode/legacy_vcl_vbs_scripts/reboot.vbs', 'import/managementnode/legacy_vcl_vbs_scripts/release_computer_vcl', 'import/managementnode/legacy_vcl_vbs_scripts/reserve_computer_vcl', 'import/managementnode/legacy_vcl_vbs_scripts/setpass.vbs', 'import/managementnode/legacy_vcl_vbs_scripts/virt_lab_status_vcl', 'import/managementnode/lib/VCL/.perltidyrc', 'import/managementnode/lib/VCL/DataStructure.pm', 'import/managementnode/lib/VCL/Module.pm', 'import/managementnode/lib/VCL/Module/OS.pm', 'import/managementnode/lib/VCL/Module/OS/Linux.pm', 'import/managementnode/lib/VCL/Module/OS/Windows.pm', 'import/managementnode/lib/VCL/Module/OS/Windows/Desktop.pm', 'import/managementnode/lib/VCL/Module/OS/Windows/Desktop/Vista.pm', 'import/managementnode/lib/VCL/Module/OS/Windows/Desktop/XP.pm', 'import/managementnode/lib/VCL/Module/Predictive.pm', 'import/managementnode/lib/VCL/Module/Predictive/Level_0.pm', 'import/managementnode/lib/VCL/Module/Predictive/Level_1.pm', 'import/managementnode/lib/VCL/Module/Provisioning.pm', 'import/managementnode/lib/VCL/Module/Provisioning/Lab.pm', 'import/managementnode/lib/VCL/Module/Provisioning/vmware.pm', 'import/managementnode/lib/VCL/Module/Provisioning/xCAT.pm', 'import/managementnode/lib/VCL/Module/State.pm', 'import/managementnode/lib/VCL/Module/Utils/Logging.pm', 'import/managementnode/lib/VCL/Module/Utils/SCP.pm', 'import/managementnode/lib/VCL/Module/Utils/SSH.pm', 'import/managementnode/lib/VCL/blockrequest.pm', 'import/managementnode/lib/VCL/healthcheck.pm', 'import/managementnode/lib/VCL/image.pm', 'import/managementnode/lib/VCL/inuse.pm', 'import/managementnode/lib/VCL/makeproduction.pm', 'import/managementnode/lib/VCL/new.pm', 'import/managementnode/lib/VCL/reclaim.pm', 'import/managementnode/lib/VCL/reserved.pm', 'import/managementnode/lib/VCL/utils.pm', 'import/managementnode/tools/Sysprep/Scripts/VCLcleanup.cmd', 'import/managementnode/tools/Sysprep/Scripts/VCLprepare.cmd', 'import/managementnode/tools/Sysprep/Scripts/VCLrcboot.cmd', 'import/managementnode/tools/Sysprep/Scripts/enablepagefile.vbs', 'import/managementnode/tools/Sysprep/Scripts/networkinfo.bat', 'import/managementnode/tools/Sysprep/Scripts/networkinfosetfw.vbs', 'import/managementnode/tools/Sysprep/Scripts/postconfig.vbs', 'import/managementnode/tools/Sysprep/Scripts/setfw.bat', 'import/managementnode/tools/Sysprep/Scripts/setsyslog.bat', 'import/managementnode/tools/Sysprep/Scripts/unsetautologon.vbs', 'import/managementnode/tools/Sysprep/Scripts/updatecygwin.vbs', 'import/managementnode/tools/Sysprep/Utilities/CleanUp.exe', 'import/managementnode/tools/Sysprep/Utilities/EmptyRecycleBin.exe', 'import/managementnode/tools/Sysprep/Utilities/spdrvscn.exe', 'import/managementnode/tools/Sysprep/i386/$oem$/cmdlines.txt', 'import/managementnode/tools/Sysprep/i386/$oem$/nodyndns.reg', 'import/managementnode/tools/Sysprep/i386/$oem$/setautologon.vbs', 'import/managementnode/tools/Sysprep/i386/$oem$/setname.vbs', 'import/managementnode/tools/Sysprep/i386/$oem$/wsname.exe', 'import/managementnode/tools/Sysprep/sysprep.cmd', 'import/managementnode/tools/Sysprep/sysprep.inf', 'import/managementnode/tools/Sysprep_2003/Scripts/VCLcleanup.cmd', 'import/managementnode/tools/Sysprep_2003/Scripts/VCLprepare.cmd', 'import/managementnode/tools/Sysprep_2003/Scripts/VCLrcboot.cmd', 'import/managementnode/tools/Sysprep_2003/Scripts/enablepagefile.vbs', 'import/managementnode/tools/Sysprep_2003/Scripts/networkinfo.bat', 'import/managementnode/tools/Sysprep_2003/Scripts/networkinfosetfw.vbs', 'import/managementnode/tools/Sysprep_2003/Scripts/setfw.bat', 'import/managementnode/tools/Sysprep_2003/Scripts/setsyslog.bat', 'import/managementnode/tools/Sysprep_2003/Scripts/unsetautologon.vbs', 'import/managementnode/tools/Sysprep_2003/Scripts/updatecygwin.vbs', 'import/managementnode/tools/Sysprep_2003/Utilities/CleanUp ReadMe.txt', 'import/managementnode/tools/Sysprep_2003/Utilities/CleanUp.exe', 'import/managementnode/tools/Sysprep_2003/Utilities/EmptyRecycleBin ReadMe.txt', 'import/managementnode/tools/Sysprep_2003/Utilities/EmptyRecycleBin.exe', 'import/managementnode/tools/Sysprep_2003/Utilities/spdrvscn.exe', 'import/managementnode/tools/Sysprep_2003/i386/$oem$/cmdlines.txt', 'import/managementnode/tools/Sysprep_2003/i386/$oem$/nodyndns.reg', 'import/managementnode/tools/Sysprep_2003/i386/$oem$/setautologon.vbs', 'import/managementnode/tools/Sysprep_2003/i386/$oem$/wsname.exe', 'import/managementnode/tools/Sysprep_2003/sysprep.cmd', 'import/managementnode/tools/Sysprep_2003/sysprep.inf', 'import/managementnode/tools/Sysprep_vmware/i386/$oem$/cmdlines.txt', 'import/managementnode/tools/Sysprep_vmware/i386/$oem$/nodyndns.reg', 'import/managementnode/tools/Sysprep_vmware/i386/$oem$/setautologon.vbs', 'import/managementnode/tools/Sysprep_vmware/i386/$oem$/wsname.exe', 'import/managementnode/tools/Sysprep_vmware/sysprep.cmd', 'import/managementnode/tools/Sysprep_vmware/sysprep.inf', 'import/managementnode/tools/Sysprep_vmware/sysprep.vbs', 'import/managementnode/tools/VCLprep1.vbs', 'import/managementnode/tools/VCLrcboot.cmd', 'import/managementnode/tools/auto_create_image.vbs', 'import/managementnode/tools/check_ssh', 'import/managementnode/tools/default.tmpl', 'import/managementnode/tools/disablenetbios.vbs', 'import/managementnode/tools/perltidy/.perltidyrc', 'import/managementnode/tools/perltidy/perltidy', 'import/managementnode/tools/perltidy/runperltidy', 'import/managementnode/tools/setpass.vbs', 'import/managementnode/tools/xcat_postscripts/addhttpdiptables', 'import/managementnode/tools/xcat_postscripts/checksmp', 'import/managementnode/tools/xcat_postscripts/checkswap', 'import/managementnode/tools/xcat_postscripts/correctresolv-conf', 'import/managementnode/tools/xcat_postscripts/defaultshell-tcsh', 'import/managementnode/tools/xcat_postscripts/disipv6', 'import/managementnode/tools/xcat_postscripts/eths4dhcp', 'import/managementnode/tools/xcat_postscripts/gpfs31', 'import/managementnode/tools/xcat_postscripts/hosts4dhcp', 'import/managementnode/tools/xcat_postscripts/makesshgkh', 'import/managementnode/tools/xcat_postscripts/mysyncdirs', 'import/managementnode/tools/xcat_postscripts/name4dhcp', 'import/managementnode/tools/xcat_postscripts/openafs', 'import/managementnode/tools/xcat_postscripts/otherrpms', 'import/managementnode/tools/xcat_postscripts/otherrpms-lamp', 'import/managementnode/tools/xcat_postscripts/private.hardeths', 'import/managementnode/tools/xcat_postscripts/remoteshell-dblssh', 'import/managementnode/tools/xcat_postscripts/remoteshell-dblssh-dhcp', 'import/managementnode/tools/xcat_postscripts/remoteshell-dblssh-dhcp-new', 'import/managementnode/tools/xcat_postscripts/remoteshell-dblssh-dhcp-test', 'import/managementnode/tools/xcat_postscripts/remoteshell-dblssh-dhcp.bak', 'import/managementnode/tools/xcat_postscripts/remoteshell-dblssh-dhcp.bak2', 'import/managementnode/tools/xcat_postscripts/remoteshell-dblssh-dhcp.bak3', 'import/managementnode/tools/xcat_postscripts/setupESX', 'import/managementnode/tools/xcat_postscripts/setupafs', 'import/managementnode/tools/xcat_postscripts/setupafs64', 'import/managementnode/tools/xcat_postscripts/setupgpfs', 'import/managementnode/tools/xcat_postscripts/setupntp', 'import/managementnode/tools/xcat_postscripts/setupservices-dblssh', 'import/managementnode/tools/xcat_postscripts/setupsudoers', 'import/managementnode/tools/xcat_postscripts/setupsudoersFULL', 'import/managementnode/tools/xcat_postscripts/setupusers', 'import/managementnode/tools/xcat_postscripts/setupusers-ncsu', 'import/managementnode/tools/xcat_postscripts/syncdirs', 'import/managementnode/tools/xcat_postscripts/syslog', 'import/managementnode/tools/xcat_postscripts/syslog-test', 'import/managementnode/tools/xcat_postscripts/syslog.ver1', 'import/managementnode/tools/xcat_postscripts/syslog_ORIG', 'import/managementnode/tools/xcat_postscripts/syslog_new', 'import/managementnode/vbs_scripts/VCL/VCLcleanup.cmd', 'import/managementnode/vbs_scripts/VCL/VCLprepare.cmd', 'import/managementnode/vbs_scripts/VCL/VCLrcboot.cmd', 'import/managementnode/vbs_scripts/VCL/VCLstartimage.vbs', 'import/managementnode/vbs_scripts/VCL/auto_create_image_new.vbs', 'import/managementnode/vbs_scripts/VCL/enablepagefile.vbs', 'import/managementnode/vbs_scripts/VCL/networkinfo.bat', 'import/managementnode/vbs_scripts/VCL/networkinfosetfw.vbs', 'import/managementnode/vbs_scripts/VCL/setfw.bat', 'import/managementnode/vbs_scripts/VCL/setsyslog.bat', 'import/managementnode/vbs_scripts/VCL/unsetautologon.vbs', 'import/managementnode/vbs_scripts/VCL/updatecygwin.vbs', 'import/managementnode/vbs_scripts/add_user.vbs', 'import/managementnode/vbs_scripts/auto_create_image.vbs', 'import/managementnode/vbs_scripts/del_user.vbs', 'import/managementnode/vbs_scripts/list_users.vbs', 'import/mysql/vcl.sql', 'import/web/.ht-inc/Doxyfile', 'import/web/.ht-inc/authentication.php', 'import/web/.ht-inc/authmethods/itecsauth.php', 'import/web/.ht-inc/authmethods/ldapauth.php', 'import/web/.ht-inc/computers.php', 'import/web/.ht-inc/conf.php', 'import/web/.ht-inc/doxyfile.xmlrpc', 'import/web/.ht-inc/errors.php', 'import/web/.ht-inc/genkeys.sh', 'import/web/.ht-inc/groups.php', 'import/web/.ht-inc/help.php', 'import/web/.ht-inc/images.php', 'import/web/.ht-inc/managementnodes.php', 'import/web/.ht-inc/php5extras.php', 'import/web/.ht-inc/privileges.php', 'import/web/.ht-inc/requests.php', 'import/web/.ht-inc/schedules.php', 'import/web/.ht-inc/secrets.php', 'import/web/.ht-inc/states.php', 'import/web/.ht-inc/statistics.php', 'import/web/.ht-inc/userpreferences.php', 'import/web/.ht-inc/utils.php', 'import/web/.ht-inc/vcldocs.php', 'import/web/.ht-inc/vcldphpcall.pl', 'import/web/.ht-inc/vm.php', 'import/web/.ht-inc/xmlrpcWrappers.php', 'import/web/.ht-inc/xmlrpc_example.php', 'import/web/.ht-inc/xmlrpcdocs/doxygen.css', 'import/web/.ht-inc/xmlrpcdocs/doxygen.png', 'import/web/.ht-inc/xmlrpcdocs/examples.html', 'import/web/.ht-inc/xmlrpcdocs/files.html', 'import/web/.ht-inc/xmlrpcdocs/globals.html', 'import/web/.ht-inc/xmlrpcdocs/globals_func.html', 'import/web/.ht-inc/xmlrpcdocs/index.html', 'import/web/.ht-inc/xmlrpcdocs/tab_b.gif', 'import/web/.ht-inc/xmlrpcdocs/tab_l.gif', 'import/web/.ht-inc/xmlrpcdocs/tab_r.gif', 'import/web/.ht-inc/xmlrpcdocs/tabs.css', 'import/web/.ht-inc/xmlrpcdocs/xmlrpcWrappers_8php.html', 'import/web/.ht-inc/xmlrpcdocs/xmlrpc__example_8php-example.html', 'import/web/css/doxygen.css', 'import/web/css/vcl.css', 'import/web/images/blank.gif', 'import/web/images/fonts/arial.ttf', 'import/web/images/fonts/arialbd.ttf', 'import/web/images/gray.jpg', 'import/web/images/green.jpg', 'import/web/images/list.gif', 'import/web/images/orange.jpg', 'import/web/images/red.jpg', 'import/web/images/textimage.php', 'import/web/images/x.png', 'import/web/index.php', 'import/web/js/code.js', 'import/web/js/computers.js', 'import/web/js/groups.js', 'import/web/js/images.js', 'import/web/js/vm.js', 'import/web/themes/default/css/vcl.css', 'import/web/themes/default/images/background.gif', 'import/web/themes/default/images/background_L.png', 'import/web/themes/default/images/background_R.png', 'import/web/themes/default/images/background_bottom_C.jpg', 'import/web/themes/default/images/background_bottom_L.jpg', 'import/web/themes/default/images/background_bottom_R.jpg', 'import/web/themes/default/images/background_gradient.gif', 'import/web/themes/default/images/background_whitespace.gif', 'import/web/themes/default/images/bar_bg.jpg', 'import/web/themes/default/images/belltower.jpg', 'import/web/themes/default/images/black.jpg', 'import/web/themes/default/images/content_border_R.jpg', 'import/web/themes/default/images/menu-leaf.png', 'import/web/themes/default/images/menu.jpg', 'import/web/themes/default/images/menu_bg.jpg', 'import/web/themes/default/images/menu_dividerblock.jpg', 'import/web/themes/default/images/menu_selected.jpg', 'import/web/themes/default/images/vclbanner_C.jpg', 'import/web/themes/default/images/vclbanner_L.jpg', 'import/web/themes/default/images/vclbanner_R.jpg', 'import/web/themes/default/page.php']",copy from tags/import revision 726080 to trunk,
a51a2cb33f9e641794de1a00ac548feae7d14d5e,,,0,[],Created base SVN structure,
